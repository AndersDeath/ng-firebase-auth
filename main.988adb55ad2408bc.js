"use strict";(self.webpackChunkng_firebase_auth=self.webpackChunkng_firebase_auth||[]).push([[179],{2011:(vt,Oe,V)=>{V.d(Oe,{Dh:()=>ge,GT:()=>ye,cc:()=>Fe,hO:()=>$e,on:()=>W,pX:()=>he,xv:()=>Ce});var l=V(4650),j=V(127),N=V(5813);vt=V.hmd(vt);const ue=["ngOnDestroy"],he=(ve,at,lt,Ne={})=>new Proxy(ve,{get:(Pe,Me)=>lt.runOutsideAngular(()=>{var Ke;if(ve[Me])return!(null===(Ke=Ne?.spy)||void 0===Ke)&&Ke.get&&Ne.spy.get(Me,ve[Me]),ve[Me];if(ue.indexOf(Me)>-1)return()=>{};const ce=at.toPromise().then(pe=>{const we=pe&&pe[Me];return"function"==typeof we?we.bind(pe):we&&we.then?we.then(ne=>lt.run(()=>ne)):lt.run(()=>we)});return new Proxy(()=>{},{get:(pe,we)=>ce[we],apply:(pe,we,ne)=>ce.then(se=>{var _e;const de=se&&se(...ne);return!(null===(_e=Ne?.spy)||void 0===_e)&&_e.apply&&Ne.spy.apply(Me,ne,de),de})})})}),ye=(ve,at)=>{at.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(Ne=>{Object.defineProperty(ve.prototype,Ne,Object.getOwnPropertyDescriptor(lt.prototype||lt,Ne))})})};class oe{constructor(at){return at}}const ge=new l.OlP("angularfire2.app.options"),Ce=new l.OlP("angularfire2.app.name");function W(ve,at,lt){const Pe="object"==typeof lt&&lt||{};Pe.name=Pe.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ke=j.Z.apps.filter(ce=>ce&&ce.name===Pe.name)[0]||at.runOutsideAngular(()=>j.Z.initializeApp(ve,Pe));try{JSON.stringify(ve)!==JSON.stringify(Ke.options)&&Y("error",`${Ke.name} Firebase App already initialized with different options${vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(Ke)}const Y=(ve,...at)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ve](...at)},re={provide:oe,useFactory:W,deps:[ge,l.R0b,[new l.FiY,Ce]]};let $e=(()=>{class ve{constructor(lt){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",l.q4F.full,lt.toString())}static initializeApp(lt,Ne){return{ngModule:ve,providers:[{provide:ge,useValue:lt},{provide:Ce,useValue:Ne}]}}}return ve.\u0275fac=function(lt){return new(lt||ve)(l.LFG(l.Lbi))},ve.\u0275mod=l.oAB({type:ve}),ve.\u0275inj=l.cJS({providers:[re]}),ve})();function Fe(ve,at,lt,Ne,Pe){const[,Me,Ke]=globalThis.\u0275AngularfireInstanceCache.find(ce=>ce[0]===ve)||[];if(Me)return function xe(ve,at){try{return ve.toString()===at.toString()}catch{return ve===at}}(Pe,Ke)||(De("error",`${at} was already initialized on the ${lt} Firebase App with different settings.${ht?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:Pe,was:Ke})),Me;{const ce=Ne();return globalThis.\u0275AngularfireInstanceCache.push([ve,ce,Pe]),ce}}const ht=!!vt.hot,De=(ve,...at)=>{(0,l.X6Q)()&&typeof console<"u"&&console[ve](...at)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(vt,Oe,V)=>{V.d(Oe,{q4:()=>xl,iC:()=>Wn,fc:()=>Aa,HU:()=>Dd,vb:()=>fc,JM:()=>Ef});var l=V(4650),j=V(5867),N=V(5861),ue=V(9681),he=V(2090),ye=V(4859),oe=V(1877),ge=V(8766);const Ce="@firebase/installations",W="0.5.12",re=`w:${W}`,$e="FIS_v2",at=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(x){return x instanceof he.ZR&&x.code.includes("request-failed")}function Ne({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Pe(x){return{token:x.token,requestStatus:2,expiresIn:se(x.expiresIn),creationTime:Date.now()}}function Me(x,M){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(x,M){const U=(yield M.json()).error;return at.create("request-failed",{requestName:x,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ce({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function pe(x,{refreshToken:M}){const R=ce(x);return R.append("Authorization",function _e(x){return`${$e} ${x}`}(M)),R}function we(x){return ne.apply(this,arguments)}function ne(){return(ne=(0,N.Z)(function*(x){const M=yield x();return M.status>=500&&M.status<600?x():M})).apply(this,arguments)}function se(x){return Number(x.replace("s","000"))}function de(x,M){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*({appConfig:x,heartbeatServiceProvider:M},{fid:R}){const U=Ne(x),ie=ce(x),fe=M.getImmediate({optional:!0});if(fe){const Ft=yield fe.getHeartbeatsHeader();Ft&&ie.append("x-firebase-client",Ft)}const tt={method:"POST",headers:ie,body:JSON.stringify({fid:R,authVersion:$e,appId:x.appId,sdkVersion:re})},xt=yield we(()=>fetch(U,tt));if(xt.ok){const Ft=yield xt.json();return{fid:Ft.fid||R,registrationStatus:2,refreshToken:Ft.refreshToken,authToken:Pe(Ft.authToken)}}throw yield Me("Create Installation",xt)})).apply(this,arguments)}function je(x){return new Promise(M=>{setTimeout(M,x)})}const an=/^[cdef][\w-]{21}$/;function et(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const R=function An(x){return function Ct(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return an.test(R)?R:""}catch{return""}}function zn(x){return`${x.appName}!${x.appId}`}const pn=new Map;function cn(x,M){const R=zn(x);$i(R,M),function eo(x,M){const R=function Ln(){return!qi&&"BroadcastChannel"in self&&(qi=new BroadcastChannel("[Firebase] FID Change"),qi.onmessage=x=>{$i(x.data.key,x.data.fid)}),qi}();R&&R.postMessage({key:x,fid:M}),function os(){0===pn.size&&qi&&(qi.close(),qi=null)}()}(R,M)}function $i(x,M){const R=pn.get(x);if(R)for(const U of R)U(M)}let qi=null;const Kn="firebase-installations-store";let as=null;function bt(){return as||(as=(0,ge.X3)("firebase-installations-database",1,{upgrade:(x,M)=>{0===M&&x.createObjectStore(Kn)}})),as}function kn(x,M){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,N.Z)(function*(x,M){const R=zn(x),ie=(yield bt()).transaction(Kn,"readwrite"),fe=ie.objectStore(Kn),Le=yield fe.get(R);return yield fe.put(M,R),yield ie.done,(!Le||Le.fid!==M.fid)&&cn(x,M.fid),M})).apply(this,arguments)}function mn(x){return yi.apply(this,arguments)}function yi(){return(yi=(0,N.Z)(function*(x){const M=zn(x),U=(yield bt()).transaction(Kn,"readwrite");yield U.objectStore(Kn).delete(M),yield U.done})).apply(this,arguments)}function Yi(x,M){return bi.apply(this,arguments)}function bi(){return(bi=(0,N.Z)(function*(x,M){const R=zn(x),ie=(yield bt()).transaction(Kn,"readwrite"),fe=ie.objectStore(Kn),Le=yield fe.get(R),tt=M(Le);return void 0===tt?yield fe.delete(R):yield fe.put(tt,R),yield ie.done,tt&&(!Le||Le.fid!==tt.fid)&&cn(x,tt.fid),tt})).apply(this,arguments)}function En(x){return ir.apply(this,arguments)}function ir(){return(ir=(0,N.Z)(function*(x){let M;const R=yield Yi(x.appConfig,U=>{const ie=Rn(U),fe=pt(x,ie);return M=fe.registrationPromise,fe.installationEntry});return""===R.fid?{installationEntry:yield M}:{installationEntry:R,registrationPromise:M}})).apply(this,arguments)}function Rn(x){return Hn(x||{fid:et(),registrationStatus:0})}function pt(x,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(at.create("app-offline"))};const R={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},U=function ut(x,M){return Bn.apply(this,arguments)}(x,R);return{installationEntry:R,registrationPromise:U}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:rr(x)}:{installationEntry:M}}function Bn(){return(Bn=(0,N.Z)(function*(x,M){try{const R=yield de(x,M);return kn(x.appConfig,R)}catch(R){throw lt(R)&&409===R.customData.serverCode?yield mn(x.appConfig):yield kn(x.appConfig,{fid:M.fid,registrationStatus:0}),R}})).apply(this,arguments)}function rr(x){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,N.Z)(function*(x){let M=yield zt(x.appConfig);for(;1===M.registrationStatus;)yield je(100),M=yield zt(x.appConfig);if(0===M.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield En(x);return U||R}return M})).apply(this,arguments)}function zt(x){return Yi(x,M=>{if(!M)throw at.create("installation-not-found");return Hn(M)})}function Hn(x){return function sr(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Pt(x,M){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,N.Z)(function*({appConfig:x,heartbeatServiceProvider:M},R){const U=Nt(x,R),ie=pe(x,R),fe=M.getImmediate({optional:!0});if(fe){const Ft=yield fe.getHeartbeatsHeader();Ft&&ie.append("x-firebase-client",Ft)}const tt={method:"POST",headers:ie,body:JSON.stringify({installation:{sdkVersion:re,appId:x.appId}})},xt=yield we(()=>fetch(U,tt));if(xt.ok)return Pe(yield xt.json());throw yield Me("Generate Auth Token",xt)})).apply(this,arguments)}function Nt(x,{fid:M}){return`${Ne(x)}/${M}/authTokens:generate`}function ee(x){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(x,M=!1){let R;const U=yield Yi(x.appConfig,fe=>{if(!Mt(fe))throw at.create("not-registered");const Le=fe.authToken;if(!M&&bn(Le))return fe;if(1===Le.requestStatus)return R=G(x,M),fe;{if(!navigator.onLine)throw at.create("app-offline");const tt=ai(fe);return R=Ae(x,tt),tt}});return R?yield R:U.authToken})).apply(this,arguments)}function G(x,M){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(x,M){let R=yield X(x.appConfig);for(;1===R.authToken.requestStatus;)yield je(100),R=yield X(x.appConfig);const U=R.authToken;return 0===U.requestStatus?ee(x,M):U})).apply(this,arguments)}function X(x){return Yi(x,M=>{if(!Mt(M))throw at.create("not-registered");return function J(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function Ae(x,M){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,N.Z)(function*(x,M){try{const R=yield Pt(x,M),U=Object.assign(Object.assign({},M),{authToken:R});return yield kn(x.appConfig,U),R}catch(R){if(!lt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield kn(x.appConfig,U)}else yield mn(x.appConfig);throw R}})).apply(this,arguments)}function Mt(x){return void 0!==x&&2===x.registrationStatus}function bn(x){return 2===x.requestStatus&&!function wn(x){const M=Date.now();return M<x.creationTime||x.creationTime+x.expiresIn<M+36e5}(x)}function ai(x){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:M})}function $(){return($=(0,N.Z)(function*(x){const M=x,{installationEntry:R,registrationPromise:U}=yield En(M);return U?U.catch(console.error):ee(M).catch(console.error),R.fid})).apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(x,M=!1){const R=x;return yield ke(R),(yield ee(R,M)).token})).apply(this,arguments)}function ke(x){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(x){const{registrationPromise:M}=yield En(x);M&&(yield M)})).apply(this,arguments)}function Ut(x){return at.create("missing-app-config-values",{valueName:x})}const rl="installations",aa=x=>{const M=x.getProvider("app").getImmediate(),R=function As(x){if(!x||!x.options)throw Ut("App Configuration");if(!x.name)throw Ut("App Name");const M=["projectId","apiKey","appId"];for(const R of M)if(!x.options[R])throw Ut(R);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(M);return{app:M,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Eo=x=>{const M=x.getProvider("app").getImmediate(),R=(0,ue._getProvider)(M,rl).getImmediate();return{getId:()=>function Z(x){return $.apply(this,arguments)}(R),getToken:ie=>function Ee(x){return We.apply(this,arguments)}(R,ie)}};(function Ai(){(0,ue._registerComponent)(new ye.wA(rl,aa,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("installations-internal",Eo,"PRIVATE"))})(),(0,ue.registerVersion)(Ce,W),(0,ue.registerVersion)(Ce,W,"esm2017");const So="@firebase/remote-config",Wt=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yc{constructor(M,R,U,ie){this.client=M,this.storage=R,this.storageCache=U,this.logger=ie}isCachedDataFresh(M,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,ie=U<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${ie}.`),ie}fetch(M){var R=this;return(0,N.Z)(function*(){const[U,ie]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ie&&R.isCachedDataFresh(M.cacheMaxAgeMillis,U))return ie;M.eTag=ie&&ie.eTag;const fe=yield R.client.fetch(M),Le=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Le.push(R.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Le),fe})()}}function Zl(x=navigator){return x.languages&&x.languages[0]||x.language}class Mo{constructor(M,R,U,ie,fe,Le){this.firebaseInstallations=M,this.sdkVersion=R,this.namespace=U,this.projectId=ie,this.apiKey=fe,this.appId=Le}fetch(M){var R=this;return(0,N.Z)(function*(){var U,ie,fe;const[Le,tt]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},Et={sdk_version:R.sdkVersion,app_instance_id:Le,app_instance_id_token:tt,app_id:R.appId,language_code:Zl()},Vi={method:"POST",headers:Lt,body:JSON.stringify(Et)},mr=fetch(Ft,Vi),gc=new Promise((ka,_c)=>{M.signal.addEventListener(()=>{const mu=new Error("The operation was aborted.");mu.name="AbortError",_c(mu)})});let vs;try{yield Promise.race([mr,gc]),vs=yield mr}catch(ka){let _c="fetch-client-network";throw"AbortError"===(null===(U=ka)||void 0===U?void 0:U.name)&&(_c="fetch-timeout"),Wt.create(_c,{originalErrorMessage:null===(ie=ka)||void 0===ie?void 0:ie.message})}let Ls=vs.status;const xf=vs.headers.get("ETag")||void 0;let pu,Il;if(200===vs.status){let ka;try{ka=yield vs.json()}catch(_c){throw Wt.create("fetch-client-parse",{originalErrorMessage:null===(fe=_c)||void 0===fe?void 0:fe.message})}pu=ka.entries,Il=ka.state}if("INSTANCE_STATE_UNSPECIFIED"===Il?Ls=500:"NO_CHANGE"===Il?Ls=304:("NO_TEMPLATE"===Il||"EMPTY_CONFIG"===Il)&&(pu={}),304!==Ls&&200!==Ls)throw Wt.create("fetch-status",{httpStatus:Ls});return{status:Ls,eTag:xf,config:pu}})()}}class Rs{constructor(M,R){this.client=M,this.storage=R}fetch(M){var R=this;return(0,N.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(M,U)})()}attemptFetch(M,{throttleEndTimeMillis:R,backoffCount:U}){var ie=this;return(0,N.Z)(function*(){yield function Er(x,M){return new Promise((R,U)=>{const ie=Math.max(M-Date.now(),0),fe=setTimeout(R,ie);x.addEventListener(()=>{clearTimeout(fe),U(Wt.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,R);try{const fe=yield ie.client.fetch(M);return yield ie.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function tg(x){if(!(x instanceof he.ZR&&x.customData))return!1;const M=Number(x.customData.httpStatus);return 429===M||500===M||503===M||504===M}(fe))throw fe;const Le={throttleEndTimeMillis:Date.now()+(0,he.$s)(U),backoffCount:U+1};return yield ie.storage.setThrottleMetadata(Le),ie.attemptFetch(M,Le)}})()}}class ig{constructor(M,R,U,ie,fe){this.app=M,this._client=R,this._storageCache=U,this._storage=ie,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ol(x,M){var R;const U=x.target.error||void 0;return Wt.create(M,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const ca="app_namespace_store";class ua{constructor(M,R,U,ie=function sg(){return new Promise((x,M)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ie=>{M(ol(ie,"storage-open"))},U.onsuccess=ie=>{x(ie.target.result)},U.onupgradeneeded=ie=>{0===ie.oldVersion&&ie.target.result.createObjectStore(ca,{keyPath:"compositeKey"})}}catch(U){M(Wt.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=M,this.appName=R,this.namespace=U,this.openDbPromise=ie}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ie,fe)=>{var Le;const xt=U.transaction([ca],"readonly").objectStore(ca),Ft=R.createCompositeKey(M);try{const Lt=xt.get(Ft);Lt.onerror=Et=>{fe(ol(Et,"storage-get"))},Lt.onsuccess=Et=>{const Vi=Et.target.result;ie(Vi?Vi.value:void 0)}}catch(Lt){fe(Wt.create("storage-get",{originalErrorMessage:null===(Le=Lt)||void 0===Le?void 0:Le.message}))}})})()}set(M,R){var U=this;return(0,N.Z)(function*(){const ie=yield U.openDbPromise;return new Promise((fe,Le)=>{var tt;const Ft=ie.transaction([ca],"readwrite").objectStore(ca),Lt=U.createCompositeKey(M);try{const Et=Ft.put({compositeKey:Lt,value:R});Et.onerror=Vi=>{Le(ol(Vi,"storage-set"))},Et.onsuccess=()=>{fe()}}catch(Et){Le(Wt.create("storage-set",{originalErrorMessage:null===(tt=Et)||void 0===tt?void 0:tt.message}))}})})()}delete(M){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ie,fe)=>{var Le;const xt=U.transaction([ca],"readwrite").objectStore(ca),Ft=R.createCompositeKey(M);try{const Lt=xt.delete(Ft);Lt.onerror=Et=>{fe(ol(Et,"storage-delete"))},Lt.onsuccess=()=>{ie()}}catch(Lt){fe(Wt.create("storage-delete",{originalErrorMessage:null===(Le=Lt)||void 0===Le?void 0:Le.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Os{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,N.Z)(function*(){const R=M.storage.getLastFetchStatus(),U=M.storage.getLastSuccessfulFetchTimestampMillis(),ie=M.storage.getActiveConfig(),fe=yield R;fe&&(M.lastFetchStatus=fe);const Le=yield U;Le&&(M.lastSuccessfulFetchTimestampMillis=Le);const tt=yield ie;tt&&(M.activeConfig=tt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function ha(){return al.apply(this,arguments)}function al(){return(al=(0,N.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function og(){(0,ue._registerComponent)(new ye.wA("remote-config",function x(M,{instanceIdentifier:R}){const U=M.getProvider("app").getImmediate(),ie=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Wt.create("registration-window");if(!(0,he.hl)())throw Wt.create("indexed-db-unavailable");const{projectId:fe,apiKey:Le,appId:tt}=U.options;if(!fe)throw Wt.create("registration-project-id");if(!Le)throw Wt.create("registration-api-key");if(!tt)throw Wt.create("registration-app-id");const xt=new ua(tt,U.name,R=R||"firebase"),Ft=new Os(xt),Lt=new oe.Yd(So);Lt.logLevel=oe.in.ERROR;const Et=new Mo(ie,ue.SDK_VERSION,R,fe,Le,tt),Vi=new Rs(Et,xt),mr=new Yc(Vi,xt,Ft,Lt),gc=new ig(U,mr,Ft,xt,Lt);return function Un(x){const M=(0,he.m9)(x);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(gc),gc},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(So,"0.3.11"),(0,ue.registerVersion)(So,"0.3.11","esm2017")}();const Sr="/firebase-messaging-sw.js",Io="/firebase-cloud-messaging-push-scope",fa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ll="google.c.a.c_id",Kl="google.c.a.c_l",rf="google.c.a.ts",To="google.c.a.e";var qn=(()=>{return(x=qn||(qn={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",qn;var x})();function Gr(x){const M=new Uint8Array(x);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cd(x){const R=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),ie=new Uint8Array(U.length);for(let fe=0;fe<U.length;++fe)ie[fe]=U.charCodeAt(fe);return ie}const Ao="fcm_token_details_db",Zc="fcm_token_object_Store";function ui(x){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,N.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(Ao))return null;let M=null;return(yield(0,ge.X3)(Ao,5,{upgrade:(U=(0,N.Z)(function*(ie,fe,Le,tt){var xt;if(fe<2||!ie.objectStoreNames.contains(Zc))return;const Ft=tt.objectStore(Zc),Lt=yield Ft.index("fcmSenderId").get(x);if(yield Ft.clear(),Lt)if(2===fe){const Et=Lt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;M={token:Et.fcmToken,createTime:null!==(xt=Et.createTime)&&void 0!==xt?xt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Gr(Et.vapidKey)}}}else if(3===fe){const Et=Lt;M={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Gr(Et.auth),p256dh:Gr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Gr(Et.vapidKey)}}}else if(4===fe){const Et=Lt;M={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Gr(Et.auth),p256dh:Gr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Gr(Et.vapidKey)}}}}),function(fe,Le,tt,xt){return U.apply(this,arguments)})})).close(),yield(0,ge.Lj)(Ao),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),ud(M)?M:null;var U}),Ql.apply(this,arguments)}function ud(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:M}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const io="firebase-messaging-store";let ko=null;function Ps(){return ko||(ko=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(x,M)=>{0===M&&x.createObjectStore(io)}})),ko}function Bi(x){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,N.Z)(function*(x){const M=Oo(x),U=yield(yield Ps()).transaction(io).objectStore(io).get(M);if(U)return U;{const ie=yield ui(x.appConfig.senderId);if(ie)return yield cs(x,ie),ie}})).apply(this,arguments)}function cs(x,M){return ro.apply(this,arguments)}function ro(){return(ro=(0,N.Z)(function*(x,M){const R=Oo(x),ie=(yield Ps()).transaction(io,"readwrite");return yield ie.objectStore(io).put(M,R),yield ie.done,M})).apply(this,arguments)}function us(x){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(x){const M=Oo(x),U=(yield Ps()).transaction(io,"readwrite");yield U.objectStore(io).delete(M),yield U.done})).apply(this,arguments)}function Oo({appConfig:x}){return x.appId}const Qn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sf(x,M){return ul.apply(this,arguments)}function ul(){return(ul=(0,N.Z)(function*(x,M){var R;const U=yield Re(x),ie=Po(M),fe={method:"POST",headers:U,body:JSON.stringify(ie)};let Le;try{Le=yield(yield fetch(Xl(x.appConfig),fe)).json()}catch(tt){throw Qn.create("token-subscribe-failed",{errorInfo:null===(R=tt)||void 0===R?void 0:R.toString()})}if(Le.error)throw Qn.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw Qn.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function dd(x,M){return oo.apply(this,arguments)}function oo(){return(oo=(0,N.Z)(function*(x,M){var R;const U=yield Re(x),ie=Po(M.subscriptionOptions),fe={method:"PATCH",headers:U,body:JSON.stringify(ie)};let Le;try{Le=yield(yield fetch(`${Xl(x.appConfig)}/${M.token}`,fe)).json()}catch(tt){throw Qn.create("token-update-failed",{errorInfo:null===(R=tt)||void 0===R?void 0:R.toString()})}if(Le.error)throw Qn.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw Qn.create("token-update-no-token");return Le.token})).apply(this,arguments)}function pa(x,M){return ma.apply(this,arguments)}function ma(){return(ma=(0,N.Z)(function*(x,M){var R;const ie={method:"DELETE",headers:yield Re(x)};try{const Le=yield(yield fetch(`${Xl(x.appConfig)}/${M}`,ie)).json();if(Le.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(fe){throw Qn.create("token-unsubscribe-failed",{errorInfo:null===(R=fe)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Xl({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function Re(x){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,N.Z)(function*({appConfig:x,installations:M}){const R=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Po({p256dh:x,auth:M,endpoint:R,vapidKey:U}){const ie={web:{endpoint:R,auth:M,p256dh:x}};return U!==fa&&(ie.web.applicationPubKey=U),ie}const No=6048e5;function Xn(x){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,N.Z)(function*(x){const M=yield Ov(x.swRegistration,x.vapidKey),R={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:M.endpoint,auth:Gr(M.getKey("auth")),p256dh:Gr(M.getKey("p256dh"))},U=yield Bi(x.firebaseDependencies);if(U){if(ki(U.subscriptionOptions,R))return Date.now()>=U.createTime+No?Kc(x,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield pa(x.firebaseDependencies,U.token)}catch(ie){console.warn(ie)}return dl(x.firebaseDependencies,R)}return dl(x.firebaseDependencies,R)})).apply(this,arguments)}function ga(x){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(x){const M=yield Bi(x.firebaseDependencies);M&&(yield pa(x.firebaseDependencies,M.token),yield us(x.firebaseDependencies));const R=yield x.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Kc(x,M){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,N.Z)(function*(x,M){try{const R=yield dd(x.firebaseDependencies,M),U=Object.assign(Object.assign({},M),{token:R,createTime:Date.now()});return yield cs(x.firebaseDependencies,U),R}catch(R){throw yield ga(x),R}})).apply(this,arguments)}function dl(x,M){return _a.apply(this,arguments)}function _a(){return(_a=(0,N.Z)(function*(x,M){const U={token:yield sf(x,M),createTime:Date.now(),subscriptionOptions:M};return yield cs(x,U),U.token})).apply(this,arguments)}function Ov(x,M){return zr.apply(this,arguments)}function zr(){return(zr=(0,N.Z)(function*(x,M){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cd(M)})})).apply(this,arguments)}function ki(x,M){return M.vapidKey===x.vapidKey&&M.endpoint===x.endpoint&&M.auth===x.auth&&M.p256dh===x.p256dh}function Mr(x){const M={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Qc(x,M){if(!M.notification)return;x.notification={};const R=M.notification.title;R&&(x.notification.title=R);const U=M.notification.body;U&&(x.notification.body=U);const ie=M.notification.image;ie&&(x.notification.image=ie)}(M,x),function Bo(x,M){!M.data||(x.data=M.data)}(M,x),function $r(x,M){var R,U,ie,fe,Le;if(!(M.fcmOptions||null!==(R=M.notification)&&void 0!==R&&R.click_action))return;x.fcmOptions={};const tt=null!==(ie=null===(U=M.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ie?ie:null===(fe=M.notification)||void 0===fe?void 0:fe.click_action;tt&&(x.fcmOptions.link=tt);const xt=null===(Le=M.fcmOptions)||void 0===Le?void 0:Le.analytics_label;xt&&(x.fcmOptions.analyticsLabel=xt)}(M,x),M}function af(x){return"object"==typeof x&&!!x&&ll in x}function Xc(x,M){const R=[];for(let U=0;U<x.length;U++)R.push(x.charAt(U)),U<M.length&&R.push(M.charAt(U));return R.join("")}function Jc(x){return Qn.create("missing-app-config-values",{valueName:x})}Xc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hl{constructor(M,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ie=function Jl(x){if(!x||!x.options)throw Jc("App Configuration Object");if(!x.name)throw Jc("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:R}=x;for(const U of M)if(!R[U])throw Jc(U);return{appName:x.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:ie,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function fl(x){return va.apply(this,arguments)}function va(){return(va=(0,N.Z)(function*(x){var M;try{x.swRegistration=yield navigator.serviceWorker.register(Sr,{scope:Io}),x.swRegistration.update().catch(()=>{})}catch(R){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:null===(M=R)||void 0===M?void 0:M.message})}})).apply(this,arguments)}function eu(x,M){return pl.apply(this,arguments)}function pl(){return(pl=(0,N.Z)(function*(x,M){if(!M&&!x.swRegistration&&(yield fl(x)),M||!x.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");x.swRegistration=M}})).apply(this,arguments)}function ec(x,M){return ya.apply(this,arguments)}function ya(){return(ya=(0,N.Z)(function*(x,M){M?x.vapidKey=M:x.vapidKey||(x.vapidKey=fa)})).apply(this,arguments)}function ba(){return(ba=(0,N.Z)(function*(x,M){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield ec(x,M?.vapidKey),yield eu(x,M?.serviceWorkerRegistration),Xn(x)})).apply(this,arguments)}function fd(x,M,R){return wa.apply(this,arguments)}function wa(){return(wa=(0,N.Z)(function*(x,M,R){const U=tc(M);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[ll],message_name:R[Kl],message_time:R[rf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tc(x){switch(x){case qn.NOTIFICATION_CLICKED:return"notification_open";case qn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ml(){return(ml=(0,N.Z)(function*(x,M){const R=M.data;if(!R.isFirebaseMessaging)return;x.onMessageHandler&&R.messageType===qn.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Mr(R)):x.onMessageHandler.next(Mr(R)));const U=R.data;af(U)&&"1"===U[To]&&(yield fd(x,R.messageType,U))})).apply(this,arguments)}const di="@firebase/messaging",xn=x=>{const M=new hl(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function lf(x,M){return ml.apply(this,arguments)}(M,R)),M},pd=x=>{const M=x.getProvider("messaging").getImmediate();return{getToken:U=>function hd(x,M){return ba.apply(this,arguments)}(M,U)}};function md(){return tu.apply(this,arguments)}function tu(){return(tu=(0,N.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function cf(){(0,ue._registerComponent)(new ye.wA("messaging",xn,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("messaging-internal",pd,"PRIVATE")),(0,ue.registerVersion)(di,"0.9.16"),(0,ue.registerVersion)(di,"0.9.16","esm2017")}();const hs="analytics",Ca="firebase_id",Ea="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ru="https://www.googletagmanager.com/gtag/js",Ri=new oe.Yd("@firebase/analytics");function hf(x){return Promise.all(x.map(M=>M.catch(R=>R)))}function Nv(x,M){const R=document.createElement("script");R.src=`${ru}?l=${x}&id=${M}`,R.async=!0,document.head.appendChild(R)}function _l(x,M,R,U,ie,fe){return su.apply(this,arguments)}function su(){return(su=(0,N.Z)(function*(x,M,R,U,ie,fe){const Le=U[ie];try{if(Le)yield M[Le];else{const xt=(yield hf(R)).find(Ft=>Ft.measurementId===ie);xt&&(yield M[xt.appId])}}catch(tt){Ri.error(tt)}x("config",ie,fe)})).apply(this,arguments)}function vl(x,M,R,U,ie){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,N.Z)(function*(x,M,R,U,ie){try{let fe=[];if(ie&&ie.send_to){let Le=ie.send_to;Array.isArray(Le)||(Le=[Le]);const tt=yield hf(R);for(const xt of Le){const Ft=tt.find(Et=>Et.measurementId===xt),Lt=Ft&&M[Ft.appId];if(!Lt){fe=[];break}fe.push(Lt)}}0===fe.length&&(fe=Object.values(M)),yield Promise.all(fe),x("event",U,ie||{})}catch(fe){Ri.error(fe)}})).apply(this,arguments)}function yl(){const x=window.document.getElementsByTagName("script");for(const M of Object.values(x))if(M.src&&M.src.includes(ru))return M;return null}const Ci=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_d=new class gf{constructor(M={},R=1e3){this.throttleMetadata=M,this.intervalMillis=R}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,R){this.throttleMetadata[M]=R}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function ao(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Jn(x){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,N.Z)(function*(x){var M;const{appId:R,apiKey:U}=x,ie={method:"GET",headers:ao(U)},fe=Ea.replace("{app-id}",R),Le=yield fetch(fe,ie);if(200!==Le.status&&304!==Le.status){let tt="";try{const xt=yield Le.json();null!==(M=xt.error)&&void 0!==M&&M.message&&(tt=xt.error.message)}catch{}throw Ci.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:tt})}return Le.json()})).apply(this,arguments)}function Ma(x){return fs.apply(this,arguments)}function fs(){return(fs=(0,N.Z)(function*(x,M=_d,R){const{appId:U,apiKey:ie,measurementId:fe}=x.options;if(!U)throw Ci.create("no-app-id");if(!ie){if(fe)return{measurementId:fe,appId:U};throw Ci.create("no-api-key")}const Le=M.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new wl;return setTimeout((0,N.Z)(function*(){tt.abort()}),void 0!==R?R:6e4),bl({appId:U,apiKey:ie,measurementId:fe},Le,tt,M)})).apply(this,arguments)}function bl(x,M,R){return qr.apply(this,arguments)}function qr(){return(qr=(0,N.Z)(function*(x,{throttleEndTimeMillis:M,backoffCount:R},U,ie=_d){var fe,Le;const{appId:tt,measurementId:xt}=x;try{yield rc(U,M)}catch(Ft){if(xt)return Ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${null===(fe=Ft)||void 0===fe?void 0:fe.message}]`),{appId:tt,measurementId:xt};throw Ft}try{const Ft=yield Jn(x);return ie.deleteThrottleMetadata(tt),Ft}catch(Ft){const Lt=Ft;if(!ar(Lt)){if(ie.deleteThrottleMetadata(tt),xt)return Ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:tt,measurementId:xt};throw Ft}const Et=503===Number(null===(Le=Lt?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,he.$s)(R,ie.intervalMillis,30):(0,he.$s)(R,ie.intervalMillis),Vi={throttleEndTimeMillis:Date.now()+Et,backoffCount:R+1};return ie.setThrottleMetadata(tt,Vi),Ri.debug(`Calling attemptFetch again in ${Et} millis`),bl(x,Vi,U,ie)}})).apply(this,arguments)}function rc(x,M){return new Promise((R,U)=>{const ie=Math.max(M-Date.now(),0),fe=setTimeout(R,ie);x.addEventListener(()=>{clearTimeout(fe),U(Ci.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function ar(x){if(!(x instanceof he.ZR&&x.customData))return!1;const M=Number(x.customData.httpStatus);return 429===M||500===M||503===M||504===M}class wl{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let ps,Oi;function sc(){return(sc=(0,N.Z)(function*(x,M,R,U,ie){if(ie&&ie.global)x("event",R,U);else{const fe=yield M;x("event",R,Object.assign(Object.assign({},U),{send_to:fe}))}})).apply(this,arguments)}function Ns(x){Oi=x}function ln(x){ps=x}function ct(){return oc.apply(this,arguments)}function oc(){return(oc=(0,N.Z)(function*(){var x;if(!(0,he.hl)())return Ri.warn(Ci.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(M){return Ri.warn(Ci.create("indexeddb-unavailable",{errorInfo:null===(x=M)||void 0===x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function ms(){return(ms=(0,N.Z)(function*(x,M,R,U,ie,fe,Le){var tt;const xt=Ma(x);xt.then(mr=>{R[mr.measurementId]=mr.appId,x.options.measurementId&&mr.measurementId!==x.options.measurementId&&Ri.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Ri.error(mr)),M.push(xt);const Ft=ct().then(mr=>{if(mr)return U.getId()}),[Lt,Et]=yield Promise.all([xt,Ft]);yl()||Nv(fe,Lt.measurementId),Oi&&(ie("consent","default",Oi),Ns(void 0)),ie("js",new Date);const Vi=null!==(tt=Le?.config)&&void 0!==tt?tt:{};return Vi.origin="firebase",Vi.update=!0,null!=Et&&(Vi[Ca]=Et),ie("config",Lt.measurementId,Vi),ps&&(ie("set",ps),ln(void 0)),Lt.measurementId})).apply(this,arguments)}class El{constructor(M){this.app=M}_delete(){return delete Di[this.app.options.appId],Promise.resolve()}}let Di={},ou=[];const Sl={};let _f,$t,gs="dataLayer",au=!1;function lu(x,M,R){!function lg(){const x=[];if((0,he.ru)()&&x.push("This is a browser extension environment."),(0,he.zI)()||x.push("Cookies are not available."),x.length>0){const M=x.map((U,ie)=>`(${ie+1}) ${U}`).join(" "),R=Ci.create("invalid-analytics-context",{errorInfo:M});Ri.warn(R.message)}}();const U=x.options.appId;if(!U)throw Ci.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Ci.create("no-api-key");Ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Di[U])throw Ci.create("already-exists",{id:U});if(!au){!function ff(x){let M=[];Array.isArray(window[x])?M=window[x]:window[x]=M}(gs);const{wrappedGtag:fe,gtagCore:Le}=function mf(x,M,R,U,ie){let fe=function(...Le){window[U].push(arguments)};return window[ie]&&"function"==typeof window[ie]&&(fe=window[ie]),window[ie]=function pf(x,M,R,U){function fe(){return(fe=(0,N.Z)(function*(Le,tt,xt){try{"event"===Le?yield vl(x,M,R,tt,xt):"config"===Le?yield _l(x,M,R,U,tt,xt):"consent"===Le?x("consent","update",xt):x("set",tt)}catch(Ft){Ri.error(Ft)}})).apply(this,arguments)}return function ie(Le,tt,xt){return fe.apply(this,arguments)}}(fe,x,M,R),{gtagCore:fe,wrappedGtag:window[ie]}}(Di,ou,Sl,gs,"gtag");$t=fe,_f=Le,au=!0}return Di[U]=function Dl(x,M,R,U,ie,fe,Le){return ms.apply(this,arguments)}(x,ou,Sl,M,_f,gs,R),new El(x)}function ac(){return uo.apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const Zi="@firebase/analytics";!function uu(){(0,ue._registerComponent)(new ye.wA(hs,(M,{options:R})=>lu(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new ye.wA("analytics-internal",function x(M){try{const R=M.getProvider(hs).getImmediate();return{logEvent:(U,ie,fe)=>function vd(x,M,R,U){x=(0,he.m9)(x),function Cl(x,M,R,U,ie){return sc.apply(this,arguments)}($t,Di[x.app.options.appId],M,R,U).catch(ie=>Ri.error(ie))}(R,U,ie,fe)}}catch(R){throw Ci.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(Zi,"0.8.0"),(0,ue.registerVersion)(Zi,"0.8.0","esm2017")}();var du=V(4408),cc=V(7565);const bf=new class yd extends cc.v{}(class Ta extends du.o{constructor(M,R){super(M,R),this.scheduler=M,this.work=R}schedule(M,R=0){return R>0?super.schedule(M,R):(this.delay=R,this.state=M,this.scheduler.flush(this),this)}execute(M,R){return R>0||this.closed?super.execute(M,R):this._execute(M,R)}requestAsyncId(M,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(M,R,U):M.flush(this)}});var Hv=V(4986),Uo=V(8505),Ki=V(5363),uc=V(9468);const xl=new l.GfV("7.4.1"),wf="__angularfire_symbol__analyticsIsSupportedValue",Ml="__angularfire_symbol__analyticsIsSupported",hu="__angularfire_symbol__remoteConfigIsSupportedValue",bd="__angularfire_symbol__remoteConfigIsSupported",wd="__angularfire_symbol__messagingIsSupportedValue",dc="__angularfire_symbol__messagingIsSupported";function Ef(x,M,R){if(M){if(1===M.length)return M[0];const fe=M.filter(Le=>Le.app===R);if(1===fe.length)return fe[0]}return R.container.getProvider(x).getImmediate({optional:!0})}globalThis[Ml]||(globalThis[Ml]=ac().then(x=>globalThis[wf]=x).catch(()=>globalThis[wf]=!1)),globalThis[dc]||(globalThis[dc]=md().then(x=>globalThis[wd]=x).catch(()=>globalThis[wd]=!1)),globalThis[bd]||(globalThis[bd]=ha().then(x=>globalThis[hu]=x).catch(()=>globalThis[hu]=!1));const fc=(x,M)=>{const R=M?[M]:(0,j.C6)(),U=[];return R.forEach(ie=>{ie.container.getProvider(x).instances.forEach(Le=>{U.includes(Le)||U.push(Le)})}),U};function Yr(){}class pc{constructor(M,R=bf){this.zone=M,this.delegate=R}now(){return this.delegate.now()}schedule(M,R,U){const ie=this.zone;return this.delegate.schedule(function(Le){ie.runGuarded(()=>{M.apply(this,[Le])})},R,U)}}class dg{constructor(M){this.zone=M,this.task=null}call(M,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yr,{},Yr,Yr)),R.pipe((0,Uo.b)({next:U,complete:U,error:U})).subscribe(M).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dd=(()=>{class x{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new pc(Zone.current)),this.insideAngular=R.run(()=>new pc(Zone.current,Hv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(R){return new(R||x)(l.LFG(l.R0b))},x.\u0275prov=l.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ho(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Aa(x){return x.pipe((0,Ki.Q)(ho().outsideAngular))}function Wn(x){return ho(),function Sf(x){return function(R){return(R=R.lift(new dg(x.ngZone))).pipe((0,uc.R)(x.outsideAngular),(0,Ki.Q)(x.insideAngular))}}(ho())(x)}},6457:(vt,Oe,V)=>{V.d(Oe,{$:()=>Xl,A:()=>Y,B:()=>Fe,G:()=>Eo,H:()=>hr,J:()=>Rs,L:()=>bn,M:()=>al,N:()=>nf,P:()=>Hv,Q:()=>ll,R:()=>yf,T:()=>Kl,U:()=>fa,V:()=>qn,W:()=>Gr,X:()=>ui,Y:()=>At,Z:()=>sf,_:()=>dd,a:()=>xa,a0:()=>Xn,a1:()=>ga,a2:()=>Kc,a3:()=>dl,a4:()=>Ov,a5:()=>ki,a6:()=>Qc,a7:()=>Bo,a8:()=>af,a9:()=>Xc,aA:()=>mr,aB:()=>xt,aC:()=>Aa,aD:()=>_s,aE:()=>$n,aI:()=>ao,aL:()=>To,aa:()=>fl,ab:()=>eu,ac:()=>ec,af:()=>fd,ag:()=>tc,ah:()=>lf,ak:()=>io,al:()=>nu,an:()=>ru,ao:()=>su,ap:()=>li,aq:()=>we,ar:()=>qt,as:()=>ke,at:()=>lt,au:()=>pg,av:()=>xf,aw:()=>Ne,ax:()=>ce,ay:()=>se,az:()=>wn,b:()=>Ci,c:()=>wd,d:()=>Df,e:()=>Cd,f:()=>Sf,g:()=>U,h:()=>x,i:()=>oc,j:()=>Le,k:()=>Yv,l:()=>Fs,m:()=>Bs,o:()=>ge,r:()=>du,s:()=>Vv,u:()=>bf});var l=V(5861),j=V(2090),N=V(9681),ue=V(655),he=V(1877),ye=V(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Fe=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},xe=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new he.Yd("@firebase/auth");function at(w,...g){ve.logLevel<=he.in.ERROR&&ve.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function lt(w,...g){throw Ke(w,...g)}function Ne(w,...g){return Ke(w,...g)}function Pe(w,g,v){const D=Object.assign(Object.assign({},xe()),{[g]:v});return new j.LL("auth","Firebase",D).create(g,{appName:w.name})}function Me(w,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&lt(w,"argument-error"),Pe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(w,...g){if("string"!=typeof w){const v=g[0],D=[...g.slice(1)];return D[0]&&(D[0].appName=w.name),w._errorFactory.create(v,...D)}return ht.create(w,...g)}function ce(w,g,...v){if(!w)throw Ke(g,...v)}function pe(w){const g="INTERNAL ASSERTION FAILED: "+w;throw at(g),new Error(g)}function we(w,g){w||pe(g)}const ne=new Map;function se(w){we(w instanceof Function,"Expected a class definition");let g=ne.get(w);return g?(we(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,ne.set(w,g),g)}function Ue(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===Ct()||"https:"===Ct()}function Ct(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class et{constructor(g,v){this.shortDelay=g,this.longDelay=v,we(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function an(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function An(w,g){we(w.emulator,"Emulator should always be set here");const{url:v}=w.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class zn{static initialize(g,v,D){this.fetchImpl=g,v&&(this.headersImpl=v),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cn=new et(3e4,6e4);function en(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Gt(w,g,v,D){return $i.apply(this,arguments)}function $i(){return($i=(0,l.Z)(function*(w,g,v,D,k={}){return eo(w,k,(0,l.Z)(function*(){let B={},ae={};D&&("GET"===g?ae=D:B={body:JSON.stringify(D)});const Ie=(0,j.xO)(Object.assign({key:w.config.apiKey},ae)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),zn.fetch()(br(w,w.config.apiHost,v,Ie),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function eo(w,g,v){return qi.apply(this,arguments)}function qi(){return(qi=(0,l.Z)(function*(w,g,v){w._canInitEmulator=!1;const D=Object.assign(Object.assign({},pn),g);try{const k=new wr(w),B=yield Promise.race([v(),k.promise]);k.clearNetworkTimeout();const ae=yield B.json();if("needConfirmation"in ae)throw Kn(w,"account-exists-with-different-credential",ae);if(B.ok&&!("errorMessage"in ae))return ae;{const Ie=B.ok?ae.errorMessage:ae.error.message,[nt,Xe]=Ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Kn(w,"credential-already-in-use",ae);if("EMAIL_EXISTS"===nt)throw Kn(w,"email-already-in-use",ae);if("USER_DISABLED"===nt)throw Kn(w,"user-disabled",ae);const qe=D[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Pe(w,qe,Xe);lt(w,qe)}}catch(k){if(k instanceof j.ZR)throw k;lt(w,"network-request-failed")}})).apply(this,arguments)}function Ln(w,g,v,D){return os.apply(this,arguments)}function os(){return(os=(0,l.Z)(function*(w,g,v,D,k={}){const B=yield Gt(w,g,v,D,k);return"mfaPendingCredential"in B&&lt(w,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function br(w,g,v,D){const k=`${g}${v}?${D}`;return w.config.emulator?An(w.config,k):`${w.config.apiScheme}://${k}`}class wr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,D)=>{this.timer=setTimeout(()=>D(Ne(this.auth,"network-request-failed")),cn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(w,g,v){const D={appName:w.name};v.email&&(D.email=v.email),v.phoneNumber&&(D.phoneNumber=v.phoneNumber);const k=Ne(w,g,D);return k.customData._tokenResponse=v,k}function bt(){return(bt=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function kn(w,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function mn(w,g){return yi.apply(this,arguments)}function yi(){return(yi=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Yi(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ir(){return(ir=(0,l.Z)(function*(w,g=!1){const v=(0,j.m9)(w),D=yield v.getIdToken(g),k=pt(D);ce(k&&k.exp&&k.auth_time&&k.iat,v.auth,"internal-error");const B="object"==typeof k.firebase?k.firebase:void 0,ae=B?.sign_in_provider;return{claims:k,token:D,authTime:Yi(Rn(k.auth_time)),issuedAtTime:Yi(Rn(k.iat)),expirationTime:Yi(Rn(k.exp)),signInProvider:ae||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function Rn(w){return 1e3*Number(w)}function pt(w){var g;const[v,D,k]=w.split(".");if(void 0===v||void 0===D||void 0===k)return at("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,j.tV)(D);return B?JSON.parse(B):(at("Failed to decode base64 JWT payload"),null)}catch(B){return at("Caught error parsing JWT payload as JSON",null===(g=B)||void 0===g?void 0:g.toString()),null}}function Bn(w,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,l.Z)(function*(w,g,v=!1){if(v)return g;try{return yield g}catch(D){throw D instanceof j.ZR&&Vn(D)&&w.auth.currentUser===w&&(yield w.auth.signOut()),D}})).apply(this,arguments)}function Vn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class zt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const k=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const D=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield v.iteration()}),D)}iteration(){var g=this;return(0,l.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===(null===(v=D)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class Hn{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yi(this.lastLoginAt),this.creationTime=Yi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,l.Z)(function*(w){var g;const v=w.auth,D=yield w.getIdToken(),k=yield Bn(w,mn(v,{idToken:D}));ce(k?.users.length,v,"internal-error");const B=k.users[0];w._notifyReloadListener(B);const ae=null!==(g=B.providerUserInfo)&&void 0!==g&&g.length?q(B.providerUserInfo):[],Ie=ee(w.providerData,ae),qe=!!w.isAnonymous&&!(w.email&&B.passwordHash||Ie?.length),tn={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Ie,metadata:new Hn(B.createdAt,B.lastLoginAt),isAnonymous:qe};Object.assign(w,tn)})).apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(w){const g=(0,j.m9)(w);yield sr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ee(w,g){return[...w.filter(D=>!g.some(k=>k.providerId===D.providerId)),...g]}function q(w){return w.map(g=>{var{providerId:v}=g,D=(0,ue._T)(g,["providerId"]);return{providerId:v,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function K(){return(K=(0,l.Z)(function*(w,g){const v=yield eo(w,{},(0,l.Z)(function*(){const D=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:B}=w.config,ae=br(w,k,"/v1/token",`key=${B}`),Ie=yield w._getAdditionalHeaders();return Ie["Content-Type"]="application/x-www-form-urlencoded",zn.fetch()(ae,{method:"POST",headers:Ie,body:D})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ce(g.idToken,"internal-error"),ce(typeof g.idToken<"u","internal-error"),ce(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ut(w){const g=pt(w);return ce(g,"internal-error"),ce(typeof g.exp<"u","internal-error"),ce(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var D=this;return(0,l.Z)(function*(){return ce(!D.accessToken||D.refreshToken,g,"user-token-expired"),v||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(g,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var D=this;return(0,l.Z)(function*(){const{accessToken:k,refreshToken:B,expiresIn:ae}=yield function G(w,g){return K.apply(this,arguments)}(g,v);D.updateTokensAndExpiration(k,B,Number(ae))})()}updateTokensAndExpiration(g,v,D){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(g,v){const{refreshToken:D,accessToken:k,expirationTime:B}=v,ae=new X;return D&&(ce("string"==typeof D,"internal-error",{appName:g}),ae.refreshToken=D),k&&(ce("string"==typeof k,"internal-error",{appName:g}),ae.accessToken=k),B&&(ce("number"==typeof B,"internal-error",{appName:g}),ae.expirationTime=B),ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Ae(w,g){ce("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Ye{constructor(g){var{uid:v,auth:D,stsTokenManager:k}=g,B=(0,ue._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=D,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new Hn(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,l.Z)(function*(){const D=yield Bn(v,v.stsTokenManager.getToken(v.auth,g));return ce(D,v.auth,"internal-error"),v.accessToken!==D&&(v.accessToken=D,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),D})()}getIdTokenResult(g){return function En(w){return ir.apply(this,arguments)}(this,g)}reload(){return function Cr(w){return Nt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ce(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ye(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var D=this;return(0,l.Z)(function*(){let k=!1;g.idToken&&g.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(g),k=!0),v&&(yield sr(D)),yield D.auth._persistUserIfCurrent(D),k&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var g=this;return(0,l.Z)(function*(){const v=yield g.getIdToken();return yield Bn(g,function as(w,g){return bt.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var D,k,B,ae,Ie,nt,Xe,qe;const tn=null!==(D=v.displayName)&&void 0!==D?D:void 0,Vs=null!==(k=v.email)&&void 0!==k?k:void 0,fo=null!==(B=v.phoneNumber)&&void 0!==B?B:void 0,ni=null!==(ae=v.photoURL)&&void 0!==ae?ae:void 0,fi=null!==(Ie=v.tenantId)&&void 0!==Ie?Ie:void 0,Id=null!==(nt=v._redirectEventId)&&void 0!==nt?nt:void 0,pi=null!==(Xe=v.createdAt)&&void 0!==Xe?Xe:void 0,_u=null!==(qe=v.lastLoginAt)&&void 0!==qe?qe:void 0,{uid:gg,emailVerified:kf,isAnonymous:Tl,providerData:Rf,stsTokenManager:_g}=v;ce(gg&&_g,g,"internal-error");const Zv=X.fromJSON(this.name,_g);ce("string"==typeof gg,g,"internal-error"),Ae(tn,g.name),Ae(Vs,g.name),ce("boolean"==typeof kf,g,"internal-error"),ce("boolean"==typeof Tl,g,"internal-error"),Ae(fo,g.name),Ae(ni,g.name),Ae(fi,g.name),Ae(Id,g.name),Ae(pi,g.name),Ae(_u,g.name);const Of=new Ye({uid:gg,auth:g,email:Vs,emailVerified:kf,displayName:tn,isAnonymous:Tl,photoURL:ni,phoneNumber:fo,tenantId:fi,stsTokenManager:Zv,createdAt:pi,lastLoginAt:_u});return Rf&&Array.isArray(Rf)&&(Of.providerData=Rf.map(Pf=>Object.assign({},Pf))),Id&&(Of._redirectEventId=Id),Of}static _fromIdTokenResponse(g,v,D=!1){return(0,l.Z)(function*(){const k=new X;k.updateFromServerResponse(v);const B=new Ye({uid:v.localId,auth:g,stsTokenManager:k,isAnonymous:D});return yield sr(B),B})()}}const bn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(v,D){var k=this;return(0,l.Z)(function*(){k.storage[v]=D})()}_get(v){var D=this;return(0,l.Z)(function*(){const k=D.storage[v];return void 0===k?null:k})()}_remove(v){var D=this;return(0,l.Z)(function*(){delete D.storage[v]})()}_addListener(v,D){}_removeListener(v,D){}}return w.type="NONE",w})();function wn(w,g,v){return`firebase:${w}:${g}:${v}`}class ai{constructor(g,v,D){this.persistence=g,this.auth=v,this.userKey=D;const{config:k,name:B}=this.auth;this.fullUserKey=wn(this.userKey,k.apiKey,B),this.fullPersistenceKey=wn("persistence",k.apiKey,B),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Ye._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,l.Z)(function*(){if(v.persistence===g)return;const D=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,D?v.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,D="authUser"){return(0,l.Z)(function*(){if(!v.length)return new ai(se(bn),g,D);const k=(yield Promise.all(v.map(function(){var Xe=(0,l.Z)(function*(qe){if(yield qe._isAvailable())return qe});return function(qe){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let B=k[0]||se(bn);const ae=wn(D,g.config.apiKey,g.name);let Ie=null;for(const Xe of v)try{const qe=yield Xe._get(ae);if(qe){const tn=Ye._fromJSON(g,qe);Xe!==B&&(Ie=tn),B=Xe;break}}catch{}const nt=k.filter(Xe=>Xe._shouldAllowMigration);return B._shouldAllowMigration&&nt.length?(B=nt[0],Ie&&(yield B._set(ae,Ie.toJSON())),yield Promise.all(v.map(function(){var Xe=(0,l.Z)(function*(qe){if(qe!==B)try{yield qe._remove(ae)}catch{}});return function(qe){return Xe.apply(this,arguments)}}())),new ai(B,g,D)):new ai(B,g,D)})()}}function J(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(We(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Qe(g))return"Blackberry";if(Dt(g))return"Webos";if($(g))return"Safari";if((g.includes("chrome/")||Ee(g))&&!g.includes("edge/"))return"Chrome";if(ke(g))return"Android";{const D=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function Z(w=(0,j.z$)()){return/firefox\//i.test(w)}function $(w=(0,j.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ee(w=(0,j.z$)()){return/crios\//i.test(w)}function We(w=(0,j.z$)()){return/iemobile/i.test(w)}function ke(w=(0,j.z$)()){return/android/i.test(w)}function Qe(w=(0,j.z$)()){return/blackberry/i.test(w)}function Dt(w=(0,j.z$)()){return/webos/i.test(w)}function qt(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function li(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function gn(w=(0,j.z$)()){return qt(w)||ke(w)||Dt(w)||Qe(w)||/windows phone/i.test(w)||We(w)}function As(w,g=[]){let v;switch(w){case"Browser":v=J((0,j.z$)());break;case"Worker":v=`${J((0,j.z$)())}-${w}`;break;default:v=w}const D=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${N.SDK_VERSION}/${D}`}class Ut{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const D=B=>new Promise((ae,Ie)=>{try{ae(g(B))}catch(nt){Ie(nt)}});D.onAbort=v,this.queue.push(D);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,l.Z)(function*(){var D;if(v.auth.currentUser===g)return;const k=[];try{for(const B of v.queue)yield B(g),B.onAbort&&k.push(B.onAbort)}catch(B){k.reverse();for(const ae of k)try{ae()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=B)||void 0===D?void 0:D.message})}})()}}class rl{constructor(g,v,D){this.app=g,this.heartbeatServiceProvider=v,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aa(this),this.idTokenSubscription=new aa(this),this.beforeStateQueue=new Ut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(g,v){var D=this;return v&&(this._popupRedirectResolver=se(v)),this._initializationPromise=this.queue((0,l.Z)(function*(){var k,B;if(!D._deleted&&(D.persistenceManager=yield ai.create(D,g),!D._deleted)){if(null!==(k=D._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(v),D.lastNotifiedUid=(null===(B=D.currentUser)||void 0===B?void 0:B.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,l.Z)(function*(){var D;const k=yield v.assertedPersistence.getCurrentUser();let B=k,ae=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Ie=null===(D=v.redirectUser)||void 0===D?void 0:D._redirectEventId,nt=B?._redirectEventId,Xe=yield v.tryRedirectSignIn(g);(!Ie||Ie===nt)&&Xe?.user&&(B=Xe.user,ae=!0)}if(!B)return v.directlySetCurrentUser(null);if(!B._redirectEventId){if(ae)try{yield v.beforeStateQueue.runMiddleware(B)}catch(Ie){B=k,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Ie))}return B?v.reloadAndSetCurrentUserOrClear(B):v.directlySetCurrentUser(null)}return ce(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===B._redirectEventId?v.directlySetCurrentUser(B):v.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(g){var v=this;return(0,l.Z)(function*(){let D=null;try{D=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,l.Z)(function*(){var D;try{yield sr(g)}catch(k){if("auth/network-request-failed"!==(null===(D=k)||void 0===D?void 0:D.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Jt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,l.Z)(function*(){const D=g?(0,j.m9)(g):null;return D&&ce(D.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(D&&D._clone(v))})()}_updateCurrentUser(g,v=!1){var D=this;return(0,l.Z)(function*(){if(!D._deleted)return g&&ce(D.tenantId===g.tenantId,D,"tenant-id-mismatch"),v||(yield D.beforeStateQueue.runMiddleware(g)),D.queue((0,l.Z)(function*(){yield D.directlySetCurrentUser(g),D.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,l.Z)(function*(){yield v.assertedPersistence.setPersistence(se(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,v,D){return this.registerStateListener(this.authStateSubscription,g,v,D)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,D){return this.registerStateListener(this.idTokenSubscription,g,v,D)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var D=this;return(0,l.Z)(function*(){const k=yield D.getOrInitRedirectPersistenceManager(v);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,l.Z)(function*(){if(!v.redirectPersistenceManager){const D=g&&se(g)||v._popupRedirectResolver;ce(D,v,"argument-error"),v.redirectPersistenceManager=yield ai.create(v,[se(D._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,l.Z)(function*(){var D,k;return v._isInitialized&&(yield v.queue((0,l.Z)(function*(){}))),(null===(D=v._currentUser)||void 0===D?void 0:D._redirectEventId)===g?v._currentUser:(null===(k=v.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,l.Z)(function*(){if(g===v.currentUser)return v.queue((0,l.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,D,k){if(this._deleted)return()=>{};const B="function"==typeof v?v:v.next.bind(v),ae=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(ae,this,"internal-error"),ae.then(()=>B(this.currentUser)),"function"==typeof v?g.addObserver(v,D,k):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,l.Z)(function*(){v.currentUser&&v.currentUser!==g&&(v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh()),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=As(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var v;const D={"X-Client-Version":g.clientVersion};g.app.options.appId&&(D["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return k&&(D["X-Firebase-Client"]=k),D})()}}function $n(w){return(0,j.m9)(w)}class aa{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(v=>this.observer=v)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Eo(w,g,v){const D=$n(w);ce(D._canInitEmulator,D,"emulator-config-failed"),ce(/^https?:\/\//.test(g),D,"invalid-emulator-scheme");const k=!!v?.disableWarnings,B=Ai(g),{host:ae,port:Ie}=function So(w){const g=Ai(w),v=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!v)return{host:"",port:null};const D=v[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(D);if(k){const B=k[1];return{host:B,port:ls(D.substr(B.length+1))}}{const[B,ae]=D.split(":");return{host:B,port:ls(ae)}}}(g);D.config.emulator={url:`${B}//${ae}${null===Ie?"":`:${Ie}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ae,port:Ie,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function dr(){function w(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ai(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function ls(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class hr{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return pe("not implemented")}_getIdTokenResponse(g){return pe("not implemented")}_linkToIdToken(g,v){return pe("not implemented")}_getReauthenticationResolver(g){return pe("not implemented")}}function zc(w,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:resetPassword",en(w,g))})).apply(this,arguments)}function rd(w,g){return $c.apply(this,arguments)}function $c(){return($c=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Yl(w,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:update",en(w,g))})).apply(this,arguments)}function to(){return(to=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithPassword",en(w,g))})).apply(this,arguments)}function Ur(w,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:sendOobCode",en(w,g))})).apply(this,arguments)}function qc(w,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,l.Z)(function*(w,g){return Ur(w,g)})).apply(this,arguments)}function jr(w,g){return no.apply(this,arguments)}function no(){return(no=(0,l.Z)(function*(w,g){return Ur(w,g)})).apply(this,arguments)}function sl(w,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,l.Z)(function*(w,g){return Ur(w,g)})).apply(this,arguments)}function Dr(w,g){return sd.apply(this,arguments)}function sd(){return(sd=(0,l.Z)(function*(w,g){return Ur(w,g)})).apply(this,arguments)}function Wc(){return(Wc=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithEmailLink",en(w,g))})).apply(this,arguments)}function Yc(){return(Yc=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithEmailLink",en(w,g))})).apply(this,arguments)}class Zl extends hr{constructor(g,v,D,k=null){super("password",D),this._email=g,this._password=v,this._tenantId=k}static _fromEmailAndPassword(g,v){return new Zl(g,v,"password")}static _fromEmailAndCode(g,v,D=null){return new Zl(g,v,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,l.Z)(function*(){switch(v.signInMethod){case"password":return function la(w,g){return to.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function od(w,g){return Wc.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:lt(g,"internal-error")}})()}_linkToIdToken(g,v){var D=this;return(0,l.Z)(function*(){switch(D.signInMethod){case"password":return rd(g,{idToken:v,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function tf(w,g){return Yc.apply(this,arguments)}(g,{idToken:v,email:D._email,oobCode:D._password});default:lt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Mo(w,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithIdp",en(w,g))})).apply(this,arguments)}class Rs extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new Rs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):lt("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:k}=v,B=(0,ue._T)(v,["providerId","signInMethod"]);if(!D||!k)return null;const ae=new Rs(D,k);return ae.idToken=B.idToken||void 0,ae.accessToken=B.accessToken||void 0,ae.secret=B.secret,ae.nonce=B.nonce,ae.pendingToken=B.pendingToken||null,ae}_getIdTokenResponse(g){return Mo(g,this.buildRequest())}_linkToIdToken(g,v){const D=this.buildRequest();return D.idToken=v,Mo(g,D)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Mo(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,j.xO)(v)}return g}}function ng(w,g){return ad.apply(this,arguments)}function ad(){return(ad=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:sendVerificationCode",en(w,g))})).apply(this,arguments)}function ol(){return(ol=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithPhoneNumber",en(w,g))})).apply(this,arguments)}function ld(){return(ld=(0,l.Z)(function*(w,g){const v=yield Ln(w,"POST","/v1/accounts:signInWithPhoneNumber",en(w,g));if(v.temporaryProof)throw Kn(w,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const rg={USER_NOT_FOUND:"user-not-found"};function ua(){return(ua=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithPhoneNumber",en(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),rg)})).apply(this,arguments)}class Os extends hr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new Os({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new Os({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function ig(w,g){return ol.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function ca(w,g){return ld.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function sg(w,g){return ua.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:D,verificationCode:k}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:D,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:D,phoneNumber:k,temporaryProof:B}=g;return D||v||k||B?new Os({verificationId:v,verificationCode:D,phoneNumber:k,temporaryProof:B}):null}}class da{constructor(g){var v,D,k,B,ae,Ie;const nt=(0,j.zd)((0,j.pd)(g)),Xe=null!==(v=nt.apiKey)&&void 0!==v?v:null,qe=null!==(D=nt.oobCode)&&void 0!==D?D:null,tn=function og(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=nt.mode)&&void 0!==k?k:null);ce(Xe&&qe&&tn,"argument-error"),this.apiKey=Xe,this.operation=tn,this.code=qe,this.continueUrl=null!==(B=nt.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ae=nt.languageCode)&&void 0!==ae?ae:null,this.tenantId=null!==(Ie=nt.tenantId)&&void 0!==Ie?Ie:null}static parseLink(g){const v=function Rv(w){const g=(0,j.zd)((0,j.pd)(w)).link,v=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,D=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(D?(0,j.zd)((0,j.pd)(D)).link:null)||D||v||g||w}(g);try{return new da(v)}catch{return null}}}let al=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(v,D){return Zl._fromEmailAndPassword(v,D)}static credentialWithLink(v,D){const k=da.parseLink(D);return ce(k,"argument-error"),Zl._fromEmailAndCode(v,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Sr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Io extends Sr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class fa extends Io{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return ce("providerId"in v&&"signInMethod"in v,"argument-error"),Rs._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ce(g.idToken||g.accessToken,"argument-error"),Rs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return fa.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return fa.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:D,oauthTokenSecret:k,pendingToken:B,nonce:ae,providerId:Ie}=g;if(!D&&!k&&!v&&!B||!Ie)return null;try{return new fa(Ie)._credential({idToken:v,accessToken:D,nonce:ae,pendingToken:B})}catch{return null}}}let nf=(()=>{class w extends Io{constructor(){super("facebook.com")}static credential(v){return Rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ll=(()=>{class w extends Io{constructor(){super("google.com"),this.addScope("profile")}static credential(v,D){return Rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:D})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:D,oauthAccessToken:k}=v;if(!D&&!k)return null;try{return w.credential(D,k)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Kl=(()=>{class w extends Io{constructor(){super("github.com")}static credential(v){return Rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class To extends hr{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return Mo(g,this.buildRequest())}_linkToIdToken(g,v){const D=this.buildRequest();return D.idToken=v,Mo(g,D)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Mo(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:k,pendingToken:B}=v;return D&&k&&B&&D===k?new To(D,B):null}static _create(g,v){return new To(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qn extends Sr{constructor(g){ce(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return qn.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return qn.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=To.fromJSON(g);return ce(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:D}=g;if(!v||!D)return null;try{return To._create(D,v)}catch{return null}}}let Gr=(()=>{class w extends Io{constructor(){super("twitter.com")}static credential(v,D){return Rs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:D})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:D,oauthTokenSecret:k}=v;if(!D||!k)return null;try{return w.credential(D,k)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function cd(w,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signUp",en(w,g))})).apply(this,arguments)}class xr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,D,k=!1){return(0,l.Z)(function*(){const B=yield Ye._fromIdTokenResponse(g,D,k),ae=Zc(D);return new xr({user:B,providerId:ae,_tokenResponse:D,operationType:v})})()}static _forOperation(g,v,D){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(D,!0);const k=Zc(D);return new xr({user:g,providerId:k,_tokenResponse:D,operationType:v})})()}}function Zc(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ui(w){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,l.Z)(function*(w){var g;const v=$n(w);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new xr({user:v.currentUser,providerId:null,operationType:"signIn"});const D=yield cd(v,{returnSecureToken:!0}),k=yield xr._fromIdTokenResponse(v,"signIn",D,!0);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class ud extends j.ZR{constructor(g,v,D,k){var B;super(v.code,v.message),this.operationType=D,this.user=k,Object.setPrototypeOf(this,ud.prototype),this.customData={appName:g.name,tenantId:null!==(B=g.tenantId)&&void 0!==B?B:void 0,_serverResponse:v.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(g,v,D,k){return new ud(g,v,D,k)}}function cl(w,g,v,D){return("reauthenticate"===g?v._getReauthenticationResolver(w):v._getIdTokenResponse(w)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?ud._fromErrorAndOperation(w,B,g,D):B})}function fr(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function io(w,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,l.Z)(function*(w,g){const v=(0,j.m9)(w);yield Ro(!0,v,g);const{providerUserInfo:D}=yield kn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),k=fr(D||[]);return v.providerData=v.providerData.filter(B=>k.has(B.providerId)),k.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function Ps(w,g){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,l.Z)(function*(w,g,v=!1){const D=yield Bn(w,g._linkToIdToken(w.auth,yield w.getIdToken()),v);return xr._forOperation(w,"link",D)})).apply(this,arguments)}function Ro(w,g,v){return cs.apply(this,arguments)}function cs(){return(cs=(0,l.Z)(function*(w,g,v){yield sr(g);const k=!1===w?"provider-already-linked":"no-such-provider";ce(fr(g.providerData).has(v)===w,g.auth,k)})).apply(this,arguments)}function ro(w,g){return us.apply(this,arguments)}function us(){return(us=(0,l.Z)(function*(w,g,v=!1){var D;const{auth:k}=w,B="reauthenticate";try{const ae=yield Bn(w,cl(k,B,g,w),v);ce(ae.idToken,k,"internal-error");const Ie=pt(ae.idToken);ce(Ie,k,"internal-error");const{sub:nt}=Ie;return ce(w.uid===nt,k,"user-mismatch"),xr._forOperation(w,B,ae)}catch(ae){throw"auth/user-not-found"===(null===(D=ae)||void 0===D?void 0:D.code)&&lt(k,"user-mismatch"),ae}})).apply(this,arguments)}function so(w,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,l.Z)(function*(w,g,v=!1){const D="signIn",k=yield cl(w,D,g),B=yield xr._fromIdTokenResponse(w,D,k);return v||(yield w._updateCurrentUser(B.user)),B})).apply(this,arguments)}function At(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(w,g){return so($n(w),g)})).apply(this,arguments)}function sf(w,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(w,g){const v=(0,j.m9)(w);return yield Ro(!1,v,g.providerId),Ps(v,g)})).apply(this,arguments)}function dd(w,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,l.Z)(function*(w,g){return ro((0,j.m9)(w),g)})).apply(this,arguments)}function pa(w,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,l.Z)(function*(w,g){return Ln(w,"POST","/v1/accounts:signInWithCustomToken",en(w,g))})).apply(this,arguments)}function Xl(w,g){return Re.apply(this,arguments)}function Re(){return(Re=(0,l.Z)(function*(w,g){const v=$n(w),D=yield pa(v,{token:g,returnSecureToken:!0}),k=yield xr._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(k.user),k})).apply(this,arguments)}class Yt{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Po._fromServerResponse(g,v):lt(g,"internal-error")}}class Po extends Yt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Po(v)}}function No(w,g,v){var D;ce((null===(D=v.url)||void 0===D?void 0:D.length)>0,w,"invalid-continue-uri"),ce(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ce(v.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(ce(v.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Xn(w,g,v){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w),k={requestType:"PASSWORD_RESET",email:g};v&&No(D,k,v),yield jr(D,k)})).apply(this,arguments)}function ga(w,g,v){return or.apply(this,arguments)}function or(){return(or=(0,l.Z)(function*(w,g,v){yield zc((0,j.m9)(w),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Kc(w,g){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,l.Z)(function*(w,g){yield Yl((0,j.m9)(w),{oobCode:g})})).apply(this,arguments)}function dl(w,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,l.Z)(function*(w,g){const v=(0,j.m9)(w),D=yield zc(v,{oobCode:g}),k=D.requestType;switch(ce(k,v,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(D.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(D.mfaInfo,v,"internal-error");default:ce(D.email,v,"internal-error")}let B=null;return D.mfaInfo&&(B=Yt._fromServerResponse($n(v),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:B},operation:k}})).apply(this,arguments)}function Ov(w,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,l.Z)(function*(w,g){const{data:v}=yield dl((0,j.m9)(w),g);return v.email})).apply(this,arguments)}function ki(w,g,v){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,l.Z)(function*(w,g,v){const D=$n(w),k=yield cd(D,{returnSecureToken:!0,email:g,password:v}),B=yield xr._fromIdTokenResponse(D,"signIn",k);return yield D._updateCurrentUser(B.user),B})).apply(this,arguments)}function Qc(w,g,v){return At((0,j.m9)(w),al.credential(g,v))}function Bo(w,g,v){return $r.apply(this,arguments)}function $r(){return($r=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w),k={requestType:"EMAIL_SIGNIN",email:g};ce(v.handleCodeInApp,D,"argument-error"),v&&No(D,k,v),yield sl(D,k)})).apply(this,arguments)}function af(w,g){return"EMAIL_SIGNIN"===da.parseLink(g)?.operation}function Xc(w,g,v){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w),k=al.credentialWithLink(g,v||Ue());return ce(k._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),At(D,k)})).apply(this,arguments)}function Jc(w,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:createAuthUri",en(w,g))})).apply(this,arguments)}function fl(w,g){return va.apply(this,arguments)}function va(){return(va=(0,l.Z)(function*(w,g){const D={identifier:g,continueUri:je()?Ue():"http://localhost"},{signinMethods:k}=yield Jc((0,j.m9)(w),D);return k||[]})).apply(this,arguments)}function eu(w,g){return pl.apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(w,g){const v=(0,j.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&No(v.auth,k,g);const{email:B}=yield qc(v.auth,k);B!==w.email&&(yield w.reload())})).apply(this,arguments)}function ec(w,g,v){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};v&&No(D.auth,B,v);const{email:ae}=yield Dr(D.auth,B);ae!==w.email&&(yield w.reload())})).apply(this,arguments)}function hd(w,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,l.Z)(function*(w,g){return Gt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function fd(w,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,l.Z)(function*(w,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const D=(0,j.m9)(w),B={idToken:yield D.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},ae=yield Bn(D,hd(D.auth,B));D.displayName=ae.displayName||null,D.photoURL=ae.photoUrl||null;const Ie=D.providerData.find(({providerId:nt})=>"password"===nt);Ie&&(Ie.displayName=D.displayName,Ie.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ae)})).apply(this,arguments)}function tc(w,g){return ml((0,j.m9)(w),g,null)}function lf(w,g){return ml((0,j.m9)(w),null,g)}function ml(w,g,v){return di.apply(this,arguments)}function di(){return(di=(0,l.Z)(function*(w,g,v){const{auth:D}=w,B={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(B.email=g),v&&(B.password=v);const ae=yield Bn(w,rd(D,B));yield w._updateTokensIfNecessary(ae,!0)})).apply(this,arguments)}class xn{constructor(g,v,D={}){this.isNewUser=g,this.providerId=v,this.profile=D}}class pd extends xn{constructor(g,v,D,k){super(g,v,D),this.username=k}}class cf extends xn{constructor(g,v){super(g,"facebook.com",v)}}class md extends pd{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class tu extends xn{constructor(g,v){super(g,"google.com",v)}}class gd extends pd{constructor(g,v,D){super(g,"twitter.com",v,D)}}function nu(w){const{user:g,_tokenResponse:v}=w;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function ds(w){var g,v;if(!w)return null;const{providerId:D}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},B=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!D&&w?.idToken){const ae=null===(v=null===(g=pt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(ae)return new xn(B,"anonymous"!==ae&&"custom"!==ae?ae:null)}if(!D)return null;switch(D){case"facebook.com":return new cf(B,k);case"github.com":return new md(B,k);case"google.com":return new tu(B,k);case"twitter.com":return new gd(B,k,w.screenName||null);case"custom":case"anonymous":return new xn(B,null);default:return new xn(B,D,k)}}(v)}class Da{constructor(g,v){this.type=g,this.credential=v}static _fromIdtoken(g){return new Da("enroll",g)}static _fromMfaPendingCredential(g){return new Da("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,D;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Da._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(D=g.multiFactorSession)&&void 0!==D&&D.idToken)return Da._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ea{constructor(g,v,D){this.session=g,this.hints=v,this.signInResolver=D}static _fromError(g,v){const D=$n(g),k=v.customData._serverResponse,B=(k.mfaInfo||[]).map(Ie=>Yt._fromServerResponse(D,Ie));ce(k.mfaPendingCredential,D,"internal-error");const ae=Da._fromMfaPendingCredential(k.mfaPendingCredential);return new Ea(ae,B,function(){var Ie=(0,l.Z)(function*(nt){const Xe=yield nt._process(D,ae);delete k.mfaInfo,delete k.mfaPendingCredential;const qe=Object.assign(Object.assign({},k),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(v.operationType){case"signIn":const tn=yield xr._fromIdTokenResponse(D,v.operationType,qe);return yield D._updateCurrentUser(tn.user),tn;case"reauthenticate":return ce(v.user,D,"internal-error"),xr._forOperation(v.user,v.operationType,qe);default:lt(D,"internal-error")}});return function(nt){return Ie.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,l.Z)(function*(){return v.signInResolver(g)})()}}function ru(w,g){var v;const D=(0,j.m9)(w),k=g;return ce(g.customData.operationType,D,"argument-error"),ce(null===(v=k.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,D,"argument-error"),Ea._fromError(D,k)}function Ri(w,g){return Gt(w,"POST","/v2/accounts/mfaEnrollment:start",en(w,g))}class ff{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(D=>Yt._fromServerResponse(g.auth,D)))})}static _fromUser(g){return new ff(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Da._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,v){var D=this;return(0,l.Z)(function*(){const k=g,B=yield D.getSession(),ae=yield Bn(D.user,k._process(D.user.auth,B,v));return yield D.user._updateTokensIfNecessary(ae),D.user.reload()})()}unenroll(g){var v=this;return(0,l.Z)(function*(){var D;const k="string"==typeof g?g:g.uid,B=yield v.user.getIdToken(),ae=yield Bn(v.user,function Nv(w,g){return Gt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",en(w,g))}(v.user.auth,{idToken:B,mfaEnrollmentId:k}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Ie})=>Ie!==k),yield v.user._updateTokensIfNecessary(ae);try{yield v.user.reload()}catch(Ie){if("auth/user-token-expired"!==(null===(D=Ie)||void 0===D?void 0:D.code))throw Ie}})()}}const _l=new WeakMap;function su(w){const g=(0,j.m9)(w);return _l.has(g)||_l.set(g,ff._fromUser(g)),_l.get(g)}const vl="__sak";class Sa{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(vl,"1"),this.storage.removeItem(vl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ci=(()=>{class w extends Sa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,D)=>this.onStorageEvent(v,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pf(){const w=(0,j.z$)();return $(w)||qt(w)}()&&function Do(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gn(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const D of Object.keys(this.listeners)){const k=this.storage.getItem(D),B=this.localCache[D];k!==B&&v(D,B,k)}}onStorageEvent(v,D=!1){if(!v.key)return void this.forAllChangedKeys((Ie,nt,Xe)=>{this.notifyListeners(Ie,Xe)});const k=v.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ie=this.storage.getItem(k);if(v.newValue!==Ie)null!==v.newValue?this.storage.setItem(k,v.newValue):this.storage.removeItem(k);else if(this.localCache[k]===v.newValue&&!D)return}const B=()=>{const Ie=this.storage.getItem(k);!D&&this.localCache[k]===Ie||this.notifyListeners(k,Ie)},ae=this.storage.getItem(k);!function Ht(){return(0,j.w1)()&&10===document.documentMode}()||ae===v.newValue||v.newValue===v.oldValue?B():setTimeout(B,10)}notifyListeners(v,D){this.localCache[v]=D;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,D,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:D,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,D){var k=()=>super._set,B=this;return(0,l.Z)(function*(){yield k().call(B,v,D),B.localCache[v]=JSON.stringify(D)})()}_get(v){var D=()=>super._get,k=this;return(0,l.Z)(function*(){const B=yield D().call(k,v);return k.localCache[v]=JSON.stringify(B),B})()}_remove(v){var D=()=>super._remove,k=this;return(0,l.Z)(function*(){yield D().call(k,v),delete k.localCache[v]})()}}return w.type="LOCAL",w})(),xa=(()=>{class w extends Sa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,D){}_removeListener(v,D){}}return w.type="SESSION",w})();let _d=(()=>{class w{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const D=this.receivers.find(B=>B.isListeningto(v));if(D)return D;const k=new w(v);return this.receivers.push(k),k}isListeningto(v){return this.eventTarget===v}handleEvent(v){var D=this;return(0,l.Z)(function*(){const k=v,{eventId:B,eventType:ae,data:Ie}=k.data,nt=D.handlersMap[ae];if(!nt?.size)return;k.ports[0].postMessage({status:"ack",eventId:B,eventType:ae});const Xe=Array.from(nt).map(function(){var tn=(0,l.Z)(function*(Vs){return Vs(k.origin,Ie)});return function(Vs){return tn.apply(this,arguments)}}()),qe=yield function gf(w){return Promise.all(w.map(function(){var g=(0,l.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(D){return{fulfilled:!1,reason:D}}});return function(v){return g.apply(this,arguments)}}()))}(Xe);k.ports[0].postMessage({status:"done",eventId:B,eventType:ae,response:qe})})()}_subscribe(v,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(D)}_unsubscribe(v,D){this.handlersMap[v]&&D&&this.handlersMap[v].delete(D),(!D||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ao(w="",g=10){let v="";for(let D=0;D<g;D++)v+=Math.floor(10*Math.random());return w+v}class Jn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,D=50){var k=this;return(0,l.Z)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ae,Ie;return new Promise((nt,Xe)=>{const qe=ao("",20);B.port1.start();const tn=setTimeout(()=>{Xe(new Error("unsupported_event"))},D);Ie={messageChannel:B,onMessage(Vs){const fo=Vs;if(fo.data.eventId===qe)switch(fo.data.status){case"ack":clearTimeout(tn),ae=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(ae),nt(fo.data.response);break;default:clearTimeout(tn),clearTimeout(ae),Xe(new Error("invalid_response"))}}},k.handlers.add(Ie),B.port1.addEventListener("message",Ie.onMessage),k.target.postMessage({eventType:g,eventId:qe,data:v},[B.port2])}).finally(()=>{Ie&&k.removeMessageHandler(Ie)})})()}}function Cn(){return window}function fs(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function qr(){return(qr=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wl="firebaseLocalStorageDb",Cl="firebaseLocalStorage",sc="fbase_key";class lo{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Ia(w,g){return w.transaction([Cl],g?"readwrite":"readonly").objectStore(Cl)}function Wr(){const w=indexedDB.open(wl,1);return new Promise((g,v)=>{w.addEventListener("error",()=>{v(w.error)}),w.addEventListener("upgradeneeded",()=>{const D=w.result;try{D.createObjectStore(Cl,{keyPath:sc})}catch(k){v(k)}}),w.addEventListener("success",(0,l.Z)(function*(){const D=w.result;D.objectStoreNames.contains(Cl)?g(D):(D.close(),yield function Ho(){const w=indexedDB.deleteDatabase(wl);return new lo(w).toPromise()}(),g(yield Wr()))}))})}function pr(w,g,v){return co.apply(this,arguments)}function co(){return(co=(0,l.Z)(function*(w,g,v){const D=Ia(w,!0).put({[sc]:g,value:v});return new lo(D).toPromise()})).apply(this,arguments)}function Mn(){return(Mn=(0,l.Z)(function*(w,g){const v=Ia(w,!1).get(g),D=yield new lo(v).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Oi(w,g){const v=Ia(w,!0).delete(g);return new lo(v).toPromise()}const oc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,l.Z)(function*(){return v.db||(v.db=yield Wr()),v.db})()}_withRetries(v){var D=this;return(0,l.Z)(function*(){let k=0;for(;;)try{const B=yield D._openDb();return yield v(B)}catch(B){if(k++>3)throw B;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,l.Z)(function*(){return fs()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,l.Z)(function*(){v.receiver=_d._getInstance(function ar(){return fs()?self:null}()),v.receiver._subscribe("keyChanged",function(){var D=(0,l.Z)(function*(k,B){return{keyProcessed:(yield v._poll()).includes(B.key)}});return function(k,B){return D.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var D=(0,l.Z)(function*(k,B){return["keyChanged"]});return function(k,B){return D.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,l.Z)(function*(){var D,k;if(v.activeServiceWorker=yield function bl(){return qr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Jn(v.activeServiceWorker);const B=yield v.sender._send("ping",{},800);!B||(null===(D=B[0])||void 0===D?void 0:D.fulfilled)&&(null===(k=B[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var D=this;return(0,l.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function rc(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:v},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Wr();return yield pr(v,vl,"1"),yield Oi(v,vl),!0}catch{}return!1})()}_withPendingWrite(v){var D=this;return(0,l.Z)(function*(){D.pendingWrites++;try{yield v()}finally{D.pendingWrites--}})()}_set(v,D){var k=this;return(0,l.Z)(function*(){return k._withPendingWrite((0,l.Z)(function*(){return yield k._withRetries(B=>pr(B,v,D)),k.localCache[v]=D,k.notifyServiceWorker(v)}))})()}_get(v){var D=this;return(0,l.Z)(function*(){const k=yield D._withRetries(B=>function rt(w,g){return Mn.apply(this,arguments)}(B,v));return D.localCache[v]=k,k})()}_remove(v){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(k=>Oi(k,v)),delete D.localCache[v],D.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,l.Z)(function*(){const D=yield v._withRetries(ae=>{const Ie=Ia(ae,!1).getAll();return new lo(Ie).toPromise()});if(!D)return[];if(0!==v.pendingWrites)return[];const k=[],B=new Set;for(const{fbase_key:ae,value:Ie}of D)B.add(ae),JSON.stringify(v.localCache[ae])!==JSON.stringify(Ie)&&(v.notifyListeners(ae,Ie),k.push(ae));for(const ae of Object.keys(v.localCache))v.localCache[ae]&&!B.has(ae)&&(v.notifyListeners(ae,null),k.push(ae));return k})()}notifyListeners(v,D){this.localCache[v]=D;const k=this.listeners[v];if(k)for(const B of Array.from(k))B(D)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(D)}_removeListener(v,D){this.listeners[v]&&(this.listeners[v].delete(D),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Dl(w,g){return Gt(w,"POST","/v2/accounts/mfaSignIn:start",en(w,g))}function Di(){return(Di=(0,l.Z)(function*(w){return(yield Gt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Sl(w){return new Promise((g,v)=>{const D=document.createElement("script");D.setAttribute("src",w),D.onload=g,D.onerror=k=>{const B=Ne("internal-error");B.customData=k,v(B)},D.type="text/javascript",D.charset="UTF-8",function ou(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(D)})}function gs(w){return`__${w}${Math.floor(1e6*Math.random())}`}const $t=1e12;class au{constructor(g){this.auth=g,this.counter=$t,this._widgets=new Map}render(g,v){const D=this.counter;return this._widgets.set(D,new Lv(g,this.auth.name,v||{})),this.counter++,D}reset(g){var v;const D=g||$t;null===(v=this._widgets.get(D))||void 0===v||v.delete(),this._widgets.delete(D)}getResponse(g){var v;return(null===(v=this._widgets.get(g||$t))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,l.Z)(function*(){var D;return null===(D=v._widgets.get(g||$t))||void 0===D||D.execute(),""})()}}class Lv{constructor(g,v,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;ce(k,"argument-error",{appName:v}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function lg(w){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<w;D++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lu=gs("rcb"),cg=new et(3e4,6e4);class ac{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Cn().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return ce(function uo(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(v),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Cn().grecaptcha):new Promise((D,k)=>{const B=Cn().setTimeout(()=>{k(Ne(g,"network-request-failed"))},cg.get());Cn()[lu]=()=>{Cn().clearTimeout(B),delete Cn()[lu];const Ie=Cn().grecaptcha;if(!Ie)return void k(Ne(g,"internal-error"));const nt=Ie.render;Ie.render=(Xe,qe)=>{const tn=nt(Xe,qe);return this.counter++,tn},this.hostLanguage=v,D(Ie)},Sl(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:lu,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(B),k(Ne(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=Cn().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cu{load(g){return(0,l.Z)(function*(){return new au(g)})()}clearedOneInstance(){}}const Bv="recaptcha",Pi={theme:"light",type:"image"};class yf{constructor(g,v=Object.assign({},Pi),D){this.parameters=v,this.type=Bv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$n(D),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;ce(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cu:new ac,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),D=g.getAssertedRecaptcha();return D.getResponse(v)||new Promise(B=>{const ae=Ie=>{!Ie||(g.tokenChangeListeners.delete(ae),B(Ie))};g.tokenChangeListeners.add(ae),g.isInvisible&&D.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(D=>D(v)),"function"==typeof g)g(v);else if("string"==typeof g){const D=Cn()[g];"function"==typeof D&&D(v)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const D=document.createElement("div");v.appendChild(D),v=D}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){ce(je()&&!fs(),g.auth,"internal-error"),yield function lc(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function El(w){return Di.apply(this,arguments)}(g.auth);ce(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vd{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=Os._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Vv(w,g,v){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,l.Z)(function*(w,g,v){const D=$n(w),k=yield cc(D,g,(0,j.m9)(v));return new vd(k,B=>At(D,B))})).apply(this,arguments)}function Fs(w,g,v){return uu.apply(this,arguments)}function uu(){return(uu=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w);yield Ro(!1,D,"phone");const k=yield cc(D.auth,g,(0,j.m9)(v));return new vd(k,B=>sf(D,B))})).apply(this,arguments)}function du(w,g,v){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w),k=yield cc(D.auth,g,(0,j.m9)(v));return new vd(k,B=>dd(D,B))})).apply(this,arguments)}function cc(w,g,v){return yd.apply(this,arguments)}function yd(){return(yd=(0,l.Z)(function*(w,g,v){var D;const k=yield v.verify();try{let B;if(ce("string"==typeof k,w,"argument-error"),ce(v.type===Bv,w,"argument-error"),B="string"==typeof g?{phoneNumber:g}:g,"session"in B){const ae=B.session;if("phoneNumber"in B)return ce("enroll"===ae.type,w,"internal-error"),(yield Ri(w,{idToken:ae.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ce("signin"===ae.type,w,"internal-error");const Ie=(null===(D=B.multiFactorHint)||void 0===D?void 0:D.uid)||B.multiFactorUid;return ce(Ie,w,"missing-multi-factor-info"),(yield Dl(w,{mfaPendingCredential:ae.credential,mfaEnrollmentId:Ie,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ae}=yield ng(w,{phoneNumber:B.phoneNumber,recaptchaToken:k});return ae}}finally{v._reset()}})).apply(this,arguments)}function bf(w,g){return ug.apply(this,arguments)}function ug(){return(ug=(0,l.Z)(function*(w,g){yield Ps((0,j.m9)(w),g)})).apply(this,arguments)}let Hv=(()=>{class w{constructor(v){this.providerId=w.PROVIDER_ID,this.auth=$n(v)}verifyPhoneNumber(v,D){return cc(this.auth,v,(0,j.m9)(D))}static credential(v,D){return Os._fromVerification(v,D)}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:D,temporaryProof:k}=v;return D&&k?Os._fromTokenResponse(D,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Uo(w,g){return g?se(g):(ce(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Ki extends hr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Mo(g,this._buildIdpRequest())}_linkToIdToken(g,v){return Mo(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return Mo(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function uc(w){return so(w.auth,new Ki(w),w.bypassAuthState)}function xl(w){const{auth:g,user:v}=w;return ce(v,g,"internal-error"),ro(v,new Ki(w),w.bypassAuthState)}function wf(w){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,l.Z)(function*(w){const{auth:g,user:v}=w;return ce(v,g,"internal-error"),Ps(v,new Ki(w),w.bypassAuthState)})).apply(this,arguments)}class hu{constructor(g,v,D,k,B=!1){this.auth=g,this.resolver=D,this.user=k,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,l.Z)(function*(D,k){g.pendingPromise={resolve:D,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(B){g.reject(B)}});return function(D,k){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,l.Z)(function*(){const{urlResponse:D,sessionId:k,postBody:B,tenantId:ae,error:Ie,type:nt}=g;if(Ie)return void v.reject(Ie);const Xe={auth:v.auth,requestUri:D,sessionId:k,tenantId:ae||void 0,postBody:B||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(nt)(Xe))}catch(qe){v.reject(qe)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return uc;case"linkViaPopup":case"linkViaRedirect":return wf;case"reauthViaPopup":case"reauthViaRedirect":return xl;default:lt(this.auth,"internal-error")}}resolve(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bd=new et(2e3,1e4);function wd(w,g,v){return dc.apply(this,arguments)}function dc(){return(dc=(0,l.Z)(function*(w,g,v){const D=$n(w);Me(w,g,Sr);const k=Uo(D,v);return new Ef(D,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function Cd(w,g,v){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w);Me(D.auth,g,Sr);const k=Uo(D.auth,v);return new Ef(D.auth,"reauthViaPopup",g,k,D).executeNotNull()})).apply(this,arguments)}function Df(w,g,v){return hc.apply(this,arguments)}function hc(){return(hc=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w);Me(D.auth,g,Sr);const k=Uo(D.auth,v);return new Ef(D.auth,"linkViaPopup",g,k,D).executeNotNull()})).apply(this,arguments)}let Ef=(()=>{class w extends hu{constructor(v,D,k,B,ae){super(v,D,B,ae),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var v=this;return(0,l.Z)(function*(){const D=yield v.execute();return ce(D,v.auth,"internal-error"),D})()}onExecution(){var v=this;return(0,l.Z)(function*(){we(1===v.filter.length,"Popup operations only handle one event");const D=ao();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],D),v.authWindow.associatedEvent=D,v.resolver._originValidation(v.auth).catch(k=>{v.reject(k)}),v.resolver._isIframeWebStorageSupported(v.auth,k=>{k||v.reject(Ne(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const v=()=>{var D,k;this.pollId=null!==(k=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,bd.get())};v()}}return w.currentPopupAction=null,w})();const Yr=new Map;class pc extends hu{constructor(g,v,D=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,D),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,l.Z)(function*(){let D=Yr.get(v.auth._key());if(!D){try{const B=(yield function dg(w,g){return Dd.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;D=()=>Promise.resolve(B)}catch(k){D=()=>Promise.reject(k)}Yr.set(v.auth._key(),D)}return v.bypassAuthState||Yr.set(v.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,D=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(D,g);if("unknown"!==g.type){if(g.eventId){const k=yield D.auth._redirectUserForId(g.eventId);if(k)return D.user=k,v().call(D,g);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Dd(){return(Dd=(0,l.Z)(function*(w,g){const v=Wn(g),D=hg(w);if(!(yield D._isAvailable()))return!1;const k="true"===(yield D._get(v));return yield D._remove(v),k})).apply(this,arguments)}function ho(w,g){return fu.apply(this,arguments)}function fu(){return(fu=(0,l.Z)(function*(w,g){return hg(w)._set(Wn(g),"true")})).apply(this,arguments)}function _s(){Yr.clear()}function Aa(w,g){Yr.set(w._key(),g)}function hg(w){return se(w._redirectPersistence)}function Wn(w){return wn("pendingRedirect",w.config.apiKey,w.name)}function Sf(w,g,v){return function Ed(w,g,v){return mc.apply(this,arguments)}(w,g,v)}function mc(){return(mc=(0,l.Z)(function*(w,g,v){const D=$n(w);Me(w,g,Sr);const k=Uo(D,v);return yield ho(k,D),k._openRedirect(D,g,"signInViaRedirect")})).apply(this,arguments)}function x(w,g,v){return function M(w,g,v){return R.apply(this,arguments)}(w,g,v)}function R(){return(R=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w);Me(D.auth,g,Sr);const k=Uo(D.auth,v);yield ho(k,D.auth);const B=yield Lt(D);return k._openRedirect(D.auth,g,"reauthViaRedirect",B)})).apply(this,arguments)}function U(w,g,v){return function ie(w,g,v){return fe.apply(this,arguments)}(w,g,v)}function fe(){return(fe=(0,l.Z)(function*(w,g,v){const D=(0,j.m9)(w);Me(D.auth,g,Sr);const k=Uo(D.auth,v);yield Ro(!1,D,g.providerId),yield ho(k,D.auth);const B=yield Lt(D);return k._openRedirect(D.auth,g,"linkViaRedirect",B)})).apply(this,arguments)}function Le(w,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,l.Z)(function*(w,g){return yield $n(w)._initializationPromise,xt(w,g,!1)})).apply(this,arguments)}function xt(w,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,l.Z)(function*(w,g,v=!1){const D=$n(w),k=Uo(D,g),ae=yield new pc(D,k,v).execute();return ae&&!v&&(delete ae.user._redirectEventId,yield D._persistUserIfCurrent(ae.user),yield D._setRedirectUser(null,g)),ae})).apply(this,arguments)}function Lt(w){return Et.apply(this,arguments)}function Et(){return(Et=(0,l.Z)(function*(w){const g=ao(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class mr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(g,D)&&(v=!0,this.sendToConsumer(g,D),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ls(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vs(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var D;if(g.error&&!vs(g)){const k=(null===(D=g.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";v.onError(Ne(this.auth,k))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const D=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&D}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gc(g))}saveEventToCache(g){this.cachedEventUids.add(gc(g)),this.lastProcessedEventTime=Date.now()}}function gc(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function vs({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function xf(w){return pu.apply(this,arguments)}function pu(){return(pu=(0,l.Z)(function*(w,g={}){return Gt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Il=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ka=/^https?/;function mu(){return(mu=(0,l.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield xf(w);for(const v of g)try{if(_C(v))return}catch{}lt(w,"unauthorized-domain")})).apply(this,arguments)}function _C(w){const g=Ue(),{protocol:v,hostname:D}=new URL(g);if(w.startsWith("chrome-extension://")){const ae=new URL(w);return""===ae.hostname&&""===D?"chrome-extension:"===v&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&ae.hostname===D}if(!ka.test(v))return!1;if(Il.test(w))return D===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(D)}const vC=new et(3e4,6e4);function Sd(){const w=Cn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let v=0;v<w.CP.length;v++)w.CP[v]=null}let Mf=null;function jv(w){return Mf=Mf||function Uv(w){return new Promise((g,v)=>{var D,k,B;function ae(){Sd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Sd(),v(Ne(w,"network-request-failed"))},timeout:vC.get()})}if(null!==(k=null===(D=Cn().gapi)||void 0===D?void 0:D.iframes)&&void 0!==k&&k.Iframe)g(gapi.iframes.getContext());else{if(null===(B=Cn().gapi)||void 0===B||!B.load){const Ie=gs("iframefcb");return Cn()[Ie]=()=>{gapi.load?ae():v(Ne(w,"network-request-failed"))},Sl(`https://apis.google.com/js/api.js?onload=${Ie}`).catch(nt=>v(nt))}ae()}}).catch(g=>{throw Mf=null,g})}(w),Mf}const cT=new et(5e3,15e3),fg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zv(w){const g=w.config;ce(g.authDomain,w,"auth-domain-config-required");const v=g.emulator?An(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,D={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},k=yC.get(w.config.apiHost);k&&(D.eid=k);const B=w._getFrameworks();return B.length&&(D.fw=B.join(",")),`${v}?${(0,j.xO)(D).slice(1)}`}function xd(){return xd=(0,l.Z)(function*(w){const g=yield jv(w),v=Cn().gapi;return ce(v,w,"internal-error"),g.open({where:document.body,url:zv(w),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fg,dontclear:!0},D=>new Promise(function(){var k=(0,l.Z)(function*(B,ae){yield D.restyle({setHideOnLeave:!1});const Ie=Ne(w,"network-request-failed"),nt=Cn().setTimeout(()=>{ae(Ie)},cT.get());function Xe(){Cn().clearTimeout(nt),B(D)}D.ping(Xe).then(Xe,()=>{ae(Ie)})});return function(B,ae){return k.apply(this,arguments)}}()))}),xd.apply(this,arguments)}const gu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Af{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pg(w,g,v,D,k,B){ce(w.config.authDomain,w,"auth-domain-config-required"),ce(w.config.apiKey,w,"invalid-api-key");const ae={apiKey:w.config.apiKey,appName:w.name,authType:v,redirectUrl:D,v:N.SDK_VERSION,eventId:k};if(g instanceof Sr){g.setDefaultLanguage(w.languageCode),ae.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(ae.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,Xe]of Object.entries(B||{}))ae[nt]=Xe}if(g instanceof Io){const nt=g.getScopes().filter(Xe=>""!==Xe);nt.length>0&&(ae.scopes=nt.join(","))}w.tenantId&&(ae.tid=w.tenantId);const Ie=ae;for(const nt of Object.keys(Ie))void 0===Ie[nt]&&delete Ie[nt];return`${function CC({config:w}){return w.emulator?An(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(Ie).slice(1)}`}const mg="webStorageSupport",Yv=class DC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xa,this._completeRedirectFn=xt,this._overrideRedirectResult=Aa}_openPopup(g,v,D,k){var B=this;return(0,l.Z)(function*(){var ae;we(null===(ae=B.eventManagers[g._key()])||void 0===ae?void 0:ae.manager,"_initialize() not called before _openPopup()");const Ie=pg(g,v,D,Ue(),k);return function $v(w,g,v,D=500,k=600){const B=Math.max((window.screen.availHeight-k)/2,0).toString(),ae=Math.max((window.screen.availWidth-D)/2,0).toString();let Ie="";const nt=Object.assign(Object.assign({},gu),{width:D.toString(),height:k.toString(),top:B,left:ae}),Xe=(0,j.z$)().toLowerCase();v&&(Ie=Ee(Xe)?"_blank":v),Z(Xe)&&(g=g||"http://localhost",nt.scrollbars="yes");const qe=Object.entries(nt).reduce((Vs,[fo,ni])=>`${Vs}${fo}=${ni},`,"");if(function Sn(w=(0,j.z$)()){var g;return qt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Xe)&&"_self"!==Ie)return function qv(w,g){const v=document.createElement("a");v.href=w,v.target=g;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(D)}(g||"",Ie),new Af(null);const tn=window.open(g||"",Ie,qe);ce(tn,w,"popup-blocked");try{tn.focus()}catch{}return new Af(tn)}(g,Ie,ao())})()}_openRedirect(g,v,D,k){var B=this;return(0,l.Z)(function*(){return yield B._originValidation(g),function Ma(w){Cn().location.href=w}(pg(g,v,D,Ue(),k)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:k,promise:B}=this.eventManagers[v];return k?Promise.resolve(k):(we(B,"If manager is not set, promise should be"),B)}const D=this.initAndGetManager(g);return this.eventManagers[v]={promise:D},D.catch(()=>{delete this.eventManagers[v]}),D}initAndGetManager(g){var v=this;return(0,l.Z)(function*(){const D=yield function If(w){return xd.apply(this,arguments)}(g),k=new mr(g);return D.register("authEvent",B=>(ce(B?.authEvent,g,"invalid-auth-event"),{status:k.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:k},v.iframes[g._key()]=D,k})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(mg,{type:mg},k=>{var B;const ae=null===(B=k?.[0])||void 0===B?void 0:B[mg];void 0!==ae&&v(!!ae),lt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function _c(w){return mu.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return gn()||$()||qt()}};class Oa extends class Ra{constructor(g){this.factorId=g}_process(g,v,D){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,D);case"signin":return this._finalizeSignIn(g,v.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Oa(g)}_finalizeEnroll(g,v,D){return function hf(w,g){return Gt(w,"POST","/v2/accounts/mfaEnrollment:finalize",en(w,g))}(g,{idToken:v,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function ms(w,g){return Gt(w,"POST","/v2/accounts/mfaSignIn:finalize",en(w,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bs=(()=>{class w{constructor(){}static assertion(v){return Oa._fromCredential(v)}}return w.FACTOR_ID="phone",w})();var ei="@firebase/auth";class hi{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,l.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(D=>{var k;g((null===(k=D)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Md(w){(0,N._registerComponent)(new ye.wA("auth",(g,{options:v})=>{const D=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:B,authDomain:ae}=D.options;return((Ie,nt)=>{ce(B&&!B.includes(":"),"invalid-api-key",{appName:Ie.name}),ce(!ae?.includes(":"),"argument-error",{appName:Ie.name});const Xe={apiKey:B,authDomain:ae,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:As(w)},qe=new rl(Ie,nt,Xe);return function de(w,g){const v=g?.persistence||[],D=(Array.isArray(v)?v:[v]).map(se);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(D,g?.popupRedirectResolver)}(qe,v),qe})(D,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,D)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",g=>{const v=$n(g.getProvider("auth").getImmediate());return new hi(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(ei,"0.20.5",function jn(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(ei,"0.20.5","esm2017")}("Browser")},2090:(vt,Oe,V)=>{V.d(Oe,{$s:()=>sr,BH:()=>$e,DV:()=>Gt,Dv:()=>Yi,G6:()=>ce,GJ:()=>cn,L:()=>ge,LL:()=>Ue,Mn:()=>Me,Pz:()=>Jt,Sg:()=>Fe,UG:()=>De,UI:()=>eo,US:()=>ye,Wj:()=>ir,Yr:()=>Ke,ZB:()=>Y,ZR:()=>de,b$:()=>lt,cI:()=>an,d:()=>Ne,dS:()=>pt,eu:()=>we,g5:()=>N,gK:()=>bi,gQ:()=>as,h$:()=>oe,hl:()=>pe,hu:()=>j,jU:()=>ve,lb:()=>Rn,m9:()=>Nt,ne:()=>bt,p$:()=>W,pd:()=>Kn,r3:()=>en,ru:()=>at,tV:()=>Ce,uI:()=>ht,ug:()=>ut,vZ:()=>qi,w1:()=>Pe,w9:()=>pn,xO:()=>br,xb:()=>$i,z$:()=>xe,zI:()=>ne,zd:()=>wr});const j=function(ee,q){if(!ee)throw N(q)},N=function(ee){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ee)},ue=function(ee){const q=[];let G=0;for(let K=0;K<ee.length;K++){let X=ee.charCodeAt(K);X<128?q[G++]=X:X<2048?(q[G++]=X>>6|192,q[G++]=63&X|128):55296==(64512&X)&&K+1<ee.length&&56320==(64512&ee.charCodeAt(K+1))?(X=65536+((1023&X)<<10)+(1023&ee.charCodeAt(++K)),q[G++]=X>>18|240,q[G++]=X>>12&63|128,q[G++]=X>>6&63|128,q[G++]=63&X|128):(q[G++]=X>>12|224,q[G++]=X>>6&63|128,q[G++]=63&X|128)}return q},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,q){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let X=0;X<ee.length;X+=3){const Ae=ee[X],Ye=X+1<ee.length,Mt=Ye?ee[X+1]:0,bn=X+2<ee.length,wn=bn?ee[X+2]:0;let Z=(15&Mt)<<2|wn>>6,$=63&wn;bn||($=64,Ye||(Z=64)),K.push(G[Ae>>2],G[(3&Ae)<<4|Mt>>4],G[Z],G[$])}return K.join("")},encodeString(ee,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ee):this.encodeByteArray(ue(ee),q)},decodeString(ee,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ee):function(ee){const q=[];let G=0,K=0;for(;G<ee.length;){const X=ee[G++];if(X<128)q[K++]=String.fromCharCode(X);else if(X>191&&X<224){const Ae=ee[G++];q[K++]=String.fromCharCode((31&X)<<6|63&Ae)}else if(X>239&&X<365){const bn=((7&X)<<18|(63&ee[G++])<<12|(63&ee[G++])<<6|63&ee[G++])-65536;q[K++]=String.fromCharCode(55296+(bn>>10)),q[K++]=String.fromCharCode(56320+(1023&bn))}else{const Ae=ee[G++],Ye=ee[G++];q[K++]=String.fromCharCode((15&X)<<12|(63&Ae)<<6|63&Ye)}}return q.join("")}(this.decodeStringToByteArray(ee,q))},decodeStringToByteArray(ee,q){this.init_();const G=q?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let X=0;X<ee.length;){const Ae=G[ee.charAt(X++)],Mt=X<ee.length?G[ee.charAt(X)]:0;++X;const wn=X<ee.length?G[ee.charAt(X)]:64;++X;const J=X<ee.length?G[ee.charAt(X)]:64;if(++X,null==Ae||null==Mt||null==wn||null==J)throw Error();K.push(Ae<<2|Mt>>4),64!==wn&&(K.push(Mt<<4&240|wn>>2),64!==J&&K.push(wn<<6&192|J))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}},oe=function(ee){const q=ue(ee);return ye.encodeByteArray(q,!0)},ge=function(ee){return oe(ee).replace(/\./g,"")},Ce=function(ee){try{return ye.decodeString(ee,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function W(ee){return Y(void 0,ee)}function Y(ee,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return q}for(const G in q)!q.hasOwnProperty(G)||!re(G)||(ee[G]=Y(ee[G],q[G]));return ee}function re(ee){return"__proto__"!==ee}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,G)=>{this.resolve=q,this.reject=G})}wrapCallback(q){return(G,K)=>{G?this.reject(G):this.resolve(K),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(G):q(G,K))}}}function Fe(ee,q){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=q||"demo-project",X=ee.iat||0,Ae=ee.sub||ee.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:X,exp:X+3600,auth_time:X,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ye)),""].join(".")}function xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function at(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ne(){return xe().indexOf("Electron/")>=0}function Pe(){const ee=xe();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Me(){return xe().indexOf("MSAppHost/")>=0}function Ke(){return!1}function ce(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function we(){return new Promise((ee,q)=>{try{let G=!0;const K="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(K);X.onsuccess=()=>{X.result.close(),G||self.indexedDB.deleteDatabase(K),ee(!0)},X.onupgradeneeded=()=>{G=!1},X.onerror=()=>{var Ae;q((null===(Ae=X.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(G){q(G)}})}function ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class de extends Error{constructor(q,G,K){super(G),this.code=q,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor(q,G,K){this.service=q,this.serviceName=G,this.errors=K}create(q,...G){const K=G[0]||{},X=`${this.service}/${q}`,Ae=this.errors[q],Ye=Ae?function je(ee,q){return ee.replace(Ct,(G,K)=>{const X=q[K];return null!=X?String(X):`<${K}?>`})}(Ae,K):"Error";return new de(X,`${this.serviceName}: ${Ye} (${X}).`,K)}}const Ct=/\{\$([^}]+)}/g;function an(ee){return JSON.parse(ee)}function Jt(ee){return JSON.stringify(ee)}const et=function(ee){let q={},G={},K={},X="";try{const Ae=ee.split(".");q=an(Ce(Ae[0])||""),G=an(Ce(Ae[1])||""),X=Ae[2],K=G.d||{},delete G.d}catch{}return{header:q,claims:G,data:K,signature:X}},pn=function(ee){const G=et(ee).claims;return!!G&&"object"==typeof G&&G.hasOwnProperty("iat")},cn=function(ee){const q=et(ee).claims;return"object"==typeof q&&!0===q.admin};function en(ee,q){return Object.prototype.hasOwnProperty.call(ee,q)}function Gt(ee,q){if(Object.prototype.hasOwnProperty.call(ee,q))return ee[q]}function $i(ee){for(const q in ee)if(Object.prototype.hasOwnProperty.call(ee,q))return!1;return!0}function eo(ee,q,G){const K={};for(const X in ee)Object.prototype.hasOwnProperty.call(ee,X)&&(K[X]=q.call(G,ee[X],X,ee));return K}function qi(ee,q){if(ee===q)return!0;const G=Object.keys(ee),K=Object.keys(q);for(const X of G){if(!K.includes(X))return!1;const Ae=ee[X],Ye=q[X];if(Ln(Ae)&&Ln(Ye)){if(!qi(Ae,Ye))return!1}else if(Ae!==Ye)return!1}for(const X of K)if(!G.includes(X))return!1;return!0}function Ln(ee){return null!==ee&&"object"==typeof ee}function br(ee){const q=[];for(const[G,K]of Object.entries(ee))Array.isArray(K)?K.forEach(X=>{q.push(encodeURIComponent(G)+"="+encodeURIComponent(X))}):q.push(encodeURIComponent(G)+"="+encodeURIComponent(K));return q.length?"&"+q.join("&"):""}function wr(ee){const q={};return ee.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[X,Ae]=K.split("=");q[decodeURIComponent(X)]=decodeURIComponent(Ae)}}),q}function Kn(ee){const q=ee.indexOf("?");if(!q)return"";const G=ee.indexOf("#",q);return ee.substring(q,G>0?G:void 0)}class as{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,G){G||(G=0);const K=this.W_;if("string"==typeof q)for(let J=0;J<16;J++)K[J]=q.charCodeAt(G)<<24|q.charCodeAt(G+1)<<16|q.charCodeAt(G+2)<<8|q.charCodeAt(G+3),G+=4;else for(let J=0;J<16;J++)K[J]=q[G]<<24|q[G+1]<<16|q[G+2]<<8|q[G+3],G+=4;for(let J=16;J<80;J++){const Z=K[J-3]^K[J-8]^K[J-14]^K[J-16];K[J]=4294967295&(Z<<1|Z>>>31)}let wn,ai,X=this.chain_[0],Ae=this.chain_[1],Ye=this.chain_[2],Mt=this.chain_[3],bn=this.chain_[4];for(let J=0;J<80;J++){J<40?J<20?(wn=Mt^Ae&(Ye^Mt),ai=1518500249):(wn=Ae^Ye^Mt,ai=1859775393):J<60?(wn=Ae&Ye|Mt&(Ae|Ye),ai=2400959708):(wn=Ae^Ye^Mt,ai=3395469782);const Z=(X<<5|X>>>27)+wn+bn+ai+K[J]&4294967295;bn=Mt,Mt=Ye,Ye=4294967295&(Ae<<30|Ae>>>2),Ae=X,X=Z}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+Ae&4294967295,this.chain_[2]=this.chain_[2]+Ye&4294967295,this.chain_[3]=this.chain_[3]+Mt&4294967295,this.chain_[4]=this.chain_[4]+bn&4294967295}update(q,G){if(null==q)return;void 0===G&&(G=q.length);const K=G-this.blockSize;let X=0;const Ae=this.buf_;let Ye=this.inbuf_;for(;X<G;){if(0===Ye)for(;X<=K;)this.compress_(q,X),X+=this.blockSize;if("string"==typeof q){for(;X<G;)if(Ae[Ye]=q.charCodeAt(X),++Ye,++X,Ye===this.blockSize){this.compress_(Ae),Ye=0;break}}else for(;X<G;)if(Ae[Ye]=q[X],++Ye,++X,Ye===this.blockSize){this.compress_(Ae),Ye=0;break}}this.inbuf_=Ye,this.total_+=G}digest(){const q=[];let G=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&G,G/=256;this.compress_(this.buf_);let K=0;for(let X=0;X<5;X++)for(let Ae=24;Ae>=0;Ae-=8)q[K]=this.chain_[X]>>Ae&255,++K;return q}}function bt(ee,q){const G=new kn(ee,q);return G.subscribe.bind(G)}class kn{constructor(q,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{q(this)}).catch(K=>{this.error(K)})}next(q){this.forEachObserver(G=>{G.next(q)})}error(q){this.forEachObserver(G=>{G.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,G,K){let X;if(void 0===q&&void 0===G&&void 0===K)throw new Error("Missing Observer.");X=function mn(ee,q){if("object"!=typeof ee||null===ee)return!1;for(const G of q)if(G in ee&&"function"==typeof ee[G])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:G,complete:K},void 0===X.next&&(X.next=yi),void 0===X.error&&(X.error=yi),void 0===X.complete&&(X.complete=yi);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Ae}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,q)}sendOne(q,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{G(this.observers[q])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yi(){}const Yi=function(ee,q,G,K){let X;if(K<q?X="at least "+q:K>G&&(X=0===G?"none":"no more than "+G),X)throw new Error(ee+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+X+".")};function bi(ee,q){return`${ee} failed: ${q} argument `}function ir(ee,q,G,K){if((!K||G)&&"function"!=typeof G)throw new Error(bi(ee,q)+"must be a valid function.")}function Rn(ee,q,G,K){if((!K||G)&&("object"!=typeof G||null===G))throw new Error(bi(ee,q)+"must be a valid context object.")}const pt=function(ee){const q=[];let G=0;for(let K=0;K<ee.length;K++){let X=ee.charCodeAt(K);if(X>=55296&&X<=56319){const Ae=X-55296;K++,j(K<ee.length,"Surrogate pair missing trail surrogate."),X=65536+(Ae<<10)+(ee.charCodeAt(K)-56320)}X<128?q[G++]=X:X<2048?(q[G++]=X>>6|192,q[G++]=63&X|128):X<65536?(q[G++]=X>>12|224,q[G++]=X>>6&63|128,q[G++]=63&X|128):(q[G++]=X>>18|240,q[G++]=X>>12&63|128,q[G++]=X>>6&63|128,q[G++]=63&X|128)}return q},ut=function(ee){let q=0;for(let G=0;G<ee.length;G++){const K=ee.charCodeAt(G);K<128?q++:K<2048?q+=2:K>=55296&&K<=56319?(q+=4,G++):q+=3}return q};function sr(ee,q=1e3,G=2){const K=q*Math.pow(G,ee),X=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+X)}function Nt(ee){return ee&&ee._delegate?ee._delegate:ee}},4245:(vt,Oe,V)=>{var l=V(4650);let j=null;function N(){return j}const oe=new l.OlP("DocumentToken");let ge=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ce(){return(0,l.LFG)(Y)}()},providedIn:"platform"}),n})();const W=new l.OlP("Location Initialized");let Y=(()=>{class n extends ge{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=N().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){re()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){re()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function $e(){return new Y((0,l.LFG)(oe))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Fe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function xe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ht(n){return n&&"?"!==n[0]?"?"+n:n}let De=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(at)},providedIn:"root"}),n})();const ve=new l.OlP("appBaseHref");let at=(()=>{class n extends De{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ht(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+ht(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+ht(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge),l.LFG(ve,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lt=(()=>{class n extends De{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Fe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+ht(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+ht(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ge),l.LFG(ve,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=xe(Ke(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ht(i))}normalize(e){return n.stripTrailingSlash(function Me(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ke(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ht(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ht(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=ht,n.joinWithSlash=Fe,n.stripTrailingSlash=xe,n.\u0275fac=function(e){return new(e||n)(l.LFG(De))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Pe(){return new Ne((0,l.LFG)(De))}()},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Format=0]="Format",ne[ne.Standalone=1]="Standalone",ne))(),se=(()=>((se=se||{})[se.Narrow=0]="Narrow",se[se.Abbreviated=1]="Abbreviated",se[se.Wide=2]="Wide",se[se.Short=3]="Short",se))(),_e=(()=>((_e=_e||{})[_e.Short=0]="Short",_e[_e.Medium=1]="Medium",_e[_e.Long=2]="Long",_e[_e.Full=3]="Full",_e))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function pn(n,t){return kn((0,l.cg1)(n)[l.wAp.DateFormat],t)}function cn(n,t){return kn((0,l.cg1)(n)[l.wAp.TimeFormat],t)}function en(n,t){return kn((0,l.cg1)(n)[l.wAp.DateTimeFormat],t)}function Gt(n,t){const e=(0,l.cg1)(n),i=e[l.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===de.CurrencyDecimal)return e[l.wAp.NumberSymbols][de.Decimal];if(t===de.CurrencyGroup)return e[l.wAp.NumberSymbols][de.Group]}return i}function wr(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Wi(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const bi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,En={},ir=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rn=(()=>((Rn=Rn||{})[Rn.Short=0]="Short",Rn[Rn.ShortGMT=1]="ShortGMT",Rn[Rn.Long=2]="Long",Rn[Rn.Extended=3]="Extended",Rn))(),pt=(()=>((pt=pt||{})[pt.FullYear=0]="FullYear",pt[pt.Month=1]="Month",pt[pt.Date=2]="Date",pt[pt.Hours=3]="Hours",pt[pt.Minutes=4]="Minutes",pt[pt.Seconds=5]="Seconds",pt[pt.FractionalSeconds=6]="FractionalSeconds",pt[pt.Day=7]="Day",pt))(),ut=(()=>((ut=ut||{})[ut.DayPeriods=0]="DayPeriods",ut[ut.Days=1]="Days",ut[ut.Months=2]="Months",ut[ut.Eras=3]="Eras",ut))();function Bn(n,t,e,i){let r=function $(n){if(We(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,c=1]=n.split("-").map(d=>+d);return rr(r,s-1,c)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(bi))return function Ee(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-e,d=Number(n[5]||0)-i,f=Number(n[6]||0),_=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,c,d,f,_),t}(i)}const t=new Date(n);if(!We(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Vn(e,t)||t;let d,c=[];for(;t;){if(d=ir.exec(t),!d){c.push(t);break}{c=c.concat(d.slice(1));const b=c.pop();if(!b)break;t=b}}let f=r.getTimezoneOffset();i&&(f=ai(i,f),r=function Z(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function J(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(ai(t,r)-r))}(r,i,!0));let _="";return c.forEach(b=>{const E=function wn(n){if(bn[n])return bn[n];let t;switch(n){case"G":case"GG":case"GGG":t=Nt(ut.Eras,se.Abbreviated);break;case"GGGG":t=Nt(ut.Eras,se.Wide);break;case"GGGGG":t=Nt(ut.Eras,se.Narrow);break;case"y":t=Pt(pt.FullYear,1,0,!1,!0);break;case"yy":t=Pt(pt.FullYear,2,0,!0,!0);break;case"yyy":t=Pt(pt.FullYear,3,0,!1,!0);break;case"yyyy":t=Pt(pt.FullYear,4,0,!1,!0);break;case"Y":t=Mt(1);break;case"YY":t=Mt(2,!0);break;case"YYY":t=Mt(3);break;case"YYYY":t=Mt(4);break;case"M":case"L":t=Pt(pt.Month,1,1);break;case"MM":case"LL":t=Pt(pt.Month,2,1);break;case"MMM":t=Nt(ut.Months,se.Abbreviated);break;case"MMMM":t=Nt(ut.Months,se.Wide);break;case"MMMMM":t=Nt(ut.Months,se.Narrow);break;case"LLL":t=Nt(ut.Months,se.Abbreviated,ne.Standalone);break;case"LLLL":t=Nt(ut.Months,se.Wide,ne.Standalone);break;case"LLLLL":t=Nt(ut.Months,se.Narrow,ne.Standalone);break;case"w":t=Ye(1);break;case"ww":t=Ye(2);break;case"W":t=Ye(1,!0);break;case"d":t=Pt(pt.Date,1);break;case"dd":t=Pt(pt.Date,2);break;case"c":case"cc":t=Pt(pt.Day,1);break;case"ccc":t=Nt(ut.Days,se.Abbreviated,ne.Standalone);break;case"cccc":t=Nt(ut.Days,se.Wide,ne.Standalone);break;case"ccccc":t=Nt(ut.Days,se.Narrow,ne.Standalone);break;case"cccccc":t=Nt(ut.Days,se.Short,ne.Standalone);break;case"E":case"EE":case"EEE":t=Nt(ut.Days,se.Abbreviated);break;case"EEEE":t=Nt(ut.Days,se.Wide);break;case"EEEEE":t=Nt(ut.Days,se.Narrow);break;case"EEEEEE":t=Nt(ut.Days,se.Short);break;case"a":case"aa":case"aaa":t=Nt(ut.DayPeriods,se.Abbreviated);break;case"aaaa":t=Nt(ut.DayPeriods,se.Wide);break;case"aaaaa":t=Nt(ut.DayPeriods,se.Narrow);break;case"b":case"bb":case"bbb":t=Nt(ut.DayPeriods,se.Abbreviated,ne.Standalone,!0);break;case"bbbb":t=Nt(ut.DayPeriods,se.Wide,ne.Standalone,!0);break;case"bbbbb":t=Nt(ut.DayPeriods,se.Narrow,ne.Standalone,!0);break;case"B":case"BB":case"BBB":t=Nt(ut.DayPeriods,se.Abbreviated,ne.Format,!0);break;case"BBBB":t=Nt(ut.DayPeriods,se.Wide,ne.Format,!0);break;case"BBBBB":t=Nt(ut.DayPeriods,se.Narrow,ne.Format,!0);break;case"h":t=Pt(pt.Hours,1,-12);break;case"hh":t=Pt(pt.Hours,2,-12);break;case"H":t=Pt(pt.Hours,1);break;case"HH":t=Pt(pt.Hours,2);break;case"m":t=Pt(pt.Minutes,1);break;case"mm":t=Pt(pt.Minutes,2);break;case"s":t=Pt(pt.Seconds,1);break;case"ss":t=Pt(pt.Seconds,2);break;case"S":t=Pt(pt.FractionalSeconds,1);break;case"SS":t=Pt(pt.FractionalSeconds,2);break;case"SSS":t=Pt(pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=q(Rn.Short);break;case"ZZZZZ":t=q(Rn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=q(Rn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=q(Rn.Long);break;default:return null}return bn[n]=t,t}(b);_+=E?E(r,e,f):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_}function rr(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Vn(n,t){const e=function je(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(En[e]=En[e]||{},En[e][t])return En[e][t];let i="";switch(t){case"shortDate":i=pn(n,_e.Short);break;case"mediumDate":i=pn(n,_e.Medium);break;case"longDate":i=pn(n,_e.Long);break;case"fullDate":i=pn(n,_e.Full);break;case"shortTime":i=cn(n,_e.Short);break;case"mediumTime":i=cn(n,_e.Medium);break;case"longTime":i=cn(n,_e.Long);break;case"fullTime":i=cn(n,_e.Full);break;case"short":const r=Vn(n,"shortTime"),s=Vn(n,"shortDate");i=zt(en(n,_e.Short),[r,s]);break;case"medium":const c=Vn(n,"mediumTime"),d=Vn(n,"mediumDate");i=zt(en(n,_e.Medium),[c,d]);break;case"long":const f=Vn(n,"longTime"),_=Vn(n,"longDate");i=zt(en(n,_e.Long),[f,_]);break;case"full":const b=Vn(n,"fullTime"),E=Vn(n,"fullDate");i=zt(en(n,_e.Full),[b,E])}return i&&(En[e][t]=i),i}function zt(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Hn(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.slice(c.length-t)),s+c}function Pt(n,t,e=0,i=!1,r=!1){return function(s,c){let d=function Cr(n,t){switch(n){case pt.FullYear:return t.getFullYear();case pt.Month:return t.getMonth();case pt.Date:return t.getDate();case pt.Hours:return t.getHours();case pt.Minutes:return t.getMinutes();case pt.Seconds:return t.getSeconds();case pt.FractionalSeconds:return t.getMilliseconds();case pt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||d>-e)&&(d+=e),n===pt.Hours)0===d&&-12===e&&(d=12);else if(n===pt.FractionalSeconds)return function sr(n,t){return Hn(n,3).substring(0,t)}(d,t);const f=Gt(c,de.MinusSign);return Hn(d,t,f,i,r)}}function Nt(n,t,e=ne.Format,i=!1){return function(r,s){return function ee(n,t,e,i,r,s){switch(e){case ut.Months:return function Jt(n,t,e){const i=(0,l.cg1)(n),s=kn([i[l.wAp.MonthsFormat],i[l.wAp.MonthsStandalone]],t);return kn(s,e)}(t,r,i)[n.getMonth()];case ut.Days:return function an(n,t,e){const i=(0,l.cg1)(n),s=kn([i[l.wAp.DaysFormat],i[l.wAp.DaysStandalone]],t);return kn(s,e)}(t,r,i)[n.getDay()];case ut.DayPeriods:const c=n.getHours(),d=n.getMinutes();if(s){const _=function Kn(n){const t=(0,l.cg1)(n);return wr(t),(t[l.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?Wi(i):[Wi(i[0]),Wi(i[1])])}(t),b=function as(n,t,e){const i=(0,l.cg1)(n);wr(i);const s=kn([i[l.wAp.ExtraData][0],i[l.wAp.ExtraData][1]],t)||[];return kn(s,e)||[]}(t,r,i),E=_.findIndex(T=>{if(Array.isArray(T)){const[P,F]=T,z=c>=P.hours&&d>=P.minutes,te=c<F.hours||c===F.hours&&d<F.minutes;if(P.hours<F.hours){if(z&&te)return!0}else if(z||te)return!0}else if(T.hours===c&&T.minutes===d)return!0;return!1});if(-1!==E)return b[E]}return function Ct(n,t,e){const i=(0,l.cg1)(n),s=kn([i[l.wAp.DayPeriodsFormat],i[l.wAp.DayPeriodsStandalone]],t);return kn(s,e)}(t,r,i)[c<12?0:1];case ut.Eras:return function et(n,t){return kn((0,l.cg1)(n)[l.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function q(n){return function(t,e,i){const r=-1*i,s=Gt(e,de.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Rn.Short:return(r>=0?"+":"")+Hn(c,2,s)+Hn(Math.abs(r%60),2,s);case Rn.ShortGMT:return"GMT"+(r>=0?"+":"")+Hn(c,1,s);case Rn.Long:return"GMT"+(r>=0?"+":"")+Hn(c,2,s)+":"+Hn(Math.abs(r%60),2,s);case Rn.Extended:return 0===i?"Z":(r>=0?"+":"")+Hn(c,2,s)+":"+Hn(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ae(n){return rr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Ye(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();r=1+Math.floor((c+s)/7)}else{const s=Ae(e),c=function X(n){const t=rr(n,0,1).getDay();return rr(n,0,1+(t<=4?4:11)-t)}(s.getFullYear()),d=s.getTime()-c.getTime();r=1+Math.round(d/6048e5)}return Hn(r,n,Gt(i,de.MinusSign))}}function Mt(n,t=!1){return function(e,i){return Hn(Ae(e).getFullYear(),n,Gt(i,de.MinusSign),t)}}const bn={};function ai(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function We(n){return n instanceof Date&&!isNaN(n.valueOf())}class to{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ur=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new to(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),ci(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{ci(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ci(n,t){n.context.$implicit=t.item}let Un=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new jr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){no("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){no("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class jr{constructor(){this.$implicit=null,this.ngIf=null}}function no(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}class sl{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ks=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Dr=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new sl(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(ks,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})();const sg=new l.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ua=(()=>{class n{constructor(e,i){this.locale=e,this.defaultTimezone=i}transform(e,i="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return Bn(e,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(c){throw function Er(n,t){return new l.vHH(2100,!1)}()}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.soG,16),l.Y36(sg,24))},n.\u0275pipe=l.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),wi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const qn="browser";function Zc(n){return"server"===n}let cl=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new fr((0,l.LFG)(oe),window)}),n})();class fr{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ko(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=io(this.window.history)||io(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function io(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cs extends class Ro extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){j||(j=n)}(new cs)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function us(){return ro=ro||document.querySelector("base"),ro?ro.getAttribute("href"):null}();return null==e?null:function Oo(n){so=so||document.createElement("a"),so.setAttribute("href",n);const t=so.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){ro=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function rd(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let so,ro=null;const At=new l.OlP("TRANSITION_ID"),sf=[{provide:l.ip1,useFactory:function Qn(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=N(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[At,oe,l.zs3],multi:!0}];let dd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const oo=new l.OlP("EventManagerPlugins");let pa=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ma{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=N().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Xl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends Xl{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Yt),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Yt))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Yt(n){N().remove(n)}const Po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},No=/%COMP%/g;function dl(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?dl(n,r,e):(r=r.replace(No,n),e.push(r))}return e}function _a(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let zr=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ki(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new $r(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new af(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=dl(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pa),l.LFG(Re),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class ki{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Po[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Bo(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Bo(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Po[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Po[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,_a(i)):this.eventManager.addEventListener(t,e,_a(i))}}function Bo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $r extends ki{constructor(t,e,i,r){super(t),this.component=i;const s=dl(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Kc(n){return"_ngcontent-%COMP%".replace(No,n)}(r+"-"+i.id),this.hostAttr=function Lo(n){return"_nghost-%COMP%".replace(No,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class af extends ki{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=dl(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Xc=(()=>{class n extends ma{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Jl=["alt","control","meta","shift"],hl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},va={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eu=(()=>{class n extends ma{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(Jl.forEach(f=>{const _=i.indexOf(f);_>-1&&(i.splice(_,1),c+=f+".")}),c+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(e){let i="",r=function pl(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&fl.hasOwnProperty(t)&&(t=fl[t]))}return hl[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Jl.forEach(s=>{s!=r&&(0,va[s])(e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const lf=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:qn},{provide:l.g9A,useValue:function ba(){cs.makeCurrent()},multi:!0},{provide:oe,useFactory:function wa(){return(0,l.RDi)(document),document},deps:[]}]),ml=new l.OlP(""),di=[{provide:l.rWj,useClass:class ul{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(f){c=c||f,s--,0==s&&i(c)};r.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?N().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],ds=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function fd(){return new l.qLn},deps:[]},{provide:oo,useClass:Xc,multi:!0,deps:[oe,l.R0b,l.Lbi]},{provide:oo,useClass:eu,multi:!0,deps:[oe]},{provide:zr,useClass:zr,deps:[pa,Re,l.AFp]},{provide:l.FYo,useExisting:zr},{provide:Xl,useExisting:Re},{provide:Re,useClass:Re,deps:[oe]},{provide:pa,useClass:pa,deps:[oo,l.R0b]},{provide:class Bi{},useClass:dd,deps:[]},[]];let xn=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:At,useExisting:l.AFp},sf]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ml,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...ds,...di],imports:[wi,l.hGG]}),n})(),gd=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function tu(){return new gd((0,l.LFG)(oe))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let ao,ic=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):l.LFG(gf),i},providedIn:"root"}),n})(),gf=(()=>{class n extends ic{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,l.JVY)(e)}bypassSecurityTrustStyle(e){return(0,l.L6k)(e)}bypassSecurityTrustScript(e){return(0,l.eBb)(e)}bypassSecurityTrustUrl(e){return(0,l.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,l.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function xa(n){return new gf(n.get(oe))}(l.LFG(l.zs3)),i},providedIn:"root"}),n})();try{ao=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ao=!1}let Ma,Jn=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function xr(n){return n===qn}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ao)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fs=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function bl(){if(Ma)return Ma;if("object"!=typeof document||!document)return Ma=new Set(fs),Ma;let n=document.createElement("input");return Ma=new Set(fs.filter(t=>(n.setAttribute("type",t),n.type===t))),Ma}let qr,ps,lo;function ar(n){return function rc(){if(null==qr&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>qr=!0}))}finally{qr=qr||!1}return qr}()?n:!!n.capture}function Cl(){if(null==ps){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ps=!1,ps;if("scrollBehavior"in document.documentElement.style)ps=!0;else{const n=Element.prototype.scrollTo;ps=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ps}function Ho(n){if(function Ia(){if(null==lo){const n=typeof document<"u"?document.head:null;lo=!(!n||!n.createShadowRoot&&!n.attachShadow)}return lo}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Wr(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function pr(n){return n.composedPath?n.composedPath()[0]:n.target}function co(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var rt=V(7579),Mn=V(727);class Oi extends rt.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var Ns=V(3269),ln=V(8996);function ct(...n){const t=(0,Ns.yG)(n);return(0,ln.D)(n,t)}function Bs(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var ei=V(8505),Pa=V(4986),hi=V(4482),jn=V(5403);function Md(n,t=Pa.z){return(0,hi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function f(){const _=c+n,b=t.now();if(b<_)return r=this.schedule(void 0,_-b),void i.add(r);d()}e.subscribe((0,jn.x)(i,_=>{s=_,c=t.now(),r||(r=t.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function ti(n,t){return(0,hi.e)((e,i)=>{let r=0;e.subscribe((0,jn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var w=V(4004),g=V(515);function v(n){return n<=0?()=>g.E:(0,hi.e)((t,e)=>{let i=0;t.subscribe((0,jn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function D(n){return ti((t,e)=>n<=e)}var k=V(4671);function B(n,t=k.y){return n=n??ae,(0,hi.e)((e,i)=>{let r,s=!0;e.subscribe((0,jn.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function ae(n,t){return n===t}var Ie=V(8421),nt=V(5032);function Xe(n){return(0,hi.e)((t,e)=>{(0,Ie.Xf)(n).subscribe((0,jn.x)(e,()=>e.complete(),nt.Z)),!e.closed&&t.subscribe(e)})}function qe(n){return null!=n&&"false"!=`${n}`}function tn(n,t=0){return function Vs(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function fo(n){return Array.isArray(n)?n:[n]}function ni(n){return null==n?"":"string"==typeof n?n:`${n}px`}function fi(n){return n instanceof l.SBq?n.nativeElement:n}var pi=V(9751);let _u=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gg=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=fi(e);return new pi.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new rt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(_u))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kf=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=qe(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=tn(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Md(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(gg),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Tl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[_u]}),n})();const{isArray:Rf}=Array,{getPrototypeOf:_g,prototype:Zv,keys:Of}=Object;function Pf(n){if(1===n.length){const t=n[0];if(Rf(t))return{args:t,keys:null};if(function vg(n){return n&&"object"==typeof n&&_g(n)===Zv}(t)){const e=Of(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:EC}=Array;function Qv(n){return(0,w.U)(t=>function Kv(n,t){return EC(t)?n(...t):n(t)}(n,t))}function Ei(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var hT=V(9672);function Xv(...n){const t=(0,Ns.yG)(n),e=(0,Ns.jO)(n),{args:i,keys:r}=Pf(n);if(0===i.length)return(0,ln.D)([],t);const s=new pi.y(function Jv(n,t,e=k.y){return i=>{ey(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let f=0;f<r;f++)ey(t,()=>{const _=(0,ln.D)(n[f],t);let b=!1;_.subscribe((0,jn.x)(i,E=>{s[f]=E,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>Ei(r,c):k.y));return e?s.pipe(Qv(e)):s}function ey(n,t,e){n?(0,hT.f)(e,n,t):t()}var Nf=V(8189);function Ff(...n){return function fT(){return(0,Nf.J)(1)}()((0,ln.D)(n,(0,Ns.yG)(n)))}function ys(...n){const t=(0,Ns.yG)(n);return(0,hi.e)((e,i)=>{(t?Ff(n,e,t):Ff(n,e)).subscribe(i)})}const pT=new Set;let Lf,Bf=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):SC}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function ty(n){if(!pT.has(n))try{Lf||(Lf=document.createElement("style"),Lf.setAttribute("type","text/css"),document.head.appendChild(Lf)),Lf.sheet&&(Lf.sheet.insertRule(`@media ${n} {body{ }}`,0),pT.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SC(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let xC=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new rt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ny(fo(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Xv(ny(fo(e)).map(c=>this._registerQuery(c).observable));return s=Ff(s.pipe(v(1)),s.pipe(D(1),Md(0))),s.pipe((0,w.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:_})=>{d.matches=d.matches||f,d.breakpoints[_]=f}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new pi.y(c=>{const d=f=>this._zone.run(()=>c.next(f));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(ys(i),(0,w.U)(({matches:c})=>({query:e,matches:c})),Xe(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Bf),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ny(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let Na=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function oy(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function AC(n){try{return n.frameElement}catch{return null}}(function CT(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===OC(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=OC(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function wT(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function ay(n){return!function yT(n){return function Ad(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function vT(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function kC(n){return function bT(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||RC(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RC(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function OC(n){if(!RC(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class PC{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(v(1)).subscribe(t)}}let ly=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new PC(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Na),l.LFG(l.R0b),l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vu(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function cy(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const tB=new l.OlP("cdk-input-modality-detector-options"),NC={ignoreKeys:[18,17,224,91,16]},kd=ar({passive:!0,capture:!0});let ET=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Oi(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(d=>d===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=pr(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(vu(c)?"keyboard":"mouse"),this._mostRecentTarget=pr(c))},this._onTouchstart=c=>{cy(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=pr(c))},this._options={...NC,...s},this.modalityDetected=this._modality.pipe(D(1)),this.modalityChanged=this.modalityDetected.pipe(B()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,kd),r.addEventListener("mousedown",this._onMousedown,kd),r.addEventListener("touchstart",this._onTouchstart,kd)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,kd),document.removeEventListener("mousedown",this._onMousedown,kd),document.removeEventListener("touchstart",this._onTouchstart,kd))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jn),l.LFG(l.R0b),l.LFG(oe),l.LFG(tB,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uy=new l.OlP("cdk-focus-monitor-default-options"),dy=ar({passive:!0,capture:!0});let Al=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new rt.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=pr(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=fi(e);if(!this._platform.isBrowser||1!==r.nodeType)return ct(null);const s=Ho(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new rt.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=fi(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=fi(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,f])=>this._originChanged(d,i,f)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=pr(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,dy),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,dy)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xe(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,dy),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,dy),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(Jn),l.LFG(ET),l.LFG(oe,8),l.LFG(uy,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xT="cdk-high-contrast-black-on-white",MT="cdk-high-contrast-white-on-black",HC="cdk-high-contrast-active";let IT=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,l.f3M)(xC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(HC,xT,MT),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(HC,xT):2===i&&e.add(HC,MT)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jn),l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hf=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(IT))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Tl]}),n})(),jC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();var Hi=V(5577),hy=V(1144),po=V(576);const fy=["addListener","removeListener"],Uf=["addEventListener","removeEventListener"],kT=["on","off"];function yc(n,t,e,i){if((0,po.m)(e)&&(i=e,e=void 0),i)return yc(n,t,e).pipe(Qv(i));const[r,s]=function OT(n){return(0,po.m)(n.addEventListener)&&(0,po.m)(n.removeEventListener)}(n)?Uf.map(c=>d=>n[c](t,d,e)):function zC(n){return(0,po.m)(n.addListener)&&(0,po.m)(n.removeListener)}(n)?fy.map(GC(n,t)):function RT(n){return(0,po.m)(n.on)&&(0,po.m)(n.off)}(n)?kT.map(GC(n,t)):[];if(!r&&(0,hy.z)(n))return(0,Hi.z)(c=>yc(c,t,e))((0,Ie.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new pi.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function GC(n,t){return e=>i=>n[e](t,i)}var $C=V(4408);const jf={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=jf;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Mn.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=jf;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=jf;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var qC=V(7565);const WC=new class PT extends qC.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class py extends $C.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=jf.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(jf.cancelAnimationFrame(e),t._scheduled=void 0)}});let my,FT=1;const Qi={};function Cg(n){return n in Qi&&(delete Qi[n],!0)}const YC={setImmediate(n){const t=FT++;return Qi[t]=!0,my||(my=Promise.resolve()),my.then(()=>Cg(t)&&n()),t},clearImmediate(n){Cg(n)}},{setImmediate:Ir,clearImmediate:Gf}=YC,Rd={setImmediate(...n){const{delegate:t}=Rd;return(t?.setImmediate||Ir)(...n)},clearImmediate(n){const{delegate:t}=Rd;return(t?.clearImmediate||Gf)(n)},delegate:void 0};new class BT extends qC.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class LT extends $C.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Rd.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Rd.clearImmediate(e),t._scheduled=void 0)}});var VT=V(3532);function gy(n=0,t,e=Pa.P){let i=-1;return null!=t&&((0,VT.K)(t)?e=t:i=t),new pi.y(r=>{let s=function XC(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function _y(n,t=Pa.z){return function QC(n){return(0,hi.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}c&&e.complete()},f=()=>{s=null,c&&e.complete()};t.subscribe((0,jn.x)(e,_=>{i=!0,r=_,s||(0,Ie.Xf)(n(_)).subscribe(s=(0,jn.x)(e,d,f))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>gy(n,t))}const HT=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function UT(){return(0,l.f3M)(oe)}}),jT=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let bs=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new l.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function GT(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?jT.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(HT,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Od=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),yy=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new rt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new pi.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(_y(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(ti(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=fi(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>yc(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(Jn),l.LFG(oe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pd=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new rt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(_y(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jn),l.LFG(l.R0b),l.LFG(oe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Eg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Od,jo,Od,jo]}),n})();var Zr=V(6451);function wy(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Nd(n,t){const e=t?"":"none";wy(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function iD(n,t,e){wy(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Sg(n,t){return t&&"none"!=t?n+" "+t:n}function rD(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function $f(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function xg(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function qf(n,t,e){const{top:i,bottom:r,left:s,right:c}=n;return e>=i&&e<=r&&t>=s&&t<=c}function Wf(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function oD(n,t,e,i){const{top:r,right:s,bottom:c,left:d,width:f,height:_}=n,b=f*t,E=_*t;return i>r-E&&i<c+E&&e>d-b&&e<s+b}class Cy{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:xg(e)})})}handleScroll(t){const e=pr(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let s,c;if(e===this._document){const _=this.getViewportScrollPosition();s=_.top,c=_.left}else s=e.scrollTop,c=e.scrollLeft;const d=r.top-s,f=r.left-c;return this.positions.forEach((_,b)=>{_.clientRect&&e!==b&&e.contains(b)&&Wf(_.clientRect,d,f)}),r.top=s,r.left=c,{top:d,left:f}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Dy(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?lD(n,t):("input"===i||"select"===i||"textarea"===i)&&Ey(n,t),wc("canvas",n,t,lD),wc("input, textarea, select",n,t,Ey),t}function wc(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const s=e.querySelectorAll(n);for(let c=0;c<r.length;c++)i(r[c],s[c])}}let aD=0;function Ey(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${aD++}`)}function lD(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const WT=ar({passive:!0}),yu=ar({passive:!1}),Mg=new Set(["position"]);class cD{constructor(t,e,i,r,s,c){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=c,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new rt.x,this._pointerMoveSubscription=Mn.w0.EMPTY,this._pointerUpSubscription=Mn.w0.EMPTY,this._scrollSubscription=Mn.w0.EMPTY,this._resizeSubscription=Mn.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new rt.x,this.started=new rt.x,this.released=new rt.x,this.ended=new rt.x,this.entered=new rt.x,this.exited=new rt.x,this.dropped=new rt.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const f=this._getTargetHandle(d);f&&!this._disabledHandles.has(f)&&!this.disabled&&this._initializeDragSequence(f,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const f=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(f.x-this._pickupPositionOnPage.x)+Math.abs(f.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const P=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),F=this._dropContainer;if(!P)return void this._endDragSequence(d);(!F||!F.isDragging()&&!F.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const _=this._getConstrainedPointerPosition(f);if(this._hasMoved=!0,this._lastKnownPointerPosition=f,this._updatePointerDirectionDelta(_),this._dropContainer)this._updateActiveDropContainer(_,f);else{const b=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,E=this._activeTransform;E.x=_.x-b.x+this._passiveTransform.x,E.y=_.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(E.x,E.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:_,event:d,distance:this._getDragDistance(_),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const f=this._getTargetHandle(d);f&&!this._disabledHandles.has(f)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Cy(i),c.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=qe(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Nd(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>fi(i)),this._handles.forEach(i=>Nd(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=fi(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,yu),e.addEventListener("touchstart",this._pointerDown,WT),e.addEventListener("dragstart",this._nativeDragStart,yu)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?fi(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Nd(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Nd(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Fd(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),c=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();r.insertBefore(c,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),iD(i,!1,Mg),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,d).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=Fd(e),s=!r&&0!==e.button,c=this._rootElement,d=pr(e),f=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),_=r?cy(e):vu(e);if(d&&d.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||f||_)return;if(this._handles.length){const T=c.style;this._rootElementTapHighlight=T.webkitTapHighlightColor||"",T.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(T=>this._updateOnScroll(T)),this._boundaryElement&&(this._boundaryRect=xg(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const E=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:E.x,y:E.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){iD(this._rootElement,!0,Mg),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),c=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,c,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const s=t.matchSize?this._initialClientRect:null,c=t.viewContainer.createEmbeddedView(i,t.context);c.detectChanges(),r=Zf(c,this._document),this._previewRef=c,t.matchSize?Kf(r,s):r.style.transform=Yf(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Dy(this._rootElement),Kf(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return wy(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Mg),Nd(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function sD(n){const t=getComputedStyle(n),e=$f(t,"transition-property"),i=e.find(d=>"transform"===d||"all"===d);if(!i)return 0;const r=e.indexOf(i),s=$f(t,"transition-duration"),c=$f(t,"transition-delay");return rD(s[r])+rD(c[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=c=>{(!c||pr(c)===this._preview&&"transform"===c.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=Zf(this._placeholderRef,this._document)):i=Dy(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,c=Fd(i)?i.targetTouches[0]:i,d=this._getViewportScrollPosition();return{x:s.left-t.left+(c.pageX-s.left-d.left),y:s.top-t.top+(c.pageY-s.top-d.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=Fd(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const c=this._ownerSVGElement.getScreenCTM();if(c){const d=this._ownerSVGElement.createSVGPoint();return d.x=r,d.y=s,d.matrixTransform(c.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:c}=this._pickupPositionInElement,d=this._boundaryRect,{width:f,height:_}=this._getPreviewRect(),b=d.top+c,E=d.bottom-(_-c);i=Ig(i,d.left+s,d.right-(f-s)),r=Ig(r,b,E)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,c=Math.abs(e-s.x),d=Math.abs(i-s.y);return c>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),d>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Nd(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,yu),t.removeEventListener("touchstart",this._pointerDown,WT),t.removeEventListener("dragstart",this._nativeDragStart,yu)}_applyRootElementTransform(t,e){const i=Yf(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=Sg(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=Yf(t,e);this._preview.style.transform=Sg(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const s=r.left-i.left,c=i.right-r.right,d=r.top-i.top,f=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),c>0&&(t-=c)):t=0,r.height>i.height?(d>0&&(e+=d),f>0&&(e-=f)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Fd(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=pr(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Wf(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Ho(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return fi(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function Yf(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function Ig(n,t,e){return Math.max(t,Math.min(e,n))}function Fd(n){return"t"===n.type[0]}function Zf(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function Kf(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=Yf(t.left,t.top)}function bu(n,t){return Math.max(0,Math.min(t,n))}class Qf{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const s=this._itemPositions,c=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===c&&s.length>0)return null;const d="horizontal"===this.orientation,f=s.findIndex(te=>te.drag===t),_=s[c],E=_.clientRect,T=f>c?1:-1,P=this._getItemOffsetPx(s[f].clientRect,E,T),F=this._getSiblingOffsetPx(f,s,T),z=s.slice();return function uD(n,t,e){const i=bu(t,n.length-1),r=bu(e,n.length-1);if(i===r)return;const s=n[i],c=r<i?-1:1;for(let d=i;d!==r;d+=c)n[d]=n[d+c];n[r]=s}(s,f,c),s.forEach((te,Ve)=>{if(z[Ve]===te)return;const Ze=te.drag===t,it=Ze?P:F,Je=Ze?t.getPlaceholderElement():te.drag.getRootElement();te.offset+=it,d?(Je.style.transform=Sg(`translate3d(${Math.round(te.offset)}px, 0, 0)`,te.initialTransform),Wf(te.clientRect,0,it)):(Je.style.transform=Sg(`translate3d(0, ${Math.round(te.offset)}px, 0)`,te.initialTransform),Wf(te.clientRect,it,0))}),this._previousSwap.overlaps=qf(E,e,i),this._previousSwap.drag=_.drag,this._previousSwap.delta=d?r.x:r.y,{previousIndex:f,currentIndex:c}}enter(t,e,i,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,c=this._activeDraggables,d=c.indexOf(t),f=t.getPlaceholderElement();let _=c[s];if(_===t&&(_=c[s+1]),!_&&(null==s||-1===s||s<c.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(_=c[0]),d>-1&&c.splice(d,1),_&&!this._dragDropRegistry.isDragging(_)){const b=_.getRootElement();b.parentElement.insertBefore(f,b),c.splice(s,0,t)}else fi(this._element).appendChild(f),c.push(t);f.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Wf(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:xg(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let s=r?e.left-t.left:e.top-t.top;return-1===i&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,s=e[t].clientRect,c=e[t+-1*i];let d=s[r?"width":"height"]*i;if(c){const f=r?"left":"top",_=r?"right":"bottom";-1===i?d-=c.clientRect[f]-s[_]:d+=s[f]-c.clientRect[_]}return d}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const c=i[i.length-1].clientRect;return r?t>=c.right:e>=c.bottom}{const c=i[0].clientRect;return r?t<=c.left:e<=c.top}}_getItemIndexFromPointerPosition(t,e,i,r){const s="horizontal"===this.orientation,c=this._itemPositions.findIndex(({drag:d,clientRect:f})=>{if(d===t)return!1;if(r){const _=s?r.x:r.y;if(d===this._previousSwap.drag&&this._previousSwap.overlaps&&_===this._previousSwap.delta)return!1}return s?e>=Math.floor(f.left)&&e<Math.floor(f.right):i>=Math.floor(f.top)&&i<Math.floor(f.bottom)});return-1!==c&&this._sortPredicate(c,t)?c:-1}}class KT{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new rt.x,this.entered=new rt.x,this.exited=new rt.x,this.dropped=new rt.x,this.sorted=new rt.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Mn.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new rt.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function by(n=0,t=Pa.z){return n<0&&(n=0),gy(n,n,t)}(0,WC).pipe(Xe(this._stopScrollTimers)).subscribe(()=>{const c=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?c.scrollBy(0,-d):2===this._verticalScrollDirection&&c.scrollBy(0,d),1===this._horizontalScrollDirection?c.scrollBy(-d,0):2===this._horizontalScrollDirection&&c.scrollBy(d,0)})},this.element=fi(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Cy(i),this._sortStrategy=new Qf(this.element,e),this._sortStrategy.withSortPredicate((c,d)=>this.sortPredicate(c,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,c,d,f={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:c,dropPoint:d,event:f})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=fi(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!oD(this._clientRect,.05,e,i))return;const s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((c,d)=>{d===this._document||!c.clientRect||i||oD(c.clientRect,.05,t,e)&&([r,s]=function My(n,t,e,i){const r=fD(t,i),s=xy(t,e);let c=0,d=0;if(r){const f=n.scrollTop;1===r?f>0&&(c=1):n.scrollHeight-f>n.clientHeight&&(c=2)}if(s){const f=n.scrollLeft;1===s?f>0&&(d=1):n.scrollWidth-f>n.clientWidth&&(d=2)}return[c,d]}(d,c.clientRect,t,e),(r||s)&&(i=d))}),!r&&!s){const{width:c,height:d}=this._viewportRuler.getViewportSize(),f={width:c,height:d,top:0,right:c,bottom:d,left:0};r=fD(f,e),s=xy(f,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=fi(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=fi(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=fi(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&qf(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!qf(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const s=fi(this.element);return r===s||s.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Ho(fi(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function fD(n,t){const{top:e,bottom:i,height:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}function xy(n,t){const{left:e,right:i,width:r}=n,s=.05*r;return t>=e-s&&t<=e+s?1:t>=i-s&&t<=i+s?2:0}const Xf=ar({passive:!1,capture:!0});let cB=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new rt.x,this.pointerUp=new rt.x,this.scroll=new rt.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Xf)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Xf)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Xf}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Xf}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,c)=>{this._document.addEventListener(c,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new pi.y(r=>this._ngZone.runOutsideAngular(()=>{const c=d=>{this._activeDragInstances.length&&r.next(d)};return e.addEventListener("scroll",c,!0),()=>{e.removeEventListener("scroll",c,!0)}}))),(0,Zr.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pD={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let QT=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=pD){return new cD(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new KT(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe),l.LFG(l.R0b),l.LFG(Pd),l.LFG(cB))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[QT],imports:[jo]}),n})();class Iy{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Ty extends Iy{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class gD extends Iy{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class _D extends Iy{constructor(t){super(),this.element=t instanceof l.SBq?t.nativeElement:t}}class Tg{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Ty?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof gD?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof _D?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class sA extends Tg{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,f=this._document.createComment("dom-portal");d.parentNode.insertBefore(f,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let bD=(()=>{class n extends Tg{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(oe))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),La=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),wD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Od]}),n})(),Vy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Eg]}),n})(),Gy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const wA=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function bA(){return!0}});let mt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!co()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(IT),l.LFG(wA,8),l.LFG(oe))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Od,Od]}),n})();function dp(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=qe(t)}}}function Va(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Ol(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=qe(t)}}}function $o(n){return class extends n{constructor(...t){super(...t),this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}const DA=new l.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function EA(){return(0,l.f3M)(l.soG)}});class Pl{constructor(){this._localeChanges=new rt.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const Ug=new l.OlP("mat-date-formats"),SA=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function $y(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let xA=(()=>{class n extends Pl{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return $y(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return $y(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return $y(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(SA.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(DA,8),l.LFG(Jn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qy={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let MA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Pl,useClass:xA}]}),n})(),IA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Ug,useValue:qy}],imports:[MA]}),n})(),xu=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,mt]}),n})();class zB{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const AA={enterDuration:225,exitDuration:150},OD=ar({passive:!0}),PD=["mousedown","touchstart"],Zy=["mouseup","mouseleave","touchend","touchcancel"];class Ky{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=fi(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...AA,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function ND(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,f=e-r.top,_=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-c+"px",b.style.top=f-c+"px",b.style.height=2*c+"px",b.style.width=2*c+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(b);const E=window.getComputedStyle(b),P=E.transitionDuration,F="none"===E.transitionProperty||"0s"===P||"0s, 0s"===P,z=new zB(this,b,i,F);b.style.transform="scale3d(1, 1, 1)",z.state=0,i.persistent||(this._mostRecentTransientRipple=z);let te=null;return!F&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ve=()=>this._finishRippleTransition(z),Ze=()=>this._destroyRipple(z);b.addEventListener("transitionend",Ve),b.addEventListener("transitioncancel",Ze),te={onTransitionEnd:Ve,onTransitionCancel:Ze}}),this._activeRipples.set(z,te),(F||!_)&&this._finishRippleTransition(z),z}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...AA,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=fi(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(PD))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Zy),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=vu(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!cy(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,OD)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(PD.forEach(t=>{this._triggerElement.removeEventListener(t,this,OD)}),this._pointerUpEventsRegistered&&Zy.forEach(t=>{this._triggerElement.removeEventListener(t,this,OD)}))}}const Qy=new l.OlP("mat-ripple-global-options");let Ha=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Ky(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Jn),l.Y36(Qy,8),l.Y36(l.QbO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Xi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,mt]}),n})(),qd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt]}),n})(),$g=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xi,wi,mt,qd]}),n})();function fp(n){return new pi.y(t=>{(0,Ie.Xf)(n()).subscribe(t)})}const LD=Cl();class KB{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ni(-this._previousScrollPosition.left),t.style.top=ni(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),LD&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),LD&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Xy{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class BD{enable(){}disable(){}attach(){}}function pp(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function VD(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class NA{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();pp(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let FA=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new BD,this.close=c=>new Xy(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new KB(this._viewportRuler,this._document),this.reposition=c=>new NA(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(yy),l.LFG(Pd),l.LFG(l.R0b),l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Jy{constructor(t){if(this.scrollStrategy=new BD,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class qg{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Yd=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LA=(()=>{class n extends Yd{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BA=(()=>{class n extends Yd{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=pr(s)},this._clickListener=s=>{const c=pr(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let _=f.length-1;_>-1;_--){const b=f[_];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(c)||b.overlayElement.contains(d))break;const E=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(s)):E.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe),l.LFG(Jn),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zd=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||co()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),co()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe),l.LFG(Jn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mp{constructor(t,e,i,r,s,c,d,f,_,b=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=f,this._outsideClickDispatcher=_,this._animationsDisabled=b,this._backdropElement=null,this._backdropClick=new rt.x,this._attachments=new rt.x,this._detachments=new rt.x,this._locationChanges=Mn.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new rt.x,this._outsidePointerEvents=new rt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(v(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=ni(this._config.width),t.height=ni(this._config.height),t.minWidth=ni(this._config.minWidth),t.minHeight=ni(this._config.minHeight),t.maxWidth=ni(this._config.maxWidth),t.maxHeight=ni(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=fo(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Xe((0,Zr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const qo="cdk-overlay-connected-position-bounding-box",gp=/([A-Za-z%]+)$/;class Tr{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new rt.x,this._resizeSubscription=Mn.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(qo),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let f=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(f,e,d),b=this._getOverlayFit(_,e,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,f);this._canFitWithFlexibleDimensions(b,_,i)?s.push({position:d,origin:f,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(f,d)}):(!c||c.overlayFit.visibleArea<b.visibleArea)&&(c={overlayFit:b,overlayPoint:_,originPoint:f,position:d,overlayRect:e})}if(s.length){let d=null,f=-1;for(const _ of s){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>f&&(f=b,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Us(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(qo),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=js(e);let{x:c,y:d}=t,f=this._getOffset(r,"x"),_=this._getOffset(r,"y");f&&(c+=f),_&&(d+=_);let T=0-d,P=d+s.height-i.height,F=this._subtractOverflows(s.width,0-c,c+s.width-i.width),z=this._subtractOverflows(s.height,T,P),te=F*z;return{visibleArea:te,isCompletelyWithinViewport:s.width*s.height===te,fitsInViewportVertically:z===s.height,fitsInViewportHorizontally:F==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=_p(this._overlayRef.getConfig().minHeight),d=_p(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=js(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),f=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let b=0,E=0;return b=r.width<=s.width?_||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,E=r.height<=s.height?f||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:E},{x:t.x+b,y:t.y+E}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new qg(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,b,E,T;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const P=Math.min(i.bottom-t.y+i.top,t.y),F=this._lastBoundingBoxSize.height;s=2*P,c=t.y-P,s>F&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-F/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)T=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)E=t.x,b=i.right-t.x;else{const P=Math.min(i.right-t.x+i.left,t.x),F=this._lastBoundingBoxSize.width;b=2*P,E=t.x-P,b>F&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.x-F/2)}return{top:c,left:E,bottom:d,right:T,width:b,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=ni(i.height),r.top=ni(i.top),r.bottom=ni(i.bottom),r.width=ni(i.width),r.left=ni(i.left),r.right=ni(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ni(s)),c&&(r.maxWidth=ni(c))}this._lastBoundingBoxSize=i,Us(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Us(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Us(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();Us(i,this._getExactOverlayY(e,t,b)),Us(i,this._getExactOverlayX(e,t,b))}else i.position="static";let d="",f=this._getOffset(e,"x"),_=this._getOffset(e,"y");f&&(d+=`translateX(${f}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=ni(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=ni(c.maxWidth):s&&(i.maxWidth="")),Us(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ni(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ni(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:VD(t,i),isOriginOutsideView:pp(t,i),isOverlayClipped:VD(e,i),isOverlayOutsideView:pp(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&fo(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof l.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Us(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function _p(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(gp);return e&&"px"!==e?null:parseFloat(t)}return n||null}function js(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Iu="cdk-global-overlay-wrapper";class Kd{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Iu),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,f=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),b=this._xPosition,E=this._xOffset,T="rtl"===this._overlayRef.getConfig().direction;let P="",F="",z="";f?z="flex-start":"center"===b?(z="center",T?F=E:P=E):T?"left"===b||"end"===b?(z="flex-end",P=E):("right"===b||"start"===b)&&(z="flex-start",F=E):"left"===b||"start"===b?(z="flex-start",P=E):("right"===b||"end"===b)&&(z="flex-end",F=E),t.position=this._cssPosition,t.marginLeft=f?"0":P,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=f?"0":F,e.justifyContent=z,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Iu),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Qd=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Kd}flexibleConnectedTo(e){return new Tr(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Pd),l.LFG(oe),l.LFG(Jn),l.LFG(Zd))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xd=0,gr=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,E,T,P){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=f,this._document=_,this._directionality=b,this._location=E,this._outsideClickDispatcher=T,this._animationsModuleType=P}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new Jy(e);return c.direction=c.direction||this._directionality.value,new mp(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Xd++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new sA(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(FA),l.LFG(Zd),l.LFG(l._Vd),l.LFG(Qd),l.LFG(LA),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(oe),l.LFG(bs),l.LFG(Ne),l.LFG(BA),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const jD={provide:new l.OlP("cdk-connected-overlay-scroll-strategy"),deps:[gr],useFactory:function UD(n){return()=>n.scrollStrategies.reposition()}};let Ua=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[gr,jD],imports:[Od,La,Eg,Eg]}),n})();function eb(...n){const t=(0,Ns.jO)(n),{args:e,keys:i}=Pf(n),r=new pi.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let f=c,_=c;for(let b=0;b<c;b++){let E=!1;(0,Ie.Xf)(e[b]).subscribe((0,jn.x)(s,T=>{E||(E=!0,_--),d[b]=T},()=>f--,void 0,()=>{(!f||!E)&&(_||s.next(i?Ei(i,d):d),s.complete())}))}});return t?r.pipe(Qv(t)):r}let tb=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Ec=(()=>{class n extends tb{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Ji=new l.OlP("NgValueAccessor"),jA={provide:Ji,useExisting:(0,l.Gpc)(()=>Sc),multi:!0},GA=new l.OlP("CompositionEventMode");let Sc=(()=>{class n extends tb{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function zD(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(GA,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([jA]),l.qOj]}),n})();function ja(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function $D(n){return null!=n&&"number"==typeof n.length}const Si=new l.OlP("NgValidators"),Wo=new l.OlP("NgAsyncValidators"),ib=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Yo{static min(t){return function wp(n){return t=>{if(ja(t.value)||ja(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function Cp(n){return t=>{if(ja(t.value)||ja(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function Wg(n){return ja(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function rb(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function Yg(n){return ja(n.value)||ib.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function sb(n){return t=>ja(t.value)||!$D(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function ob(n){return t=>$D(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Zg(n){if(!n)return eh;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(ja(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return ub(t)}static composeAsync(t){return Qg(t)}}function eh(n){return null}function qD(n){return null!=n}function ab(n){return(0,l.QGY)(n)?(0,ln.D)(n):n}function lb(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function cb(n,t){return t.map(e=>e(n))}function YD(n){return n.map(t=>function WD(n){return!n.validate}(t)?t:e=>t.validate(e))}function ub(n){if(!n)return null;const t=n.filter(qD);return 0==t.length?null:function(e){return lb(cb(e,t))}}function Kg(n){return null!=n?ub(YD(n)):null}function Qg(n){if(!n)return null;const t=n.filter(qD);return 0==t.length?null:function(e){return eb(cb(e,t).map(ab)).pipe((0,w.U)(lb))}}function Dp(n){return null!=n?Qg(YD(n)):null}function db(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function hb(n){return n._rawValidators}function fb(n){return n._rawAsyncValidators}function Xg(n){return n?Array.isArray(n)?n:[n]:[]}function Ep(n,t){return Array.isArray(n)?n.includes(t):n===t}function pb(n,t){const e=Xg(t);return Xg(n).forEach(r=>{Ep(e,r)||e.push(r)}),e}function mb(n,t){return Xg(t).filter(e=>!Ep(n,e))}class gb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Kg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Dp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Cs extends gb{get formDirective(){return null}get path(){return null}}class Ga extends gb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ZD{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let mi=(()=>{class n extends ZD{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Ga,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})(),th=(()=>{class n extends ZD{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Cs,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[l.qOj]}),n})();const Ds="VALID",Es="INVALID",Ar="PENDING",nh="DISABLED";function t_(n){return(n_(n)?n.validators:n)||null}function XD(n){return Array.isArray(n)?Kg(n):n||null}function wb(n,t){return(n_(t)?t.asyncValidators:n)||null}function JD(n){return Array.isArray(n)?Dp(n):n||null}function n_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function i_(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")}function ih(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})}class r_{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=XD(this._rawValidators),this._composedAsyncValidatorFn=JD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ds}get invalid(){return this.status===Es}get pending(){return this.status==Ar}get disabled(){return this.status===nh}get enabled(){return this.status!==nh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=XD(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=JD(t)}addValidators(t){this.setValidators(pb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(mb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(mb(t,this._rawAsyncValidators))}hasValidator(t){return Ep(this._rawValidators,t)}hasAsyncValidator(t){return Ep(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ar,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=nh,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ds,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ds||this.status===Ar)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nh:Ds}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ar,this._hasOwnPendingAsyncValidator=!0;const e=ab(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?nh:this.errors?Es:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ar)?Ar:this._anyControlsHaveStatus(Es)?Es:Ds}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){n_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class xp extends r_{constructor(t,e,i){super(t_(e),wb(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){ih(this,0,t),Object.keys(t).forEach(i=>{i_(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function rh(n,t){a_(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function tE(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Db(n,t)})}(n,t),function iE(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function nE(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Db(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function o_(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Mp(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Ip(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function sh(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function a_(n,t){const e=hb(n);null!==t.validator?n.setValidators(db(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=fb(n);null!==t.asyncValidator?n.setAsyncValidators(db(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();sh(t._rawValidators,r),sh(t._rawAsyncValidators,r)}function Ip(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=hb(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=fb(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return sh(t._rawValidators,i),sh(t._rawAsyncValidators,i),e}function Db(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Eb(n,t){a_(n,t)}function oE(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const JA={provide:Cs,useExisting:(0,l.Gpc)(()=>Ap)},Tp=(()=>Promise.resolve(null))();let Ap=(()=>{class n extends Cs{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new xp({},Kg(e),Dp(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Tp.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),rh(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Tp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Tp.then(()=>{const i=this._findContainer(e.path),r=new xp({});Eb(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Tp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Tp.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,oE(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Si,10),l.Y36(Wo,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([JA]),l.qOj]}),n})();function aE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function lE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const kp=class extends r_{constructor(t=null,e,i){super(t_(e),wb(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),n_(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=lE(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){aE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){aE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){lE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let Tu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ok=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const fE=new l.OlP("NgModelWithFormControlWarning"),lk={provide:Cs,useExisting:(0,l.Gpc)(()=>Nl)};let Nl=(()=>{class n extends Cs{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ip(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return rh(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Mp(e.control||null,e,!1),function XA(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,oE(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Mp(i||null,e),(n=>n instanceof kp)(r)&&(rh(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Eb(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function rE(n,t){return Ip(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){a_(this.form,this),this._oldForm&&Ip(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Si,10),l.Y36(Wo,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([lk]),l.qOj,l.TTD]}),n})();const cV={provide:Ga,useExisting:(0,l.Gpc)(()=>ku)};let ku=(()=>{class n extends Ga{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function xb(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Sc?e=s:function QA(n){return Object.getPrototypeOf(n.constructor)===Ec}(s)?i=s:r=s}),r||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Sb(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function s_(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(l.Y36(Cs,13),l.Y36(Si,10),l.Y36(Wo,10),l.Y36(Ji,10),l.Y36(fE,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([cV]),l.qOj,l.TTD]}),n})(),pk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ok]}),n})(),IE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[pk]}),n})(),lh=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:fE,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[pk]}),n})();class TE extends r_{constructor(t,e,i){super(t_(e),wb(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){ih(this,0,t),t.forEach((i,r)=>{i_(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function ch(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let gk=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let s={};return ch(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new xp(r,s)}control(e,i,r){let s={};return this.useNonNullable?(ch(i)?s=i:(s.validators=i,s.asyncValidators=r),new kp(e,{...s,nonNullable:!0})):new kp(e,i,r)}array(e,i,r){const s=e.map(c=>this._createControl(c));return new TE(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof kp||e instanceof r_?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:lh}),n})(),h_=(()=>{class n extends gk{group(e,i=null){return super.group(e,i)}control(e,i,r){return super.control(e,i,r)}array(e,i,r){return super.array(e,i,r)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:lh}),n})();class AE{}const Fl="*";function _i(n,t){return{type:7,name:n,definitions:t,options:{}}}function nn(n,t=null){return{type:4,styles:t,timings:n}}function f_(n,t=null){return{type:3,steps:n,options:t}}function Bb(n,t=null){return{type:2,steps:n,options:t}}function ft(n){return{type:6,styles:n,offset:null}}function Zt(n,t,e){return{type:0,name:n,styles:t,options:e}}function on(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function xc(n=null){return{type:9,options:n}}function Pu(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function RE(n){Promise.resolve(null).then(n)}class Np{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){RE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class OE{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?RE(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const vk=["connectionContainer"],PE=["inputContainer"],yk=["label"];function bk(n,t){1&n&&(l.ynx(0),l.TgZ(1,"div",14),l._UZ(2,"div",15)(3,"div",16)(4,"div",17),l.qZA(),l.TgZ(5,"div",18),l._UZ(6,"div",15)(7,"div",16)(8,"div",17),l.qZA(),l.BQk())}function wk(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",19),l.NdJ("cdkObserveContent",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.updateOutlineGap())}),l.Hsn(1,1),l.qZA()}if(2&n){const e=l.oxw();l.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function Ck(n,t){if(1&n&&(l.ynx(0),l.Hsn(1,2),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.BQk()),2&n){const e=l.oxw(2);l.xp6(3),l.Oqu(e._control.placeholder)}}function Dk(n,t){1&n&&l.Hsn(0,3,["*ngSwitchCase","true"])}function Ek(n,t){1&n&&(l.TgZ(0,"span",23),l._uU(1," *"),l.qZA())}function Sk(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"label",20,21),l.NdJ("cdkObserveContent",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.updateOutlineGap())}),l.YNc(2,Ck,4,1,"ng-container",12),l.YNc(3,Dk,1,0,"ng-content",12),l.YNc(4,Ek,2,0,"span",22),l.qZA()}if(2&n){const e=l.oxw();l.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),l.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),l.uIk("for",e._control.id)("aria-owns",e._control.id),l.xp6(2),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function xk(n,t){1&n&&(l.TgZ(0,"div",24),l.Hsn(1,4),l.qZA())}function NE(n,t){if(1&n&&(l.TgZ(0,"div",25),l._UZ(1,"span",26),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function FE(n,t){if(1&n&&(l.TgZ(0,"div"),l.Hsn(1,5),l.qZA()),2&n){const e=l.oxw();l.Q6J("@transitionMessages",e._subscriptAnimationState)}}function Mk(n,t){if(1&n&&(l.TgZ(0,"div",30),l._uU(1),l.qZA()),2&n){const e=l.oxw(2);l.Q6J("id",e._hintLabelId),l.xp6(1),l.Oqu(e.hintLabel)}}function Ik(n,t){if(1&n&&(l.TgZ(0,"div",27),l.YNc(1,Mk,2,2,"div",28),l.Hsn(2,6),l._UZ(3,"div",29),l.Hsn(4,7),l.qZA()),2&n){const e=l.oxw();l.Q6J("@transitionMessages",e._subscriptAnimationState),l.xp6(1),l.Q6J("ngIf",e.hintLabel)}}const LE=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Tk=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let Ak=0;const BE=new l.OlP("MatError");let Lp=(()=>{class n{constructor(e,i){this.id="mat-error-"+Ak++,e||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(e){return new(e||n)(l.$8M("aria-live"),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(e,i){2&e&&l.uIk("id",i.id)},inputs:{id:"id"},features:[l._Bn([{provide:BE,useExisting:n}])]}),n})();const Vb={transitionMessages:_i("transitionMessages",[Zt("enter",ft({opacity:1,transform:"translateY(0%)"})),on("void => enter",[ft({opacity:0,transform:"translateY(-5px)"}),nn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Bp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n}),n})();const kk=new l.OlP("MatHint");let Zo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-label"]]}),n})(),UE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const Ok=new l.OlP("MatPrefix"),jE=new l.OlP("MatSuffix");let zE=0;const Pk=Va(class{constructor(n){this._elementRef=n}},"primary"),Ub=new l.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Vp=new l.OlP("MatFormField");let Hp=(()=>{class n extends Pk{constructor(e,i,r,s,c,d,f){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new rt.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+zE++,this._labelId="mat-form-field-label-"+zE++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==f,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=qe(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(ys(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Xe(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Xe(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Zr.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ys(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ys(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Xe(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,yc(this._label.nativeElement,"transitionend").pipe(v(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const b=i.querySelectorAll(`${r}, ${s}`);for(let E=0;E<b.length;E++)b[E].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const f=i.querySelectorAll(r),_=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const b=i.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const E=this._getStartEnd(b),T=e.children,P=this._getStartEnd(T[0].getBoundingClientRect());let F=0;for(let z=0;z<T.length;z++)F+=T[z].offsetWidth;c=Math.abs(P-E)-5,d=F>0?.75*F+10:0}for(let b=0;b<f.length;b++)f[b].style.width=`${c}px`;for(let b=0;b<_.length;b++)_[b].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(bs,8),l.Y36(Ub,8),l.Y36(Jn),l.Y36(l.R0b),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,Bp,5),l.Suo(r,Bp,7),l.Suo(r,Zo,5),l.Suo(r,Zo,7),l.Suo(r,UE,5),l.Suo(r,BE,5),l.Suo(r,kk,5),l.Suo(r,Ok,5),l.Suo(r,jE,5)),2&e){let s;l.iGM(s=l.CRH())&&(i._controlNonStatic=s.first),l.iGM(s=l.CRH())&&(i._controlStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildNonStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildStatic=s.first),l.iGM(s=l.CRH())&&(i._placeholderChild=s.first),l.iGM(s=l.CRH())&&(i._errorChildren=s),l.iGM(s=l.CRH())&&(i._hintChildren=s),l.iGM(s=l.CRH())&&(i._prefixChildren=s),l.iGM(s=l.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(l.Gf(vk,7),l.Gf(PE,5),l.Gf(yk,5)),2&e){let r;l.iGM(r=l.CRH())&&(i._connectionContainerRef=r.first),l.iGM(r=l.CRH())&&(i._inputContainerRef=r.first),l.iGM(r=l.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&l.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[l._Bn([{provide:Vp,useExisting:n}]),l.qOj],ngContentSelectors:Tk,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(l.F$t(LE),l.TgZ(0,"div",0)(1,"div",1,2),l.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),l.YNc(3,bk,9,0,"ng-container",3),l.YNc(4,wk,2,1,"div",4),l.TgZ(5,"div",5,6),l.Hsn(7),l.TgZ(8,"span",7),l.YNc(9,Sk,5,16,"label",8),l.qZA()(),l.YNc(10,xk,2,0,"div",9),l.qZA(),l.YNc(11,NE,2,4,"div",10),l.TgZ(12,"div",11),l.YNc(13,FE,2,1,"div",12),l.YNc(14,Ik,5,2,"div",13),l.qZA()()),2&e&&(l.xp6(3),l.Q6J("ngIf","outline"==i.appearance),l.xp6(1),l.Q6J("ngIf",i._prefixChildren.length),l.xp6(5),l.Q6J("ngIf",i._hasFloatingLabel()),l.xp6(1),l.Q6J("ngIf",i._suffixChildren.length),l.xp6(1),l.Q6J("ngIf","outline"!=i.appearance),l.xp6(1),l.Q6J("ngSwitch",i._getDisplayedMessages()),l.xp6(1),l.Q6J("ngSwitchCase","error"),l.xp6(1),l.Q6J("ngSwitchCase","hint"))},dependencies:[Un,ks,Dr,kf],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Vb.transitionMessages]},changeDetection:0}),n})(),p_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wi,mt,Tl,mt]}),n})();function Yn(n,t){return(0,hi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,jn.x)(i,f=>{r?.unsubscribe();let _=0;const b=s++;(0,Ie.Xf)(n(f,b)).subscribe(r=(0,jn.x)(i,E=>i.next(t?t(f,E,b,_++):E),()=>{r=null,d()}))},()=>{c=!0,d()}))})}const jk={provide:new l.OlP("mat-autocomplete-scroll-strategy"),deps:[gr],useFactory:function Uk(n){return()=>n.scrollStrategies.reposition()}};let Up=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[jk],imports:[Ua,$g,mt,wi,jo,$g,mt]}),n})(),ZE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Hf,mt,mt]}),n})();function KE(n,t){}class m_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let QE=(()=>{class n extends Tg{constructor(e,i,r,s,c,d,f,_){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=c,this._ngZone=d,this._overlayRef=f,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>{this._portalOutlet.hasAttached();const E=this._portalOutlet.attachDomPortal(b);return this._contentAttached(),E},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=Wr(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=Wr();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Wr())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ly),l.Y36(oe,8),l.Y36(m_),l.Y36(Na),l.Y36(l.R0b),l.Y36(mp),l.Y36(Al))},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&l.Gf(bD,7),2&e){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&l.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&l.YNc(0,KE,0,0,"ng-template",0)},dependencies:[bD],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class g_{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new rt.x,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Bs(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const XE=new l.OlP("DialogScrollStrategy"),Kk=new l.OlP("DialogData"),Qk=new l.OlP("DefaultDialogConfig"),Xk={provide:XE,deps:[gr],useFactory:function jp(n){return()=>n.scrollStrategies.block()}};let jb=0,Ko=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new rt.x,this._afterOpenedAtThisLevel=new rt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=fp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ys(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,i){(i={...this._defaultOptions||new m_,...i}).id=i.id||"cdk-dialog-"+jb++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),c=this._overlay.create(s),d=new g_(c,i),f=this._attachContainer(c,d,i);return d.containerInstance=f,this._attachDialogContent(e,d,f,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){Gb(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Gb(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),Gb(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new Jy({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,c=[{provide:m_,useValue:r},{provide:g_,useValue:i},{provide:mp,useValue:e}];let d;r.container?"function"==typeof r.container?d=r.container:(d=r.container.type,c.push(...r.container.providers(r))):d=QE;const f=new Ty(d,r.viewContainerRef,l.zs3.create({parent:s||this._injector,providers:c}),r.componentFactoryResolver);return e.attach(f).instance}_attachDialogContent(e,i,r,s){if(e instanceof l.Rgc){const c=this._createInjector(s,i,r,void 0);let d={$implicit:s.data,dialogRef:i};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new gD(e,null,d,c))}else{const c=this._createInjector(s,i,r,this._injector),d=r.attachComponentPortal(new Ty(e,s.viewContainerRef,c,s.componentFactoryResolver));i.componentInstance=d.instance}}_createInjector(e,i,r,s){const c=e.injector||e.viewContainerRef?.injector,d=[{provide:Kk,useValue:e.data},{provide:g_,useValue:i}];return e.providers&&("function"==typeof e.providers?d.push(...e.providers(i,e,r)):d.push(...e.providers)),e.direction&&(!c||!c.get(bs,null,l.XFs.Optional))&&d.push({provide:bs,useValue:{value:e.direction,change:ct()}}),l.zs3.create({parent:c||s,providers:d})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(gr),l.LFG(l.zs3),l.LFG(Qk,8),l.LFG(n,12),l.LFG(Zd),l.LFG(XE))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Gb(n,t){let e=n.length;for(;e--;)t(n[e])}let Gp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ko,Xk],imports:[Ua,La,Hf,La]}),n})(),Jk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Gp,mt,La,mt]}),n})();const JE=["mat-button",""],qb=["*"],iR=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],TV=Va(dp(Ol(class{constructor(n){this._elementRef=n}})));let Nu=(()=>{class n extends TV{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of iR)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Al),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&l.Gf(Ha,5),2&e){let r;l.iGM(r=l.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(l.uIk("disabled",i.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:JE,ngContentSelectors:qb,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&e&&(l.xp6(2),l.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[Ha],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),uh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xi,mt,mt]}),n})(),oS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,Xi,mt]}),n})();const aS=["*",[["mat-card-footer"]]],sR=["*","mat-card-footer"],lS=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],cS=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let aR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),Kr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),dh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),uR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),Mc=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:sR,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(aS),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),dR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:cS,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,i){1&e&&(l.F$t(lS),l.Hsn(0),l.TgZ(1,"div",0),l.Hsn(2,1),l.qZA(),l.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),fR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,mt]}),n})(),w_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),PV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xi,mt,Tl,w_,mt,w_]}),n})();const bS=new l.OlP("mat-chips-default-options");let CR=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[xu,{provide:bS,useValue:{separatorKeyCodes:[13]}}],imports:[mt]}),n})();function zp(n,t){const e=(0,po.m)(n)?n:()=>n,i=r=>r.error(e());return new pi.y(t?r=>t.schedule(i,0,r):i)}function qa(n){return(0,hi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,jn.x)(e,void 0,void 0,c=>{s=(0,Ie.Xf)(n(c,qa(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function Jb(n){return(0,hi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}var xS=V(3099);function Fu(n,t){return(0,po.m)(t)?(0,Hi.z)(n,t,1):(0,Hi.z)(n,1)}class FV{}class Lu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Lu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Lu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Lu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class LV{encodeKey(t){return $p(t)}encodeValue(t){return $p(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const BV=/%(\d[a-f0-9])/gi,MS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $p(n){return encodeURIComponent(n).replace(BV,(t,e)=>MS[e]??t)}function qp(n){return`${n}`}class Ll{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new LV,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function D_(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],f=e.get(c)||[];f.push(d),e.set(c,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(qp):[qp(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ll({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(qp(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(qp(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class e0{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function TS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function t0(n){return typeof Blob<"u"&&n instanceof Blob}function DR(n){return typeof FormData<"u"&&n instanceof FormData}class Wp{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function IS(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Lu),this.context||(this.context=new e0),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new Ll,this.urlWithParams=e}serializeBody(){return null===this.body?null:TS(this.body)||t0(this.body)||DR(this.body)||function ER(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ll?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||DR(this.body)?null:t0(this.body)?this.body.type||null:TS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ll?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,_=t.params||this.params;const b=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((E,T)=>E.set(T,t.setHeaders[T]),f)),t.setParams&&(_=Object.keys(t.setParams).reduce((E,T)=>E.set(T,t.setParams[T]),_)),new Wp(e,i,s,{params:_,headers:f,context:b,reportProgress:d,responseType:r,withCredentials:c})}}var _r=(()=>((_r=_r||{})[_r.Sent=0]="Sent",_r[_r.UploadProgress=1]="UploadProgress",_r[_r.ResponseHeader=2]="ResponseHeader",_r[_r.DownloadProgress=3]="DownloadProgress",_r[_r.Response=4]="Response",_r[_r.User=5]="User",_r))();class kS extends class E_{constructor(t,e=200,i="OK"){this.headers=t.headers||new Lu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=_r.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new kS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function RS(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let OS=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Wp)s=e;else{let f,_;f=r.headers instanceof Lu?r.headers:new Lu(r.headers),r.params&&(_=r.params instanceof Ll?r.params:new Ll({fromObject:r.params})),s=new Wp(e,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ct(s).pipe(Fu(f=>this.handler.handle(f)));if(e instanceof Wp||"events"===r.observe)return c;const d=c.pipe(ti(f=>f instanceof kS));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,w.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,w.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,w.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,w.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Ll).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,RS(r,i))}post(e,i,r={}){return this.request("POST",e,RS(r,i))}put(e,i,r={}){return this.request("PUT",e,RS(r,i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(FV))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const BS=["*"];let ph;function Yp(n){return function Bl(){if(void 0===ph&&(ph=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(ph=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return ph}()?.createHTML(n)||n}function OR(n){return Error(`Unable to find icon with the name "${n}"`)}function VS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function HS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Vu{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let Zp=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Vu(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(l.q3G.HTML,r);if(!c)throw HS(r);const d=Yp(c);return this._addSvgIconConfig(e,i,new Vu("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Vu(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(l.q3G.HTML,i);if(!s)throw HS(i);const c=Yp(s);return this._addSvgIconSetConfig(e,new Vu("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,e);if(!i)throw VS(e);const r=this._cachedIconsByUrl.get(i);return r?ct(S_(r)):this._loadSvgIconFromConfig(new Vu(e,null)).pipe((0,ei.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,w.U)(s=>S_(s)))}getNamedSvgIcon(e,i=""){const r=n0(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):zp(OR(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ct(S_(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,w.U)(i=>S_(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?ct(r):eb(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(qa(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),ct(null)})))).pipe((0,w.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw OR(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,ei.b)(i=>e.svgText=i),(0,w.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ct(null):this._fetchIcon(e).pipe((0,ei.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(Yp("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(Yp("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function PR(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const c=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,i);if(!c)throw VS(i);const d=this._inProgressUrlFetches.get(c);if(d)return d;const f=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,w.U)(_=>Yp(_)),Jb(()=>this._inProgressUrlFetches.delete(c)),(0,xS.B)());return this._inProgressUrlFetches.set(c,f),f}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(n0(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return KV(s)?new Vu(s.url,null,s.options):new Vu(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(OS,8),l.LFG(ic),l.LFG(oe,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function S_(n){return n.cloneNode(!0)}function n0(n,t){return n+":"+t}function KV(n){return!(!n.url||!n.options)}const r0=Va(class{constructor(n){this._elementRef=n}}),US=new l.OlP("MAT_ICON_DEFAULT_OPTIONS"),jS=new l.OlP("mat-icon-location",{providedIn:"root",factory:function FR(){const n=(0,l.f3M)(oe),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),s0=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],GS=s0.map(n=>`[${n}]`).join(", "),x_=/^url\(['"]?#(.*?)['"]?\)$/;let M_=(()=>{class n extends r0{constructor(e,i,r,s,c,d){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Mn.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=qe(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(GS),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)s0.forEach(c=>{const d=i[s],f=d.getAttribute(c),_=f?f.match(x_):null;if(_){let b=r.get(d);b||(b=[],r.set(d,b)),b.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(v(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Zp),l.$8M("aria-hidden"),l.Y36(jS),l.Y36(l.qLn),l.Y36(US,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(l.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),l.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:BS,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),o0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,mt]}),n})(),Qp=(()=>{class n{constructor(){this.changes=new rt.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a0={provide:Qp,deps:[[new l.FiY,new l.tp0,Qp]],useFactory:function zR(n){return n||new Qp}};let KS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[a0,xu],imports:[mt,wi,La,uh,wD,o0,Xi,mt]}),n})();const c0=ar({passive:!0});let QS=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return g.E;const i=fi(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new rt.x,c="cdk-text-field-autofilled",d=f=>{"cdk-text-field-autofill-start"!==f.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===f.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,c0),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,c0)}}),s}stopMonitoring(e){const i=fi(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Jn),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qR=(()=>{class n{constructor(e,i,r,s){this._elementRef=e,this._platform=i,this._ngZone=r,this._destroyed=new rt.x,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=c=>{this._hasFocus="focus"===c.type},this._document=s,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(e){this._minRows=tn(e),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=tn(e),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){e=qe(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(e){this._cachedPlaceholderHeight=void 0,e?this._textareaElement.setAttribute("placeholder",e):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const e=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){const e=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{yc(this._getWindow(),"resize").pipe(_y(16),Xe(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,e.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const e=this._textareaElement,i=e.style.marginBottom||"",r=this._platform.FIREFOX,s=r&&this._hasFocus,c=r?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(e.style.marginBottom=`${e.clientHeight}px`),e.classList.add(c);const d=e.scrollHeight-4;return e.classList.remove(c),s&&(e.style.marginBottom=i),d}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const e=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=e}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const i=this._elementRef.nativeElement,r=i.value;if(!e&&this._minRows===this._previousMinRows&&r===this._previousValue)return;const s=this._measureScrollHeight(),c=Math.max(s,this._cachedPlaceholderHeight||0);i.style.height=`${c}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(i)):setTimeout(()=>this._scrollToCaretPosition(i))}),this._previousValue=r,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(e){const{selectionStart:i,selectionEnd:r}=e;!this._destroyed.isStopped&&this._hasFocus&&e.setSelectionRange(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Jn),l.Y36(l.R0b),l.Y36(oe,8))},n.\u0275dir=l.lG2({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(e,i){1&e&&l.NdJ("input",function(){return i._noopInputHandler()})},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]}),n})(),u0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const WR=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),JS=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let d0=0;const YR=$o(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new rt.x}});let I_=(()=>{class n extends YR{constructor(e,i,r,s,c,d,f,_,b,E){super(d,s,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=_,this._formField=E,this._uid="mat-input-"+d0++,this.focused=!1,this.stateChanges=new rt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(F=>bl().has(F)),this._iOSKeyupListener=F=>{const z=F.target;!z.value&&0===z.selectionStart&&0===z.selectionEnd&&(z.setSelectionRange(1,1),z.setSelectionRange(0,0))};const T=this._elementRef.nativeElement,P=T.nodeName.toLowerCase();this._inputValueAccessor=f||T,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&b.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!E,this._isNativeSelect&&(this.controlType=T.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=qe(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Yo.required)??!1}set required(e){this._required=qe(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&bl().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=qe(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField,i=e&&"legacy"===e.appearance&&!e._hasLabel?.()?null:this.placeholder;if(i!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){JS.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Jn),l.Y36(Ga,10),l.Y36(Ap,8),l.Y36(Nl,8),l.Y36(xu),l.Y36(WR,10),l.Y36(QS),l.Y36(l.R0b),l.Y36(Vp,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&l.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(l.Ikx("disabled",i.disabled)("required",i.required),l.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),l.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:Bp,useExisting:n}]),l.qOj,l.TTD]}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[xu],imports:[u0,p_,mt,u0,p_]}),n})(),p=(()=>{class n{constructor(){this.changes=new rt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uW={provide:new l.OlP("mat-datepicker-scroll-strategy"),deps:[gr],useFactory:function cW(n){return()=>n.scrollStrategies.reposition()}};let mW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[p,uW],imports:[wi,uh,Ua,Hf,La,mt,jo]}),n})();function gW(n,t){}const A_={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},_W={dialogContainer:_i("dialogContainer",[Zt("void, exit",ft({opacity:0,transform:"scale(0.7)"})),Zt("enter",ft({transform:"none"})),on("* => enter",f_([nn("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",ft({transform:"none",opacity:1})),Pu("@*",xc(),{optional:!0})]),A_),on("* => void, * => exit",f_([nn("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",ft({opacity:0})),Pu("@*",xc(),{optional:!0})]),A_)])};class ax{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=A_.params.enterAnimationDuration,this.exitAnimationDuration=A_.params.exitAnimationDuration}}let vW=(()=>{class n extends QE{constructor(e,i,r,s,c,d,f,_){super(e,i,r,s,c,d,f,_),this._animationStateChanged=new l.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ly),l.Y36(oe,8),l.Y36(ax),l.Y36(Na),l.Y36(l.R0b),l.Y36(mp),l.Y36(Al))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],features:[l.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),yW=(()=>{class n extends vW{constructor(e,i,r,s,c,d,f,_,b){super(e,i,r,s,c,d,f,b),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?this._openAnimationDone(i):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||A_.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||A_.params.exitAnimationDuration}}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ly),l.Y36(oe,8),l.Y36(ax),l.Y36(Na),l.Y36(l.R0b),l.Y36(mp),l.Y36(l.sBO),l.Y36(Al))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,i){1&e&&l.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(l.Ikx("id",i._config.id),l.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),l.d8E("@dialogContainer",i._getAnimationState()))},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&l.YNc(0,gW,0,0,"ng-template",0)},dependencies:[bD],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[_W.dialogContainer]}}),n})();class bW{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new rt.x,this._beforeClosed=new rt.x,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(ti(r=>"opened"===r.state),v(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(ti(r=>"closed"===r.state),v(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Zr.T)(this.backdropClick(),this.keydownEvents().pipe(ti(r=>27===r.keyCode&&!this.disableClose&&!Bs(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function wW(n,t,e){n._closeInteractionType=t,n.close(e)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(ti(e=>"closing"===e.state),v(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const CW=new l.OlP("MatDialogData"),DW=new l.OlP("mat-dialog-default-options"),f2=new l.OlP("mat-dialog-scroll-strategy"),SW={provide:f2,deps:[gr],useFactory:function EW(n){return()=>n.scrollStrategies.block()}};let xW=0,MW=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,E){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=f,this._dialogContainerType=_,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new rt.x,this._afterOpenedAtThisLevel=new rt.x,this._idPrefix="mat-dialog-",this.afterAllClosed=fp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ys(void 0))),this._scrollStrategy=d,this._dialog=i.get(Ko)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let r;(i={...this._defaultOptions||new ax,...i}).id=i.id||`${this._idPrefix}${xW++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:ax,useValue:i},{provide:m_,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(c,d,f)=>(r=new this._dialogRefConstructor(c,i,f),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(r);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),IW=(()=>{class n extends MW{constructor(e,i,r,s,c,d,f,_){super(e,i,s,d,f,c,bW,yW,CW,_)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(gr),l.LFG(l.zs3),l.LFG(Ne,8),l.LFG(DW,8),l.LFG(f2),l.LFG(n,12),l.LFG(Zd),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),TW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[IW,SW],imports:[Gp,Ua,La,mt,mt]}),n})(),p2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,mt]}),n})(),AW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),kW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wi,mt,AW,La]}),n})(),PW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[hp,mt,hp,mt]}),n})(),YW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[hp,Xi,mt,qd,wi,hp,mt,qd,p2]}),n})();const XW={provide:new l.OlP("mat-menu-scroll-strategy"),deps:[gr],useFactory:function QW(n){return()=>n.scrollStrategies.reposition()}};let JW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[XW],imports:[wi,mt,Xi,Ua,jo,mt]}),n})();const s8={provide:new l.OlP("mat-select-scroll-strategy"),deps:[gr],useFactory:function r8(n){return()=>n.scrollStrategies.reposition()}};let b2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[s8],imports:[wi,Ua,$g,mt,jo,p_,$g,mt]}),n})();const c8={provide:new l.OlP("mat-tooltip-scroll-strategy"),deps:[gr],useFactory:function l8(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let w2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[c8],imports:[Hf,wi,Ua,mt,mt,jo]}),n})(),QR=(()=>{class n{constructor(){this.changes=new rt.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=e*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const m8={provide:QR,deps:[[new l.FiY,new l.tp0,QR]],useFactory:function p8(n){return n||new QR}};let g8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[m8],imports:[wi,uh,b2,w2,mt]}),n})(),v8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wi,mt,mt]}),n})();function y8(n,t){if(1&n&&(l.O4$(),l._UZ(0,"circle",4)),2&n){const e=l.oxw(),i=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),l.uIk("r",e._getCircleRadius())}}function b8(n,t){if(1&n&&(l.O4$(),l._UZ(0,"circle",4)),2&n){const e=l.oxw(),i=l.MAs(1);l.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),l.uIk("r",e._getCircleRadius())}}const C8=Va(class{constructor(n){this._elementRef=n}},"primary"),D8=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function E8(){return{diameter:100}}});class vh extends C8{constructor(t,e,i,r,s,c,d,f){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Mn.w0.EMPTY,this.mode="determinate";const _=vh._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(i.head)||_.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&d&&c&&f&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&f.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=tn(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=tn(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,tn(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Ho(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=vh._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}vh._diameters=new WeakMap,vh.\u0275fac=function(t){return new(t||vh)(l.Y36(l.SBq),l.Y36(Jn),l.Y36(oe,8),l.Y36(l.QbO,8),l.Y36(D8),l.Y36(l.sBO),l.Y36(Pd),l.Y36(l.R0b))},vh.\u0275cmp=l.Xpm({type:vh,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(l.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),l.Udp("width",e.diameter,"px")("height",e.diameter,"px"),l.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,y8,1,11,"circle",2),l.YNc(3,b8,1,9,"circle",3),l.qZA()),2&t&&(l.Udp("width",e.diameter,"px")("height",e.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===e.mode),l.uIk("viewBox",e._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[ks,Dr],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let x8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,wi,mt]}),n})(),V8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xi,mt,mt]}),n})(),U8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wi,mt,jo,jo,mt]}),n})(),X8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wi,mt,mt]}),n})(),M2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),dY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[M2,Xi,mt,Tl,M2,mt]}),n})(),pY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ua,La,wi,uh,mt,mt]}),n})(),eO=(()=>{class n{constructor(){this.changes=new rt.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _Y={provide:eO,deps:[[new l.FiY,new l.tp0,eO]],useFactory:function gY(n){return n||new eO}};let vY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[_Y],imports:[wi,mt]}),n})(),NY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Vy,mt,mt]}),n})(),UY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[wi,mt,La,Xi,Tl,Hf,mt]}),n})();const jY=["*",[["mat-toolbar-row"]]],GY=["*","mat-toolbar-row"],zY=Va(class{constructor(n){this._elementRef=n}});let $Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),p0=(()=>{class n extends zY{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(Jn),l.Y36(oe))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&l.Suo(r,$Y,5),2&e){let s;l.iGM(s=l.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[l.qOj],ngContentSelectors:GY,decls:2,vars:0,template:function(e,i){1&e&&(l.F$t(jY),l.Hsn(0),l.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),qY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[mt,mt]}),n})(),eZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Gy,mt,mt]}),n})(),tZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Hf,jC,wD,Vy,Gy,mD,Up,ZE,Jk,uh,oS,fR,PV,CR,KS,mW,TW,p2,kW,PW,o0,c2,YW,JW,IA,g8,v8,x8,V8,Xi,b2,U8,X8,dY,pY,vY,NY,UY,qY,w2,eZ,Ua,La,Eg]}),n})();var lx,nZ=V(6457),L=V(2090),Gs=V(9681),Vl=V(1877),Hl=V(4859),iZ=new Uint8Array(16);function rZ(){if(!lx&&!(lx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lx(iZ)}const sZ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,aZ=function oZ(n){return"string"==typeof n&&sZ.test(n)};for(var Qr=[],nO=0;nO<256;++nO)Qr.push((nO+256).toString(16).substr(1));const dZ=function uZ(n,t,e){var i=(n=n||{}).random||(n.rng||rZ)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){e=e||0;for(var r=0;r<16;++r)t[e+r]=i[r];return t}return function lZ(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Qr[n[t+0]]+Qr[n[t+1]]+Qr[n[t+2]]+Qr[n[t+3]]+"-"+Qr[n[t+4]]+Qr[n[t+5]]+"-"+Qr[n[t+6]]+Qr[n[t+7]]+"-"+Qr[n[t+8]]+Qr[n[t+9]]+"-"+Qr[n[t+10]]+Qr[n[t+11]]+Qr[n[t+12]]+Qr[n[t+13]]+Qr[n[t+14]]+Qr[n[t+15]]).toLowerCase();if(!aZ(e))throw TypeError("Stringified UUID is invalid");return e}(i)};var Pn=V(5813);function iO(){return(0,hi.e)((n,t)=>{let e,i=!1;n.subscribe((0,jn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function hZ(n,t,e,i,r){return(s,c)=>{let d=e,f=t,_=0;s.subscribe((0,jn.x)(c,b=>{const E=_++;f=d?n(f,b,E):(d=!0,b),i&&c.next(f)},r&&(()=>{d&&c.next(f),c.complete()})))}}function Jp(n,t){return(0,hi.e)(hZ(n,t,arguments.length>=2,!0))}var _t,vr=V(2011),rO=(V(5881),V(3942)),Se=V(5861),fZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hu={},sO=sO||{},Qt=fZ||self;function cx(){}function oO(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function m0(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var aO="closure_uid_"+(1e9*Math.random()>>>0),mZ=0;function gZ(n,t,e){return n.call.apply(n.bind,arguments)}function _Z(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Xr(n,t,e){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gZ:_Z).apply(null,arguments)}function ux(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Jr(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function bh(){this.s=this.s,this.o=this.o}var yZ={};bh.prototype.s=!1,bh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function pZ(n){return Object.prototype.hasOwnProperty.call(n,aO)&&n[aO]||(n[aO]=++mZ)}(this);delete yZ[n]}},bh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const O2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},P2=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function N2(n){return Array.prototype.concat.apply([],arguments)}function lO(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function dx(n){return/^[\s\xa0]*$/.test(n)}var $s,F2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zs(n,t){return-1!=n.indexOf(t)}function cO(n,t){return n<t?-1:n>t?1:0}e:{var L2=Qt.navigator;if(L2){var B2=L2.userAgent;if(B2){$s=B2;break e}}$s=""}function uO(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function V2(n){const t={};for(const e in n)t[e]=n[e];return t}var H2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U2(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<H2.length;s++)e=H2[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function dO(n){return dO[" "](n),n}dO[" "]=cx;var hx,n,CZ=zs($s,"Opera"),k_=zs($s,"Trident")||zs($s,"MSIE"),j2=zs($s,"Edge"),hO=j2||k_,G2=zs($s,"Gecko")&&!(zs($s.toLowerCase(),"webkit")&&!zs($s,"Edge"))&&!(zs($s,"Trident")||zs($s,"MSIE"))&&!zs($s,"Edge"),DZ=zs($s.toLowerCase(),"webkit")&&!zs($s,"Edge");function z2(){var n=Qt.document;return n?n.documentMode:void 0}e:{var fO="",pO=(n=$s,G2?/rv:([^\);]+)(\)|;)/.exec(n):j2?/Edge\/([\d\.]+)/.exec(n):k_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):DZ?/WebKit\/(\S+)/.exec(n):CZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pO&&(fO=pO?pO[1]:""),k_){var mO=z2();if(null!=mO&&mO>parseFloat(fO)){hx=String(mO);break e}}hx=fO}var EZ={};var xZ=Qt.document&&k_&&(z2()||parseInt(hx,10))||void 0,MZ=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",cx,t),Qt.removeEventListener("test",cx,t)}catch{}return n}();function Ss(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function g0(n,t){if(Ss.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(G2){e:{try{dO(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:IZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&g0.Z.h.call(this)}}Ss.prototype.h=function(){this.defaultPrevented=!0},Jr(g0,Ss);var IZ={2:"touch",3:"pen",4:"mouse"};g0.prototype.h=function(){g0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _0="closure_listenable_"+(1e6*Math.random()|0),TZ=0;function AZ(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++TZ,this.ca=this.fa=!1}function fx(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function px(n){this.src=n,this.g={},this.h=0}function _O(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=O2(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(fx(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function vO(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}px.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=vO(n,t,i,r);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new AZ(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var yO="closure_lm_"+(1e6*Math.random()|0),bO={};function q2(n,t,e,i,r){if(i&&i.once)return Y2(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)q2(n,t[s],e,i,r);return null}return e=EO(e),n&&n[_0]?n.N(t,e,m0(i)?!!i.capture:!!i,r):W2(n,t,e,!1,i,r)}function W2(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=m0(r)?!!r.capture:!!r,d=CO(n);if(d||(n[yO]=d=new px(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function kZ(){var t=RZ;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)MZ||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(K2(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function Y2(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y2(n,t[s],e,i,r);return null}return e=EO(e),n&&n[_0]?n.O(t,e,m0(i)?!!i.capture:!!i,r):W2(n,t,e,!0,i,r)}function Z2(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Z2(n,t[s],e,i,r);else i=m0(i)?!!i.capture:!!i,e=EO(e),n&&n[_0]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=vO(s=n.g[t],e,i,r))&&(fx(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=CO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=vO(t,e,i,r)),(e=-1<n?t[n]:null)&&wO(e))}function wO(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[_0])_O(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(K2(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=CO(t))?(_O(e,n),0==e.h&&(e.src=null,t[yO]=null)):fx(n)}}}function K2(n){return n in bO?bO[n]:bO[n]="on"+n}function RZ(n,t){if(n.ca)n=!0;else{t=new g0(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&wO(n),n=e.call(i,t)}return n}function CO(n){return(n=n[yO])instanceof px?n:null}var DO="__closure_events_fn_"+(1e9*Math.random()>>>0);function EO(n){return"function"==typeof n?n:(n[DO]||(n[DO]=function(t){return n.handleEvent(t)}),n[DO])}function kr(){bh.call(this),this.i=new px(this),this.P=this,this.I=null}function es(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Ss(t,n);else if(t instanceof Ss)t.target=t.target||n;else{var r=t;U2(t=new Ss(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=mx(c,i,!0,t)&&r}if(r=mx(c=t.g=n,i,!0,t)&&r,r=mx(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=mx(c=t.g=e[s],i,!1,t)&&r}function mx(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ca&&c.capture==e){var d=c.listener,f=c.ia||c.src;c.fa&&_O(n.i,c),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}Jr(kr,bh),kr.prototype[_0]=!0,kr.prototype.removeEventListener=function(n,t,e,i){Z2(this,n,t,e,i)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)fx(e[i]);delete n.g[t],n.h--}}this.I=null},kr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},kr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var SO=Qt.JSON.stringify;function OZ(){var n=X2;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var MO,Q2=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new NZ,n=>n.reset());class NZ{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function FZ(n){Qt.setTimeout(()=>{throw n},0)}function xO(n,t){MO||function LZ(){var n=Qt.Promise.resolve(void 0);MO=function(){n.then(BZ)}}(),IO||(MO(),IO=!0),X2.add(n,t)}var IO=!1,X2=new class PZ{constructor(){this.h=this.g=null}add(t,e){const i=Q2.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function BZ(){for(var n;n=OZ();){try{n.h.call(n.g)}catch(e){FZ(e)}var t=Q2;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}IO=!1}function gx(n,t){kr.call(this),this.h=n||1,this.g=t||Qt,this.j=Xr(this.kb,this),this.l=Date.now()}function TO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function AO(n,t,e){if("function"==typeof n)e&&(n=Xr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Qt.setTimeout(n,t||0)}function J2(n){n.g=AO(()=>{n.g=null,n.i&&(n.i=!1,J2(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Jr(gx,kr),(_t=gx.prototype).da=!1,_t.S=null,_t.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),es(this,"tick"),this.da&&(TO(this),this.start()))}},_t.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_t.M=function(){gx.Z.M.call(this),TO(this),delete this.g};class VZ extends bh{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:J2(this)}M(){super.M(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function v0(n){bh.call(this),this.h=n,this.g={}}Jr(v0,bh);var eH=[];function tH(n,t,e,i){Array.isArray(e)||(e&&(eH[0]=e.toString()),e=eH);for(var r=0;r<e.length;r++){var s=q2(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function nH(n){uO(n.g,function(t,e){this.g.hasOwnProperty(e)&&wO(t)},n),n.g={}}function _x(){this.g=!0}function R_(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function GZ(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return SO(e)}catch{return t}}(n,e)+(i?" "+i:"")})}v0.prototype.M=function(){v0.Z.M.call(this),nH(this)},v0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_x.prototype.Aa=function(){this.g=!1},_x.prototype.info=function(){};var em={},iH=null;function vx(){return iH=iH||new kr}function rH(n){Ss.call(this,em.Ma,n)}function y0(n){const t=vx();es(t,new rH(t,n))}function sH(n,t){Ss.call(this,em.STAT_EVENT,n),this.stat=t}function qs(n){const t=vx();es(t,new sH(t,n))}function oH(n,t){Ss.call(this,em.Na,n),this.size=t}function b0(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},t)}em.Ma="serverreachability",Jr(rH,Ss),em.STAT_EVENT="statevent",Jr(sH,Ss),em.Na="timingevent",Jr(oH,Ss);var yx={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},aH={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kO(){}function cH(){}kO.prototype.h=null;var PO,w0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function RO(){Ss.call(this,"d")}function OO(){Ss.call(this,"c")}function bx(){}function C0(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new v0(this),this.P=zZ,this.W=new gx(n=hO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new uH}function uH(){this.i=null,this.g="",this.h=!1}Jr(RO,Ss),Jr(OO,Ss),Jr(bx,kO),bx.prototype.g=function(){return new XMLHttpRequest},bx.prototype.i=function(){return{}},PO=new bx;var zZ=45e3,NO={},wx={};function FO(n,t,e){n.K=1,n.v=xx(Uu(t)),n.s=e,n.U=!0,dH(n,null)}function dH(n,t){n.F=Date.now(),D0(n),n.A=Uu(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),bH(e.h,"t",i),n.C=0,e=n.l.H,n.h=new uH,n.g=GH(n.l,e?t:null,!n.s),0<n.O&&(n.L=new VZ(Xr(n.Ia,n,n.g),n.O)),tH(n.V,n.g,"readystatechange",n.gb),t=n.H?V2(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),y0(1),function HZ(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),f=0;f<d.length;f++){var _=d[f].split("=");if(1<_.length){var b=_[0];_=_[1];var E=b.split("_");c=2<=E.length&&"type"==E[1]?c+(b+"=")+_+"&":c+(b+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function hH(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function fH(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=$Z(n,e),r==wx){4==t&&(n.o=4,qs(14),i=!1),R_(n.j,n.m,null,"[Incomplete Response]");break}if(r==NO){n.o=4,qs(15),R_(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}R_(n.j,n.m,r,null),LO(n,r)}hH(n)&&r!=wx&&r!=NO&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,qs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),YO(t),t.L=!0,qs(11))):(R_(n.j,n.m,e,"[Invalid Chunked Response]"),tm(n),E0(n))}function $Z(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?wx:(e=Number(t.substring(e,i)),isNaN(e)?NO:(i+=1)+e>t.length?wx:(t=t.substr(i,e),n.C=i+e,t))}function D0(n){n.Y=Date.now()+n.P,pH(n,n.P)}function pH(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=b0(Xr(n.eb,n),t)}function Cx(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function E0(n){0==n.l.G||n.I||VH(n.l,n)}function tm(n){Cx(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,TO(n.W),nH(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function LO(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||HO(e.i,n)))if(e.I=n.N,!n.J&&HO(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;Rx(e),Ax(e)}WO(e),qs(18)}}else e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=b0(Xr(e.ab,e),6e3));if(1>=DH(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else rm(e,11)}else if((n.J||e.g==n)&&Rx(e),!dx(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.U=_[0],_=_[1],2==e.G)if("c"==_[0]){e.J=_[1],e.la=_[2];const b=_[3];null!=b&&(e.ma=b,e.h.info("VER="+e.ma));const E=_[4];null!=E&&(e.za=E,e.h.info("SVER="+e.za));const T=_[5];null!=T&&"number"==typeof T&&0<T&&(e.K=i=1.5*T,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const F=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=i.i;!s.g&&(zs(F,"spdy")||zs(F,"quic")||zs(F,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(UO(s,s.h),s.h=null))}if(i.D){const z=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;z&&(i.sa=z,xi(i.F,i.D,z))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((i=e).oa=jH(i,i.H?i.la:null,i.W),c.J){EH(i.i,c);var d=c,f=i.K;f&&d.setTimeout(f),d.B&&(Cx(d),D0(d)),i.g=c}else LH(i);0<e.l.length&&kx(e)}else"stop"!=_[0]&&"close"!=_[0]||rm(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?rm(e,7):$O(e):"noop"!=_[0]&&e.j&&e.j.wa(_),e.A=0)}y0(4)}catch{}}function BO(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(oO(n)||"string"==typeof n)P2(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(oO(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function qZ(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(oO(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function O_(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof O_)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function VO(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];nm(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)nm(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function nm(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(_t=C0.prototype).setTimeout=function(n){this.P=n},_t.gb=function(n){n=n.target;const t=this.L;t&&3==ju(n)?t.l():this.Ia(n)},_t.Ia=function(n){try{if(n==this.g)e:{const b=ju(this.g);var t=this.g.Da();const E=this.g.ba();if(!(3>b)&&(3!=b||hO||this.g&&(this.h.h||this.g.ga()||RH(this.g)))){this.I||4!=b||7==t||y0(8==t||0>=E?3:2),Cx(this);var e=this.g.ba();this.N=e;t:if(hH(this)){var i=RH(this.g);n="";var r=i.length,s=4==ju(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){tm(this),E0(this);var c="";break t}this.h.i=new Qt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function UZ(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,b,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dx(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,qs(12),tm(this),E0(this);break e}R_(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,LO(this,e)}this.U?(fH(this,b,c),hO&&this.i&&3==b&&(tH(this.V,this.W,"tick",this.fb),this.W.start())):(R_(this.j,this.m,c,null),LO(this,c)),4==b&&tm(this),this.i&&!this.I&&(4==b?VH(this.l,this):(this.i=!1,D0(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,qs(12)):(this.o=0,qs(13)),tm(this),E0(this)}}}catch{}},_t.fb=function(){if(this.g){var n=ju(this.g),t=this.g.ga();this.C<t.length&&(Cx(this),fH(this,n,t),this.i&&4!=n&&D0(this))}},_t.cancel=function(){this.I=!0,tm(this)},_t.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jZ(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(y0(3),qs(17)),tm(this),this.o=2,E0(this)):pH(this,this.Y-n)},(_t=O_.prototype).R=function(){VO(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},_t.T=function(){return VO(this),this.g.concat()},_t.get=function(n,t){return nm(this.h,n)?this.h[n]:t},_t.set=function(n,t){nm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},_t.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var mH=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function im(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof im){this.g=void 0!==t?t:n.g,Dx(this,n.j),this.s=n.s,Ex(this,n.i),Sx(this,n.m),this.l=n.l,t=n.h;var e=new M0;e.i=t.i,t.g&&(e.g=new O_(t.g),e.h=t.h),gH(this,e),this.o=n.o}else n&&(e=String(n).match(mH))?(this.g=!!t,Dx(this,e[1]||"",!0),this.s=S0(e[2]||""),Ex(this,e[3]||"",!0),Sx(this,e[4]),this.l=S0(e[5]||"",!0),gH(this,e[6]||"",!0),this.o=S0(e[7]||"")):(this.g=!!t,this.h=new M0(null,this.g))}function Uu(n){return new im(n)}function Dx(n,t,e){n.j=e?S0(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Ex(n,t,e){n.i=e?S0(t,!0):t}function Sx(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function gH(n,t,e){t instanceof M0?(n.h=t,function tK(n,t){t&&!n.j&&(wh(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(vH(this,i),bH(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=x0(t,JZ)),n.h=new M0(t,n.g))}function xi(n,t,e){n.h.set(t,e)}function xx(n){return xi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function S0(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function x0(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,KZ),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function KZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}im.prototype.toString=function(){var n=[],t=this.j;t&&n.push(x0(t,_H,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(x0(t,_H,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(x0(e,"/"==e.charAt(0)?XZ:QZ,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",x0(e,eK)),n.join("")};var _H=/[#\/\?@]/g,QZ=/[#\?:]/g,XZ=/[#\?]/g,JZ=/[#\?@]/g,eK=/#/g;function M0(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function wh(n){n.g||(n.g=new O_,n.h=0,n.i&&function WZ(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function vH(n,t){wh(n),t=P_(n,t),nm(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,nm((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&VO(n)))}function yH(n,t){return wh(n),t=P_(n,t),nm(n.g.h,t)}function bH(n,t,e){vH(n,t),0<e.length&&(n.i=null,n.g.set(P_(n,t),lO(e)),n.h+=e.length)}function P_(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function wH(n){this.l=n||iK,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ea&&Qt.g.Ea()&&Qt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_t=M0.prototype).add=function(n,t){wh(this),this.i=null,n=P_(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},_t.forEach=function(n,t){wh(this),this.g.forEach(function(e,i){P2(e,function(r){n.call(t,r,i,this)},this)},this)},_t.T=function(){wh(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},_t.R=function(n){wh(this);var t=[];if("string"==typeof n)yH(this,n)&&(t=N2(t,this.g.get(P_(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=N2(t,n[e])}return t},_t.set=function(n,t){return wh(this),this.i=null,yH(this,n=P_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},_t.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},_t.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var iK=10;function CH(n){return!!n.h||!!n.g&&n.g.size>=n.j}function DH(n){return n.h?1:n.g?n.g.size:0}function HO(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function UO(n,t){n.g?n.g.add(t):n.h=t}function EH(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function SH(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return lO(n.i)}function jO(){}function rK(){this.g=new jO}function sK(n,t,e){const i=e||"";try{BO(n,function(r,s){let c=r;m0(r)&&(c=SO(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Mx(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function I0(n){this.l=n.$b||null,this.j=n.ib||!1}function Ix(n,t){kr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=GO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wH.prototype.cancel=function(){if(this.i=SH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jO.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},jO.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},Jr(I0,kO),I0.prototype.g=function(){return new Ix(this.l,this.j)},I0.prototype.i=function(n){return function(){return n}}({}),Jr(Ix,kr);var GO=0;function xH(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function T0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,A0(n)}function A0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(_t=Ix.prototype).open=function(n,t){if(this.readyState!=GO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,A0(this)},_t.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Qt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},_t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,T0(this)),this.readyState=GO},_t.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,A0(this)),this.g&&(this.readyState=3,A0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xH(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},_t.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?T0(this):A0(this),3==this.readyState&&xH(this)}},_t.Ua=function(n){this.g&&(this.response=this.responseText=n,T0(this))},_t.Ta=function(n){this.g&&(this.response=n,T0(this))},_t.ha=function(){this.g&&T0(this)},_t.setRequestHeader=function(n,t){this.v.append(n,t)},_t.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},_t.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Ix.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var aK=Qt.JSON.parse;function lr(n){kr.call(this),this.headers=new O_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=MH,this.K=this.L=!1}Jr(lr,kr);var MH="",lK=/^https?$/i,cK=["POST","PUT"];function dK(n){return"content-type"==n.toLowerCase()}function IH(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,TH(n),Tx(n)}function TH(n){n.D||(n.D=!0,es(n,"complete"),es(n,"error"))}function AH(n){if(n.h&&typeof sO<"u"&&(!n.C[1]||4!=ju(n)||2!=n.ba()))if(n.v&&4==ju(n))AO(n.Fa,0,n);else if(es(n,"readystatechange"),4==ju(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(mH)[1]||null;if(!r&&Qt.self&&Qt.self.location){var s=Qt.self.location.protocol;r=s.substr(0,s.length-1)}i=!lK.test(r?r.toLowerCase():"")}e=i}if(e)es(n,"complete"),es(n,"success");else{n.m=6;try{var c=2<ju(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",TH(n)}}finally{Tx(n)}}}function Tx(n,t){if(n.g){kH(n);const e=n.g,i=n.C[0]?cx:null;n.g=null,n.C=null,t||es(n,"ready");try{e.onreadystatechange=i}catch{}}}function kH(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function ju(n){return n.g?n.g.readyState:0}function RH(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case MH:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function zO(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function hK(n){let t="";return uO(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):xi(n,t,e))}function k0(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function OH(n){this.za=0,this.l=[],this.h=new _x,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=k0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=k0("baseRetryDelayMs",5e3,n),this.$a=k0("retryDelaySeedMs",1e4,n),this.Ya=k0("forwardChannelMaxRetries",2,n),this.ra=k0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new wH(n&&n.concurrentRequestLimit),this.Ca=new rK,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function $O(n){if(PH(n),3==n.G){var t=n.V++,e=Uu(n.F);xi(e,"SID",n.J),xi(e,"RID",t),xi(e,"TYPE","terminate"),R0(n,e),(t=new C0(n,n.h,t,void 0)).K=2,t.v=xx(Uu(e)),e=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(e=Qt.navigator.sendBeacon(t.v.toString(),"")),!e&&Qt.Image&&((new Image).src=t.v,e=!0),e||(t.g=GH(t.l,null),t.g.ea(t.v)),t.F=Date.now(),D0(t)}UH(n)}function Ax(n){n.g&&(YO(n),n.g.cancel(),n.g=null)}function PH(n){Ax(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),Rx(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function qO(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&kx(n)}function kx(n){CH(n.i)||n.m||(n.m=!0,xO(n.Ha,n),n.C=0)}function NH(n,t){var e;e=t?t.m:n.V++;const i=Uu(n.F);xi(i,"SID",n.J),xi(i,"RID",e),xi(i,"AID",n.U),R0(n,i),n.o&&n.s&&zO(i,n.o,n.s),e=new C0(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=FH(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),UO(n.i,e),FO(e,i,t)}function R0(n,t){n.j&&BO({},function(e,i){xi(t,i,e)})}function FH(n,t,e){e=Math.min(n.l.length,e);var i=n.j?Xr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let f=0;f<e;f++){let _=r[f].h;const b=r[f].g;if(_-=s,0>_)s=Math.max(0,r[f].h-100),d=!1;else try{sK(b,c,"req"+_+"_")}catch{i&&i(b)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function LH(n){n.g||n.u||(n.Y=1,xO(n.Ga,n),n.A=0)}function WO(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=b0(Xr(n.Ga,n),HH(n,n.A)),n.A++,0))}function YO(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function BH(n){n.g=new C0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Uu(n.oa);xi(t,"RID","rpc"),xi(t,"SID",n.J),xi(t,"CI",n.N?"0":"1"),xi(t,"AID",n.U),R0(n,t),xi(t,"TYPE","xmlhttp"),n.o&&n.s&&zO(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=xx(Uu(t)),e.s=null,e.U=!0,dH(e,n)}function Rx(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function VH(n,t){var e=null;if(n.g==t){Rx(n),YO(n),n.g=null;var i=2}else{if(!HO(n.i,t))return;e=t.D,EH(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;es(i=vx(),new oH(i,e,t,r)),kx(n)}else LH(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function fK(n,t){return!(DH(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=b0(Xr(n.Ha,n,t),HH(n,n.C)),n.C++,0)))}(n,t)||2==i&&WO(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:rm(n,5);break;case 4:rm(n,10);break;case 3:rm(n,6);break;default:rm(n,2)}}function HH(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function rm(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=Xr(n.jb,n);e||(e=new im("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||Dx(e,"https"),xx(e)),function oK(n,t){const e=new _x;if(Qt.Image){const i=new Image;i.onload=ux(Mx,e,i,"TestLoadImage: loaded",!0,t),i.onerror=ux(Mx,e,i,"TestLoadImage: error",!1,t),i.onabort=ux(Mx,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=ux(Mx,e,i,"TestLoadImage: timeout",!1,t),Qt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else qs(2);n.G=0,n.j&&n.j.va(t),UH(n),PH(n)}function UH(n){n.G=0,n.I=-1,n.j&&((0!=SH(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lO(n.l),n.l.length=0),n.j.ua())}function jH(n,t,e){let i=function YZ(n){return n instanceof im?Uu(n):new im(n,void 0)}(e);if(""!=i.i)t&&Ex(i,t+"."+i.i),Sx(i,i.m);else{const r=Qt.location;i=function ZZ(n,t,e,i){var r=new im(null,void 0);return n&&Dx(r,n),t&&Ex(r,t),e&&Sx(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&uO(n.aa,function(r,s){xi(i,s,r)}),e=n.sa,(t=n.D)&&e&&xi(i,t,e),xi(i,"VER",n.ma),R0(n,i),i}function GH(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new lr(e&&n.Ba&&!n.qa?new I0({ib:!0}):n.qa)).L=n.H,t}function zH(){}function Ox(){if(k_&&!(10<=Number(xZ)))throw Error("Environmental error: no available transport.")}function Qo(n,t){kr.call(this),this.g=new OH(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!dx(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dx(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new N_(this)}function $H(n){RO.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function qH(){OO.call(this),this.status=1}function N_(n){this.g=n}(_t=lr.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():PO.g(),this.C=function lH(n){return n.h||(n.h=n.i())}(this.u?this.u:PO),this.g.onreadystatechange=Xr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void IH(this,s)}n=e||"";const r=new O_(this.headers);i&&BO(i,function(s,c){r.set(c,s)}),i=function bZ(n){e:{var t=dK;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Qt.FormData&&n instanceof Qt.FormData,!(0<=O2(cK,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kH(this),0<this.B&&((this.K=function uK(n){return k_&&function SZ(){return function wZ(n){var t=EZ;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=F2(String(hx)).split("."),e=F2("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=cO(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||cO(0==r[2].length,0==s[2].length)||cO(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.pa,this)):this.A=AO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){IH(this,s)}},_t.pa=function(){typeof sO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,es(this,"timeout"),this.abort(8))},_t.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,es(this,"complete"),es(this,"abort"),Tx(this))},_t.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tx(this,!0)),lr.Z.M.call(this)},_t.Fa=function(){this.s||(this.F||this.v||this.l?AH(this):this.cb())},_t.cb=function(){AH(this)},_t.ba=function(){try{return 2<ju(this)?this.g.status:-1}catch{return-1}},_t.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},_t.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),aK(t)}},_t.Da=function(){return this.m},_t.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(_t=OH.prototype).ma=8,_t.G=1,_t.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},_t.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new C0(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=V2(s),U2(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=FH(this,r,t),xi(e=Uu(this.F),"RID",n),xi(e,"CVER",22),this.D&&xi(e,"X-HTTP-Session-Id",this.D),R0(this,e),this.o&&s&&zO(e,this.o,s),UO(this.i,r),this.Ra&&xi(e,"TYPE","init"),this.ja?(xi(e,"$req",t),xi(e,"SID","null"),r.$=!0,FO(r,e,null)):FO(r,e,t),this.G=2}}else 3==this.G&&(n?NH(this,n):0==this.l.length||CH(this.i)||NH(this))},_t.Ga=function(){if(this.u=null,BH(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=b0(Xr(this.bb,this),n)}},_t.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qs(10),Ax(this),BH(this))},_t.ab=function(){null!=this.v&&(this.v=null,Ax(this),WO(this),qs(19))},_t.jb=function(n){n?(this.h.info("Successfully pinged google.com"),qs(2)):(this.h.info("Failed to ping google.com"),qs(1))},(_t=zH.prototype).xa=function(){},_t.wa=function(){},_t.va=function(){},_t.ua=function(){},_t.Oa=function(){},Ox.prototype.g=function(n,t){return new Qo(n,t)},Jr(Qo,kr),Qo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),xO(Xr(n.hb,n,t))),qs(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=jH(n,null,n.W),kx(n)},Qo.prototype.close=function(){$O(this.g)},Qo.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,qO(this.g,t)}else this.v?((t={}).__data__=SO(n),qO(this.g,t)):qO(this.g,n)},Qo.prototype.M=function(){this.g.j=null,delete this.j,$O(this.g),delete this.g,Qo.Z.M.call(this)},Jr($H,RO),Jr(qH,OO),Jr(N_,zH),N_.prototype.xa=function(){es(this.g,"a")},N_.prototype.wa=function(n){es(this.g,new $H(n))},N_.prototype.va=function(n){es(this.g,new qH(n))},N_.prototype.ua=function(){es(this.g,"b")},Ox.prototype.createWebChannel=Ox.prototype.g,Qo.prototype.send=Qo.prototype.u,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,yx.NO_ERROR=0,yx.TIMEOUT=8,yx.HTTP_ERROR=6,aH.COMPLETE="complete",cH.EventType=w0,w0.OPEN="a",w0.CLOSE="b",w0.ERROR="c",w0.MESSAGE="d",kr.prototype.listen=kr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var pK=Hu.createWebChannelTransport=function(){return new Ox},mK=Hu.getStatEventTarget=function(){return vx()},ZO=Hu.ErrorCode=yx,gK=Hu.EventType=aH,_K=Hu.Event=em,WH=Hu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},vK=Hu.FetchXmlHttpFactory=I0,Px=Hu.WebChannel=cH,yK=Hu.XhrIo=lr;const YH="@firebase/firestore";class Rr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let F_="9.9.2";const Ch=new Vl.Yd("@firebase/firestore");function KO(){return Ch.logLevel}function ze(n,...t){if(Ch.logLevel<=Vl.in.DEBUG){const e=t.map(QO);Ch.debug(`Firestore (${F_}): ${n}`,...e)}}function er(n,...t){if(Ch.logLevel<=Vl.in.ERROR){const e=t.map(QO);Ch.error(`Firestore (${F_}): ${n}`,...e)}}function sm(n,...t){if(Ch.logLevel<=Vl.in.WARN){const e=t.map(QO);Ch.warn(`Firestore (${F_}): ${n}`,...e)}}function QO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function yt(n="Unexpected state"){const t=`FIRESTORE (${F_}) INTERNAL ASSERTION FAILED: `+n;throw er(t),new Error(t)}function jt(n,t){n||yt()}function dt(n,t){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class ZH{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Rr.UNAUTHENTICATED))}shutdown(){}}class DK{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class EK{constructor(t){this.t=t,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable((0,Se.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},f=_=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(jt("string"==typeof i.accessToken),new ZH(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return jt(null===t||"string"==typeof t),new Rr(t)}}class SK{constructor(t,e,i){this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class xK{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new SK(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KH{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MK{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(jt("string"==typeof e.token),this.p=e.token,new KH(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function IK(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class QH{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=IK(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Xt(n,t){return n<t?-1:n>t?1:0}function L_(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function XH(n){return n+"\0"}class Mi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Mi.fromMillis(Date.now())}static fromDate(t){return Mi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Mi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Xt(this.nanoseconds,t.nanoseconds):Xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new Mi(0,0))}static max(){return new Bt(new Mi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class O0{constructor(t,e,i){void 0===e?e=0:e>t.length&&yt(),void 0===i?i=t.length-e:i>t.length-e&&yt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===O0.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof O0?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class In extends O0{construct(t,e,i){return new In(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new In(e)}static emptyPath(){return new In([])}}const TK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ui extends O0{construct(t,e,i){return new Ui(t,e,i)}static isValidIdentifier(t){return TK.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ui.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ui(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new He(be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new He(be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new He(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new He(be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ui(e)}static emptyPath(){return new Ui([])}}class ot{constructor(t){this.path=t}static fromPath(t){return new ot(In.fromString(t))}static fromName(t){return new ot(In.fromString(t).popFirst(5))}static empty(){return new ot(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===In.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return In.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new In(t.slice()))}}class Nx{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function XO(n){return n.fields.find(t=>2===t.kind)}function om(n){return n.fields.filter(t=>2!==t.kind)}Nx.UNKNOWN_ID=-1;class Fx{constructor(t,e){this.fieldPath=t,this.kind=e}}class P0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new P0(0,Xo.min())}}function JH(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Bt.fromTimestamp(1e9===i?new Mi(e+1,0):new Mi(e,i));return new Xo(r,ot.empty(),t)}function eU(n){return new Xo(n.readTime,n.key,-1)}class Xo{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Xo(Bt.min(),ot.empty(),-1)}static max(){return new Xo(Bt.max(),ot.empty(),-1)}}function JO(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ot.comparator(n.documentKey,t.documentKey),0!==e?e:Xt(n.largestBatchId,t.largestBatchId))}const tU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Dh(n){return eP.apply(this,arguments)}function eP(){return eP=(0,Se.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==tU)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),eP.apply(this,arguments)}class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new me((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof me?e:me.resolve(e)}catch(e){return me.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):me.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):me.reject(e)}static resolve(t){return new me((e,i)=>{e(t)})}static reject(t){return new me((e,i)=>{i(t)})}static waitFor(t){return new me((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},f=>i(f))}),c=!0,s===r&&e()})}static or(t){let e=me.resolve(!1);for(const i of t)e=e.next(r=>r?me.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new me((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let f=0;f<s;f++){const _=f;e(t[_]).next(b=>{c[_]=b,++d,d===s&&i(c)},b=>r(b))}})}static doWhile(t,e){return new me((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class Lx{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new Or,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new N0(t,e.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=tP(i.target.error);this.T.reject(new N0(t,r))}}static open(t,e,i,r){try{return new Lx(e,t.transaction(r,i))}catch(s){throw new N0(e,s)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||(ze("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new OK(e)}}class Ul{constructor(t,e,i){this.name=t,this.version=e,this.P=i,12.2===Ul.v((0,L.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return ze("SimpleDb","Removing database:",t),am(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,L.hl)())return!1;if(Ul.S())return!0;const t=(0,L.z$)(),e=Ul.v(t),i=0<e&&e<10,r=Ul.D(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static S(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(t){var e=this;return(0,Se.Z)(function*(){return e.db||(ze("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new N0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new He(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new He(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new N0(t,d))},s.onupgradeneeded=c=>{ze("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.P.M(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{ze("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.O&&(e.db.onversionchange=i=>e.O(i)),e.db})()}F(t){this.O=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Se.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.k(t);const f=Lx.open(s.db,t,c?"readonly":"readwrite",i),_=r(f).next(b=>(f.R(),b)).catch(b=>(f.abort(b),me.reject(b))).toPromise();return _.catch(()=>{}),yield f.A,_}catch(f){const _=f,b="FirebaseError"!==_.name&&d<3;if(ze("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),s.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class RK{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return am(this.$.delete())}}class N0 extends He{constructor(t,e){super(be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Eh(n){return"IndexedDbTransactionError"===n.name}class OK{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(ze("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),am(i)}add(t){return ze("SimpleDb","ADD",this.store.name,t,t),am(this.store.add(t))}get(t){return am(this.store.get(t)).next(e=>(void 0===e&&(e=null),ze("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return ze("SimpleDb","DELETE",this.store.name,t),am(this.store.delete(t))}count(){return ze("SimpleDb","COUNT",this.store.name),am(this.store.count())}K(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new me((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}j(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new me((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}W(t,e){ze("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.H=!1;const r=this.cursor(i);return this.G(r,(s,c,d)=>d.delete())}J(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.G(r,e)}Y(t){const e=this.cursor({});return new me((i,r)=>{e.onerror=s=>{const c=tP(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}G(t,e){const i=[];return new me((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const f=new RK(d),_=e(d.primaryKey,d.value,f);if(_ instanceof me){const b=_.catch(E=>(f.done(),me.reject(E)));i.push(b)}f.isDone?r():null===f.U?d.continue():d.continue(f.U)}}).next(()=>me.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function am(n){return new me((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=tP(i.target.error);e(r)}})}let iU=!1;function tP(n){const t=Ul.v((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iU||(iU=!0,setTimeout(()=>{throw i},0)),i}}return n}class PK{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;ze("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Se.Z)(function*(){e.task=null;try{ze("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(i){Eh(i)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Dh(i)}yield e.Z(1)}))}}class NK{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,Se.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.et(i,t))})()}et(t,e){const i=new Set;let r=e,s=!0;return me.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return ze("IndexBackiller",`Processing collection: ${c}`),this.nt(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}nt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.st(r,s)).next(d=>(ze("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}st(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=eU(s);JO(c,i)>0&&(i=c)}),new Xo(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class _o{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.it(i),this.rt=i=>e.writeSequenceNumber(i))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function rU(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function lm(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function sU(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}_o.ot=-1;class ji{constructor(t,e){this.comparator=t,this.root=e||ts.EMPTY}insert(t,e){return new ji(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(t){return new ji(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ts.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bx(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bx(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bx(this.root,t,this.comparator,!0)}}class Bx{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ts{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??ts.RED,this.left=r??ts.EMPTY,this.right=s??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new ts(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ts.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const t=this.left.check();if(t!==this.right.check())throw yt();return t+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1,ts.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ts(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(t){this.comparator=t,this.data=new ji(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new oU(this.data.getIterator())}getIteratorFrom(t){return new oU(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Gn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Gn(this.comparator);return e.data=t,e}}class oU{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function B_(n){return n.hasNext()?n.getNext():void 0}class Jo{constructor(t){this.fields=t,t.sort(Ui.comparator)}static empty(){return new Jo([])}unionWith(t){let e=new Gn(Ui.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Jo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return L_(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class yr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new yr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new yr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const LK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sh(n){if(jt(!!n),"string"==typeof n){let t=0;const e=LK.exec(n);if(jt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Gi(n.seconds),nanos:Gi(n.nanos)}}function Gi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cm(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function nP(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function aU(n){const t=n.mapValue.fields.__previous_value__;return nP(t)?aU(t):t}function F0(n){const t=Sh(n.mapValue.fields.__local_write_time__.timestampValue);return new Mi(t.seconds,t.nanos)}class BK{constructor(t,e,i,r,s,c,d,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class Gu{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Gu&&t.projectId===this.projectId&&t.database===this.database}}function L0(n){return null==n}function B0(n){return 0===n&&1/n==-1/0}function lU(n){return"number"==typeof n&&Number.isInteger(n)&&!B0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const xh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vx={nullValue:"NULL_VALUE"};function um(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nP(n)?4:hU(n)?9007199254740991:10:yt()}function Ic(n,t){if(n===t)return!0;const e=um(n);if(e!==um(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return F0(n).isEqual(F0(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Sh(i.timestampValue),c=Sh(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,cm(n.bytesValue).isEqual(cm(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Gi(i.geoPointValue.latitude)===Gi(r.geoPointValue.latitude)&&Gi(i.geoPointValue.longitude)===Gi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Gi(i.integerValue)===Gi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Gi(i.doubleValue),c=Gi(r.doubleValue);return s===c?B0(s)===B0(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return L_(n.arrayValue.values||[],t.arrayValue.values||[],Ic);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(rU(s)!==rU(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!Ic(s[d],c[d])))return!1;return!0}(n,t);default:return yt()}var r}function V0(n,t){return void 0!==(n.values||[]).find(e=>Ic(e,t))}function Mh(n,t){if(n===t)return 0;const e=um(n),i=um(t);if(e!==i)return Xt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Gi(r.integerValue||r.doubleValue),d=Gi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return cU(n.timestampValue,t.timestampValue);case 4:return cU(F0(n),F0(t));case 5:return Xt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=cm(r),d=cm(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const _=Xt(c[f],d[f]);if(0!==_)return _}return Xt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Xt(Gi(r.latitude),Gi(s.latitude));return 0!==c?c:Xt(Gi(r.longitude),Gi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let f=0;f<c.length&&f<d.length;++f){const _=Mh(c[f],d[f]);if(_)return _}return Xt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===xh.mapValue&&s===xh.mapValue)return 0;if(r===xh.mapValue)return 1;if(s===xh.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),f=s.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let b=0;b<d.length&&b<_.length;++b){const E=Xt(d[b],_[b]);if(0!==E)return E;const T=Mh(c[d[b]],f[_[b]]);if(0!==T)return T}return Xt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw yt()}}function cU(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Xt(n,t);const e=Sh(n),i=Sh(t),r=Xt(e.seconds,i.seconds);return 0!==r?r:Xt(e.nanos,i.nanos)}function V_(n){return iP(n)}function iP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Sh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cm(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=iP(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${iP(i.fields[d])}`;return s+"}"}(n.mapValue):yt();var t}function dm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function rP(n){return!!n&&"integerValue"in n}function H0(n){return!!n&&"arrayValue"in n}function uU(n){return!!n&&"nullValue"in n}function dU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hx(n){return!!n&&"mapValue"in n}function U0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return lm(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=U0(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=U0(n.arrayValue.values[e]);return t}return Object.assign({},n)}function hU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function VK(n){return"nullValue"in n?Vx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dm(Gu.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:yt()}function HK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dm(Gu.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xh:yt()}function fU(n,t){const e=Mh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function pU(n,t){const e=Mh(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class ns{constructor(t){this.value=t}static empty(){return new ns({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Hx(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=U0(e)}setAll(t){let e=Ui.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=U0(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Hx(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ic(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Hx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){lm(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new ns(U0(this.value))}}function mU(n){const t=[];return lm(n.fields,(e,i)=>{const r=new Ui([e]);if(Hx(i)){const s=mU(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new Jo(t)}class ri{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new ri(t,0,Bt.min(),Bt.min(),ns.empty(),0)}static newFoundDocument(t,e,i){return new ri(t,1,e,Bt.min(),i,0)}static newNoDocument(t,e){return new ri(t,2,e,Bt.min(),ns.empty(),0)}static newUnknownDocument(t,e){return new ri(t,3,e,Bt.min(),ns.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ri&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class UK{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ut=null}}function gU(n,t=null,e=[],i=[],r=null,s=null,c=null){return new UK(n,t,e,i,r,s,c)}function hm(n){const t=dt(n);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+V_(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),L0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>V_(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>V_(i)).join(",")),t.ut=e}return t.ut}function j0(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!KK(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!Ic(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!wU(n.startAt,t.startAt)&&wU(n.endAt,t.endAt)}function Ux(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jx(n,t){return n.filters.filter(e=>e instanceof is&&e.field.isEqual(t))}function _U(n,t,e){let i=Vx,r=!0;for(const s of jx(n,t)){let c=Vx,d=!0;switch(s.op){case"<":case"<=":c=VK(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=Vx}fU({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];fU({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function vU(n,t,e){let i=xh,r=!0;for(const s of jx(n,t)){let c=xh,d=!0;switch(s.op){case">=":case">":c=HK(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=xh}pU({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];pU({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class is extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,i):new GK(t,e,i):"array-contains"===e?new qK(t,i):"in"===e?new WK(t,i):"not-in"===e?new YK(t,i):"array-contains-any"===e?new ZK(t,i):new is(t,e,i)}static ct(t,e,i){return"in"===e?new zK(t,i):new $K(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(Mh(e,this.value)):null!==e&&um(this.value)===um(e)&&this.at(Mh(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return yt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class GK extends is{constructor(t,e,i){super(t,e,i),this.key=ot.fromName(i.referenceValue)}matches(t){const e=ot.comparator(t.key,this.key);return this.at(e)}}class zK extends is{constructor(t,e){super(t,"in",e),this.keys=yU(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class $K extends is{constructor(t,e){super(t,"not-in",e),this.keys=yU(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function yU(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>ot.fromName(i.referenceValue))}class qK extends is{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return H0(e)&&V0(e.arrayValue,this.value)}}class WK extends is{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&V0(this.value.arrayValue,e)}}class YK extends is{constructor(t,e){super(t,"not-in",e)}matches(t){if(V0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!V0(this.value.arrayValue,e)}}class ZK extends is{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!H0(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>V0(this.value.arrayValue,i))}}class Ih{constructor(t,e){this.position=t,this.inclusive=e}}class H_{constructor(t,e="asc"){this.field=t,this.dir=e}}function KK(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function bU(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?ot.comparator(ot.fromName(c.referenceValue),e.key):Mh(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function wU(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ic(n.position[e],t.position[e]))return!1;return!0}class zu{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=f,this.lt=null,this.ft=null}}function CU(n,t,e,i,r,s,c,d){return new zu(n,t,e,i,r,s,c,d)}function U_(n){return new zu(n)}function DU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function oP(n){for(const t of n.filters)if(t.ht())return t.field;return null}function aP(n){return null!==n.collectionGroup}function j_(n){const t=dt(n);if(null===t.lt){t.lt=[];const e=oP(t),i=sP(t);if(null!==e&&null===i)e.isKeyField()||t.lt.push(new H_(e)),t.lt.push(new H_(Ui.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new H_(Ui.keyField(),s))}}}return t.lt}function vo(n){const t=dt(n);if(!t.ft)if("F"===t.limitType)t.ft=gU(t.path,t.collectionGroup,j_(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of j_(t))e.push(new H_(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;t.ft=gU(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.ft}function Gx(n,t,e){return new zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function G0(n,t){return j0(vo(n),vo(t))&&n.limitType===t.limitType}function EU(n){return`${hm(vo(n))}|lt:${n.limitType}`}function lP(n){return`Query(target=${function jK(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${V_(i.value)}`;var i}).join(", ")}]`),L0(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>V_(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>V_(e)).join(",")),`Target(${t})`}(vo(n))}; limitType=${n.limitType})`}function cP(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ot.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=bU(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,j_(e),i)||e.endAt&&!function(r,s,c){const d=bU(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,j_(e),i)));var e,i}function SU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xU(n){return(t,e)=>{let i=!1;for(const r of j_(n)){const s=QK(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function QK(n,t,e){const i=n.field.isKeyField()?ot.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),f=c.data.field(r);return null!==d&&null!==f?Mh(d,f):yt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return yt()}}function MU(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:B0(t)?"-0":t}}function IU(n){return{integerValue:""+n}}function TU(n,t){return lU(t)?IU(t):MU(n,t)}class zx{constructor(){this._=void 0}}function XK(n,t,e){return n instanceof G_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof fm?kU(n,t):n instanceof pm?RU(n,t):function(i,r){const s=AU(i,r),c=OU(s)+OU(i._t);return rP(s)&&rP(i._t)?IU(c):MU(i.wt,c)}(n,t)}function JK(n,t,e){return n instanceof fm?kU(n,t):n instanceof pm?RU(n,t):e}function AU(n,t){return n instanceof z_?rP(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class G_ extends zx{}class fm extends zx{constructor(t){super(),this.elements=t}}function kU(n,t){const e=PU(t);for(const i of n.elements)e.some(r=>Ic(r,i))||e.push(i);return{arrayValue:{values:e}}}class pm extends zx{constructor(t){super(),this.elements=t}}function RU(n,t){let e=PU(t);for(const i of n.elements)e=e.filter(r=>!Ic(r,i));return{arrayValue:{values:e}}}class z_ extends zx{constructor(t,e){super(),this.wt=t,this._t=e}}function OU(n){return Gi(n.integerValue||n.doubleValue)}function PU(n){return H0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class z0{constructor(t,e){this.field=t,this.transform=e}}class t7{constructor(t,e){this.version=t,this.transformResults=e}}class Ni{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ni}static exists(t){return new Ni(void 0,t)}static updateTime(t){return new Ni(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $x(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class qx{}function NU(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new q_(n.key,Ni.none()):new $_(n.key,n.data,Ni.none());{const e=n.data,i=ns.empty();let r=new Gn(Ui.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new $u(n.key,i,new Jo(r.toArray()),Ni.none())}}function n7(n,t,e){n instanceof $_?function(i,r,s){const c=i.value.clone(),d=BU(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof $u?function(i,r,s){if(!$x(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=BU(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(LU(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function $0(n,t,e,i){return n instanceof $_?function(r,s,c,d){if(!$x(r.precondition,s))return c;const f=r.value.clone(),_=VU(r.fieldTransforms,d,s);return f.setAll(_),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof $u?function(r,s,c,d){if(!$x(r.precondition,s))return c;const f=VU(r.fieldTransforms,d,s),_=s.data;return _.setAll(LU(r)),_.setAll(f),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(c=e,$x(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function r7(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=AU(i.transform,r||null);null!=s&&(null===e&&(e=ns.empty()),e.set(i.field,s))}return e||null}function FU(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&L_(e,i,(r,s)=>function e7(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof fm&&i instanceof fm||e instanceof pm&&i instanceof pm?L_(e.elements,i.elements,Ic):e instanceof z_&&i instanceof z_?Ic(e._t,i._t):e instanceof G_&&i instanceof G_);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class $_ extends qx{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $u extends qx{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LU(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function BU(n,t,e){const i=new Map;jt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,JK(c,d,e[r]))}return i}function VU(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,XK(s,c,t))}return i}class q_ extends qx{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uP extends qx{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class s7{constructor(t){this.count=t}}var cr,Tn;function HU(n){switch(n){default:return yt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function UU(n){if(void 0===n)return er("GRPC error has no .code"),be.UNKNOWN;switch(n){case cr.OK:return be.OK;case cr.CANCELLED:return be.CANCELLED;case cr.UNKNOWN:return be.UNKNOWN;case cr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case cr.INTERNAL:return be.INTERNAL;case cr.UNAVAILABLE:return be.UNAVAILABLE;case cr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case cr.NOT_FOUND:return be.NOT_FOUND;case cr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case cr.ABORTED:return be.ABORTED;case cr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case cr.DATA_LOSS:return be.DATA_LOSS;default:return yt()}}(Tn=cr||(cr={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class Th{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){lm(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return sU(this.inner)}size(){return this.innerSize}}const o7=new ji(ot.comparator);function yo(){return o7}const jU=new ji(ot.comparator);function q0(...n){let t=jU;for(const e of n)t=t.insert(e.key,e);return t}function GU(n){let t=jU;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Tc(){return W0()}function zU(){return W0()}function W0(){return new Th(n=>n.toString(),(n,t)=>n.isEqual(t))}const a7=new ji(ot.comparator),l7=new Gn(ot.comparator);function sn(...n){let t=l7;for(const e of n)t=t.add(e);return t}const c7=new Gn(Xt);function Wx(){return c7}class Y0{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,Z0.createSynthesizedTargetChangeForCurrentChange(t,e)),new Y0(Bt.min(),i,Wx(),yo(),sn())}}class Z0{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Z0(yr.EMPTY_BYTE_STRING,e,sn(),sn(),sn())}}class Yx{constructor(t,e,i,r){this.gt=t,this.removedTargetIds=e,this.key=i,this.yt=r}}class $U{constructor(t,e){this.targetId=t,this.It=e}}class qU{constructor(t,e,i=yr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class WU{constructor(){this.Tt=0,this.Et=ZU(),this.At=yr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=sn(),e=sn(),i=sn();return this.Et.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:yt()}}),new Z0(this.At,this.Rt,t,e,i)}Dt(){this.bt=!1,this.Et=ZU()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class u7{constructor(t){this.Ot=t,this.Ft=new Map,this.$t=yo(),this.Bt=YU(),this.Lt=new Gn(Xt)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const i=this.Qt(e);switch(t.state){case 0:this.jt(e)&&i.Vt(t.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(t.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(i.Mt(),i.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),i.Vt(t.resumeToken));break;default:yt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((i,r)=>{this.jt(r)&&e(r)})}zt(t){const e=t.targetId,i=t.It.count,r=this.Ht(e);if(r){const s=r.target;if(Ux(s))if(0===i){const c=new ot(s.path);this.Kt(e,c,ri.newNoDocument(c,Bt.min()))}else jt(1===i);else this.Jt(e)!==i&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((s,c)=>{const d=this.Ht(c);if(d){if(s.current&&Ux(d.target)){const f=new ot(d.target.path);null!==this.$t.get(f)||this.Xt(c,f)||this.Kt(c,f,ri.newNoDocument(f,t))}s.vt&&(e.set(c,s.St()),s.Dt())}});let i=sn();this.Bt.forEach((s,c)=>{let d=!0;c.forEachWhile(f=>{const _=this.Ht(f);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.$t.forEach((s,c)=>c.setReadTime(t));const r=new Y0(t,e,this.Lt,this.$t,i);return this.$t=yo(),this.Bt=YU(),this.Lt=new Gn(Xt),r}qt(t,e){if(!this.jt(t))return;const i=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,i),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,i){if(!this.jt(t))return;const r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),i&&(this.$t=this.$t.insert(e,i))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new WU,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new Gn(Xt),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||ze("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}Wt(t){this.Ft.set(t,new WU),this.Ot.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}function YU(){return new ji(ot.comparator)}function ZU(){return new ji(ot.comparator)}const d7={asc:"ASCENDING",desc:"DESCENDING"},h7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class f7{constructor(t,e){this.databaseId=t,this.dt=e}}function K0(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function KU(n,t){return n.dt?t.toBase64():t.toUint8Array()}function p7(n,t){return K0(n,t.toTimestamp())}function Pr(n){return jt(!!n),Bt.fromTimestamp(function(t){const e=Sh(t);return new Mi(e.seconds,e.nanos)}(n))}function dP(n,t){return(e=n,new In(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function QU(n){const t=In.fromString(n);return jt(oj(t)),t}function Q0(n,t){return dP(n.databaseId,t.path)}function Ac(n,t){const e=QU(t);if(e.get(1)!==n.databaseId.projectId)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ot(JU(e))}function hP(n,t){return dP(n.databaseId,t)}function XU(n){const t=QU(n);return 4===t.length?In.emptyPath():JU(t)}function X0(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JU(n){return jt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ej(n,t,e){return{name:Q0(n,t),fields:e.value.mapValue.fields}}function tj(n,t,e){const i=Ac(n,t.name),r=Pr(t.updateTime),s=new ns({mapValue:{fields:t.fields}}),c=ri.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function J0(n,t){let e;if(t instanceof $_)e={update:ej(n,t.key,t.value)};else if(t instanceof q_)e={delete:Q0(n,t.key)};else if(t instanceof $u)e={update:ej(n,t.key,t.data),updateMask:D7(t.fieldMask)};else{if(!(t instanceof uP))return yt();e={verify:Q0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof G_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof pm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof z_)return{fieldPath:s.field.canonicalString(),increment:c._t};throw yt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:p7(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:yt()),e;var r}function fP(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Ni.updateTime(Pr(r.updateTime)):void 0!==r.exists?Ni.exists(r.exists):Ni.none():Ni.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(jt("REQUEST_TIME"===c.setToServerValue),d=new G_):"appendMissingElements"in c?d=new fm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new pm(c.removeAllFromArray.values||[]):"increment"in c?d=new z_(s,c.increment):yt();const f=Ui.fromServerFormat(c.fieldPath);return new z0(f,d)}(n,r)):[];var r;if(t.update){const r=Ac(n,t.update.name),s=new ns({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Jo((t.updateMask.fieldPaths||[]).map(_=>Ui.fromServerFormat(_)));return new $u(r,s,c,e,i)}return new $_(r,s,e,i)}if(t.delete){const r=Ac(n,t.delete);return new q_(r,e)}if(t.verify){const r=Ac(n,t.verify);return new uP(r,e)}return yt()}function nj(n,t){return{documents:[hP(n,t.path)]}}function ij(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=hP(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=hP(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0===f.length)return;const _=f.map(b=>function(E){if("=="===E.op){if(dU(E.value))return{unaryFilter:{field:W_(E.field),op:"IS_NAN"}};if(uU(E.value))return{unaryFilter:{field:W_(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(dU(E.value))return{unaryFilter:{field:W_(E.field),op:"IS_NOT_NAN"}};if(uU(E.value))return{unaryFilter:{field:W_(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:W_(E.field),op:b7(E.op),value:E.value}}}(b));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(_=>{return{field:W_((b=_).field),direction:y7(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(_=t.limit,n.dt||L0(_)?_:{value:_});var _,d,f;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function rj(n){let t=XU(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){jt(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=sj(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(b=>{return new H_(Y_((E=b).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(b){let E;return E="object"==typeof b?b.value:b,L0(E)?null:E}(e.limit));let f=null;var b;e.startAt&&(f=new Ih((b=e.startAt).values||[],!!b.before));let _=null;return e.endAt&&(_=function(b){return new Ih(b.values||[],!b.before)}(e.endAt)),CU(t,r,c,s,d,"F",f,_)}function sj(n){return n?void 0!==n.unaryFilter?[C7(n)]:void 0!==n.fieldFilter?[w7(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>sj(t)).reduce((t,e)=>t.concat(e)):yt():[]}function y7(n){return d7[n]}function b7(n){return h7[n]}function W_(n){return{fieldPath:n.canonicalString()}}function Y_(n){return Ui.fromServerFormat(n.fieldPath)}function w7(n){return is.create(Y_(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(n.fieldFilter.op),n.fieldFilter.value)}function C7(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Y_(n.unaryFilter.field);return is.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Y_(n.unaryFilter.field);return is.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Y_(n.unaryFilter.field);return is.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Y_(n.unaryFilter.field);return is.create(r,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}function D7(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function oj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ws(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=aj(t)),t=E7(n.get(e),t);return aj(t)}function E7(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function aj(n){return n+"\x01\x01"}function kc(n){const t=n.length;if(jt(t>=2),2===t)return jt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&yt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:yt()}s=c+2}return new In(i)}const lj=["userId","batchId"];function Zx(n,t){return[n,Ws(t)]}function cj(n,t,e){return[n,Ws(t),e]}const S7={},x7=["prefixPath","collectionGroup","readTime","documentId"],M7=["prefixPath","collectionGroup","documentId"],I7=["collectionGroup","readTime","prefixPath","documentId"],T7=["canonicalId","targetId"],A7=["targetId","path"],k7=["path","targetId"],R7=["collectionId","parent"],O7=["indexId","uid"],P7=["uid","sequenceNumber"],N7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],F7=["indexId","uid","orderedDocumentKey"],L7=["userId","collectionPath","documentId"],B7=["userId","collectionPath","largestBatchId"],V7=["userId","collectionGroup","largestBatchId"],uj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],H7=[...uj,"documentOverlays"],dj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hj=dj,U7=[...hj,"indexConfiguration","indexState","indexEntries"];class pP extends nU{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function Nr(n,t){const e=dt(n);return Ul.N(e.ee,t)}class mP{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&n7(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$0(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$0(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=zU();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const f=NU(c,d);null!==f&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(Bt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),sn())}isEqual(t){return this.batchId===t.batchId&&L_(this.mutations,t.mutations,(e,i)=>FU(e,i))&&L_(this.baseMutations,t.baseMutations,(e,i)=>FU(e,i))}}class gP{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){jt(t.mutations.length===i.length);let r=a7;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new gP(t,e,i,r)}}class _P{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ah{constructor(t,e,i,r,s=Bt.min(),c=Bt.min(),d=yr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new Ah(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class fj{constructor(t){this.ne=t}}function pj(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Kx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:Q0(r=n.ne,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:K0(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:mm(t.version)};else{if(!t.isUnknownDocument())return yt();i.unknownDocument={path:e.path.toArray(),version:mm(t.version)}}var r,s;return i}function Kx(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function mm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gm(n){const t=new Mi(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function _m(n,t){const e=(t.baseMutations||[]).map(s=>fP(n.ne,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>fP(n.ne,s)),r=Mi.fromMillis(t.localWriteTimeMs);return new mP(t.batchId,r,e,i)}function ew(n){const t=gm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?gm(n.lastLimboFreeSnapshotVersion):Bt.min();let i;var r;return void 0!==n.query.documents?(jt(1===(r=n.query).documents.length),i=vo(U_(XU(r.documents[0])))):i=vo(rj(n.query)),new Ah(i,n.targetId,0,n.lastListenSequenceNumber,t,e,yr.fromBase64String(n.resumeToken))}function mj(n,t){const e=mm(t.snapshotVersion),i=mm(t.lastLimboFreeSnapshotVersion);let r;r=Ux(t.target)?nj(n.ne,t.target):ij(n.ne,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hm(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function vP(n){const t=rj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gx(t,t.limit,"L"):t}function yP(n,t){return new _P(t.largestBatchId,fP(n.ne,t.overlayMutation))}function gj(n,t){const e=t.path.lastSegment();return[n,Ws(t.path.popLast()),e]}function _j(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:mm(i.readTime),documentKey:Ws(i.documentKey.path),largestBatchId:i.largestBatchId}}class G7{getBundleMetadata(t,e){return vj(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:gm(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return vj(t).put({bundleId:(i=e).id,createTime:mm(Pr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return yj(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:vP(r.bundledQuery),readTime:gm(r.readTime)};var r})}saveNamedQuery(t,e){return yj(t).put({name:(i=e).name,readTime:mm(Pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function vj(n){return Nr(n,"bundles")}function yj(n){return Nr(n,"namedQueries")}class Qx{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new Qx(t,e.uid||"")}getOverlay(t,e){return tw(t).get(gj(this.userId,e)).next(i=>i?yP(this.wt,i):null)}getOverlays(t,e){const i=Tc();return me.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new _P(e,c);r.push(this.ie(t,d))}),me.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Ws(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(tw(t).W("collectionPathOverlayIndex",d))}),me.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Tc(),s=Ws(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return tw(t).K("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const _=yP(this.wt,f);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Tc();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return tw(t).J({index:"collectionGroupOverlayIndex",range:d},(f,_,b)=>{const E=yP(this.wt,_);s.size()<r||E.largestBatchId===c?(s.set(E.getKey(),E),c=E.largestBatchId):b.done()}).next(()=>s)}ie(t,e){return tw(t).put(function(i,r,s){const[c,d,f]=gj(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:J0(i.ne,s.mutation)}}(this.wt,this.userId,e))}}function tw(n){return Nr(n,"documentOverlays")}class vm{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(Gi(t.integerValue));else if("doubleValue"in t){const i=Gi(t.doubleValue);isNaN(i)?this.ce(e,13):(this.ce(e,15),B0(i)?e.ae(0):e.ae(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ce(e,20),"string"==typeof i?e.he(i):(e.he(`${i.seconds||""}`),e.ae(i.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(cm(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ce(e,45),e.ae(i.latitude||0),e.ae(i.longitude||0)}else"mapValue"in t?hU(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):yt()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const i=t.fields||{};this.ce(e,55);for(const r of Object.keys(i))this.le(r,e),this.oe(i[r],e)}me(t,e){const i=t.values||[];this.ce(e,50);for(const r of i)this.oe(r,e)}_e(t,e){this.ce(e,37),ot.fromName(t).path.forEach(i=>{this.ce(e,60),this.ge(i,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function z7(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function bj(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=z7(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}vm.ye=new vm;class $7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ie(i.value),i=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=e.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(t){const e=this.Ve(t),i=bj(e);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}De(t){const e=this.Ve(t),i=bj(e);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Me(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class q7{constructor(t){this.Oe=t}de(t){this.Oe.pe(t)}he(t){this.Oe.be(t)}ae(t){this.Oe.ve(t)}ue(){this.Oe.Ce()}}class W7{constructor(t){this.Oe=t}de(t){this.Oe.Ee(t)}he(t){this.Oe.Pe(t)}ae(t){this.Oe.De(t)}ue(){this.Oe.Ne()}}class nw{constructor(){this.Oe=new $7,this.Fe=new q7(this.Oe),this.$e=new W7(this.Oe)}seed(t){this.Oe.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class ym{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new ym(this.indexId,this.documentKey,this.arrayValue,i)}}function bm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=wj(n.arrayValue,t.arrayValue),0!==e?e:(e=wj(n.directionalValue,t.directionalValue),0!==e?e:ot.comparator(n.documentKey,t.documentKey)))}function wj(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class Y7{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const i=e;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(t){const e=XO(t);if(void 0!==e&&!this.Qe(e))return!1;const i=om(t);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const c=i[r];if(!this.je(this.Ke,c)||!this.We(this.Ue[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],c))return!1}return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class Z7{constructor(){this.ze=new bP}addToCollectionParentIndex(t,e){return this.ze.add(e),me.resolve()}getCollectionParents(t,e){return me.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return me.resolve()}deleteFieldIndex(t,e){return me.resolve()}getDocumentsMatchingTarget(t,e){return me.resolve(null)}getIndexType(t,e){return me.resolve(0)}getFieldIndexes(t,e){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,e){return me.resolve(Xo.min())}getMinOffsetFromCollectionGroup(t,e){return me.resolve(Xo.min())}updateCollectionGroup(t,e,i){return me.resolve()}updateIndexEntries(t,e){return me.resolve()}}class bP{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Gn(In.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Gn(In.comparator)).toArray()}}const Xx=new Uint8Array(0);class K7{constructor(t,e){this.user=t,this.databaseId=e,this.He=new bP,this.Je=new Th(i=>hm(i),(i,r)=>j0(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const s={collectionId:i,parent:Ws(r)};return Cj(t).put(s)}return me.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[XH(e),""],!1,!0);return Cj(t).K(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(kc(c.parent))}return i})}addFieldIndex(t,e){const i=Jx(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=rw(t);return s.next(d=>{c.put(_j(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=Jx(t),r=rw(t),s=iw(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=iw(t);let r=!0;const s=new Map;return me.forEach(this.Ye(e),c=>this.Xe(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=sn();const d=[];return me.forEach(s,(f,_)=>{var b;ze("IndexedDbIndexManager",`Using index ${b=f,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${hm(e)}`);const E=function(it,Je){const St=XO(Je);if(void 0===St)return null;for(const Tt of jx(it,St.fieldPath))switch(Tt.op){case"array-contains-any":return Tt.value.arrayValue.values||[];case"array-contains":return[Tt.value]}return null}(_,f),T=function(it,Je){const St=new Map;for(const Tt of om(Je))for(const fn of jx(it,Tt.fieldPath))switch(fn.op){case"==":case"in":St.set(Tt.fieldPath.canonicalString(),fn.value);break;case"not-in":case"!=":return St.set(Tt.fieldPath.canonicalString(),fn.value),Array.from(St.values())}return null}(_,f),P=function(it,Je){const St=[];let Tt=!0;for(const fn of om(Je)){const nr=0===fn.kind?_U(it,fn.fieldPath,it.startAt):vU(it,fn.fieldPath,it.startAt);St.push(nr.value),Tt&&(Tt=nr.inclusive)}return new Ih(St,Tt)}(_,f),F=function(it,Je){const St=[];let Tt=!0;for(const fn of om(Je)){const nr=0===fn.kind?vU(it,fn.fieldPath,it.endAt):_U(it,fn.fieldPath,it.endAt);St.push(nr.value),Tt&&(Tt=nr.inclusive)}return new Ih(St,Tt)}(_,f),z=this.Ze(f,_,P),te=this.Ze(f,_,F),Ve=this.tn(f,_,T),Ze=this.en(f.indexId,E,z,P.inclusive,te,F.inclusive,Ve);return me.forEach(Ze,it=>i.j(it,e.limit).next(Je=>{Je.forEach(St=>{const Tt=ot.fromSegments(St.documentKey);c.has(Tt)||(c=c.add(Tt),d.push(Tt))})}))}).next(()=>d)}return me.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,i,r,s,c,d){const f=(null!=e?e.length:1)*Math.max(i.length,s.length),_=f/(null!=e?e.length:1),b=[];for(let E=0;E<f;++E){const T=e?this.nn(e[E/_]):Xx,P=this.sn(t,T,i[E%_],r),F=this.rn(t,T,s[E%_],c),z=d.map(te=>this.sn(t,T,te,!0));b.push(...this.createRange(P,F,z))}return b}sn(t,e,i,r){const s=new ym(t,ot.empty(),e,i);return r?s:s.Le()}rn(t,e,i,r){const s=new ym(t,ot.empty(),e,i);return r?s.Le():s}Xe(t,e){const i=new Y7(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return me.forEach(this.Ye(e),r=>this.Xe(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new Gn(Ui.comparator),f=!1;for(const _ of c.filters){const b=_;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?f=!0:d=d.add(b.field))}for(const _ of c.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(f?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(t,e){const i=new nw;for(const r of om(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.Be(r.kind);vm.ye.re(s,c)}return i.Me()}nn(t){const e=new nw;return vm.ye.re(t,e.Be(0)),e.Me()}un(t,e){const i=new nw;return vm.ye.re(dm(this.databaseId,e),i.Be(function(r){const s=om(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Me()}tn(t,e,i){if(null===i)return[];let r=[];r.push(new nw);let s=0;for(const c of om(t)){const d=i[s++];for(const f of r)if(this.cn(e,c.fieldPath)&&H0(d))r=this.an(r,c,d);else{const _=f.Be(c.kind);vm.ye.re(d,_)}}return this.hn(r)}Ze(t,e,i){return this.tn(t,e,i.position)}hn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Me();return e}an(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const f=new nw;f.seed(d.Me()),vm.ye.re(c,f.Be(e.kind)),s.push(f)}return s}cn(t,e){return!!t.filters.find(i=>i instanceof is&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=Jx(t),r=rw(t);return(e?i.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.K()).next(s=>{const c=[];return me.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{c.push(function(_,b){const E=b?new P0(b.sequenceNumber,new Xo(gm(b.readTime),new ot(kc(b.documentKey)),b.largestBatchId)):P0.empty(),T=_.fields.map(([P,F])=>new Fx(Ui.fromServerFormat(P),F));return new Nx(_.indexId,_.collectionGroup,T,E)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Xt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=Jx(t),s=rw(t);return this.ln(t).next(c=>r.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>me.forEach(d,f=>s.put(_j(f.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return me.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),me.forEach(d,f=>this.fn(t,r,f).next(_=>{const b=this.dn(s,f);return _.isEqual(b)?me.resolve():this._n(t,s,f,_,b)}))))})}wn(t,e,i,r){return iw(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,e.key),documentKey:e.key.path.toArray()})}mn(t,e,i,r){return iw(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,e.key),e.key.path.toArray()])}fn(t,e,i){const r=iw(t);let s=new Gn(bm);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,e)])},(c,d)=>{s=s.add(new ym(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(t,e){let i=new Gn(bm);const r=this.on(e,t);if(null==r)return i;const s=XO(e);if(null!=s){const c=t.data.field(s.fieldPath);if(H0(c))for(const d of c.arrayValue.values||[])i=i.add(new ym(e.indexId,t.key,this.nn(d),r))}else i=i.add(new ym(e.indexId,t.key,Xx,r));return i}_n(t,e,i,r,s){ze("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,f,_,b,E){const T=d.getIterator(),P=f.getIterator();let F=B_(T),z=B_(P);for(;F||z;){let te=!1,Ve=!1;if(F&&z){const Ze=_(F,z);Ze<0?Ve=!0:Ze>0&&(te=!0)}else null!=F?Ve=!0:te=!0;te?(b(z),z=B_(P)):Ve?(E(F),F=B_(T)):(F=B_(T),z=B_(P))}}(r,s,bm,d=>{c.push(this.wn(t,e,i,d))},d=>{c.push(this.mn(t,e,i,d))}),me.waitFor(c)}ln(t){let e=1;return rw(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>bm(c,d)).filter((c,d,f)=>!d||0!==bm(c,f[d-1]));const r=[];r.push(t);for(const c of i){const d=bm(c,t),f=bm(c,e);if(0===d)r[0]=t.Le();else if(d>0&&f<0)r.push(c),r.push(c.Le());else if(f>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,Xx,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,Xx,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Dj)}getMinOffset(t,e){return me.mapArray(this.Ye(e),i=>this.Xe(t,i).next(r=>r||yt())).next(Dj)}}function Cj(n){return Nr(n,"collectionParents")}function iw(n){return Nr(n,"indexEntries")}function Jx(n){return Nr(n,"indexConfiguration")}function rw(n){return Nr(n,"indexState")}function Dj(n){jt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;JO(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Xo(t.readTime,t.documentKey,e)}const Ej={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new bo(t,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sj(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const f=i.J({range:c},(b,E,T)=>(d++,T.delete()));s.push(f.next(()=>{jt(1===d)}));const _=[];for(const b of e.mutations){const E=cj(t,b.key.path,e.batchId);s.push(r.delete(E)),_.push(b.key)}return me.waitFor(s).next(()=>_)}function eM(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw yt();t=n.noDocument}return JSON.stringify(t).length}bo.DEFAULT_COLLECTION_PERCENTILE=10,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bo.DEFAULT=new bo(41943040,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bo.DISABLED=new bo(-1,0,0);class tM{constructor(t,e,i,r){this.userId=t,this.wt=e,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(t,e,i,r){jt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new tM(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kh(t).J({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Z_(t),c=kh(t);return c.add({}).next(d=>{jt("number"==typeof d);const f=new mP(d,e,i,r),_=function(T,P,F){const z=F.baseMutations.map(Ve=>J0(T.ne,Ve)),te=F.mutations.map(Ve=>J0(T.ne,Ve));return{userId:P,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:z,mutations:te}}(this.wt,this.userId,f),b=[];let E=new Gn((T,P)=>Xt(T.canonicalString(),P.canonicalString()));for(const T of r){const P=cj(this.userId,T.key.path,d);E=E.add(T.key.path.popLast()),b.push(c.put(_)),b.push(s.put(P,S7))}return E.forEach(T=>{b.push(this.indexManager.addToCollectionParentIndex(t,T))}),t.addOnCommittedListener(()=>{this.gn[d]=f.keys()}),me.waitFor(b).next(()=>f)})}lookupMutationBatch(t,e){return kh(t).get(e).next(i=>i?(jt(i.userId===this.userId),_m(this.wt,i)):null)}yn(t,e){return this.gn[e]?me.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.gn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return kh(t).J({index:"userMutationsIndex",range:r},(c,d,f)=>{d.userId===this.userId&&(jt(d.batchId>=i),s=_m(this.wt,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return kh(t).J({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kh(t).K("userMutationsIndex",e).next(i=>i.map(r=>_m(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Zx(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Z_(t).J({range:r},(c,d,f)=>{const[_,b,E]=c,T=kc(b);if(_===this.userId&&e.path.isEqual(T))return kh(t).get(E).next(P=>{if(!P)throw yt();jt(P.userId===this.userId),s.push(_m(this.wt,P))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Gn(Xt);const r=[];return e.forEach(s=>{const c=Zx(this.userId,s.path),d=IDBKeyRange.lowerBound(c),f=Z_(t).J({range:d},(_,b,E)=>{const[T,P,F]=_,z=kc(P);T===this.userId&&s.path.isEqual(z)?i=i.add(F):E.done()});r.push(f)}),me.waitFor(r).next(()=>this.pn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=Zx(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new Gn(Xt);return Z_(t).J({range:c},(f,_,b)=>{const[E,T,P]=f,F=kc(T);E===this.userId&&i.isPrefixOf(F)?F.length===r&&(d=d.add(P)):b.done()}).next(()=>this.pn(t,d))}pn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(kh(t).get(s).next(c=>{if(null===c)throw yt();jt(c.userId===this.userId),i.push(_m(this.wt,c))}))}),me.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return Sj(t.ee,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),me.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return me.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Z_(t).J({range:i},(s,c,d)=>{if(s[0]===this.userId){const f=kc(s[1]);r.push(f)}else d.done()}).next(()=>{jt(0===r.length)})})}containsKey(t,e){return xj(t,this.userId,e)}Tn(t){return Mj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xj(n,t,e){const i=Zx(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Z_(n).J({range:s,H:!0},(d,f,_)=>{const[b,E,T]=d;b===t&&E===r&&(c=!0),_.done()}).next(()=>c)}function kh(n){return Nr(n,"mutations")}function Z_(n){return Nr(n,"documentMutations")}function Mj(n){return Nr(n,"mutationQueues")}class wm{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new wm(0)}static Rn(){return new wm(-1)}}class Q7{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const i=new wm(e.highestTargetId);return e.highestTargetId=i.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>Bt.fromTimestamp(new Mi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.bn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Pn(t,r)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(i=>(i.targetCount+=1,this.Vn(e,i),this.Pn(t,i))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>K_(t).delete(e.targetId)).next(()=>this.bn(t)).next(i=>(jt(i.targetCount>0),i.targetCount-=1,this.Pn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return K_(t).J((c,d)=>{const f=ew(d);f.sequenceNumber<=e&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(t,f)))}).next(()=>me.waitFor(s)).next(()=>r)}forEachTarget(t,e){return K_(t).J((i,r)=>{const s=ew(r);e(s)})}bn(t){return Ij(t).get("targetGlobalKey").next(e=>(jt(null!==e),e))}Pn(t,e){return Ij(t).put("targetGlobalKey",e)}vn(t,e){return K_(t).put(mj(this.wt,e))}Vn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=hm(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return K_(t).J({range:r,index:"queryTargetsIndex"},(c,d,f)=>{const _=ew(d);j0(e,_.target)&&(s=_,f.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Rh(t);return e.forEach(c=>{const d=Ws(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),me.waitFor(r)}removeMatchingKeys(t,e,i){const r=Rh(t);return me.forEach(e,s=>{const c=Ws(s.path);return me.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Rh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Rh(t);let s=sn();return r.J({range:i,H:!0},(c,d,f)=>{const _=kc(c[1]),b=new ot(_);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=Ws(e.path),r=IDBKeyRange.bound([i],[XH(i)],!1,!0);let s=0;return Rh(t).J({index:"documentTargetsIndex",H:!0,range:r},([c,d],f,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}te(t,e){return K_(t).get(e).next(i=>i?ew(i):null)}}function K_(n){return Nr(n,"targets")}function Ij(n){return Nr(n,"targetGlobal")}function Rh(n){return Nr(n,"targetDocuments")}function Tj([n,t],[e,i]){const r=Xt(n,e);return 0===r?Xt(t,i):r}class X7{constructor(t){this.Sn=t,this.buffer=new Gn(Tj),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Tj(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class J7{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Se.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Eh(i)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Dh(i)}yield e.kn(3e5)}))}}class eQ{constructor(t,e){this.Mn=t,this.params=e}calculateTargetCount(t,e){return this.Mn.On(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return me.resolve(_o.ot);const i=new X7(e);return this.Mn.forEachTarget(t,r=>i.xn(r.sequenceNumber)).next(()=>this.Mn.Fn(t,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Mn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Mn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Ej)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ej):this.$n(t,e))}getCacheSize(t){return this.Mn.getCacheSize(t)}$n(t,e){let i,r,s,c,d,f,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,d=Date.now(),this.removeTargets(t,i,e))).next(E=>(s=E,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(_=Date.now(),KO()<=Vl.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(_-f)+`ms\nTotal Duration: ${_-b}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:E})))}}class tQ{constructor(t,e){this.db=t,this.garbageCollector=new eQ(this,e)}On(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Bn(t){let e=0;return this.Fn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(i,r)=>e(r))}addReference(t,e,i){return nM(t,i)}removeReference(t,e,i){return nM(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return nM(t,e)}Un(t,e){return function(i,r){let s=!1;return Mj(i).Y(c=>xj(i,c,r).next(d=>(d&&(s=!0),me.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(t,(c,d)=>{if(d<=e){const f=this.Un(t,c).next(_=>{if(!_)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Bt.min()),Rh(t).delete([0,Ws(c.path)])))});r.push(f)}}).next(()=>me.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return nM(t,e)}Ln(t,e){const i=Rh(t);let r,s=_o.ot;return i.J({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:_})=>{0===c?(s!==_o.ot&&e(new ot(kc(r)),s),s=_,r=f):s=_o.ot}).next(()=>{s!==_o.ot&&e(new ot(kc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function nM(n,t){return Rh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ws(t.path),sequenceNumber:i}));var i}class Aj{constructor(){this.changes=new Th(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ri.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?me.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class nQ{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Cm(t).put(i)}removeEntry(t,e,i){return Cm(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Kx(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.qn(t,i)))}getEntry(t,e){let i=ri.newInvalidDocument(e);return Cm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(sw(e))},(r,s)=>{i=this.Kn(e,s)}).next(()=>i)}Gn(t,e){let i={size:0,document:ri.newInvalidDocument(e)};return Cm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(sw(e))},(r,s)=>{i={document:this.Kn(e,s),size:eM(s)}}).next(()=>i)}getEntries(t,e){let i=yo();return this.Qn(t,e,(r,s)=>{const c=this.Kn(r,s);i=i.insert(r,c)}).next(()=>i)}jn(t,e){let i=yo(),r=new ji(ot.comparator);return this.Qn(t,e,(s,c)=>{const d=this.Kn(s,c);i=i.insert(s,d),r=r.insert(s,eM(c))}).next(()=>({documents:i,Wn:r}))}Qn(t,e,i){if(e.isEmpty())return me.resolve();let r=new Gn(Pj);e.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(sw(r.first()),sw(r.last())),c=r.getIterator();let d=c.getNext();return Cm(t).J({index:"documentKeyIndex",range:s},(f,_,b)=>{const E=ot.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&Pj(d,E)<0;)i(d,null),d=c.getNext();d&&d.isEqual(E)&&(i(d,_),d=c.hasNext()?c.getNext():null),d?b.q(sw(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),Kx(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cm(t).K(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=yo();for(const f of c){const _=this.Kn(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=yo();const c=Oj(e,i),d=Oj(e,Xo.max());return Cm(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,_,b)=>{const E=this.Kn(ot.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(E.key,E),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new iQ(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Rj(t).get("remoteDocumentGlobalKey").next(e=>(jt(!!e),e))}qn(t,e){return Rj(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const i=function j7(n,t){let e;if(t.document)e=tj(n.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ot.fromSegments(t.noDocument.path),r=gm(t.noDocument.readTime);e=ri.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return yt();{const i=ot.fromSegments(t.unknownDocument.path),r=gm(t.unknownDocument.version);e=ri.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Mi(i[0],i[1]);return Bt.fromTimestamp(r)}(t.readTime)),e}(this.wt,e);if(!i.isNoDocument()||!i.version.isEqual(Bt.min()))return i}return ri.newInvalidDocument(t)}}function kj(n){return new nQ(n)}class iQ extends Aj{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new Th(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new Gn((s,c)=>Xt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Hn.get(s);if(e.push(this.zn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const f=pj(this.zn.wt,c);r=r.add(s.path.popLast()),i+=eM(f)-d.size,e.push(this.zn.addEntry(t,s,f))}else if(i-=d.size,this.trackRemovals){const f=pj(this.zn.wt,c.convertToNoDocument(Bt.min()));e.push(this.zn.addEntry(t,s,f))}}),r.forEach(s=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.zn.updateMetadata(t,i)),me.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(i=>(this.Hn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:i,Wn:r})=>(r.forEach((s,c)=>{this.Hn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function Rj(n){return Nr(n,"remoteDocumentGlobal")}function Cm(n){return Nr(n,"remoteDocumentsV14")}function sw(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Oj(n,t){const e=t.documentKey.path.toArray();return[n,Kx(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Pj(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Xt(e[s],i[s]),r)return r;return r=Xt(e.length,i.length),r||(r=Xt(e[e.length-2],i[i.length-2]),r||Xt(e[e.length-1],i[i.length-1]))}class rQ{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Nj{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&$0(i.mutation,r,Jo.empty(),Mi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,sn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=sn()){const r=Tc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=q0();return s.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Tc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,sn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=yo();const c=W0(),d=W0();return e.forEach((f,_)=>{const b=i.get(_.key);r.has(_.key)&&(void 0===b||b.mutation instanceof $u)?s=s.insert(_.key,_):void 0!==b&&(c.set(_.key,b.mutation.getFieldMask()),$0(b.mutation,_,b.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(t,s).next(f=>(f.forEach((_,b)=>c.set(_,b)),e.forEach((_,b)=>{var E;return d.set(_,new rQ(b,null!==(E=c.get(_))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const i=W0();let r=new ji((c,d)=>c-d),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(f=>{const _=e.get(f);if(null===_)return;let b=i.get(f)||Jo.empty();b=d.applyToLocalView(_,b),i.set(f,b);const E=(r.get(d.batchId)||sn()).add(f);r=r.insert(d.batchId,E)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,b=f.value,E=zU();b.forEach(T=>{if(!s.has(T)){const P=NU(e.get(T),i.get(T));null!==P&&E.set(T,P),s=s.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,_,E))}return me.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return ot.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):aP(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):me.resolve(Tc());let d=-1,f=s;return c.next(_=>me.forEach(_,(b,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(b)?me.resolve():this.getBaseDocument(t,b,E).next(T=>{f=f.insert(b,T)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,f,_,sn())).next(b=>({batchId:d,changes:GU(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ot(e)).next(i=>{let r=q0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=q0();return this.indexManager.getCollectionParents(t,r).next(c=>me.forEach(c,d=>{const f=(_=e,b=d.child(r),new zu(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(t,f,i).next(_=>{_.forEach((b,E)=>{s=s.insert(b,E)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,f)=>{const _=f.getKey();null===r.get(_)&&(r=r.insert(_,ri.newInvalidDocument(_)))});let c=q0();return r.forEach((d,f)=>{const _=s.get(d);void 0!==_&&$0(_.mutation,f,Jo.empty(),Mi.now()),cP(e,f)&&(c=c.insert(d,f))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):me.resolve(ri.newInvalidDocument(e))}}class sQ{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return me.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var i;return this.Jn.set(e.id,{id:(i=e).id,version:i.version,createTime:Pr(i.createTime)}),me.resolve()}getNamedQuery(t,e){return me.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(i=e).name,query:vP(i.bundledQuery),readTime:Pr(i.readTime)}),me.resolve();var i}}class oQ{constructor(){this.overlays=new ji(ot.comparator),this.Xn=new Map}getOverlay(t,e){return me.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Tc();return me.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ie(t,e,s)}),me.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),me.resolve()}getOverlaysForCollection(t,e,i){const r=Tc(),s=e.length+1,c=new ot(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return me.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new ji((_,b)=>_-b);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let b=s.get(_.largestBatchId);null===b&&(b=Tc(),s=s.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const d=Tc(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,b)=>d.set(_,b)),!(d.size()>=r)););return me.resolve(d)}ie(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new _P(e,i));let s=this.Xn.get(e);void 0===s&&(s=sn(),this.Xn.set(e,s)),this.Xn.set(e,s.add(i.key))}}class wP{constructor(){this.Zn=new Gn(Fr.ts),this.es=new Gn(Fr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const i=new Fr(t,e);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.rs(new Fr(t,e))}os(t,e){t.forEach(i=>this.removeReference(i,e))}us(t){const e=new ot(new In([])),i=new Fr(e,t),r=new Fr(e,t+1),s=[];return this.es.forEachInRange([i,r],c=>{this.rs(c),s.push(c.key)}),s}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new ot(new In([])),i=new Fr(e,t),r=new Fr(e,t+1);let s=sn();return this.es.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Fr(t,0),i=this.Zn.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Fr{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return ot.comparator(t.key,e.key)||Xt(t.ls,e.ls)}static ns(t,e){return Xt(t.ls,e.ls)||ot.comparator(t.key,e.key)}}class aQ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new Gn(Fr.ts)}checkEmpty(t){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.fs;this.fs++;const c=new mP(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.ds=this.ds.add(new Fr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return me.resolve(c)}lookupMutationBatch(t,e){return me.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ws(e+1),s=r<0?0:r;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Fr(e,0),r=new Fr(e,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],c=>{const d=this._s(c.ls);s.push(d)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Gn(Xt);return e.forEach(r=>{const s=new Fr(r,0),c=new Fr(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,c],d=>{i=i.add(d.ls)})}),me.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;ot.isDocumentKey(s)||(s=s.child(""));const c=new Fr(new ot(s),0);let d=new Gn(Xt);return this.ds.forEachWhile(f=>{const _=f.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(f.ls)),!0)},c),me.resolve(this.gs(d))}gs(t){const e=[];return t.forEach(i=>{const r=this._s(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){jt(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return me.forEach(e.mutations,r=>{const s=new Fr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ds=i})}In(t){}containsKey(t,e){const i=new Fr(e,0),r=this.ds.firstAfterOrEqual(i);return me.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return me.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class lQ{constructor(t){this.ps=t,this.docs=new ji(ot.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.ps(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return me.resolve(i?i.document.mutableCopy():ri.newInvalidDocument(e))}getEntries(t,e){let i=yo();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ri.newInvalidDocument(r))}),me.resolve(i)}getAllFromCollection(t,e,i){let r=yo();const s=new ot(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||JO(eU(f),i)<=0||(r=r.insert(f.key,f.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(t,e,i,r){yt()}Is(t,e){return me.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new cQ(this)}getSize(t){return me.resolve(this.size)}}class cQ extends Aj{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.zn.addEntry(t,r)):this.zn.removeEntry(i)}),me.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class uQ{constructor(t){this.persistence=t,this.Ts=new Th(e=>hm(e),j0),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Es=0,this.As=new wP,this.targetCount=0,this.Rs=wm.An()}forEachTarget(t,e){return this.Ts.forEach((i,r)=>e(r)),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Es&&(this.Es=e),me.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new wm(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,me.resolve()}updateTargetData(t,e){return this.vn(e),me.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Ts.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),me.waitFor(s).next(()=>r)}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,e){const i=this.Ts.get(e)||null;return me.resolve(i)}addMatchingKeys(t,e,i){return this.As.ss(e,i),me.resolve()}removeMatchingKeys(t,e,i){this.As.os(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),me.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),me.resolve()}getMatchingKeysForTargetId(t,e){const i=this.As.hs(e);return me.resolve(i)}containsKey(t,e){return me.resolve(this.As.containsKey(e))}}class Fj{constructor(t,e){this.bs={},this.overlays={},this.Ps=new _o(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new uQ(this),this.indexManager=new Z7,this.remoteDocumentCache=new lQ(i=>this.referenceDelegate.Ss(i)),this.wt=new fj(e),this.Ds=new sQ(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new oQ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.bs[t.toKey()];return i||(i=new aQ(e,this.referenceDelegate),this.bs[t.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,i){ze("MemoryPersistence","Starting transaction:",t);const r=new dQ(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(t,e){return me.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,e)))}}class dQ extends nU{constructor(t){super(),this.currentSequenceNumber=t}}class iM{constructor(t){this.persistence=t,this.ks=new wP,this.Ms=null}static Os(t){return new iM(t)}get Fs(){if(this.Ms)return this.Ms;throw yt()}addReference(t,e,i){return this.ks.addReference(i,e),this.Fs.delete(i.toString()),me.resolve()}removeReference(t,e,i){return this.ks.removeReference(i,e),this.Fs.add(i.toString()),me.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),me.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Cs(){this.Ms=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Fs,i=>{const r=ot.fromPath(i);return this.$s(t,r).next(s=>{s||e.removeEntry(r,Bt.min())})}).next(()=>(this.Ms=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(i=>{i?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return me.or([()=>me.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class hQ{constructor(t){this.wt=t}M(t,e,i,r){const s=new Lx("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lj,{unique:!0}),d.createObjectStore("documentMutations"),Lj(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=me.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),Lj(t)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,f){return f.store("mutations").K().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lj,{unique:!0});const b=f.store("mutations"),E=_.map(T=>b.put(T));return me.waitFor(E)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Bs(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(s)))),i<7&&r>=7&&(c=c.next(()=>this.Us(s))),i<8&&r>=8&&(c=c.next(()=>this.qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.Ks(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:L7});f.createIndex("collectionPathOverlayIndex",B7,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",V7,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:x7});f.createIndex("documentKeyIndex",M7),f.createIndex("collectionGroupIndex",I7)}(t)).next(()=>this.Gs(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.Qs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:O7}).createIndex("sequenceNumberIndex",P7,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:N7}).createIndex("documentKeyIndex",F7,{unique:!1})}(t))),c}Ls(t){let e=0;return t.store("remoteDocuments").J((i,r)=>{e+=eM(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.K().next(r=>me.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",c).next(d=>me.forEach(d,f=>{jt(f.userId===s.userId);const _=_m(this.wt,f);return Sj(t,s.userId,_).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((c,d)=>{const f=new In(c),_=[0,Ws(f)];s.push(e.get(_).next(b=>b?me.resolve():e.put({targetId:0,path:Ws(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:R7});const i=e.store("collectionParents"),r=new bP,s=c=>{if(r.add(c)){const d=c.lastSegment(),f=c.popLast();return i.put({collectionId:d,parent:Ws(f)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const f=new In(c);return s(f.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,f],_)=>{const b=kc(d);return s(b.popLast())}))}Ks(t){const e=t.store("targets");return e.J((i,r)=>{const s=ew(r),c=mj(this.wt,s);return e.put(c)})}Gs(t,e){const i=e.store("remoteDocuments"),r=[];return i.J((s,c)=>{const d=e.store("remoteDocumentsV14"),f=(_=c,_.document?new ot(In.fromString(_.document.name).popFirst(5)):_.noDocument?ot.fromSegments(_.noDocument.path):_.unknownDocument?ot.fromSegments(_.unknownDocument.path):yt()).path.toArray();var _;const b={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(b))}).next(()=>me.waitFor(r))}Qs(t,e){const i=e.store("mutations"),r=kj(this.wt),s=new Fj(iM.Os,this.wt.ne);return i.K().next(c=>{const d=new Map;return c.forEach(f=>{var _;let b=null!==(_=d.get(f.userId))&&void 0!==_?_:sn();_m(this.wt,f).keys().forEach(E=>b=b.add(E)),d.set(f.userId,b)}),me.forEach(d,(f,_)=>{const b=new Rr(_),E=Qx.se(this.wt,b),T=s.getIndexManager(b),P=tM.se(b,this.wt,T,s.referenceDelegate);return new Nj(r,P,E,T).recalculateAndSaveOverlaysForDocumentKeys(new pP(e,_o.ot),f).next()})})}}function Lj(n){n.createObjectStore("targetDocuments",{keyPath:A7}).createIndex("documentTargetsIndex",k7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T7,{unique:!0}),n.createObjectStore("targetGlobal")}const CP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DP{constructor(t,e,i,r,s,c,d,f,_,b,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.js=s,this.window=c,this.document=d,this.Ws=_,this.zs=b,this.Hs=E,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=T=>Promise.resolve(),!DP.V())throw new He(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tQ(this,r),this.ei=e+"main",this.wt=new fj(f),this.ni=new Ul(this.ei,this.Hs,new hQ(this.wt)),this.Vs=new Q7(this.referenceDelegate,this.wt),this.remoteDocumentCache=kj(this.wt),this.Ds=new G7,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===b&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(be.FAILED_PRECONDITION,CP);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new _o(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var i=(0,Se.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,Se.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,Se.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>rM(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(Eh(t))return ze("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return ow(t).get("owner").next(e=>me.resolve(this.di(e)))}_i(t){return rM(t).delete(this.clientId)}wi(){var t=this;return(0,Se.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Nr(i,"clientMetadata");return r.K().next(s=>{const c=t.gi(s,18e5),d=s.filter(f=>-1===c.indexOf(f));return me.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t.si)for(const i of e)t.si.removeItem(t.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?me.resolve(!0):ow(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new He(be.FAILED_PRECONDITION,CP);return!1}}return!(!this.networkEnabled||!this.inForeground)||rM(t).K().next(i=>void 0===this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&ze("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Se.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new pP(e,_o.ot);return t.li(i).next(()=>t._i(i))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(i=>this.mi(i.updateTimeMs,e)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>rM(t).K().next(e=>this.gi(e,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return tM.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new K7(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return Qx.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,i){ze("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Hs)?U7:14===c?hj:13===c?dj:12===c?H7:11===c?uj:void yt();var c;let d;return this.ni.runTransaction(t,r,s,f=>(d=new pP(f,this.Ps?this.Ps.next():_o.ot),"readwrite-primary"===e?this.ai(d).next(_=>!!_||this.hi(d)).next(_=>{if(!_)throw er(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new He(be.FAILED_PRECONDITION,tU);return i(d)}).next(_=>this.fi(d).next(()=>_)):this.bi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}bi(t){return ow(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new He(be.FAILED_PRECONDITION,CP)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ow(t).put("owner",e)}static V(){return Ul.V()}li(t){const e=ow(t);return e.get("owner").next(i=>this.di(i)?(ze("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):me.resolve())}mi(t,e){const i=Date.now();return!(t<i-e||t>i&&(er(`Detected an update time that is in the future: ${t} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const i=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return ze("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return er("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){er("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ow(n){return Nr(n,"owner")}function rM(n){return Nr(n,"clientMetadata")}function EP(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class SP{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Pi=i,this.vi=r}static Vi(t,e){let i=sn(),r=sn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new SP(t,e.fromCache,i,r)}}class Bj{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,i,r){return this.Ci(t,e).next(s=>s||this.xi(t,e,r,i)).next(s=>s||this.Ni(t,e))}Ci(t,e){if(DU(e))return me.resolve(null);let i=vo(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=Gx(e,null,"F"),i=vo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=sn(...s);return this.Di.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(f=>{const _=this.ki(e,d);return this.Mi(e,_,c,f.readTime)?this.Ci(t,Gx(e,null,"F")):this.Oi(t,_,e,f)}))})))}xi(t,e,i,r){return DU(e)||r.isEqual(Bt.min())?this.Ni(t,e):this.Di.getDocuments(t,i).next(s=>{const c=this.ki(e,s);return this.Mi(e,c,i,r)?this.Ni(t,e):(KO()<=Vl.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lP(e)),this.Oi(t,c,e,JH(r,-1)))})}ki(t,e){let i=new Gn(xU(t));return e.forEach((r,s)=>{cP(t,s)&&(i=i.add(s))}),i}Mi(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(t,e){return KO()<=Vl.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",lP(e)),this.Di.getDocumentsMatchingQuery(t,e,Xo.min())}Oi(t,e,i,r){return this.Di.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class fQ{constructor(t,e,i,r){this.persistence=t,this.Fi=e,this.wt=r,this.$i=new ji(Xt),this.Bi=new Th(s=>hm(s),j0),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(i)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Nj(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function Vj(n,t,e,i){return new fQ(n,t,e,i)}function Hj(n,t){return xP.apply(this,arguments)}function xP(){return xP=(0,Se.Z)(function*(n,t){const e=dt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let f=sn();for(const _ of r){c.push(_.batchId);for(const b of _.mutations)f=f.add(b.key)}for(const _ of s){d.push(_.batchId);for(const b of _.mutations)f=f.add(b.key)}return e.localDocuments.getDocuments(i,f).next(_=>({Ki:_,removedBatchIds:c,addedBatchIds:d}))})})}),xP.apply(this,arguments)}function pQ(n,t){const e=dt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,f,_){const b=f.batch,E=b.keys();let T=me.resolve();return E.forEach(P=>{T=T.next(()=>_.getEntry(d,P)).next(F=>{const z=f.docVersions.get(P);jt(null!==z),F.version.compareTo(z)<0&&(b.applyToRemoteDocument(F,f),F.isValidDocument()&&(F.setReadTime(f.commitVersion),_.addEntry(F)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=sn();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Uj(n){const t=dt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function mQ(n,t){const e=dt(n),i=t.snapshotVersion;let r=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Ui.newChangeBuffer({trackRemovals:!0});r=e.$i;const d=[];t.targetChanges.forEach((b,E)=>{const T=r.get(E);if(!T)return;d.push(e.Vs.removeMatchingKeys(s,b.removedDocuments,E).next(()=>e.Vs.addMatchingKeys(s,b.addedDocuments,E)));let P=T.withSequenceNumber(s.currentSequenceNumber);var F,z,te;t.targetMismatches.has(E)?P=P.withResumeToken(yr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,i)),r=r.insert(E,P),z=P,te=b,(0===(F=T).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&d.push(e.Vs.updateTargetData(s,P))});let f=yo(),_=sn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(jj(s,c,t.documentUpdates).next(b=>{f=b.Gi,_=b.Qi})),!i.isEqual(Bt.min())){const b=e.Vs.getLastRemoteSnapshotVersion(s).next(E=>e.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return me.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,f,_)).next(()=>f)}).then(s=>(e.$i=r,s))}function jj(n,t,e){let i=sn(),r=sn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=yo();return e.forEach((d,f)=>{const _=s.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Bt.min())?(t.removeEntry(d,f.readTime),c=c.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(f),c=c.insert(d,f)):ze("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{Gi:c,Qi:r}})}function gQ(n,t){const e=dt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Q_(n,t){const e=dt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Vs.getTargetData(i,t).next(s=>s?(r=s,me.resolve(r)):e.Vs.allocateTargetId(i).next(c=>(r=new Ah(t,c,0,i.currentSequenceNumber),e.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.$i=e.$i.insert(i.targetId,i),e.Bi.set(t,i.targetId)),i})}function X_(n,t,e){return MP.apply(this,arguments)}function MP(){return MP=(0,Se.Z)(function*(n,t,e){const i=dt(n),r=i.$i.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Eh(c))throw c;ze("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.$i=i.$i.remove(t),i.Bi.delete(r.target)}),MP.apply(this,arguments)}function sM(n,t,e){const i=dt(n);let r=Bt.min(),s=sn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,f,_){const b=dt(d),E=b.Bi.get(_);return void 0!==E?me.resolve(b.$i.get(E)):b.Vs.getTargetData(f,_)}(i,c,vo(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{s=f})}).next(()=>i.Fi.getDocumentsMatchingQuery(c,t,e?r:Bt.min(),e?s:sn())).next(d=>($j(i,SU(t),d),{documents:d,ji:s})))}function Gj(n,t){const e=dt(n),i=dt(e.Vs),r=e.$i.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.te(s,t).next(c=>c?c.target:null))}function zj(n,t){const e=dt(n),i=e.Li.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Ui.getAllFromCollectionGroup(r,t,JH(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>($j(e,t,r),r))}function $j(n,t,e){let i=Bt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(t,i)}function IP(){return IP=(0,Se.Z)(function*(n,t,e,i){const r=dt(n);let s=sn(),c=yo();for(const _ of e){const b=t.Wi(_.metadata.name);_.document&&(s=s.add(b));const E=t.zi(_);E.setReadTime(t.Hi(_.metadata.readTime)),c=c.insert(b,E)}const d=r.Ui.newChangeBuffer({trackRemovals:!0}),f=yield Q_(r,(_=i,vo(U_(In.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>jj(_,d,c).next(b=>(d.apply(_),b)).next(b=>r.Vs.removeMatchingKeysForTargetId(_,f.targetId).next(()=>r.Vs.addMatchingKeys(_,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,b.Gi,b.Qi)).next(()=>b.Gi)))}),IP.apply(this,arguments)}function vQ(n,t){return TP.apply(this,arguments)}function TP(){return TP=(0,Se.Z)(function*(n,t,e=sn()){const i=yield Q_(n,vo(vP(t.bundledQuery))),r=dt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Pr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ds.saveNamedQuery(s,t);const d=i.withResumeToken(yr.EMPTY_BYTE_STRING,c);return r.$i=r.$i.insert(d.targetId,d),r.Vs.updateTargetData(s,d).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,t))})}),TP.apply(this,arguments)}function qj(n,t){return`firestore_clients_${n}_${t}`}function Wj(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function AP(n,t){return`firestore_targets_${n}_${t}`}class oM{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Ji(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new He(r.error.code,r.error.message))),c?new oM(t,e,r.state,s):(er("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class aw{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Ji(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new He(i.error.code,i.error.message))),s?new aw(t,i.state,r):(er("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class aM{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Wx();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=lU(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new aM(t,s):(er("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class kP{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new kP(e.clientId,e.onlineState):(er("SharedClientState",`Failed to parse online state: ${t}`),null)}}class RP{constructor(){this.activeTargetIds=Wx()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class OP{constructor(t,e,i,r,s){this.window=t,this.js=e,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ji(Xt),this.started=!1,this.ir=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=qj(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new RP),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Se.Z)(function*(){const e=yield t.syncEngine.Ri();for(const r of e){if(r===t.tr)continue;const s=t.getItem(qj(t.persistenceKey,r));if(s){const c=aM.Ji(r,s);c&&(t.sr=t.sr.insert(c.clientId,c))}}t._r();const i=t.storage.getItem(t.lr);if(i){const r=t.wr(i);r&&t.mr(r)}for(const r of t.ir)t.nr(r);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,i){this.yr(t,e,i),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(AP(this.persistenceKey,t));if(i){const r=aw.Ji(t,i);r&&(e=r.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(AP(this.persistenceKey,t))}updateQueryState(t,e,i){this.Tr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.pr(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return ze("SharedClientState","READ",t,e),e}setItem(t,e){ze("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){ze("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(ze("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Se.Z)(function*(){if(e.started){if(null!==i.key)if(e.cr.test(i.key)){if(null==i.newValue){const r=e.Rr(i.key);return e.br(r,null)}{const r=e.Pr(i.key,i.newValue);if(r)return e.br(r.clientId,r)}}else if(e.ar.test(i.key)){if(null!==i.newValue){const r=e.vr(i.key,i.newValue);if(r)return e.Vr(r)}}else if(e.hr.test(i.key)){if(null!==i.newValue){const r=e.Sr(i.key,i.newValue);if(r)return e.Dr(r)}}else if(i.key===e.lr){if(null!==i.newValue){const r=e.wr(i.newValue);if(r)return e.mr(r)}}else if(i.key===e.ur){const r=function(s){let c=_o.ot;if(null!=s)try{const d=JSON.parse(s);jt("number"==typeof d),c=d}catch(d){er("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==_o.ot&&e.sequenceNumberHandler(r)}else if(i.key===e.dr){const r=e.Cr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Nr(s)))}}else e.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,i){const r=new oM(this.currentUser,t,e,i),s=Wj(this.persistenceKey,this.currentUser,t);this.setItem(s,r.Yi())}pr(t){const e=Wj(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,i){const r=AP(this.persistenceKey,t),s=new aw(t,e,i);this.setItem(r,s.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const i=this.Rr(t);return aM.Ji(i,e)}vr(t,e){const i=this.ar.exec(t),r=Number(i[1]);return oM.Ji(new Rr(void 0!==i[2]?i[2]:null),r,e)}Sr(t,e){const i=this.hr.exec(t),r=Number(i[1]);return aw.Ji(r,e)}wr(t){return kP.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,Se.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);ze("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Mr(t.targetId,t.state,t.error)}br(t,e){const i=e?this.sr.insert(t,e):this.sr.remove(t),r=this.gr(this.sr),s=this.gr(i),c=[],d=[];return s.forEach(f=>{r.has(f)||c.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Or(c,d).then(()=>{this.sr=i})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=Wx();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class Yj{constructor(){this.Fr=new RP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,i){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new RP,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class yQ{Br(t){}shutdown(){}}class Zj{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const bQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class wQ{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class CQ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,i,r,s){const c=this.oo(t,e);ze("RestConnection","Sending: ",c,i);const d={};return this.uo(d,r,s),this.co(t,c,d,i).then(f=>(ze("RestConnection","Received: ",f),f),f=>{throw sm("RestConnection",`${t} failed with error: `,f,"url: ",c,"request:",i),f})}ao(t,e,i,r,s,c){return this.ro(t,e,i,r,s)}uo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+F_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}oo(t,e){return`${this.so}/v1/${e}:${bQ[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,i,r){return new Promise((s,c)=>{const d=new yK;d.listenOnce(gK.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ZO.NO_ERROR:const _=d.getResponseJson();ze("Connection","XHR received:",JSON.stringify(_)),s(_);break;case ZO.TIMEOUT:ze("Connection",'RPC "'+t+'" timed out'),c(new He(be.DEADLINE_EXCEEDED,"Request time out"));break;case ZO.HTTP_ERROR:const b=d.getStatus();if(ze("Connection",'RPC "'+t+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const E=d.getResponseJson().error;if(E&&E.status&&E.message){const T=function(P){const F=P.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(F)>=0?F:be.UNKNOWN}(E.status);c(new He(T,E.message))}else c(new He(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new He(be.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{ze("Connection",'RPC "'+t+'" completed.')}});const f=JSON.stringify(r);d.send(e,"POST",f,i,15)})}ho(t,e,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=pK(),c=mK(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new vK({})),this.uo(d.initMessageHeaders,e,i),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=r.join("");ze("Connection","Creating WebChannel: "+f,d);const _=s.createWebChannel(f,d);let b=!1,E=!1;const T=new wQ({jr:F=>{E?ze("Connection","Not sending because WebChannel is closed:",F):(b||(ze("Connection","Opening WebChannel transport."),_.open(),b=!0),ze("Connection","WebChannel sending:",F),_.send(F))},Wr:()=>_.close()}),P=(F,z,te)=>{F.listen(z,Ve=>{try{te(Ve)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return P(_,Px.EventType.OPEN,()=>{E||ze("Connection","WebChannel transport opened.")}),P(_,Px.EventType.CLOSE,()=>{E||(E=!0,ze("Connection","WebChannel transport closed"),T.eo())}),P(_,Px.EventType.ERROR,F=>{E||(E=!0,sm("Connection","WebChannel transport errored:",F),T.eo(new He(be.UNAVAILABLE,"The operation could not be completed")))}),P(_,Px.EventType.MESSAGE,F=>{var z;if(!E){const te=F.data[0];jt(!!te);const Ve=te,Ze=Ve.error||(null===(z=Ve[0])||void 0===z?void 0:z.error);if(Ze){ze("Connection","WebChannel received error:",Ze);const it=Ze.status;let Je=function(Tt){const fn=cr[Tt];if(void 0!==fn)return UU(fn)}(it),St=Ze.message;void 0===Je&&(Je=be.INTERNAL,St="Unknown error status: "+it+" with message "+Ze.message),E=!0,T.eo(new He(Je,St)),_.close()}else ze("Connection","WebChannel received:",te),T.no(te)}}),P(c,_K.STAT_EVENT,F=>{F.stat===WH.PROXY?ze("Connection","Detected buffering proxy"):F.stat===WH.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{T.Zr()},0),T}}function Kj(){return typeof window<"u"?window:null}function lM(){return typeof document<"u"?document:null}function lw(n){return new f7(n,!0)}class PP{constructor(t,e,i=1e3,r=1.5,s=6e4){this.js=t,this.timerId=e,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,e-i);r>0&&ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Qj{constructor(t,e,i,r,s,c,d,f){this.js=t,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new PP(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,Se.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(t){this.Fo(),this.stream.send(t)}Mo(){var t=this;return(0,Se.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var i=this;return(0,Se.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==t?i.So.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(er(e.toString()),er("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):e&&e.code===be.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===e&&this.Uo(i,r)},i=>{t(()=>{const r=new He(be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(t,e){const i=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var t=this;this.state=5,this.So.Io((0,Se.Z)(function*(){t.state=0,t.start()}))}qo(t){return ze("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DQ extends Qj{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.wt=s}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function g7(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:yt(),r=t.targetChange.targetIds||[],s=function(f,_){return f.dt?(jt(void 0===_||"string"==typeof _),yr.fromBase64String(_||"")):(jt(void 0===_||_ instanceof Uint8Array),yr.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(f){const _=void 0===f.code?be.UNKNOWN:UU(f.code);return new He(_,f.message||"")}(c);e=new qU(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Ac(n,i.document.name),s=Pr(i.document.updateTime),c=new ns({mapValue:{fields:i.document.fields}}),d=ri.newFoundDocument(r,s,c);e=new Yx(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Ac(n,i.document),s=i.readTime?Pr(i.readTime):Bt.min(),c=ri.newNoDocument(r,s);e=new Yx([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Ac(n,i.document);e=new Yx([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return yt();{const i=t.filter,s=new s7(i.count||0);e=new $U(i.targetId,s)}}var f;return e}(this.wt,t),i=function(r){if(!("targetChange"in r))return Bt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?Pr(s.readTime):Bt.min()}(t);return this.listener.Go(e,i)}Qo(t){const e={};e.database=X0(this.wt),e.addTarget=function(r,s){let c;const d=s.target;return c=Ux(d)?{documents:nj(r,d)}:{query:ij(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=KU(r,s.resumeToken):s.snapshotVersion.compareTo(Bt.min())>0&&(c.readTime=K0(r,s.snapshotVersion.toTimestamp())),c}(this.wt,t);const i=function v7(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Oo(e)}jo(t){const e={};e.database=X0(this.wt),e.removeTarget=t,this.Oo(e)}}class EQ extends Qj{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(jt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function _7(n,t){return n&&n.length>0?(jt(void 0!==t),n.map(e=>function(i,r){let s=Pr(i.updateTime?i.updateTime:r);return s.isEqual(Bt.min())&&(s=Pr(r)),new t7(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Pr(t.commitTime);return this.listener.Jo(i,e)}return jt(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=X0(this.wt),this.Oo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>J0(this.wt,i))};this.Oo(e)}}class SQ extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new He(be.UNKNOWN,r.toString())})}ao(t,e,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.bo.ao(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(be.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class xQ{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(er(e),this.su=!1):ze("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class MQ{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{i.enqueueAndForget((0,Se.Z)(function*(){var f;Oh(c)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Se.Z)(function*(_){const b=dt(_);b.lu.add(4),yield J_(b),b._u.set("Unknown"),b.lu.delete(4),yield cw(b)}),function(_){return f.apply(this,arguments)})(c))}))}),this._u=new xQ(i,r)}}function cw(n){return NP.apply(this,arguments)}function NP(){return NP=(0,Se.Z)(function*(n){if(Oh(n))for(const t of n.fu)yield t(!0)}),NP.apply(this,arguments)}function J_(n){return FP.apply(this,arguments)}function FP(){return FP=(0,Se.Z)(function*(n){for(const t of n.fu)yield t(!1)}),FP.apply(this,arguments)}function cM(n,t){const e=dt(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),VP(e)?BP(e):tv(e).Co()&&LP(e,t))}function uw(n,t){const e=dt(n),i=tv(e);e.hu.delete(t),i.Co()&&Xj(e,t),0===e.hu.size&&(i.Co()?i.ko():Oh(e)&&e._u.set("Unknown"))}function LP(n,t){n.wu.Nt(t.targetId),tv(n).Qo(t)}function Xj(n,t){n.wu.Nt(t),tv(n).jo(t)}function BP(n){n.wu=new u7({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),tv(n).start(),n._u.iu()}function VP(n){return Oh(n)&&!tv(n).Do()&&n.hu.size>0}function Oh(n){return 0===dt(n).lu.size}function Jj(n){n.wu=void 0}function IQ(n){return HP.apply(this,arguments)}function HP(){return HP=(0,Se.Z)(function*(n){n.hu.forEach((t,e)=>{LP(n,t)})}),HP.apply(this,arguments)}function TQ(n,t){return UP.apply(this,arguments)}function UP(){return UP=(0,Se.Z)(function*(n,t){Jj(n),VP(n)?(n._u.uu(t),BP(n)):n._u.set("Unknown")}),UP.apply(this,arguments)}function AQ(n,t,e){return jP.apply(this,arguments)}function jP(){return jP=(0,Se.Z)(function*(n,t,e){if(n._u.set("Online"),t instanceof qU&&2===t.state&&t.cause)try{yield(i=(0,Se.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.hu.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.hu.delete(d),r.wu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){ze("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield uM(n,i)}else if(t instanceof Yx?n.wu.Ut(t):t instanceof $U?n.wu.zt(t):n.wu.Gt(t),!e.isEqual(Bt.min()))try{const i=yield Uj(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.wu.Yt(s);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.hu.get(f);_&&r.hu.set(f,_.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const f=r.hu.get(d);if(!f)return;r.hu.set(d,f.withResumeToken(yr.EMPTY_BYTE_STRING,f.snapshotVersion)),Xj(r,d);const _=new Ah(f.target,d,1,f.sequenceNumber);LP(r,_)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){ze("RemoteStore","Failed to raise snapshot:",i),yield uM(n,i)}var i}),jP.apply(this,arguments)}function uM(n,t,e){return GP.apply(this,arguments)}function GP(){return GP=(0,Se.Z)(function*(n,t,e){if(!Eh(t))throw t;n.lu.add(1),yield J_(n),n._u.set("Offline"),e||(e=()=>Uj(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield e(),n.lu.delete(1),yield cw(n)}))}),GP.apply(this,arguments)}function eG(n,t){return t().catch(e=>uM(n,e,t))}function ev(n){return zP.apply(this,arguments)}function zP(){return zP=(0,Se.Z)(function*(n){const t=dt(n),e=Ph(t);let i=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;kQ(t);)try{const r=yield gQ(t.localStore,i);if(null===r){0===t.au.length&&e.ko();break}i=r.batchId,RQ(t,r)}catch(r){yield uM(t,r)}tG(t)&&nG(t)}),zP.apply(this,arguments)}function kQ(n){return Oh(n)&&n.au.length<10}function RQ(n,t){n.au.push(t);const e=Ph(n);e.Co()&&e.zo&&e.Ho(t.mutations)}function tG(n){return Oh(n)&&!Ph(n).Do()&&n.au.length>0}function nG(n){Ph(n).start()}function OQ(n){return $P.apply(this,arguments)}function $P(){return $P=(0,Se.Z)(function*(n){Ph(n).Xo()}),$P.apply(this,arguments)}function PQ(n){return qP.apply(this,arguments)}function qP(){return qP=(0,Se.Z)(function*(n){const t=Ph(n);for(const e of n.au)t.Ho(e.mutations)}),qP.apply(this,arguments)}function NQ(n,t,e){return WP.apply(this,arguments)}function WP(){return WP=(0,Se.Z)(function*(n,t,e){const i=n.au.shift(),r=gP.from(i,t,e);yield eG(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ev(n)}),WP.apply(this,arguments)}function FQ(n,t){return YP.apply(this,arguments)}function YP(){return YP=(0,Se.Z)(function*(n,t){var e;t&&Ph(n).zo&&(yield(e=(0,Se.Z)(function*(i,r){if(HU(s=r.code)&&s!==be.ABORTED){const c=i.au.shift();Ph(i).No(),yield eG(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield ev(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),tG(n)&&nG(n)}),YP.apply(this,arguments)}function iG(n,t){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,Se.Z)(function*(n,t){const e=dt(n);e.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const i=Oh(e);e.lu.add(3),yield J_(e),i&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield cw(e)}),ZP.apply(this,arguments)}function KP(n,t){return QP.apply(this,arguments)}function QP(){return QP=(0,Se.Z)(function*(n,t){const e=dt(n);t?(e.lu.delete(2),yield cw(e)):t||(e.lu.add(2),yield J_(e),e._u.set("Unknown"))}),QP.apply(this,arguments)}function tv(n){return n.mu||(n.mu=function(t,e,i){const r=dt(t);return r.tu(),new DQ(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:IQ.bind(null,n),Jr:TQ.bind(null,n),Go:AQ.bind(null,n)}),n.fu.push(function(){var t=(0,Se.Z)(function*(e){e?(n.mu.No(),VP(n)?BP(n):n._u.set("Unknown")):(yield n.mu.stop(),Jj(n))});return function(e){return t.apply(this,arguments)}}())),n.mu}function Ph(n){return n.gu||(n.gu=function(t,e,i){const r=dt(t);return r.tu(),new EQ(e,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:OQ.bind(null,n),Jr:FQ.bind(null,n),Yo:PQ.bind(null,n),Jo:NQ.bind(null,n)}),n.fu.push(function(){var t=(0,Se.Z)(function*(e){e?(n.gu.No(),yield ev(n)):(yield n.gu.stop(),n.au.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(e){return t.apply(this,arguments)}}())),n.gu}class XP{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new XP(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nv(n,t){if(er("AsyncQueue",`${t}: ${n}`),Eh(n))return new He(be.UNAVAILABLE,`${t}: ${n}`);throw n}class iv{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ot.comparator(e.key,i.key):(e,i)=>ot.comparator(e.key,i.key),this.keyedMap=q0(),this.sortedSet=new ji(this.comparator)}static emptySet(t){return new iv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof iv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new iv;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class rG{constructor(){this.yu=new ji(ot.comparator)}track(t){const e=t.doc.key,i=this.yu.get(e);i?0!==t.type&&3===i.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==i.type?this.yu=this.yu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.yu=this.yu.remove(e):1===t.type&&2===i.type?this.yu=this.yu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):yt():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,i)=>{t.push(i)}),t}}class rv{constructor(t,e,i,r,s,c,d,f){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(c=>{s.push({type:0,doc:c})}),new rv(t,e,iv.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&G0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class LQ{constructor(){this.Iu=void 0,this.listeners=[]}}class BQ{constructor(){this.queries=new Th(t=>EU(t),G0),this.onlineState="Unknown",this.Tu=new Set}}function JP(n,t){return e1.apply(this,arguments)}function e1(){return e1=(0,Se.Z)(function*(n,t){const e=dt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new LQ),r)try{s.Iu=yield e.onListen(i)}catch(c){const d=nv(c,`Initialization of query '${lP(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Eu(e.onlineState),s.Iu&&t.Au(s.Iu)&&r1(e)}),e1.apply(this,arguments)}function t1(n,t){return n1.apply(this,arguments)}function n1(){return n1=(0,Se.Z)(function*(n,t){const e=dt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),n1.apply(this,arguments)}function VQ(n,t){const e=dt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Au(r)&&(i=!0);c.Iu=r}}i&&r1(e)}function HQ(n,t,e){const i=dt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function r1(n){n.Tu.forEach(t=>{t.next()})}class s1{constructor(t,e,i){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new rv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=rv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class UQ{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class sG{constructor(t){this.wt=t}Wi(t){return Ac(this.wt,t)}zi(t){return t.metadata.exists?tj(this.wt,t.document,!1):ri.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return Pr(t)}}class jQ{constructor(t,e,i){this.xu=t,this.localStore=e,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=oG(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=In.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,i=new sG(this.wt);for(const r of t)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||sn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,Se.Z)(function*(){const e=yield function _Q(n,t,e,i){return IP.apply(this,arguments)}(t.localStore,new sG(t.wt),t.documents,t.xu.id),i=t.ku(t.documents);for(const r of t.queries)yield vQ(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Mu:t.collectionGroups,Ou:e}})()}}function oG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class aG{constructor(t){this.key=t}}class lG{constructor(t){this.key=t}}class cG{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=sn(),this.mutatedKeys=sn(),this.Lu=xU(t),this.Uu=new iv(this.Lu)}get qu(){return this.Fu}Ku(t,e){const i=e?e.Gu:new rG,r=e?e.Uu:this.Uu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,E)=>{const T=r.get(b),P=cP(this.query,E)?E:null,F=!!T&&this.mutatedKeys.has(T.key),z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let te=!1;T&&P?T.data.isEqual(P.data)?F!==z&&(i.track({type:3,doc:P}),te=!0):this.Qu(T,P)||(i.track({type:2,doc:P}),te=!0,(f&&this.Lu(P,f)>0||_&&this.Lu(P,_)<0)&&(d=!0)):!T&&P?(i.track({type:0,doc:P}),te=!0):T&&!P&&(i.track({type:1,doc:T}),te=!0,(f||_)&&(d=!0)),te&&(P?(c=c.add(P),s=z?s.add(b):s.delete(b)):(c=c.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Uu:c,Gu:i,Mi:d,mutatedKeys:s}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const s=t.Gu.pu();s.sort((_,b)=>function(E,T){const P=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return P(E)-P(T)}(_.type,b.type)||this.Lu(_.doc,b.doc)),this.ju(i);const c=e?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,f=d!==this.$u;return this.$u=d,0!==s.length||f?{snapshot:new rv(this.query,t.Uu,r,s,t.mutatedKeys,0===d,f,!1),zu:c}:{zu:c}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new rG,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=sn(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const e=[];return t.forEach(i=>{this.Bu.has(i)||e.push(new lG(i))}),this.Bu.forEach(i=>{t.has(i)||e.push(new aG(i))}),e}Ju(t){this.Fu=t.ji,this.Bu=sn();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return rv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class GQ{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class zQ{constructor(t){this.key=t,this.Xu=!1}}class $Q{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Th(d=>EU(d),G0),this.ec=new Map,this.nc=new Set,this.sc=new ji(ot.comparator),this.ic=new Map,this.rc=new wP,this.oc={},this.uc=new Map,this.cc=wm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function qQ(n,t){return o1.apply(this,arguments)}function o1(){return o1=(0,Se.Z)(function*(n,t){const e=T1(n);let i,r;const s=e.tc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const c=yield Q_(e.localStore,vo(t));e.isPrimaryClient&&cM(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield a1(e,t,i,"current"===d)}return r}),o1.apply(this,arguments)}function a1(n,t,e,i){return l1.apply(this,arguments)}function l1(){return l1=(0,Se.Z)(function*(n,t,e,i){n.hc=(b,E,T)=>{return(P=(0,Se.Z)(function*(F,z,te,Ve){let Ze=z.view.Ku(te);Ze.Mi&&(Ze=yield sM(F.localStore,z.query,!1).then(({documents:St})=>z.view.Ku(St,Ze)));const it=Ve&&Ve.targetChanges.get(z.targetId),Je=z.view.applyChanges(Ze,F.isPrimaryClient,it);return v1(F,z.targetId,Je.zu),Je.snapshot}),function(F,z,te,Ve){return P.apply(this,arguments)})(n,b,E,T);var P};const r=yield sM(n.localStore,t,!0),s=new cG(t,r.ji),c=s.Ku(r.documents),d=Z0.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),f=s.applyChanges(c,n.isPrimaryClient,d);v1(n,e,f.zu);const _=new GQ(t,e,s);return n.tc.set(t,_),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),f.snapshot}),l1.apply(this,arguments)}function WQ(n,t){return c1.apply(this,arguments)}function c1(){return c1=(0,Se.Z)(function*(n,t){const e=dt(n),i=e.tc.get(t),r=e.ec.get(i.targetId);if(r.length>1)return e.ec.set(i.targetId,r.filter(s=>!G0(s,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield X_(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),uw(e.remoteStore,i.targetId),sv(e,i.targetId)}).catch(Dh))):(sv(e,i.targetId),yield X_(e.localStore,i.targetId,!0))}),c1.apply(this,arguments)}function u1(){return u1=(0,Se.Z)(function*(n,t,e){const i=A1(n);try{const r=yield function(s,c){const d=dt(s),f=Mi.now(),_=c.reduce((T,P)=>T.add(P.key),sn());let b,E;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=yo(),F=sn();return d.Ui.getEntries(T,_).next(z=>{P=z,P.forEach((te,Ve)=>{Ve.isValidDocument()||(F=F.add(te))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,P)).next(z=>{b=z;const te=[];for(const Ve of c){const Ze=r7(Ve,b.get(Ve.key).overlayedDocument);null!=Ze&&te.push(new $u(Ve.key,Ze,mU(Ze.value.mapValue),Ni.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,te,c)}).next(z=>{E=z;const te=z.applyToLocalDocumentSet(b,F);return d.documentOverlayCache.saveOverlays(T,z.batchId,te)})}).then(()=>({batchId:E.batchId,changes:GU(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let f=s.oc[s.currentUser.toKey()];f||(f=new ji(Xt)),f=f.insert(c,d),s.oc[s.currentUser.toKey()]=f}(i,r.batchId,e),yield qu(i,r.changes),yield ev(i.remoteStore)}catch(r){const s=nv(r,"Failed to persist write");e.reject(s)}}),u1.apply(this,arguments)}function uG(n,t){return d1.apply(this,arguments)}function d1(){return d1=(0,Se.Z)(function*(n,t){const e=dt(n);try{const i=yield mQ(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.ic.get(s);c&&(jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.Xu=!0:r.modifiedDocuments.size>0?jt(c.Xu):r.removedDocuments.size>0&&(jt(c.Xu),c.Xu=!1))}),yield qu(e,i,t)}catch(i){yield Dh(i)}}),d1.apply(this,arguments)}function dG(n,t,e){const i=dt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.tc.forEach((s,c)=>{const d=c.view.Eu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=dt(s);d.onlineState=c;let f=!1;d.queries.forEach((_,b)=>{for(const E of b.listeners)E.Eu(c)&&(f=!0)}),f&&r1(d)}(i.eventManager,t),r.length&&i.Zu.Go(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function ZQ(n,t,e){return h1.apply(this,arguments)}function h1(){return h1=(0,Se.Z)(function*(n,t,e){const i=dt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.ic.get(t),s=r&&r.key;if(s){let c=new ji(ot.comparator);c=c.insert(s,ri.newNoDocument(s,Bt.min()));const d=sn().add(s),f=new Y0(Bt.min(),new Map,new Gn(Xt),c,d);yield uG(i,f),i.sc=i.sc.remove(s),i.ic.delete(t),y1(i)}else yield X_(i.localStore,t,!1).then(()=>sv(i,t,e)).catch(Dh)}),h1.apply(this,arguments)}function KQ(n,t){return f1.apply(this,arguments)}function f1(){return f1=(0,Se.Z)(function*(n,t){const e=dt(n),i=t.batch.batchId;try{const r=yield pQ(e.localStore,t);_1(e,i,null),g1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield qu(e,r)}catch(r){yield Dh(r)}}),f1.apply(this,arguments)}function QQ(n,t,e){return p1.apply(this,arguments)}function p1(){return p1=(0,Se.Z)(function*(n,t,e){const i=dt(n);try{const r=yield function(s,c){const d=dt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.mutationQueue.lookupMutationBatch(f,c).next(b=>(jt(null!==b),_=b.keys(),d.mutationQueue.removeMutationBatch(f,b))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>d.localDocuments.getDocuments(f,_))})}(i.localStore,t);_1(i,t,e),g1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield qu(i,r)}catch(r){yield Dh(r)}}),p1.apply(this,arguments)}function m1(){return m1=(0,Se.Z)(function*(n,t){const e=dt(n);Oh(e.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=dt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.uc.get(i)||[];r.push(t),e.uc.set(i,r)}catch(i){const r=nv(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),m1.apply(this,arguments)}function g1(n,t){(n.uc.get(t)||[]).forEach(e=>{e.resolve()}),n.uc.delete(t)}function _1(n,t,e){const i=dt(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.oc[i.currentUser.toKey()]=r}}function sv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ec.get(t))n.tc.delete(i),e&&n.Zu.lc(i,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(i=>{n.rc.containsKey(i)||hG(n,i)})}function hG(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);null!==e&&(uw(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),y1(n))}function v1(n,t,e){for(const i of e)i instanceof aG?(n.rc.addReference(i.key,t),JQ(n,i)):i instanceof lG?(ze("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,t),n.rc.containsKey(i.key)||hG(n,i.key)):yt()}function JQ(n,t){const e=t.key,i=e.path.canonicalString();n.sc.get(e)||n.nc.has(i)||(ze("SyncEngine","New document in limbo: "+e),n.nc.add(i),y1(n))}function y1(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new ot(In.fromString(t)),i=n.cc.next();n.ic.set(i,new zQ(e)),n.sc=n.sc.insert(e,i),cM(n.remoteStore,new Ah(vo(U_(e.path)),i,2,_o.ot))}}function qu(n,t,e){return b1.apply(this,arguments)}function b1(){return b1=(0,Se.Z)(function*(n,t,e){const i=dt(n),r=[],s=[],c=[];var d;i.tc.isEmpty()||(i.tc.forEach((d,f)=>{c.push(i.hc(f,t,e).then(_=>{if(_){i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,_.fromCache?"not-current":"current"),r.push(_);const b=SP.Vi(f.targetId,_);s.push(b)}}))}),yield Promise.all(c),i.Zu.Go(r),yield(d=(0,Se.Z)(function*(f,_){const b=dt(f);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>me.forEach(_,T=>me.forEach(T.Pi,P=>b.persistence.referenceDelegate.addReference(E,T.targetId,P)).next(()=>me.forEach(T.vi,P=>b.persistence.referenceDelegate.removeReference(E,T.targetId,P)))))}catch(E){if(!Eh(E))throw E;ze("LocalStore","Failed to update sequence numbers: "+E)}for(const E of _){const T=E.targetId;if(!E.fromCache){const P=b.$i.get(T),z=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.$i=b.$i.insert(T,z)}}}),function(f,_){return d.apply(this,arguments)})(i.localStore,s))}),b1.apply(this,arguments)}function e9(n,t){return w1.apply(this,arguments)}function w1(){return w1=(0,Se.Z)(function*(n,t){const e=dt(n);if(!e.currentUser.isEqual(t)){ze("SyncEngine","User change. New user:",t.toKey());const i=yield Hj(e.localStore,t);e.currentUser=t,(r=e).uc.forEach(c=>{c.forEach(d=>{d.reject(new He(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield qu(e,i.Ki)}var r}),w1.apply(this,arguments)}function t9(n,t){const e=dt(n),i=e.ic.get(t);if(i&&i.Xu)return sn().add(i.key);{let r=sn();const s=e.ec.get(t);if(!s)return r;for(const c of s){const d=e.tc.get(c);r=r.unionWith(d.view.qu)}return r}}function n9(n,t){return C1.apply(this,arguments)}function C1(){return C1=(0,Se.Z)(function*(n,t){const e=dt(n),i=yield sM(e.localStore,t.query,!0),r=t.view.Ju(i);return e.isPrimaryClient&&v1(e,t.targetId,r.zu),r}),C1.apply(this,arguments)}function r9(n,t){return D1.apply(this,arguments)}function D1(){return D1=(0,Se.Z)(function*(n,t){const e=dt(n);return zj(e.localStore,t).then(i=>qu(e,i))}),D1.apply(this,arguments)}function s9(n,t,e,i){return E1.apply(this,arguments)}function E1(){return E1=(0,Se.Z)(function*(n,t,e,i){const r=dt(n),s=yield function(c,d){const f=dt(c),_=dt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",b=>_.yn(b,d).next(E=>E?f.localDocuments.getDocuments(b,E):me.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield ev(r.remoteStore):"acknowledged"===e||"rejected"===e?(_1(r,t,i||null),g1(r,t),d=t,dt(dt(r.localStore).mutationQueue).In(d)):yt(),yield qu(r,s)):ze("SyncEngine","Cannot apply mutation batch with id: "+t)}),E1.apply(this,arguments)}function S1(){return S1=(0,Se.Z)(function*(n,t){const e=dt(n);if(T1(e),A1(e),!0===t&&!0!==e.ac){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield fG(e,i.toArray());e.ac=!0,yield KP(e.remoteStore,!0);for(const s of r)cM(e.remoteStore,s)}else if(!1===t&&!1!==e.ac){const i=[];let r=Promise.resolve();e.ec.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(sv(e,c),X_(e.localStore,c,!0))),uw(e.remoteStore,c)}),yield r,yield fG(e,i),function(s){const c=dt(s);c.ic.forEach((d,f)=>{uw(c.remoteStore,f)}),c.rc.cs(),c.ic=new Map,c.sc=new ji(ot.comparator)}(e),e.ac=!1,yield KP(e.remoteStore,!1)}}),S1.apply(this,arguments)}function fG(n,t,e){return x1.apply(this,arguments)}function x1(){return x1=(0,Se.Z)(function*(n,t,e){const i=dt(n),r=[],s=[];for(const c of t){let d;const f=i.ec.get(c);if(f&&0!==f.length){d=yield Q_(i.localStore,vo(f[0]));for(const _ of f){const b=i.tc.get(_),E=yield n9(i,b);E.snapshot&&s.push(E.snapshot)}}else{const _=yield Gj(i.localStore,c);d=yield Q_(i.localStore,_),yield a1(i,pG(_),c,!1)}r.push(d)}return i.Zu.Go(s),r}),x1.apply(this,arguments)}function pG(n){return CU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function a9(n){const t=dt(n);return dt(dt(t.localStore).persistence).Ri()}function l9(n,t,e,i){return M1.apply(this,arguments)}function M1(){return M1=(0,Se.Z)(function*(n,t,e,i){const r=dt(n);if(r.ac)return void ze("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield zj(r.localStore,SU(s[0])),d=Y0.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield qu(r,c,d);break}case"rejected":yield X_(r.localStore,t,!0),sv(r,t,i);break;default:yt()}}),M1.apply(this,arguments)}function c9(n,t,e){return I1.apply(this,arguments)}function I1(){return I1=(0,Se.Z)(function*(n,t,e){const i=T1(n);if(i.ac){for(const r of t){if(i.ec.has(r)){ze("SyncEngine","Adding an already active target "+r);continue}const s=yield Gj(i.localStore,r),c=yield Q_(i.localStore,s);yield a1(i,pG(s),c.targetId,!1),cM(i.remoteStore,c)}for(const r of e)i.ec.has(r)&&(yield X_(i.localStore,r,!1).then(()=>{uw(i.remoteStore,r),sv(i,r)}).catch(Dh))}}),I1.apply(this,arguments)}function T1(n){const t=dt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=uG.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZQ.bind(null,t),t.Zu.Go=VQ.bind(null,t.eventManager),t.Zu.lc=HQ.bind(null,t.eventManager),t}function A1(n){const t=dt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KQ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=QQ.bind(null,t),t}class mG{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Se.Z)(function*(){e.wt=lw(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return Vj(this.persistence,new Bj,t.initialUser,this.wt)}_c(t){return new Fj(iM.Os,this.wt)}dc(t){return new Yj}terminate(){var t=this;return(0,Se.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class gG extends mG{constructor(t,e,i){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Se.Z)(function*(){yield e().call(i,t),yield i.yc.initialize(i,t),yield A1(i.yc.syncEngine),yield ev(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return Vj(this.persistence,new Bj,t.initialUser,this.wt)}mc(t,e){return new J7(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const i=new NK(e,this.persistence);return new PK(t.asyncQueue,i)}_c(t){const e=EP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?bo.withCacheSize(this.cacheSizeBytes):bo.DEFAULT;return new DP(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,Kj(),lM(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new Yj}}class d9 extends gG{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Se.Z)(function*(){yield e().call(i,t);const r=i.yc.syncEngine;i.sharedClientState instanceof OP&&(i.sharedClientState.syncEngine={kr:s9.bind(null,r),Mr:l9.bind(null,r),Or:c9.bind(null,r),Ri:a9.bind(null,r),Nr:r9.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var s=(0,Se.Z)(function*(c){yield function o9(n,t){return S1.apply(this,arguments)}(i.yc.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}dc(t){const e=Kj();if(!OP.V(e))throw new He(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=EP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new OP(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class k1{initialize(t,e){var i=this;return(0,Se.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>dG(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,i.syncEngine),yield KP(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new BQ}createDatastore(t){const e=lw(t.databaseInfo.databaseId),i=new CQ(t.databaseInfo);return new SQ(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>dG(this.syncEngine,d,0),c=Zj.V()?new Zj:new yQ,new MQ(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,f,_){const b=new $Q(i,r,s,c,d,f);return _&&(b.ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Se.Z)(function*(e){const i=dt(e);ze("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield J_(i),i.du.shutdown(),i._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function _G(n,t=10240){let e=0;return{read:()=>(0,Se.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dM{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):er("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class h9{constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new Or,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,Se.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,Se.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,Se.Z)(function*(){const e=yield t.bc();if(null===e)return null;const i=t.Ac.decode(e),r=Number(i);isNaN(r)&&t.Pc(`length string (${i}) is not valid number`);const s=yield t.vc(r);return new UQ(JSON.parse(s),e.length+r)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,Se.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}vc(t){var e=this;return(0,Se.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const i=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,Se.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class f9{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new He(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Se.Z)(function*(s,c){const d=dt(s),f=X0(d.wt)+"/documents",_={documents:c.map(P=>Q0(d.wt,P))},b=yield d.ao("BatchGetDocuments",f,_,c.length),E=new Map;b.forEach(P=>{const F=function m7(n,t){return"found"in t?function(e,i){jt(!!i.found);const r=Ac(e,i.found.name),s=Pr(i.found.updateTime),c=new ns({mapValue:{fields:i.found.fields}});return ri.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){jt(!!i.missing),jt(!!i.readTime);const r=Ac(e,i.missing),s=Pr(i.readTime);return ri.newNoDocument(r,s)}(n,t):yt()}(d.wt,P);E.set(F.key.toString(),F)});const T=[];return c.forEach(P=>{const F=E.get(P.toString());jt(!!F),T.push(F)}),T}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new q_(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=ot.fromPath(r);t.mutations.push(new uP(s,t.precondition(s)))}),yield(i=(0,Se.Z)(function*(r,s){const c=dt(r),d=X0(c.wt)+"/documents",f={writes:s.map(_=>J0(c.wt,_))};yield c.ro("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw yt();e=Bt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new He(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ni.updateTime(e):Ni.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new He(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ni.updateTime(e)}return Ni.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class p9{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new PP(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,Se.Z)(function*(){const e=new f9(t.datastore),i=t.xc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Nc(s)}))}).catch(r=>{t.Nc(r)})}))}xc(t){try{const e=this.updateFunction(t);return!L0(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!HU(e)}return!1}}class m9{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Rr.UNAUTHENTICATED,this.clientId=QH.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Se.Z)(function*(d){ze("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Se.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=nv(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function vG(n,t){return R1.apply(this,arguments)}function R1(){return R1=(0,Se.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Se.Z)(function*(s){i.isEqual(s)||(yield Hj(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),R1.apply(this,arguments)}function yG(n,t){return O1.apply(this,arguments)}function O1(){return O1=(0,Se.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield P1(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>iG(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>iG(t.remoteStore,s)),n.onlineComponents=t}),O1.apply(this,arguments)}function P1(n){return N1.apply(this,arguments)}function N1(){return N1=(0,Se.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield vG(n,new mG)),n.offlineComponents}),N1.apply(this,arguments)}function hM(n){return F1.apply(this,arguments)}function F1(){return F1=(0,Se.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield yG(n,new k1)),n.onlineComponents}),F1.apply(this,arguments)}function bG(n){return P1(n).then(t=>t.persistence)}function fM(n){return P1(n).then(t=>t.localStore)}function wG(n){return hM(n).then(t=>t.remoteStore)}function L1(n){return hM(n).then(t=>t.syncEngine)}function ov(n){return B1.apply(this,arguments)}function B1(){return B1=(0,Se.Z)(function*(n){const t=yield hM(n),e=t.eventManager;return e.onListen=qQ.bind(null,t.syncEngine),e.onUnlisten=WQ.bind(null,t.syncEngine),e}),B1.apply(this,arguments)}function CG(n,t,e={}){const i=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(r,s,c,d,f){const _=new dM({next:E=>{s.enqueueAndForget(()=>t1(r,b));const T=E.docs.has(c);!T&&E.fromCache?f.reject(new He(be.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&E.fromCache&&d&&"server"===d.source?f.reject(new He(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),b=new s1(U_(c.path),_,{includeMetadataChanges:!0,Du:!0});return JP(r,b)}(yield ov(n),n.asyncQueue,t,e,i)})),i.promise}function DG(n,t,e={}){const i=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(r,s,c,d,f){const _=new dM({next:E=>{s.enqueueAndForget(()=>t1(r,b)),E.fromCache&&"server"===d.source?f.reject(new He(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),b=new s1(c,_,{includeMetadataChanges:!0,Du:!0});return JP(r,b)}(yield ov(n),n.asyncQueue,t,e,i)})),i.promise}const EG=new Map;function V1(n,t,e){if(!e)throw new He(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function SG(n,t,e,i){if(!0===t&&!0===i)throw new He(be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function xG(n){if(!ot.isDocumentKey(n))throw new He(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MG(n){if(ot.isDocumentKey(n))throw new He(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pM(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":yt()}function Dn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new He(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=pM(n);throw new He(be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function IG(n,t){if(t<=0)throw new He(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class TG{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new He(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new He(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,SG("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dw{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TG({}),this._settingsFrozen=!1,t instanceof Gu?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new He(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(r.options.projectId)}(t))}get app(){if(!this._app)throw new He(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TG(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new CK;switch(e.type){case"gapi":const i=e.client;return jt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new xK(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new He(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=EG.get(t);e&&(ze("ComponentProvider","Removing Datastore"),EG.delete(t),e.terminate())}(this),Promise.resolve()}}class vi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new vi(this.firestore,t,this._key)}}class xs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new xs(this.firestore,t,this._query)}}class Rc extends xs{constructor(t,e,i){super(t,e,U_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new vi(this.firestore,null,new ot(t))}withConverter(t){return new Rc(this.firestore,t,this._path)}}function AG(n,t,...e){if(n=(0,L.m9)(n),V1("collection","path",t),n instanceof dw){const i=In.fromString(t,...e);return MG(i),new Rc(n,null,i)}{if(!(n instanceof vi||n instanceof Rc))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(In.fromString(t,...e));return MG(i),new Rc(n.firestore,null,i)}}function mM(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=QH.I()),V1("doc","path",t),n instanceof dw){const i=In.fromString(t,...e);return xG(i),new vi(n,null,new ot(i))}{if(!(n instanceof vi||n instanceof Rc))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(In.fromString(t,...e));return xG(i),new vi(n.firestore,n instanceof Rc?n.converter:null,new ot(i))}}function kG(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof vi||n instanceof Rc)&&(t instanceof vi||t instanceof Rc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function RG(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof xs&&t instanceof xs&&n.firestore===t.firestore&&G0(n._query,t._query)&&n.converter===t.converter}class x9{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new PP(this,"async_queue_retry"),this.Kc=()=>{const e=lM();e&&ze("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=lM();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=lM();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new Or;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Oc.push(t),this.jc()))}jc(){var t=this;return(0,Se.Z)(function*(){if(0!==t.Oc.length){try{yield t.Oc[0](),t.Oc.shift(),t.So.reset()}catch(e){if(!Eh(e))throw e;ze("AsyncQueue","Operation failed with retryable error: "+e)}t.Oc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Mc.then(()=>(this.Lc=!0,t().catch(i=>{throw this.Bc=i,this.Lc=!1,er("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Mc=e,e}enqueueAfterDelay(t,e,i){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const r=XP.createAndSchedule(this,t,e,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&yt()}verifyOperationInProgress(){}zc(){var t=this;return(0,Se.Z)(function*(){let e;do{e=t.Mc,yield e}while(e!==t.Mc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function H1(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class M9{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ii extends dw{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new x9,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OG(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||OG(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OG(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new BK(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new m9(n._authCredentials,n._appCheckCredentials,n._queue,i)}function PG(n,t,e){const i=new Or;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield vG(n,e),yield yG(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===be.FAILED_PRECONDITION||c.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;sm("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function NG(n){if(n._initialized||n._terminated)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wu{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new He(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ui(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Oc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Oc(yr.fromBase64String(t))}catch(e){throw new He(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Oc(yr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Dm{constructor(t){this._methodName=t}}class gM{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new He(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new He(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Xt(this._lat,t._lat)||Xt(this._long,t._long)}}const L9=/^__.*__$/;class B9{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new $u(t,this.data,this.fieldMask,e,this.fieldTransforms):new $_(t,this.data,e,this.fieldTransforms)}}class FG{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new $u(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function LG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class _M{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.wt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new _M(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.sa(t),r}ia(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return bM(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(LG(this.Zc)&&L9.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class V9{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=i||lw(t)}aa(t,e,i,r=!1){return new _M({Zc:t,methodName:e,ca:i,path:Ui.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Em(n){const t=n._freezeSettings(),e=lw(n._databaseId);return new V9(n._databaseId,!!t.ignoreUndefinedProperties,e)}function vM(n,t,e,i,r,s={}){const c=n.aa(s.merge||s.mergeFields?2:0,t,e,r);z1("Data must be an object, but it was:",c,i);const d=HG(i,c);let f,_;if(s.merge)f=new Jo(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const b=[];for(const E of s.mergeFields){const T=$1(t,E,e);if(!c.contains(T))throw new He(be.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);jG(b,T)||b.push(T)}f=new Jo(b),_=c.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,_=c.fieldTransforms;return new B9(new ns(d),f,_)}class hw extends Dm{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hw}}function BG(n,t,e){return new _M({Zc:3,ca:t.settings.ca,methodName:n._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class U1 extends Dm{_toFieldTransform(t){return new z0(t.path,new G_)}isEqual(t){return t instanceof U1}}class H9 extends Dm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=BG(this,t,!0),i=this.ha.map(s=>Sm(s,e)),r=new fm(i);return new z0(t.path,r)}isEqual(t){return this===t}}class U9 extends Dm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=BG(this,t,!0),i=this.ha.map(s=>Sm(s,e)),r=new pm(i);return new z0(t.path,r)}isEqual(t){return this===t}}class j9 extends Dm{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new z_(t.wt,TU(t.wt,this.la));return new z0(t.path,e)}isEqual(t){return this===t}}function j1(n,t,e,i){const r=n.aa(1,t,e);z1("Data must be an object, but it was:",r,i);const s=[],c=ns.empty();lm(i,(f,_)=>{const b=yM(t,f,e);_=(0,L.m9)(_);const E=r.ia(b);if(_ instanceof hw)s.push(b);else{const T=Sm(_,E);null!=T&&(s.push(b),c.set(b,T))}});const d=new Jo(s);return new FG(c,d,r.fieldTransforms)}function G1(n,t,e,i,r,s){const c=n.aa(1,t,e),d=[$1(t,i,e)],f=[r];if(s.length%2!=0)throw new He(be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)d.push($1(t,s[T])),f.push(s[T+1]);const _=[],b=ns.empty();for(let T=d.length-1;T>=0;--T)if(!jG(_,d[T])){const P=d[T];let F=f[T];F=(0,L.m9)(F);const z=c.ia(P);if(F instanceof hw)_.push(P);else{const te=Sm(F,z);null!=te&&(_.push(P),b.set(P,te))}}const E=new Jo(_);return new FG(b,E,c.fieldTransforms)}function VG(n,t,e,i=!1){return Sm(e,n.aa(i?4:3,t))}function Sm(n,t){if(UG(n=(0,L.m9)(n)))return z1("Unsupported field value:",t,n),HG(n,t);if(n instanceof Dm)return function(e,i){if(!LG(i.Zc))throw i.oa(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Sm(c,i.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return TU(i.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Mi.fromDate(e);return{timestampValue:K0(i.wt,r)}}if(e instanceof Mi){const r=new Mi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:K0(i.wt,r)}}if(e instanceof gM)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Oc)return{bytesValue:KU(i.wt,e._byteString)};if(e instanceof vi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:dP(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.oa(`Unsupported field value: ${pM(e)}`)}(n,t)}function HG(n,t){const e={};return sU(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lm(n,(i,r)=>{const s=Sm(r,t.ea(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function UG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mi||n instanceof gM||n instanceof Oc||n instanceof vi||n instanceof Dm)}function z1(n,t,e){if(!UG(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=pM(e);throw t.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function $1(n,t,e){if((t=(0,L.m9)(t))instanceof Wu)return t._internalPath;if("string"==typeof t)return yM(n,t);throw bM("Field path arguments must be of type string or ",n,!1,void 0,e)}const G9=new RegExp("[~\\*/\\[\\]]");function yM(n,t,e){if(t.search(G9)>=0)throw bM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Wu(...t.split("."))._internalPath}catch{throw bM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function bM(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new He(be.INVALID_ARGUMENT,d+n+f)}function jG(n,t){return n.some(e=>e.isEqual(t))}class fw{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new z9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(wM("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class z9 extends fw{data(){return super.data()}}function wM(n,t){return"string"==typeof t?yM(n,t):t instanceof Wu?t._internalPath:t._delegate._internalPath}class xm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Yu extends fw{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(wM("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class pw extends Yu{data(t={}){return super.data(t)}}class Nh{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new xm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new pw(this._firestore,this._userDataWriter,i.key,i,new xm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new He(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new pw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new pw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new xm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,_=-1;return 0!==c.type&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:$9(c.type),doc:d,oldIndex:f,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function $9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}function GG(n,t){return n instanceof Yu&&t instanceof Yu?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Nh&&t instanceof Nh&&n._firestore===t._firestore&&RG(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function zG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mw{}function Fh(n,...t){for(const e of t)n=e._apply(n);return n}class q9 extends mw{constructor(t,e,i){super(),this.fa=t,this.da=e,this._a=i,this.type="where"}_apply(t){const e=Em(t.firestore),i=function(r,s,c,d,f,_,b){let E;if(f.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new He(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){KG(b,_);const P=[];for(const F of b)P.push(ZG(d,r,F));E={arrayValue:{values:P}}}else E=ZG(d,r,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||KG(b,_),E=VG(c,"where",b,"in"===_||"not-in"===_);const T=is.create(f,_,E);return function(P,F){if(F.ht()){const te=oP(P);if(null!==te&&!te.isEqual(F.field))throw new He(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${te.toString()}' and '${F.field.toString()}'`);const Ve=sP(P);null!==Ve&&QG(0,F.field,Ve)}const z=function(te,Ve){for(const Ze of te.filters)if(Ve.indexOf(Ze.op)>=0)return Ze.op;return null}(P,function(te){switch(te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==z)throw new He(be.INVALID_ARGUMENT,z===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${z.toString()}' filters.`)}(r,T),T}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new xs(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new zu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class Y9 extends mw{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new He(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new He(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new H_(r,s);return function(d,f){if(null===sP(d)){const _=oP(d);null!==_&&QG(0,_,f.field)}}(i,c),c}(t._query,this.fa,this.wa);return new xs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new zu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class $G extends mw{constructor(t,e,i){super(),this.type=t,this.ma=e,this.ga=i}_apply(t){return new xs(t.firestore,t.converter,Gx(t._query,this.ma,this.ga))}}class qG extends mw{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=YG(t,this.type,this.ya,this.pa);return new xs(t.firestore,t.converter,(r=e,new zu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class WG extends mw{constructor(t,e,i){super(),this.type=t,this.ya=e,this.pa=i}_apply(t){const e=YG(t,this.type,this.ya,this.pa);return new xs(t.firestore,t.converter,(r=e,new zu((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function YG(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof fw)return function(r,s,c,d,f){if(!d)throw new He(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const b of j_(r))if(b.field.isKeyField())_.push(dm(s,d.key));else{const E=d.data.field(b.field);if(nP(E))throw new He(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const T=b.field.canonicalString();throw new He(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}_.push(E)}return new Ih(_,f)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Em(n.firestore);return function(s,c,d,f,_,b){const E=s.explicitOrderBy;if(_.length>E.length)throw new He(be.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let P=0;P<_.length;P++){const F=_[P];if(E[P].field.isKeyField()){if("string"!=typeof F)throw new He(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof F}`);if(!aP(s)&&-1!==F.indexOf("/"))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${F}' contains a slash.`);const z=s.path.child(In.fromString(F));if(!ot.isDocumentKey(z))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const te=new ot(z);T.push(dm(c,te))}else{const z=VG(d,f,F);T.push(z)}}return new Ih(T,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function ZG(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new He(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aP(t)&&-1!==e.indexOf("/"))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(In.fromString(e));if(!ot.isDocumentKey(i))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dm(n,new ot(i))}if(e instanceof vi)return dm(n,e._key);throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pM(e)}.`)}function KG(n,t){if(!Array.isArray(n)||0===n.length)throw new He(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new He(be.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function QG(n,t,e){if(!e.isEqual(t))throw new He(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const nX={maxAttempts:5};class q1{convertValue(t,e="none"){switch(um(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(cm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw yt()}}convertObject(t,e){const i={};return lm(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new gM(Gi(t.latitude),Gi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=aU(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(F0(t));default:return null}}convertTimestamp(t){const e=Sh(t);return new Mi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=In.fromString(t);jt(oj(i));const r=new Gu(i.get(1),i.get(3)),s=new ot(i.popFirst(5));return r.isEqual(e)||er(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function CM(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class iX extends q1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new vi(this.firestore,null,e)}}class XG{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Em(t)}set(t,e,i){this._verifyNotCommitted();const r=Lh(t,this._firestore),s=CM(r.converter,e,i),c=vM(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Ni.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Lh(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof Wu?G1(this._dataReader,"WriteBatch.update",s._key,e,i,r):j1(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Ni.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Lh(t,this._firestore);return this._mutations=this._mutations.concat(new q_(e._key,Ni.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lh(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new He(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Mm extends q1{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new vi(this.firestore,null,e)}}function JG(n,t,e){n=Dn(n,vi);const i=Dn(n.firestore,Ii),r=CM(n.converter,t,e);return av(i,[vM(Em(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Ni.none())])}function e3(n,t,e,...i){n=Dn(n,vi);const r=Dn(n.firestore,Ii),s=Em(r);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof Wu?G1(s,"updateDoc",n._key,t,e,i):j1(s,"updateDoc",n._key,t),av(r,[c.toMutation(n._key,Ni.exists(!0))])}function t3(n,...t){var e,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||H1(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(H1(t[c])){const E=t[c];t[c]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[c+1]=null===(i=E.error)||void 0===i?void 0:i.bind(E),t[c+2]=null===(r=E.complete)||void 0===r?void 0:r.bind(E)}let f,_,b;if(n instanceof vi)_=Dn(n.firestore,Ii),b=U_(n._key.path),f={next:E=>{t[c]&&t[c](W1(_,n,E))},error:t[c+1],complete:t[c+2]};else{const E=Dn(n,xs);_=Dn(E.firestore,Ii),b=E._query;const T=new Mm(_);f={next:P=>{t[c]&&t[c](new Nh(_,T,E,P))},error:t[c+1],complete:t[c+2]},zG(n._query)}return function(E,T,P,F){const z=new dM(F),te=new s1(T,z,P);return E.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return JP(yield ov(E),te)})),()=>{z.Tc(),E.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return t1(yield ov(E),te)}))}}(ur(_),b,d,f)}function av(n,t){return function(e,i){const r=new Or;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function YQ(n,t,e){return u1.apply(this,arguments)}(yield L1(e),i,r)})),r.promise}(ur(n),t)}function W1(n,t,e){const i=e.docs.get(t._key),r=new Mm(n);return new Yu(n,r,t._key,i,new xm(e.hasPendingWrites,e.fromCache),t.converter)}class fX extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Em(t)}get(t){const e=Lh(t,this._firestore),i=new iX(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return yt();const s=r[0];if(s.isFoundDocument())return new fw(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new fw(this._firestore,i,e._key,null,e.converter);throw yt()})}set(t,e,i){const r=Lh(t,this._firestore),s=CM(r.converter,e,i),c=vM(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=Lh(t,this._firestore);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof Wu?G1(this._dataReader,"Transaction.update",s._key,e,i,r):j1(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=Lh(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Lh(t,this._firestore),i=new Mm(this._firestore);return super.get(t).then(r=>new Yu(this._firestore,i,e._key,r._document,new xm(!1,!1),e.converter))}}function Y1(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function r3(){if(typeof Uint8Array>"u")throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function s3(){if(!function FK(){return typeof atob<"u"}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){F_=Gs.SDK_VERSION,(0,Gs._registerComponent)(new Hl.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Ii(r,new EK(e.getProvider("auth-internal")),new MK(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,Gs.registerVersion)(YH,"3.4.14",n),(0,Gs.registerVersion)(YH,"3.4.14","esm2017")}();class gw{constructor(t){this._delegate=t}static fromBase64String(t){return s3(),new gw(Oc.fromBase64String(t))}static fromUint8Array(t){return r3(),new gw(Oc.fromUint8Array(t))}toBase64(){return s3(),this._delegate.toBase64()}toUint8Array(){return r3(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Z1(n){return function CX(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class DX{enableIndexedDbPersistence(t,e){return function T9(n,t){NG(n=Dn(n,Ii));const e=ur(n),i=n._freezeSettings(),r=new k1;return PG(e,r,new gG(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function A9(n){NG(n=Dn(n,Ii));const t=ur(n),e=n._freezeSettings(),i=new k1;return PG(t,i,new d9(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function k9(n){if(n._initialized&&!n._terminated)throw new He(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(e=(0,Se.Z)(function*(i){if(!Ul.V())return Promise.resolve();const r=i+"main";yield Ul.delete(r)}),function(i){return e.apply(this,arguments)})(EP(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class o3{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Gu||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&sm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function E9(n,t,e,i={}){var r;const s=(n=Dn(n,dw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&sm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Rr.MOCK_USER;else{c=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new He(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Rr(f)}n._authCredentials=new DK(new ZH(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function O9(n){return function g9(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const t=yield bG(n),e=yield wG(n);return t.setNetworkEnabled(!0),function(i){const r=dt(i);return r.lu.delete(0),cw(r)}(e)}))}(ur(n=Dn(n,Ii)))}(this._delegate)}disableNetwork(){return function P9(n){return function _9(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const t=yield bG(n),e=yield wG(n);return t.setNetworkEnabled(!1),(i=(0,Se.Z)(function*(r){const s=dt(r);s.lu.add(0),yield J_(s),s._u.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(ur(n=Dn(n,Ii)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,SG("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function R9(n){return function(t){const e=new Or;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function XQ(n,t){return m1.apply(this,arguments)}(yield L1(t),e)})),e.promise}(ur(n=Dn(n,Ii)))}(this._delegate)}onSnapshotsInSync(t){return function hX(n,t){return function b9(n,t){const e=new dM(t);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return i=yield ov(n),r=e,dt(i).Tu.add(r),void r.next();var i,r})),()=>{e.Tc(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return i=yield ov(n),r=e,void dt(i).Tu.delete(r);var i,r}))}}(ur(n=Dn(n,Ii)),H1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new lv(this,AG(this._delegate,t))}catch(e){throw Ys(e,"collection()","Firestore.collection()")}}doc(t){try{return new Za(this,mM(this._delegate,t))}catch(e){throw Ys(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Zs(this,function S9(n,t){if(n=Dn(n,dw),V1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xs(n,null,(e=t,new zu(In.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ys(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function pX(n,t,e){n=Dn(n,Ii);const i=Object.assign(Object.assign({},nX),e);return function(r){if(r.maxAttempts<1)throw new He(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function w9(n,t,e){const i=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const r=yield(s=n,hM(s).then(c=>c.datastore));var s;new p9(n.asyncQueue,r,e,t,i).run()})),i.promise}(ur(n),r=>t(new fX(n,r)),i)}(this._delegate,e=>t(new a3(this,e)))}batch(){return ur(this._delegate),new l3(new XG(this._delegate,t=>av(this._delegate,t)))}loadBundle(t){return function N9(n,t){const e=ur(n=Dn(n,Ii)),i=new M9;return function C9(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,_){if(f instanceof Uint8Array)return _G(f,_);if(f instanceof ArrayBuffer)return _G(new Uint8Array(f),_);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new h9(f,c);var f}(e,lw(t));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function u9(n,t,e){const i=dt(n);var r;(r=(0,Se.Z)(function*(s,c,d){try{const f=yield c.getMetadata();if(yield function(T,P){const F=dt(T),z=Pr(P.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",te=>F.Ds.getBundleMetadata(te,P.id)).then(te=>!!te&&te.createTime.compareTo(z)>=0)}(s.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(T=f).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);d._updateProgress(oG(f));const _=new jQ(f,s.localStore,c.wt);let b=yield c.fc();for(;b;){const T=yield _.Nu(b);T&&d._updateProgress(T),b=yield c.fc()}const E=yield _.complete();return yield qu(s,E.Ou,void 0),yield function(T,P){const F=dt(T);return F.persistence.runTransaction("Save bundle","readwrite",z=>F.Ds.saveBundleMetadata(z,P))}(s.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Mu)}catch(f){return sm("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var T}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield L1(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function F9(n,t){return function D9(n,t){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(e,i){const r=dt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(yield fM(n),t)}))}(ur(n=Dn(n,Ii)),t).then(e=>e?new xs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Zs(this,e):null)}}class DM extends q1{constructor(t){super(),this.firestore=t}convertBytes(t){return new gw(new Oc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Za.forKey(e,this.firestore,null)}}class a3{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new DM(t)}get(t){const e=Tm(t);return this._delegate.get(e).then(i=>new _w(this._firestore,new Yu(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Tm(t);return i?(Y1("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Tm(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Tm(t);return this._delegate.delete(e),this}}class l3{constructor(t){this._delegate=t}set(t,e,i){const r=Tm(t);return i?(Y1("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Tm(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Tm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Im{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new pw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new vw(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Im.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Im(t,new DM(t),e),r.set(e,s)),s}}Im.INSTANCES=new WeakMap;class Za{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new DM(t)}static forPath(t,e,i){if(t.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Za(e,new vi(e._delegate,i,new ot(t)))}static forKey(t,e,i){return new Za(e,new vi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new lv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new lv(this.firestore,AG(this._delegate,t))}catch(e){throw Ys(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof vi&&kG(this._delegate,t)}set(t,e){e=Y1("DocumentReference.set",e);try{return e?JG(this._delegate,t,e):JG(this._delegate,t)}catch(i){throw Ys(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?e3(this._delegate,t):e3(this._delegate,t,e,...i)}catch(r){throw Ys(r,"updateDoc()","DocumentReference.update()")}}delete(){return function uX(n){return av(Dn(n.firestore,Ii),[new q_(n._key,Ni.none())])}(this._delegate)}onSnapshot(...t){const e=c3(t),i=u3(t,r=>new _w(this.firestore,new Yu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return t3(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function sX(n){n=Dn(n,vi);const t=Dn(n.firestore,Ii),e=ur(t),i=new Mm(t);return function v9(n,t){const e=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(i=(0,Se.Z)(function*(r,s,c){try{const d=yield function(f,_){const b=dt(f);return b.persistence.runTransaction("read document","readonly",E=>b.localDocuments.getDocument(E,_))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new He(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=nv(d,`Failed to get document '${s} from cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield fM(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Yu(t,i,n._key,r,new xm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function oX(n){n=Dn(n,vi);const t=Dn(n.firestore,Ii);return CG(ur(t),n._key,{source:"server"}).then(e=>W1(t,n,e))}(this._delegate):function rX(n){n=Dn(n,vi);const t=Dn(n.firestore,Ii);return CG(ur(t),n._key).then(e=>W1(t,n,e))}(this._delegate),e.then(i=>new _w(this.firestore,new Yu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Za(this.firestore,this._delegate.withConverter(t?Im.getInstance(this.firestore,t):null))}}function Ys(n,t,e){return n.message=n.message.replace(t,e),n}function c3(n){for(const t of n)if("object"==typeof t&&!Z1(t))return t;return{}}function u3(n,t){var e,i;let r;return r=Z1(n[0])?n[0]:Z1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class _w{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return GG(this._delegate,t._delegate)}}class vw extends _w{data(t){const e=this._delegate.data(t);return function wK(n,t){n||yt()}(void 0!==e),e}}class Zs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new DM(t)}where(t,e,i){try{return new Zs(this.firestore,Fh(this._delegate,function W9(n,t,e){const i=t,r=wM("where",n);return new q9(r,i,e)}(t,e,i)))}catch(r){throw Ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Zs(this.firestore,Fh(this._delegate,function Z9(n,t="asc"){const e=t,i=wM("orderBy",n);return new Y9(i,e)}(t,e)))}catch(i){throw Ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Zs(this.firestore,Fh(this._delegate,function K9(n){return IG("limit",n),new $G("limit",n,"F")}(t)))}catch(e){throw Ys(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Zs(this.firestore,Fh(this._delegate,function Q9(n){return IG("limitToLast",n),new $G("limitToLast",n,"L")}(t)))}catch(e){throw Ys(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Zs(this.firestore,Fh(this._delegate,function X9(...n){return new qG("startAt",n,!0)}(...t)))}catch(e){throw Ys(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Zs(this.firestore,Fh(this._delegate,function J9(...n){return new qG("startAfter",n,!1)}(...t)))}catch(e){throw Ys(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Zs(this.firestore,Fh(this._delegate,function eX(...n){return new WG("endBefore",n,!1)}(...t)))}catch(e){throw Ys(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Zs(this.firestore,Fh(this._delegate,function tX(...n){return new WG("endAt",n,!0)}(...t)))}catch(e){throw Ys(e,"endAt()","Query.endAt()")}}isEqual(t){return RG(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function lX(n){n=Dn(n,xs);const t=Dn(n.firestore,Ii),e=ur(t),i=new Mm(t);return function y9(n,t){const e=new Or;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(i=(0,Se.Z)(function*(r,s,c){try{const d=yield sM(r,s,!0),f=new cG(s,d.ji),_=f.Ku(d.documents),b=f.applyChanges(_,!1);c.resolve(b.snapshot)}catch(d){const f=nv(d,`Failed to execute query '${s} against cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield fM(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Nh(t,i,n,r))}(this._delegate):"server"===t?.source?function cX(n){n=Dn(n,xs);const t=Dn(n.firestore,Ii),e=ur(t),i=new Mm(t);return DG(e,n._query,{source:"server"}).then(r=>new Nh(t,i,n,r))}(this._delegate):function aX(n){n=Dn(n,xs);const t=Dn(n.firestore,Ii),e=ur(t),i=new Mm(t);return zG(n._query),DG(e,n._query).then(r=>new Nh(t,i,n,r))}(this._delegate),e.then(i=>new K1(this.firestore,new Nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=c3(t),i=u3(t,r=>new K1(this.firestore,new Nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return t3(this._delegate,e,i)}withConverter(t){return new Zs(this.firestore,this._delegate.withConverter(t?Im.getInstance(this.firestore,t):null))}}class SX{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new vw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class K1{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new vw(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new SX(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new vw(this._firestore,i))})}isEqual(t){return GG(this._delegate,t._delegate)}}class lv extends Zs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Za(this.firestore,t):null}doc(t){try{return new Za(this.firestore,void 0===t?mM(this._delegate):mM(this._delegate,t))}catch(e){throw Ys(e,"doc()","CollectionReference.doc()")}}add(t){return function dX(n,t){const e=Dn(n.firestore,Ii),i=mM(n),r=CM(n.converter,t);return av(e,[vM(Em(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ni.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Za(this.firestore,e))}isEqual(t){return kG(this._delegate,t._delegate)}withConverter(t){return new lv(this.firestore,this._delegate.withConverter(t?Im.getInstance(this.firestore,t):null))}}function Tm(n){return Dn(n,vi)}class Q1{constructor(...t){this._delegate=new Wu(...t)}static documentId(){return new Q1(Ui.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof Wu&&this._delegate._internalPath.isEqual(t._internalPath)}}class Am{constructor(t){this._delegate=t}static serverTimestamp(){const t=function gX(){return new U1("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Am(t)}static delete(){const t=function mX(){return new hw("deleteField")}();return t._methodName="FieldValue.delete",new Am(t)}static arrayUnion(...t){const e=function _X(...n){return new H9("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Am(e)}static arrayRemove(...t){const e=function vX(...n){return new U9("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Am(e)}static increment(t){const e=function yX(n){return new j9("increment",n)}(t);return e._methodName="FieldValue.increment",new Am(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const xX={Firestore:o3,GeoPoint:gM,Timestamp:Mi,Blob:gw,Transaction:a3,WriteBatch:l3,DocumentReference:Za,DocumentSnapshot:_w,Query:Zs,QueryDocumentSnapshot:vw,QuerySnapshot:K1,CollectionReference:lv,FieldPath:Q1,FieldValue:Am,setLogLevel:function EX(n){!function bK(n){Ch.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function IX(n){(function MX(n,t){n.INTERNAL.registerComponent(new Hl.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},xX)))})(n,(t,e)=>new o3(t,e,new DX)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(rO.Z);var EM=V(5363),TX=V(6063);class AX extends rt.x{constructor(t=1/0,e=1/0,i=TX.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let f=1;f<i.length&&i[f]<=c;f+=2)d=f;d&&i.splice(0,d+1)}}}function d3(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,xS.B)({connector:()=>new AX(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const SM=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function xM(n){return(0,hi.e)((t,e)=>{let i=!1;t.subscribe((0,jn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function h3(n=RX){return(0,hi.e)((t,e)=>{let i=!1;t.subscribe((0,jn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function RX(){return new SM}function Zu(n,t){const e=arguments.length>=2;return i=>i.pipe(n?ti((r,s)=>n(r,s,i)):k.y,v(1),e?xM(t):h3(()=>new SM))}function f3(n,t){return(0,po.m)(t)?Yn(()=>n,t):Yn(()=>n)}var X1=V(9468);V(5867);const m3=new Map,LX={activated:!1,tokenObservers:[]},BX={initialized:!1,enabled:!1};function Lr(n){return m3.get(n)||LX}function jl(n,t){m3.set(n,t)}function IM(){return BX}class GX{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Se.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function zX(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Ks=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _3(n){if(!Lr(n).activated)throw Ks.create("use-before-activation",{appName:n.name})}function nN(n,t){return iN.apply(this,arguments)}function iN(){return iN=(0,Se.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const P=yield c.getHeartbeatsHeader();P&&(s["X-Firebase-Client"]=P)}const d={method:"POST",body:JSON.stringify(t),headers:s};let f,_;try{f=yield fetch(n,d)}catch(P){throw Ks.create("fetch-network-error",{originalErrorMessage:null===(i=P)||void 0===i?void 0:i.message})}if(200!==f.status)throw Ks.create("fetch-status-error",{httpStatus:f.status});try{_=yield f.json()}catch(P){throw Ks.create("fetch-parse-error",{originalErrorMessage:null===(r=P)||void 0===r?void 0:r.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const E=1e3*Number(b[1]),T=Date.now();return{token:_.token,expireTimeMillis:T+E,issuedAtTimeMillis:T}}),iN.apply(this,arguments)}function YX(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const yw="firebase-app-check-store";let kM=null;function y3(){return kM||(kM=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(Ks.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yw,{keyPath:"compositeKey"})}}catch(i){t(Ks.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),kM)}function rN(){return rN=(0,Se.Z)(function*(n,t){const i=(yield y3()).transaction(yw,"readwrite"),s=i.objectStore(yw).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=f=>{c()},i.onerror=f=>{var _;d(Ks.create("storage-set",{originalErrorMessage:null===(_=f.target.error)||void 0===_?void 0:_.message}))}})}),rN.apply(this,arguments)}const bw=new Vl.Yd("@firebase/app-check");function D3(n,t){return(0,L.hl)()?function XX(n,t){return function b3(n,t){return rN.apply(this,arguments)}(function C3(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{bw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function E3(){return IM().enabled}function S3(){return lN.apply(this,arguments)}function lN(){return lN=(0,Se.Z)(function*(){const n=IM();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),lN.apply(this,arguments)}const rJ={error:"UNKNOWN_ERROR"};function sJ(n){return L.US.encodeString(JSON.stringify(n),!1)}function RM(n){return cN.apply(this,arguments)}function cN(){return cN=(0,Se.Z)(function*(n,t=!1){const e=n.app;_3(e);const i=Lr(e);let s,r=i.token;if(!r){const f=yield i.cachedTokenPromise;f&&OM(f)&&(r=f)}if(!t&&r&&OM(r))return{token:r.token};let d,c=!1;if(E3()){i.exchangeTokenPromise||(i.exchangeTokenPromise=nN(YX(e,yield S3()),n.heartbeatServiceProvider).then(_=>(i.exchangeTokenPromise=void 0,_)),c=!0);const f=yield i.exchangeTokenPromise;return yield D3(e,f),jl(e,Object.assign(Object.assign({},i),{token:f})),{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(f=>(i.exchangeTokenPromise=void 0,f)),c=!0),r=yield i.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?bw.warn(f.message):bw.error(f),s=f}return r?(d={token:r.token},jl(e,Object.assign(Object.assign({},i),{token:r})),yield D3(e,r)):d=aJ(s),c&&M3(e,d),d}),cN.apply(this,arguments)}function dN(n,t){const e=Lr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),jl(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function x3(n){const{app:t}=n,e=Lr(t);let i=e.tokenRefresher;i||(i=function oJ(n){const{app:t}=n;return new GX((0,Se.Z)(function*(){let i;if(i=Lr(t).token?yield RM(n,!0):yield RM(n),i.error)throw i.error}),()=>!0,()=>{const e=Lr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),jl(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function M3(n,t){const e=Lr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function OM(n){return n.expireTimeMillis-Date.now()>0}function aJ(n){return{token:sJ(rJ),error:n}}class lJ{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Lr(this.app);for(const e of t)dN(this.app,e.next);return Promise.resolve()}}const N3="app-check-internal";!function CJ(){(0,Gs._registerComponent)(new Hl.wA("app-check",n=>function cJ(n,t){return new lJ(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(N3).initialize()})),(0,Gs._registerComponent)(new Hl.wA(N3,n=>function uJ(n){return{getToken:t=>RM(n,t),addTokenListener:t=>function uN(n,t,e,i){const{app:r}=n,s=Lr(r),c={next:e,error:i,type:t};if(jl(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&OM(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),x3(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>x3(n))}(n,"INTERNAL",t),removeTokenListener:t=>dN(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gs.registerVersion)("@firebase/app-check","0.5.12")}();class ww{constructor(){return(0,Pn.vb)("app-check")}}typeof window<"u"&&window;var NM=V(127);const gN=new l.OlP("angularfire2.auth.use-emulator"),_N=new l.OlP("angularfire2.auth.settings"),vN=new l.OlP("angularfire2.auth.tenant-id"),yN=new l.OlP("angularfire2.auth.langugage-code"),bN=new l.OlP("angularfire2.auth.use-device-language"),wN=new l.OlP("angularfire.auth.persistence"),CN=(n,t,e,i,r,s,c,d)=>(0,vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),c)for(const[_,b]of Object.entries(c))f.settings[_]=b;return d&&f.setPersistence(d),f},[e,i,r,s,c,d]);let Cw=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,E,T,P){const F=new rt.x,z=ct(void 0).pipe((0,EM.Q)(c.outsideAngular),Yn(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,w.U)(()=>(0,vr.on)(e,s,i)),(0,w.U)(te=>CN(te,s,d,_,b,E,f,T)),d3({bufferSize:1,refCount:!1}));if(Zc(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{z.pipe(Zu()).subscribe();const Ve=z.pipe(Yn(Je=>Je.getRedirectResult().then(St=>St,()=>null)),Pn.iC,d3({bufferSize:1,refCount:!1})),Ze=z.pipe(Yn(Je=>new pi.y(St=>({unsubscribe:s.runOutsideAngular(()=>Je.onAuthStateChanged(Tt=>St.next(Tt),Tt=>St.error(Tt),()=>St.complete()))})))),it=z.pipe(Yn(Je=>new pi.y(St=>({unsubscribe:s.runOutsideAngular(()=>Je.onIdTokenChanged(Tt=>St.next(Tt),Tt=>St.error(Tt),()=>St.complete()))}))));this.authState=Ve.pipe(f3(Ze),(0,X1.R)(c.outsideAngular),(0,EM.Q)(c.insideAngular)),this.user=Ve.pipe(f3(it),(0,X1.R)(c.outsideAngular),(0,EM.Q)(c.insideAngular)),this.idToken=this.user.pipe(Yn(Je=>Je?(0,ln.D)(Je.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(Yn(Je=>Je?(0,ln.D)(Je.getIdTokenResult()):ct(null))),this.credential=(0,Zr.T)(Ve,F,this.authState.pipe(ti(Je=>!Je))).pipe((0,w.U)(Je=>Je?.user?Je:null),(0,X1.R)(c.outsideAngular),(0,EM.Q)(c.insideAngular))}return(0,vr.pX)(this,z,s,{spy:{apply:(te,Ve,Ze)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Ze.then(it=>F.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vr.Dh),l.LFG(vr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Pn.HU),l.LFG(gN,8),l.LFG(_N,8),l.LFG(vN,8),l.LFG(yN,8),l.LFG(bN,8),l.LFG(wN,8),l.LFG(ww,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IJ=(()=>{class n{constructor(){NM.Z.registerVersion("angularfire",Pn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Cw]}),n})();function L3(n,t){return function TJ(n,t=Pa.z){return new pi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function DN(n,t){return L3(n,t).pipe((0,w.U)(e=>({payload:e,type:"query"})))}function FM(n,t){return DN(n,t).pipe(ys(void 0),iO(),(0,w.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const f=r.find(b=>b.doc.ref.isEqual(c.ref)),_=e?.payload.docs.find(b=>b.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function B3(n,t,e){return FM(n,e).pipe(Jp((i,r)=>function kJ(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function RJ(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return EN(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return EN(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return EN(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),B(),(0,w.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function EN(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function V3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class H3{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=FM(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,w.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(ys(void 0),iO(),ti(([i,r])=>r.length>0||!i),(0,w.U)(([i,r])=>r),Pn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Jp((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=V3(t);return B3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(t={}){return DN(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Pn.iC)}get(t){return(0,ln.D)(this.query.get(t)).pipe(Pn.iC)}add(t){return this.ref.add(t)}doc(t){return new U3(this.ref.doc(t),this.afs)}}class U3{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=z3(i,e);return new H3(r,s,this.afs)}snapshotChanges(){return function AJ(n,t){return L3(n,t).pipe(ys(void 0),iO(),(0,w.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,w.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,ln.D)(this.ref.get(t)).pipe(Pn.iC)}}class OJ{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?FM(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),ti(e=>e.length>0),Pn.iC):FM(this.query,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Jp((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=V3(t);return B3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(t={}){return DN(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Pn.iC)}get(t){return(0,ln.D)(this.query.get(t)).pipe(Pn.iC)}}const j3=new l.OlP("angularfire2.enableFirestorePersistence"),G3=new l.OlP("angularfire2.firestore.persistenceSettings"),PJ=new l.OlP("angularfire2.firestore.settings"),NJ=new l.OlP("angularfire2.firestore.use-emulator");function z3(n,t=(e=>e)){return{query:t(n),ref:n}}let $3=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,E,T,P,F,z,te,Ve,Ze){this.schedulers=f;const it=(0,vr.on)(e,d,i),Je=b;E&&CN(it,d,T,F,z,te,P,Ve),[this.firestore,this.persistenceEnabled$]=(0,vr.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const St=d.runOutsideAngular(()=>it.firestore());if(s&&St.settings(s),Je&&St.useEmulator(...Je),r&&!Zc(c)){const Tt=()=>{try{return(0,ln.D)(St.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(fn){return typeof console<"u"&&console.warn(fn),ct(!1)}};return[St,d.runOutsideAngular(Tt)]}return[St,ct(!1)]},[s,Je,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=z3(r,i),d=this.schedulers.ngZone.run(()=>s);return new H3(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new OJ(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new U3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vr.Dh),l.LFG(vr.xv,8),l.LFG(j3,8),l.LFG(PJ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Pn.HU),l.LFG(G3,8),l.LFG(NJ,8),l.LFG(Cw,8),l.LFG(gN,8),l.LFG(_N,8),l.LFG(vN,8),l.LFG(yN,8),l.LFG(bN,8),l.LFG(wN,8),l.LFG(ww,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FJ=(()=>{class n{constructor(){NM.Z.registerVersion("angularfire",Pn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:j3,useValue:!0},{provide:G3,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[$3]}),n})();var LJ=V(9635);function SN(){return(0,hi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,jn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class q3 extends pi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,hi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Mn.w0;const e=this.getSubject();t.add(this.source.subscribe((0,jn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Mn.w0.EMPTY)}return t}refCount(){return SN()(this)}}function xN(n){return n<=0?()=>g.E:(0,hi.e)((t,e)=>{let i=[];t.subscribe((0,jn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function W3(n,t){const e=arguments.length>=2;return i=>i.pipe(n?ti((r,s)=>n(r,s,i)):k.y,xN(1),e?xM(t):h3(()=>new SM))}const un="primary";class VJ{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function cv(n){return new VJ(n)}function HJ(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Pc(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Y3(n[r],t[r]))return!1;return!0}function Y3(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function Z3(n){return Array.prototype.concat.apply([],n)}function K3(n){return n.length>0?n[n.length-1]:null}function rs(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Ku(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,ln.D)(Promise.resolve(n)):ct(n)}const GJ={exact:function J3(n,t,e){if(!Rm(n.segments,t.segments)||!LM(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!J3(n.children[i],t.children[i],e))return!1;return!0},subset:ez},Q3={exact:function zJ(n,t){return Pc(n,t)},subset:function $J(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Y3(n[e],t[e]))},ignored:()=>!0};function X3(n,t,e){return GJ[e.paths](n.root,t.root,e.matrixParams)&&Q3[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ez(n,t,e){return tz(n,t,t.segments,e)}function tz(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Rm(r,e)||t.hasChildren()||!LM(r,e,i))}if(n.segments.length===e.length){if(!Rm(n.segments,e)||!LM(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!ez(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Rm(n.segments,r)&&LM(n.segments,r,i)&&n.children[un])&&tz(n.children[un],t,s,i)}}function LM(n,t,e){return t.every((i,r)=>Q3[e](n[r].parameters,i.parameters))}class km{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cv(this.queryParams)),this._queryParamMap}toString(){return YJ.serialize(this)}}class vn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,rs(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return BM(this)}}class Dw{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=cv(this.parameters)),this._parameterMap}toString(){return sz(this)}}function Rm(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let nz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new IN},providedIn:"root"}),n})();class IN{parse(t){const e=new iee(t);return new km(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Ew(t.root,!0)}`,i=function QJ(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${VM(e)}=${VM(r)}`).join("&"):`${VM(e)}=${VM(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),r="string"==typeof t.fragment?`#${function ZJ(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${i}${r}`}}const YJ=new IN;function BM(n){return n.segments.map(t=>sz(t)).join("/")}function Ew(n,t){if(!n.hasChildren())return BM(n);if(t){const e=n.children[un]?Ew(n.children[un],!1):"",i=[];return rs(n.children,(r,s)=>{s!==un&&i.push(`${s}:${Ew(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function WJ(n,t){let e=[];return rs(n.children,(i,r)=>{r===un&&(e=e.concat(t(i,r)))}),rs(n.children,(i,r)=>{r!==un&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===un?[Ew(n.children[un],!1)]:[`${r}:${Ew(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[un]?`${BM(n)}/${e[0]}`:`${BM(n)}/(${e.join("//")})`}}function iz(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function VM(n){return iz(n).replace(/%3B/gi,";")}function TN(n){return iz(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function HM(n){return decodeURIComponent(n)}function rz(n){return HM(n.replace(/\+/g,"%20"))}function sz(n){return`${TN(n.path)}${function KJ(n){return Object.keys(n).map(t=>`;${TN(t)}=${TN(n[t])}`).join("")}(n.parameters)}`}const XJ=/^[^\/()?;=#]+/;function UM(n){const t=n.match(XJ);return t?t[0]:""}const JJ=/^[^=?&#]+/,tee=/^[^&#]+/;class iee{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[un]=new vn(t,e)),i}parseSegment(){const t=UM(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new Dw(HM(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=UM(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=UM(this.remaining);r&&(i=r,this.capture(i))}t[HM(e)]=HM(i)}parseQueryParam(t){const e=function eee(n){const t=n.match(JJ);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function nee(n){const t=n.match(tee);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=rz(e),s=rz(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=UM(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=un);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[un]:new vn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function AN(n){return n.segments.length>0?new vn([],{[un]:n}):n}function jM(n){const t={};for(const i of Object.keys(n.children)){const s=jM(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function ree(n){if(1===n.numberOfChildren&&n.children[un]){const t=n.children[un];return new vn(n.segments.concat(t.segments),t.children)}return n}(new vn(n.segments,t))}function Om(n){return n instanceof km}function aee(n,t,e,i,r){if(0===e.length)return uv(t.root,t.root,t.root,i,r);const s=function lz(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new az(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return rs(s.outlets,(f,_)=>{d[_]="string"==typeof f?f.split("/"):f}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new az(e,t,i)}(e);return s.toRoot()?uv(t.root,t.root,new vn([],{}),i,r):function c(f){const _=function cee(n,t,e,i){if(n.isAbsolute)return new dv(t.root,!0,0);if(-1===i)return new dv(e,e===t.root,0);return function cz(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new dv(i,!1,r-s)}(e,i+(Sw(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,f),b=_.processChildren?Mw(_.segmentGroup,_.index,s.commands):RN(_.segmentGroup,_.index,s.commands);return uv(t.root,_.segmentGroup,b,i,r)}(n.snapshot?._lastPathIndex)}function Sw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xw(n){return"object"==typeof n&&null!=n&&n.outlets}function uv(n,t,e,i,r){let c,s={};i&&rs(i,(f,_)=>{s[_]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),c=n===t?e:oz(n,t,e);const d=AN(jM(c));return new km(d,s,r)}function oz(n,t,e){const i={};return rs(n.children,(r,s)=>{i[s]=r===t?e:oz(r,t,e)}),new vn(n.segments,i)}class az{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Sw(i[0]))throw new l.vHH(4003,!1);const r=i.find(xw);if(r&&r!==K3(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dv{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function RN(n,t,e){if(n||(n=new vn([],{})),0===n.segments.length&&n.hasChildren())return Mw(n,t,e);const i=function dee(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(xw(d))break;const f=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===f)break;if(f&&_&&"object"==typeof _&&void 0===_.outlets){if(!dz(f,_,c))return s;i+=2}else{if(!dz(f,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new vn(n.segments.slice(0,i.pathIndex),{});return s.children[un]=new vn(n.segments.slice(i.pathIndex),n.children),Mw(s,0,r)}return i.match&&0===r.length?new vn(n.segments,{}):i.match&&!n.hasChildren()?ON(n,t,e):i.match?Mw(n,0,r):ON(n,t,e)}function Mw(n,t,e){if(0===e.length)return new vn(n.segments,{});{const i=function uee(n){return xw(n[0])?n[0].outlets:{[un]:n}}(e),r={};return rs(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=RN(n.children[c],t,s))}),rs(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new vn(n.segments,r)}}function ON(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(xw(s)){const f=hee(s.outlets);return new vn(i,f)}if(0===r&&Sw(e[0])){i.push(new Dw(n.segments[t].path,uz(e[0]))),r++;continue}const c=xw(s)?s.outlets[un]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&Sw(d)?(i.push(new Dw(c,uz(d))),r+=2):(i.push(new Dw(c,{})),r++)}return new vn(i,{})}function hee(n){const t={};return rs(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=ON(new vn([],{}),0,e))}),t}function uz(n){const t={};return rs(n,(e,i)=>t[i]=`${e}`),t}function dz(n,t,e){return n==e.path&&Pc(t,e.parameters)}class Qu{constructor(t,e){this.id=t,this.url=e}}class PN extends Qu{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pm extends Qu{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class GM extends Qu{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class hz extends Qu{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fee extends Qu{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pee extends Qu{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mee extends Qu{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gee extends Qu{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _ee extends Qu{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vee{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yee{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bee{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wee{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cee{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dee{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fz{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class pz{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=NN(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=NN(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=FN(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return FN(t,this._root).map(e=>e.value)}}function NN(n,t){if(n===t.value)return t;for(const e of t.children){const i=NN(n,e);if(i)return i}return null}function FN(n,t){if(n===t.value)return[t];for(const e of t.children){const i=FN(n,e);if(i.length)return i.unshift(t),i}return[]}class Xu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function hv(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class mz extends pz{constructor(t,e){super(t),this.snapshot=e,LN(this,t)}toString(){return this.snapshot.toString()}}function gz(n,t){const e=function See(n,t){const c=new zM([],{},{},"",{},un,t,null,n.root,-1,{});return new vz("",new Xu(c,[]))}(n,t),i=new Oi([new Dw("",{})]),r=new Oi({}),s=new Oi({}),c=new Oi({}),d=new Oi(""),f=new fv(i,r,c,d,s,un,t,e.root);return f.snapshot=e.root,new mz(new Xu(f,[]),e)}class fv{constructor(t,e,i,r,s,c,d,f){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,w.U)(t=>cv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,w.U)(t=>cv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _z(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function xee(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class zM{constructor(t,e,i,r,s,c,d,f,_,b,E,T){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=f,this._urlSegment=_,this._lastPathIndex=b,this._correctedLastPathIndex=T??b,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vz extends pz{constructor(t,e){super(e),this.url=t,LN(this,e)}toString(){return yz(this._root)}}function LN(n,t){t.value._routerState=n,t.children.forEach(e=>LN(n,e))}function yz(n){const t=n.children.length>0?` { ${n.children.map(yz).join(", ")} } `:"";return`${n.value}${t}`}function BN(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Pc(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Pc(t.params,e.params)||n.params.next(e.params),function UJ(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Pc(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Pc(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function VN(n,t){const e=Pc(n.params,t.params)&&function qJ(n,t){return Rm(n,t)&&n.every((e,i)=>Pc(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||VN(n.parent,t.parent))}function Iw(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Iee(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Iw(n,i,r);return Iw(n,i)})}(n,t,e);return new Xu(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>Iw(n,d)),c}}const i=function Tee(n){return new fv(new Oi(n.url),new Oi(n.params),new Oi(n.queryParams),new Oi(n.fragment),new Oi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Iw(n,s));return new Xu(i,r)}}const HN="ngNavigationCancelingError";function bz(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Om(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=wz(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function wz(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[HN]=!0,i.cancellationCode=t,e&&(i.url=e),i}function Cz(n){return Dz(n)&&Om(n.url)}function Dz(n){return n&&n[HN]}class Aee{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Tw,this.attachRef=null}}let Tw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Aee,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $M=!1;let UN=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||un,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,$M);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,$M);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,$M);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,$M);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new kee(e,d,r.injector);if(i&&function Ree(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(c);this.activated=r.createComponent(_,r.length,f)}else this.activated=r.createComponent(c,{index:r.length,injector:f,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Tw),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class kee{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===fv?this.route:t===Tw?this.childContexts:this.parent.get(t,e)}}let Ez=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[UN],encapsulation:2}),n})();function Sz(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function GN(n){const t=n.children&&n.children.map(GN),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==un&&(e.component=Ez),e}function Ka(n){return n.outlet||un}function xz(n,t){const e=n.filter(i=>Ka(i)===t);return e.push(...n.filter(i=>Ka(i)!==t)),e}function Mz(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Lee{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),BN(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=hv(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),rs(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=hv(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=hv(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=hv(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Dee(s.value.snapshot))}),t.children.length&&this.forwardEvent(new wee(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(BN(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),BN(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=Mz(r.snapshot),f=d?.get(l._Vd)??null;c.attachRef=null,c.route=r,c.resolver=f,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class Iz{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class qM{constructor(t,e){this.component=t,this.route=e}}function Bee(n,t,e){const i=n._root;return Aw(i,t?t._root:null,e,[i.value])}function WM(n,t,e){return(Mz(t)??e).get(n)}function Aw(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=hv(t);return n.children.forEach(c=>{(function Hee(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const f=function Uee(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Rm(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Rm(n.url,t.url)||!Pc(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VN(n,t)||!Pc(n.queryParams,t.queryParams);default:return!VN(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new Iz(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Aw(n,t,s.component?d?d.children:null:e,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new qM(d.outlet.component,c))}else c&&kw(t,d,r),r.canActivateChecks.push(new Iz(i)),Aw(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),rs(s,(c,d)=>kw(c,e.getContext(d),r)),r}function kw(n,t,e){const i=hv(n),r=n.value;rs(i,(s,c)=>{kw(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new qM(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Rw(n){return"function"==typeof n}function zN(n){return n instanceof SM||"EmptyError"===n?.name}const YM=Symbol("INITIAL_VALUE");function pv(){return Yn(n=>Xv(n.map(t=>t.pipe(v(1),ys(YM)))).pipe((0,w.U)(t=>{for(const e of t)if(!0!==e){if(e===YM)return YM;if(!1===e||e instanceof km)return e}return!0}),ti(t=>t!==YM),v(1)))}function Tz(n){return(0,LJ.z)((0,ei.b)(t=>{if(Om(t))throw bz(0,t)}),(0,w.U)(t=>!0===t))}const $N={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Az(n,t,e,i,r){const s=qN(n,t,e);return s.matched?function rte(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ct(r.map(c=>{const d=n.get(c),f=function Wee(n){return n&&Rw(n.canMatch)}(d)?d.canMatch(t,e):d(t,e);return Ku(f)})).pipe(pv(),Tz()):ct(!0)}(i=Sz(t,i),t,e).pipe((0,w.U)(c=>!0===c?s:{...$N})):ct(s)}function qN(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...$N}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||HJ)(e,n,t);if(!r)return{...$N};const s={};rs(r.posParams,(d,f)=>{s[f]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function ZM(n,t,e,i,r="corrected"){if(e.length>0&&function ate(n,t,e){return e.some(i=>KM(n,t,i)&&Ka(i)!==un)}(n,e,i)){const c=new vn(t,function ote(n,t,e,i){const r={};r[un]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Ka(s)!==un){const c=new vn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Ka(s)]=c}return r}(n,t,i,new vn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function lte(n,t,e){return e.some(i=>KM(n,t,i))}(n,e,i)){const c=new vn(n.segments,function ste(n,t,e,i,r,s){const c={};for(const d of i)if(KM(n,e,d)&&!r[Ka(d)]){const f=new vn([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[Ka(d)]=f}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new vn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function KM(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function kz(n,t,e,i){return!!(Ka(n)===i||i!==un&&KM(t,e,n))&&("**"===n.path||qN(t,n,e).matched)}function Rz(n,t,e){return 0===t.length&&!n.children[e]}const QM=!1;class XM{constructor(t){this.segmentGroup=t||null}}class Oz{constructor(t){this.urlTree=t}}function Ow(n){return zp(new XM(n))}function Pz(n){return zp(new Oz(n))}class hte{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=ZM(this.urlTree.root,[],[],this.config).segmentGroup,e=new vn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,un).pipe((0,w.U)(s=>this.createUrlTree(jM(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qa(s=>{if(s instanceof Oz)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof XM?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,un).pipe((0,w.U)(r=>this.createUrlTree(jM(r),t.queryParams,t.fragment))).pipe(qa(r=>{throw r instanceof XM?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,QM)}createUrlTree(t,e,i){const r=AN(t);return new km(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,w.U)(s=>new vn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,ln.D)(r).pipe(Fu(s=>{const c=i.children[s],d=xz(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,w.U)(f=>({segment:f,outlet:s})))}),Jp((s,c)=>(s[c.outlet]=c.segment,s),{}),W3())}expandSegment(t,e,i,r,s,c){return(0,ln.D)(i).pipe(Fu(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(qa(_=>{if(_ instanceof XM)return ct(null);throw _}))),Zu(d=>!!d),qa((d,f)=>{if(zN(d))return Rz(e,r,s)?ct(new vn([],{})):Ow(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return kz(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):Ow(e):Ow(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Pz(s):this.lineralizeSegments(i,s).pipe((0,Hi.z)(c=>{const d=new vn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:f,remainingSegments:_,positionalParamSegments:b}=qN(e,r,s);if(!d)return Ow(e);const E=this.applyRedirectCommands(f,r.redirectTo,b);return r.redirectTo.startsWith("/")?Pz(E):this.lineralizeSegments(r,E).pipe((0,Hi.z)(T=>this.expandSegment(t,e,i,T.concat(_),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=Sz(i,t),i.loadChildren?(i._loadedRoutes?ct({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,w.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new vn(r,{})))):ct(new vn(r,{}))):Az(e,i,r,t).pipe(Yn(({matched:c,consumedSegments:d,remainingSegments:f})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Hi.z)(b=>{const E=b.injector??t,T=b.routes,{segmentGroup:P,slicedSegments:F}=ZM(e,d,f,T),z=new vn(P.segments,P.children);if(0===F.length&&z.hasChildren())return this.expandChildren(E,T,z).pipe((0,w.U)(it=>new vn(d,it)));if(0===T.length&&0===F.length)return ct(new vn(d,{}));const te=Ka(i)===s;return this.expandSegment(E,z,T,F,te?un:s,!0).pipe((0,w.U)(Ze=>new vn(d.concat(Ze.segments),Ze.children)))})):Ow(e)))}getChildConfig(t,e,i){return e.children?ct({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ct({routes:e._loadedRoutes,injector:e._loadedInjector}):function ite(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(c=>{const d=n.get(c),f=function Gee(n){return n&&Rw(n.canLoad)}(d)?d.canLoad(t,e):d(t,e);return Ku(f)})).pipe(pv(),Tz())}(t,e,i).pipe((0,Hi.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,ei.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function ute(n){return zp(wz(QM,3))}())):ct({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[un])return zp(new l.vHH(4e3,QM));r=r.children[un]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new km(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return rs(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return rs(e.children,(d,f)=>{c[f]=this.createSegmentGroup(t,d,i,r)}),new vn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,QM);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class pte{}class _te{constructor(t,e,i,r,s,c,d,f){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=f}recognize(){const t=ZM(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,un).pipe((0,w.U)(e=>{if(null===e)return null;const i=new zM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},un,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Xu(i,e),s=new vz(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=_z(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,ln.D)(Object.keys(i.children)).pipe(Fu(r=>{const s=i.children[r],c=xz(e,r);return this.processSegmentGroup(t,c,s,r)}),Jp((r,s)=>r&&s?(r.push(...s),r):null),function BJ(n,t=!1){return(0,hi.e)((e,i)=>{let r=0;e.subscribe((0,jn.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),xM(null),W3(),(0,w.U)(r=>{if(null===r)return null;const s=Nz(r);return function vte(n){n.sort((t,e)=>t.value.outlet===un?-1:e.value.outlet===un?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,ln.D)(e).pipe(Fu(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),Zu(c=>!!c),qa(c=>{if(zN(c))return Rz(i,r,s)?ct([]):ct(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!kz(e,i,r,s))return ct(null);let c;if("**"===e.path){const d=r.length>0?K3(r).parameters:{},f=Lz(i)+r.length;c=ct({snapshot:new zM(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vz(e),Ka(e),e.component??e._loadedComponent??null,e,Fz(i),f,Hz(e),f),consumedSegments:[],remainingSegments:[]})}else c=Az(i,e,r,t).pipe((0,w.U)(({matched:d,consumedSegments:f,remainingSegments:_,parameters:b})=>{if(!d)return null;const E=Lz(i)+f.length;return{snapshot:new zM(f,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vz(e),Ka(e),e.component??e._loadedComponent??null,e,Fz(i),E,Hz(e),E),consumedSegments:f,remainingSegments:_}}));return c.pipe(Yn(d=>{if(null===d)return ct(null);const{snapshot:f,consumedSegments:_,remainingSegments:b}=d;t=e._injector??t;const E=e._loadedInjector??t,T=function yte(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:P,slicedSegments:F}=ZM(i,_,b,T.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===F.length&&P.hasChildren())return this.processChildren(E,T,P).pipe((0,w.U)(te=>null===te?null:[new Xu(f,te)]));if(0===T.length&&0===F.length)return ct([new Xu(f,[])]);const z=Ka(e)===s;return this.processSegment(E,T,P,F,z?un:s).pipe((0,w.U)(te=>null===te?null:[new Xu(f,te)]))}))}}function bte(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Nz(n){const t=[],e=new Set;for(const i of n){if(!bte(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=Nz(i.children);t.push(new Xu(i.value,r))}return t.filter(i=>!e.has(i))}function Fz(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Lz(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function Vz(n){return n.data||{}}function Hz(n){return n.resolve||{}}const WN=Symbol("RouteTitle");function Dte(n,t){return(0,Hi.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ct(e);let s=0;return(0,ln.D)(r).pipe(Fu(c=>function Ete(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Uz(r)&&(s[WN]=r.title),function Ste(n,t,e,i){const r=function xte(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ct({});const s={};return(0,ln.D)(r).pipe((0,Hi.z)(c=>function Mte(n,t,e,i){const r=WM(n,t,i);return Ku(r.resolve?r.resolve(t,e):r(t,e))}(n[c],t,e,i).pipe(Zu(),(0,ei.b)(d=>{s[c]=d}))),xN(1),function qE(n){return(0,w.U)(()=>n)}(s),qa(c=>zN(c)?g.E:zp(c)))}(s,n,t,i).pipe((0,w.U)(c=>(n._resolvedData=c,n.data=_z(n,e).resolve,r&&Uz(r)&&(n.data[WN]=r.title),null)))}(c.route,i,n,t)),(0,ei.b)(()=>s++),xN(1),(0,Hi.z)(c=>s===r.length?ct(e):g.E))})}function Uz(n){return"string"==typeof n.title||null===n.title}function YN(n){return Yn(t=>{const e=n(t);return e?(0,ln.D)(e).pipe((0,w.U)(()=>t)):ct(t)})}let jz=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===un);return i}getResolvedTitleForRoute(e){return e.data[WN]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Gz)},providedIn:"root"}),n})(),Gz=(()=>{class n extends jz{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(gd))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ite{}class Ate extends class Tte{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ZN=new l.OlP("",{providedIn:"root",factory:()=>({})}),KN=new l.OlP("ROUTES");let QN=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ct(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Ku(e.loadComponent()).pipe((0,ei.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Jb(()=>{this.componentLoaders.delete(e)})),r=new q3(i,()=>new rt.x).pipe(SN());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,w.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let f,_,b=!1;Array.isArray(d)?_=d:(f=d.create(e).injector,_=Z3(f.get(KN,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(GN),injector:f}}),Jb(()=>{this.childrenLoaders.delete(i)})),c=new q3(s,()=>new rt.x).pipe(SN());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return Ku(e()).pipe((0,Hi.z)(i=>i instanceof l.YKP||Array.isArray(i)?ct(i):(0,ln.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Rte{}class Ote{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Pte(n){throw n}function Nte(n,t,e){return t.parse("/")}const Fte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function $z(){const n=(0,l.f3M)(nz),t=(0,l.f3M)(Tw),e=(0,l.f3M)(Ne),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)(KN,{optional:!0})??[],c=(0,l.f3M)(ZN,{optional:!0})??{},d=(0,l.f3M)(Gz),f=(0,l.f3M)(jz,{optional:!0}),_=(0,l.f3M)(Rte,{optional:!0}),b=(0,l.f3M)(Ite,{optional:!0}),E=new tr(null,n,t,e,i,r,Z3(s));return _&&(E.urlHandlingStrategy=_),b&&(E.routeReuseStrategy=b),E.titleStrategy=f??d,function Bte(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),E}let tr=(()=>{class n{constructor(e,i,r,s,c,d,f){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rt.x,this.errorHandler=Pte,this.malformedUriErrorHandler=Nte,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new Ote,this.routeReuseStrategy=new Ate,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(QN),this.configLoader.onLoadEndListener=T=>this.triggerEvent(new yee(T)),this.configLoader.onLoadStartListener=T=>this.triggerEvent(new vee(T)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const E=c.get(l.R0b);this.isNgZoneEnabled=E instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function jJ(){return new km(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gz(this.currentUrlTree,this.rootComponentType),this.transitions=new Oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(ti(r=>0!==r.id),(0,w.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Yn(r=>{let s=!1,c=!1;return ct(r).pipe((0,ei.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Yn(d=>{const f=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return qz(d.source)&&(this.browserUrlTree=d.extractedUrl),ct(d).pipe(Yn(E=>{const T=this.transitions.getValue();return i.next(new PN(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),T!==this.transitions.getValue()?g.E:Promise.resolve(E)}),function fte(n,t,e,i){return Yn(r=>function dte(n,t,e,i,r){return new hte(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,w.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ei.b)(E=>{this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},r.urlAfterRedirects=E.urlAfterRedirects}),function Cte(n,t,e,i,r,s){return(0,Hi.z)(c=>function gte(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new _te(n,t,e,i,r,c,d,s).recognize().pipe(Yn(f=>null===f?function mte(n){return new pi.y(t=>t.error(n))}(new pte):ct(f)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,w.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ei.b)(E=>{if(r.targetSnapshot=E.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!E.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);this.setBrowserUrl(P,E)}this.browserUrlTree=E.urlAfterRedirects}const T=new fee(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);i.next(T)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:T,extractedUrl:P,source:F,restoredState:z,extras:te}=d,Ve=new PN(T,this.serializeUrl(P),F,z);i.next(Ve);const Ze=gz(P,this.rootComponentType).snapshot;return ct(r={...d,targetSnapshot:Ze,urlAfterRedirects:P,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),g.E}),(0,ei.b)(d=>{const f=new pee(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,w.U)(d=>r={...d,guards:Bee(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function Zee(n,t){return(0,Hi.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ct({...e,guardsResult:!0}):function Kee(n,t,e,i){return(0,ln.D)(n).pipe((0,Hi.z)(r=>function nte(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(d=>{const f=WM(d,t,r);return Ku(function qee(n){return n&&Rw(n.canDeactivate)}(f)?f.canDeactivate(n,t,e,i):f(n,t,e,i)).pipe(Zu())})).pipe(pv()):ct(!0)}(r.component,r.route,e,t,i)),Zu(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Hi.z)(d=>d&&function jee(n){return"boolean"==typeof n}(d)?function Qee(n,t,e,i){return(0,ln.D)(t).pipe(Fu(r=>Ff(function Jee(n,t){return null!==n&&t&&t(new bee(n)),ct(!0)}(r.route.parent,i),function Xee(n,t){return null!==n&&t&&t(new Cee(n)),ct(!0)}(r.route,i),function tte(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function Vee(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>fp(()=>ct(c.guards.map(f=>{const _=WM(f,c.node,e);return Ku(function $ee(n){return n&&Rw(n.canActivateChild)}(_)?_.canActivateChild(i,n):_(i,n)).pipe(Zu())})).pipe(pv())));return ct(s).pipe(pv())}(n,r.path,e),function ete(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>fp(()=>{const c=WM(s,t,e);return Ku(function zee(n){return n&&Rw(n.canActivate)}(c)?c.canActivate(t,n):c(t,n)).pipe(Zu())}));return ct(r).pipe(pv())}(n,r.route,e))),Zu(r=>!0!==r,!0))}(i,s,n,t):ct(d)),(0,w.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,ei.b)(d=>{if(r.guardsResult=d.guardsResult,Om(d.guardsResult))throw bz(0,d.guardsResult);const f=new mee(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),ti(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),YN(d=>{if(d.guards.canActivateChecks.length)return ct(d).pipe((0,ei.b)(f=>{const _=new gee(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),Yn(f=>{let _=!1;return ct(f).pipe(Dte(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ei.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,ei.b)(f=>{const _=new _ee(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}))}),YN(d=>{const f=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,ei.b)(E=>{_.component=E}),(0,w.U)(()=>{})));for(const E of _.children)b.push(...f(E));return b};return Xv(f(d.targetSnapshot.root)).pipe(xM(),v(1))}),YN(()=>this.afterPreactivation()),(0,w.U)(d=>{const f=function Mee(n,t,e){const i=Iw(n,t._root,e?e._root:void 0);return new mz(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:f}}),(0,ei.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,w.U)(i=>(new Lee(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,ei.b)({next(){s=!0},complete(){s=!0}}),Jb(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),qa(d=>{if(c=!0,Dz(d)){Cz(d)||(this.navigated=!0,this.restoreHistory(r,!0));const f=new GM(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(f),Cz(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qz(r.source)};this.scheduleNavigation(_,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const f=new hz(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(f);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return g.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(GN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:f}=i,_=r||this.routerState.root,b=f?this.currentUrlTree.fragment:c;let E=null;switch(d){case"merge":E={...this.currentUrlTree.queryParams,...s};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=s||null}return null!==E&&(E=this.removeEmptyProps(E)),aee(_,this.currentUrlTree,e,E,b??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Om(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function Vte(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...Fte}:!1===i?{...Lte}:i,Om(e))return X3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return X3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Pm(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,f,_;c?(d=c.resolve,f=c.reject,_=c.promise):_=new Promise((T,P)=>{d=T,f=P});const b=++this.navigationId;let E;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),E=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):E=0,this.setTransition({id:b,targetPageId:E,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:f,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(T=>Promise.reject(T))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new GM(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return $z()},providedIn:"root"}),n})();function qz(n){return"imperative"!==n}let Nm=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new rt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:(0,l.D6c)(this.skipLocationChange),replaceUrl:(0,l.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,l.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(tr),l.Y36(fv),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})(),tI=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new rt.x,this.subscription=e.events.subscribe(s=>{s instanceof Pm&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){if(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:(0,l.D6c)(this.skipLocationChange),replaceUrl:(0,l.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,l.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(tr),l.Y36(fv),l.Y36(De))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&l.uIk("target",i.target)("href",i.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();class Wz{}let Yz=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ti(e=>e instanceof Pm),Fu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,ln.D)(r).pipe((0,Nf.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ct(null);const s=r.pipe((0,Hi.z)(c=>null===c?ct(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,ln.D)([s,c]).pipe((0,Nf.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(tr),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(Wz),l.LFG(QN))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Zz=new l.OlP("");let jte=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof PN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Pm&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fz&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new fz(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Kz=new l.OlP("ROUTER_FORROOT_GUARD"),Qz=new l.OlP(""),Gte=[Ne,{provide:nz,useClass:IN},{provide:tr,useFactory:$z},Tw,{provide:fv,useFactory:function zte(n){return n.routerState.root},deps:[tr]},QN];function $te(){return new l.PXZ("Router",tr)}let Xz=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[Gte,[],Jz(e),{provide:Kz,useFactory:Zte,deps:[[tr,new l.FiY,new l.tp0]]},{provide:ZN,useValue:i||{}},i?.useHash?{provide:De,useClass:lt}:{provide:De,useClass:at},{provide:Zz,useFactory:()=>{const n=(0,l.f3M)(tr),t=(0,l.f3M)(cl),e=(0,l.f3M)(ZN);return e.scrollOffset&&t.setOffset(e.scrollOffset),new jte(n,t,e)}},i?.preloadingStrategy?nne(i.preloadingStrategy):[],{provide:l.PXZ,multi:!0,useFactory:$te},i?.initialNavigation?Qte(i):[],[{provide:e$,useFactory:Kte},{provide:l.tb,multi:!0,useExisting:e$}]]}}static forChild(e){return{ngModule:n,providers:[Jz(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Kz,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Zte(n){return"guarded"}function Jz(n){return[{provide:KN,multi:!0,useValue:n}]}function Kte(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(tr),r=n.get(t$);1===n.get(XN)&&i.initialNavigation(),n.get(Qz,null,l.XFs.Optional)?.setUpPreloading(),n.get(Zz,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const e$=new l.OlP("");function Qte(n){return["disabled"===n.initialNavigation?[{provide:l.ip1,multi:!0,useFactory:()=>{const n=(0,l.f3M)(tr);return()=>{n.setUpLocationChangeListener()}}},{provide:XN,useValue:2}]:[],"enabledBlocking"===n.initialNavigation?[{provide:XN,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:n=>{const t=n.get(W,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=n.get(tr),c=n.get(t$);(function i(r){n.get(tr).events.pipe(ti(c=>c instanceof Pm||c instanceof GM||c instanceof hz),(0,w.U)(c=>c instanceof Pm||c instanceof GM&&(0===c.code||1===c.code)&&null),ti(c=>null!==c),v(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||c.closed?ct(void 0):c),s.initialNavigation()}))}}]:[]]}const t$=new l.OlP("",{factory:()=>new rt.x}),XN=new l.OlP("",{providedIn:"root",factory:()=>1});function nne(n){return[Yz,{provide:Qz,useExisting:Yz},{provide:Wz,useExisting:n}]}let Vh=(()=>{class n{constructor(e,i,r){if(this.afs=e,this.afAuth=i,this.router=r,!this.userData)try{this.userData=JSON.parse(localStorage.getItem("user"))}catch{}this.afAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}authState(){return this.afAuth.authState}signIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.setUserData(r.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["dashboard"])})}).catch(r=>{window.alert(r.message)})}signUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(r=>{this.sendVerificationMail(),this.setUserData(r.user)}).catch(r=>{window.alert(r.message)})}sendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}forgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}googleAuth(){return this.authLogin(new nZ.Q).then(e=>{this.router.navigate(["dashboard"])})}authLogin(e){return this.afAuth.signInWithPopup(e).then(i=>{this.setUserData(i.user),this.router.navigate(["dashboard"])}).catch(i=>{window.alert(i)})}setUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}writeMessage(e="",i=""){return this.afs.doc(`notes/${dZ()}`).set({displayName:e.displayName||"",message:i},{merge:!0})}getAllMessages(){return this.afs.collection("notes").get()}signOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/"])})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($3),l.LFG(Cw),l.LFG(tr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ine(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1," This field is required "),l.qZA())}function rne(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,' Email has format like "foo@bar.com" '),l.qZA())}function sne(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1," This field is required "),l.qZA())}let one=(()=>{class n{constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.formDataEmitter=new l.vpe,this.loginForm=this.fb.group({email:[null,[Yo.required,Yo.email]],password:[null,[Yo.required]],remember:[!1,[]]})}set formData(e){let i=e.email||"",r=e.rememeber||!1;localStorage.getItem("saved_email")&&""===i&&(i=localStorage.getItem("saved_email"),r=!0),this.loginForm.setValue({email:i,password:e.password,remember:r})}sendFormData(e){this.authService.signIn(e.value.email,e.value.password)}loginByGoogle(e){this.authService.googleAuth()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(h_),l.Y36(tr),l.Y36(Vh))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sign-in"]],inputs:{formData:"formData"},outputs:{formDataEmitter:"formDataEmitter"},decls:34,vars:5,consts:[["color","primary"],[1,"entry-card"],[1,"form-layout"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","inputmode","text","placeholder","Email","formControlName","email"],[4,"ngIf"],["matInput","","type","password","placeholder","Type password","formControlName","password"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","basic",3,"click"],["mat-stroked-button","","routerLink","/forgot-password","color","basic"],["mat-stroked-button","","routerLink","/register-user","color","basic"]],template:function(e,i){if(1&e&&(l.TgZ(0,"mat-toolbar",0)(1,"span"),l._uU(2,"ng-firebase-auth"),l.qZA()(),l.TgZ(3,"mat-card",1)(4,"h3"),l._uU(5,"Sign in"),l.qZA(),l.TgZ(6,"span")(7,"div",2)(8,"form",3),l.NdJ("ngSubmit",function(){return i.sendFormData(i.loginForm)}),l.TgZ(9,"mat-form-field",4)(10,"mat-label"),l._uU(11,"Email"),l.qZA(),l._UZ(12,"input",5),l.TgZ(13,"mat-error"),l._uU(14,"Email is required"),l.qZA(),l.YNc(15,ine,2,0,"mat-error",6),l.YNc(16,rne,2,0,"mat-error",6),l.qZA(),l.TgZ(17,"mat-form-field",4)(18,"mat-label"),l._uU(19,"Password"),l.qZA(),l._UZ(20,"input",7),l.TgZ(21,"mat-error"),l._uU(22,"Password is required"),l.qZA(),l.YNc(23,sne,2,0,"mat-error",6),l.qZA(),l.TgZ(24,"div",8)(25,"button",9),l._uU(26,"Sign Up"),l.qZA()()(),l.TgZ(27,"div",8)(28,"button",10),l.NdJ("click",function(s){return i.loginByGoogle(s)}),l._uU(29,"Login by Google"),l.qZA()()(),l.TgZ(30,"button",11),l._uU(31,"Forgot password?"),l.qZA(),l.TgZ(32,"button",12),l._uU(33,"Don't have an account?"),l.qZA()()()),2&e){let r,s,c;l.xp6(8),l.Q6J("formGroup",i.loginForm),l.xp6(7),l.Q6J("ngIf",null==(r=i.loginForm.get("email"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==(s=i.loginForm.get("email"))||null==s.errors?null:s.errors.email),l.xp6(7),l.Q6J("ngIf",null==(c=i.loginForm.get("password"))||null==c.errors?null:c.errors.required),l.xp6(2),l.Q6J("disabled",!i.loginForm.valid)}},dependencies:[Un,Nm,Nu,Mc,Lp,Hp,Zo,I_,p0,Tu,Sc,mi,th,Nl,ku]}),n})();function ane(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1," This field is required "),l.qZA())}function lne(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,' Email has format like "foo@bar.com" '),l.qZA())}function cne(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1," This field is required "),l.qZA())}let une=(()=>{class n{constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.formDataEmitter=new l.vpe,this.loginForm=this.fb.group({email:[null,[Yo.required,Yo.email]],password:[null,[Yo.required]],remember:[!1,[]]})}set formData(e){let i=e.email||"",r=e.rememeber||!1;localStorage.getItem("saved_email")&&""===i&&(i=localStorage.getItem("saved_email"),r=!0),this.loginForm.setValue({email:i,password:e.password,remember:r})}sendFormData(e){this.authService.signUp(e.value.email,e.value.password)}loginByGoogle(e){this.authService.googleAuth()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(h_),l.Y36(tr),l.Y36(Vh))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sign-up"]],inputs:{formData:"formData"},outputs:{formDataEmitter:"formDataEmitter"},decls:32,vars:5,consts:[[1,"main-area"],[1,"login-card"],[1,"form-layout"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","inputmode","text","placeholder","Email","formControlName","email"],[4,"ngIf"],["matInput","","type","password","placeholder","Type password","formControlName","password"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","basic",3,"click"],["mat-stroked-button","","routerLink","/forgot-password","color","basic"],["mat-stroked-button","","routerLink","/register-user","color","basic"]],template:function(e,i){if(1&e&&(l.TgZ(0,"div",0)(1,"mat-card",1)(2,"h3"),l._uU(3,"Sign Up"),l.qZA(),l.TgZ(4,"span")(5,"div",2)(6,"form",3),l.NdJ("ngSubmit",function(){return i.sendFormData(i.loginForm)}),l.TgZ(7,"mat-form-field",4)(8,"mat-label"),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",5),l.TgZ(11,"mat-error"),l._uU(12,"Email is required"),l.qZA(),l.YNc(13,ane,2,0,"mat-error",6),l.YNc(14,lne,2,0,"mat-error",6),l.qZA(),l.TgZ(15,"mat-form-field",4)(16,"mat-label"),l._uU(17,"Password"),l.qZA(),l._UZ(18,"input",7),l.TgZ(19,"mat-error"),l._uU(20,"Password is required"),l.qZA(),l.YNc(21,cne,2,0,"mat-error",6),l.qZA(),l.TgZ(22,"div",8)(23,"button",9),l._uU(24,"Register"),l.qZA()(),l.TgZ(25,"div",8)(26,"button",10),l.NdJ("click",function(s){return i.loginByGoogle(s)}),l._uU(27,"Continue by Google"),l.qZA()()()(),l.TgZ(28,"button",11),l._uU(29,"Forgot password?"),l.qZA(),l.TgZ(30,"button",12),l._uU(31,"Don't have an account?"),l.qZA()()()()),2&e){let r,s,c;l.xp6(6),l.Q6J("formGroup",i.loginForm),l.xp6(7),l.Q6J("ngIf",null==(r=i.loginForm.get("email"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==(s=i.loginForm.get("email"))||null==s.errors?null:s.errors.email),l.xp6(7),l.Q6J("ngIf",null==(c=i.loginForm.get("password"))||null==c.errors?null:c.errors.required),l.xp6(2),l.Q6J("disabled",!i.loginForm.valid)}},dependencies:[Un,Nm,Nu,Mc,Lp,Hp,Zo,I_,Tu,Sc,mi,th,Nl,ku]}),n})();function dne(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1," This field is required "),l.qZA())}function hne(n,t){1&n&&(l.TgZ(0,"mat-error"),l._uU(1,' Email has format like "foo@bar.com" '),l.qZA())}let fne=(()=>{class n{constructor(e,i,r){this.fb=e,this.router=i,this.authService=r,this.formDataEmitter=new l.vpe,this.loginForm=this.fb.group({email:[null,[Yo.required,Yo.email]]})}set formData(e){this.loginForm.setValue({email:e.email||""})}sendFormData(e){this.authService.forgotPassword(e.value.email)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(h_),l.Y36(tr),l.Y36(Vh))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-forgot-password"]],inputs:{formData:"formData"},outputs:{formDataEmitter:"formDataEmitter"},decls:24,vars:4,consts:[["color","primary"],[1,"entry-card"],[1,"form-layout"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","inputmode","text","placeholder","Email","formControlName","email"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","routerLink","/sign-in","color","basic"],["mat-stroked-button","","routerLink","/register-user","color","basic"]],template:function(e,i){if(1&e&&(l.TgZ(0,"mat-toolbar",0)(1,"span"),l._uU(2,"ng-firebase-auth"),l.qZA()(),l.TgZ(3,"mat-card",1)(4,"h3"),l._uU(5,"Reset password"),l.qZA(),l.TgZ(6,"span")(7,"div",2)(8,"form",3),l.NdJ("ngSubmit",function(){return i.sendFormData(i.loginForm)}),l.TgZ(9,"mat-form-field",4)(10,"mat-label"),l._uU(11,"Email"),l.qZA(),l._UZ(12,"input",5),l.TgZ(13,"mat-error"),l._uU(14,"Email is required"),l.qZA(),l.YNc(15,dne,2,0,"mat-error",6),l.YNc(16,hne,2,0,"mat-error",6),l.qZA(),l.TgZ(17,"div",7)(18,"button",8),l._uU(19,"Reset password"),l.qZA()()()(),l.TgZ(20,"button",9),l._uU(21,"Sign in"),l.qZA(),l.TgZ(22,"button",10),l._uU(23,"Don't have an account?"),l.qZA()()()),2&e){let r,s;l.xp6(8),l.Q6J("formGroup",i.loginForm),l.xp6(7),l.Q6J("ngIf",null==(r=i.loginForm.get("email"))||null==r.errors?null:r.errors.required),l.xp6(1),l.Q6J("ngIf",null==(s=i.loginForm.get("email"))||null==s.errors?null:s.errors.email),l.xp6(2),l.Q6J("disabled",!i.loginForm.valid)}},dependencies:[Un,Nm,Nu,Mc,Lp,Hp,Zo,I_,p0,Tu,Sc,mi,th,Nl,ku]}),n})(),pne=(()=>{class n{constructor(e){this.authService=e,this.email=""}ngOnInit(){this.email=this.authService.userData.email}sendVerification(){this.authService.sendVerificationMail()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Vh))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-verify-email"]],decls:19,vars:1,consts:[["color","primary"],[1,"entry-card"],["mat-raised-button","","color","basic",3,"click"],[2,"text-align","center","font-weight","bold"],["mat-raised-button","","color","basic","routerLink","/login"]],template:function(e,i){1&e&&(l.TgZ(0,"mat-toolbar",0)(1,"span"),l._uU(2,"ng-firebase-auth"),l.qZA()(),l.TgZ(3,"mat-card",1)(4,"h3"),l._uU(5,"Verification email"),l.qZA(),l.TgZ(6,"p"),l._uU(7,"We have sent a confirmation email to "),l.TgZ(8,"strong"),l._uU(9),l.qZA(),l._uU(10,"."),l.qZA(),l.TgZ(11,"p"),l._uU(12,"Please check your email and click on the link to verfiy your email address."),l.qZA(),l.TgZ(13,"button",2),l.NdJ("click",function(){return i.sendVerification()}),l._uU(14,"Resend verification email"),l.qZA(),l.TgZ(15,"p",3),l._uU(16,"or"),l.qZA(),l.TgZ(17,"button",4),l._uU(18,"Login"),l.qZA()()),2&e&&(l.xp6(9),l.Oqu(i.email))},dependencies:[Nm,Nu,Mc,p0]}),n})(),mne=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.isLoggedIn||this.router.navigate(["/"]),!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Vh),l.LFG(tr))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var n$=V(655);const gne=l.GuJ,vne=Symbol("__destroy"),i$=Symbol("__decoratorApplied");function r$(n){return"string"==typeof n?Symbol(`__destroy__${n}`):vne}function s$(n,t){n[t]||(n[t]=new rt.x)}function o$(n,t){n[t]&&(n[t].next(),n[t].complete(),n[t]=null)}function a$(n){n instanceof Mn.w0&&n.unsubscribe()}function l$(n,t){return function(){if(n&&n.call(this),o$(this,r$()),t.arrayName&&function bne(n){Array.isArray(n)&&n.forEach(a$)}(this[t.arrayName]),t.checkProperties)for(const e in this)t.blackList?.includes(e)||a$(this[e])}}function c$(n={}){return t=>{!function _ne(n){return!!n[gne]}(t)?function wne(n,t){n.prototype.ngOnDestroy=l$(n.prototype.ngOnDestroy,t)}(t,n):function Cne(n,t){const e=n.\u0275pipe;e.onDestroy=l$(e.onDestroy,t)}(t,n),function yne(n){n.prototype[i$]=!0}(t)}}function JN(n,t){return e=>{const i=r$(t);return"string"==typeof t?function Sne(n,t,e){const i=n[t];s$(n,e),n[t]=function(){i.apply(this,arguments),o$(this,e),n[t]=i}}(n,t,i):s$(n,i),e.pipe(Xe(n[i]))}}function xne(n,t){if(1&n&&(l.TgZ(0,"mat-card",1)(1,"b"),l._uU(2),l.qZA(),l._UZ(3,"br"),l._uU(4),l.qZA()),2&n){const e=t.$implicit;l.xp6(2),l.hij("",e.displayName||"Anonymous"," :"),l.xp6(2),l.hij("\n",e.message,"\n")}}Symbol("CheckerHasBeenSet");let Fm=class{constructor(t,e){this.authService=t,this.router=e,this.messages=[]}ngOnInit(){this.authService.isLoggedIn&&this.router.navigate(["/dashboard"]),this.authService.authState().pipe(JN(this)).subscribe(t=>{t&&this.router.navigate(["/dashboard"])}),this.authService.getAllMessages().pipe(JN(this)).subscribe(t=>{t.forEach(e=>{this.messages.push(e.data())})})}};function Mne(n,t){if(1&n&&l._UZ(0,"img",12),2&n){const e=l.oxw();l.s9C("src",e.userData.photoURL,l.LSH)}}function Ine(n,t){if(1&n&&(l.TgZ(0,"mat-card-title"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.userData.email)}}function Tne(n,t){if(1&n&&(l.TgZ(0,"mat-card-title"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.userData.displayName)}}function Ane(n,t){if(1&n&&(l.TgZ(0,"mat-card-subtitle"),l._uU(1),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Oqu(e.userData.email)}}function kne(n,t){if(1&n&&(l.TgZ(0,"mat-card",3)(1,"b"),l._uU(2),l.qZA(),l._UZ(3,"br"),l._uU(4),l.qZA()),2&n){const e=t.$implicit;l.xp6(2),l.hij("",e.displayName||"Anonymous"," :"),l.xp6(2),l.hij(" ",e.message,"\n")}}Fm.\u0275fac=function(t){return new(t||Fm)(l.Y36(Vh),l.Y36(tr))},Fm.\u0275cmp=l.Xpm({type:Fm,selectors:[["app-entry-page"]],decls:14,vars:1,consts:[["color","primary"],[1,"entry-card"],["routerLink","/login"],["routerLink","/registration"],["routerLink","forgot-password"],["class","entry-card",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(l.TgZ(0,"mat-toolbar",0)(1,"span"),l._uU(2,"ng-firebase-auth"),l.qZA()(),l.TgZ(3,"mat-card",1),l._uU(4," This is a simple demo project where you can create user by Firebase auth, confirm email and look at user data. Follow these links to "),l.TgZ(5,"a",2),l._uU(6,"log in"),l.qZA(),l._uU(7,", "),l.TgZ(8,"a",3),l._uU(9,"registeration"),l.qZA(),l._uU(10," or "),l.TgZ(11,"a",4),l._uU(12,"restoring password"),l.qZA()(),l.YNc(13,xne,5,2,"mat-card",5)),2&t&&(l.xp6(13),l.Q6J("ngForOf",e.messages))},dependencies:[Ur,tI,Mc,p0]}),Fm=(0,n$.gn)([c$()],Fm);let Lm=class{constructor(t,e){this.authService=t,this.fb=e,this.messages=[],this.form=this.fb.group({message:[null,[]]})}ngOnInit(){this.userData=this.authService.userData,this.authService.getAllMessages().pipe(JN(this)).subscribe(t=>{t.forEach(e=>{this.messages.push(e.data())})})}sendFormData(t){this.authService.writeMessage(this.userData,t.value.message),this.form.setValue({message:""})}logout(){this.authService.signOut()}};Lm.\u0275fac=function(t){return new(t||Lm)(l.Y36(Vh),l.Y36(h_))},Lm.\u0275cmp=l.Xpm({type:Lm,selectors:[["app-dashboard-page"]],decls:51,vars:19,consts:[["color","primary"],[1,"spacer"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"entry-card"],["mat-card-avatar","","class","header-image",3,"src",4,"ngIf"],[4,"ngIf"],[1,"form-layout",3,"formGroup","ngSubmit"],["appearance","fill",1,"form-field"],["cdkTextareaAutosize","","formControlName","message","matInput","",1,"textarea"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["class","entry-card",4,"ngFor","ngForOf"],["mat-card-avatar","",1,"header-image",3,"src"]],template:function(t,e){1&t&&(l.TgZ(0,"mat-toolbar",0)(1,"span"),l._uU(2,"Dashboard"),l.qZA(),l._UZ(3,"span",1),l.TgZ(4,"button",2),l.NdJ("click",function(){return e.logout()}),l.TgZ(5,"mat-icon"),l._uU(6,"logout"),l.qZA()()(),l.TgZ(7,"mat-card",3)(8,"mat-card-header"),l.YNc(9,Mne,1,1,"img",4),l.YNc(10,Ine,2,1,"mat-card-title",5),l.YNc(11,Tne,2,1,"mat-card-title",5),l.YNc(12,Ane,2,1,"mat-card-subtitle",5),l.qZA(),l.TgZ(13,"mat-card-content")(14,"p"),l._uU(15," uid: "),l.TgZ(16,"strong"),l._uU(17),l.qZA(),l._UZ(18,"br"),l._uU(19," emailVerified: "),l.TgZ(20,"strong"),l._uU(21),l.qZA(),l._UZ(22,"br"),l._uU(23," isAnonymous: "),l.TgZ(24,"strong"),l._uU(25),l.qZA(),l._UZ(26,"br"),l._uU(27," createdAt: "),l.TgZ(28,"strong"),l._uU(29),l.ALo(30,"date"),l.qZA(),l._UZ(31,"br"),l._uU(32," lastLoginAt: "),l.TgZ(33,"strong"),l._uU(34),l.ALo(35,"date"),l.qZA(),l._UZ(36,"br"),l._uU(37," provider: "),l.TgZ(38,"strong"),l._uU(39),l.qZA(),l._UZ(40,"br"),l.qZA()()(),l.TgZ(41,"mat-card",3)(42,"form",6),l.NdJ("ngSubmit",function(){return e.sendFormData(e.form)}),l.TgZ(43,"mat-form-field",7)(44,"mat-label"),l._uU(45,"Message"),l.qZA(),l._UZ(46,"textarea",8),l.qZA(),l.TgZ(47,"div",9)(48,"button",10),l._uU(49,"Send"),l.qZA()()()(),l.YNc(50,kne,5,2,"mat-card",11)),2&t&&(l.xp6(9),l.Q6J("ngIf",e.userData.photoUrl),l.xp6(1),l.Q6J("ngIf",!e.userData.displayName),l.xp6(1),l.Q6J("ngIf",e.userData.displayName),l.xp6(1),l.Q6J("ngIf",e.userData.displayName),l.xp6(5),l.Oqu(e.userData.uid),l.xp6(4),l.Oqu(e.userData.emailVerified),l.xp6(4),l.Oqu(e.userData.isAnonymous),l.xp6(4),l.Oqu(l.xi3(30,13,e.userData.createdAt,"HH:mm - dd.MM.yy")),l.xp6(5),l.Oqu(l.xi3(35,16,e.userData.lastLoginAt,"HH:mm - dd.MM.yy")),l.xp6(5),l.Oqu(e.userData.providerData[0].providerId),l.xp6(3),l.Q6J("formGroup",e.form),l.xp6(6),l.Q6J("disabled",!e.form.valid),l.xp6(2),l.Q6J("ngForOf",e.messages))},dependencies:[Ur,Un,Nu,Mc,dR,aR,Kr,dh,uR,M_,qR,Hp,Zo,I_,p0,Tu,Sc,mi,th,Nl,ku,ua]}),Lm=(0,n$.gn)([c$()],Lm);const Rne=[{path:"",component:Fm},{path:"dashboard",component:Lm,canActivate:[mne]},{path:"login",component:one},{path:"registration",component:une},{path:"forgot-password",component:fne},{path:"verify-email",component:pne},{path:"**",redirectTo:"/",pathMatch:"full"}];let One=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Xz.forRoot(Rne),Xz]}),n})(),Pne=(()=>{class n{constructor(){this.title="ng-firebase-auth"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[UN]}),n})();function f$(n){return new l.vHH(3e3,!1)}function mie(){return typeof window<"u"&&typeof window.document<"u"}function eF(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Hh(n){switch(n.length){case 0:return new Np;case 1:return n[0];default:return new OE(n)}}function p$(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let f=-1,_=null;if(i.forEach(b=>{const E=b.get("offset"),T=E==f,P=T&&_||new Map;b.forEach((F,z)=>{let te=z,Ve=F;if("offset"!==z)switch(te=t.normalizePropertyName(te,c),Ve){case"!":Ve=r.get(z);break;case Fl:Ve=s.get(z);break;default:Ve=t.normalizeStyleValue(z,te,Ve,c)}P.set(te,Ve)}),T||d.push(P),_=P,f=E}),c.length)throw function iie(n){return new l.vHH(3502,!1)}();return d}function tF(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&nF(e,"start",n)));break;case"done":n.onDone(()=>i(e&&nF(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&nF(e,"destroy",n)))}}function nF(n,t,e){const s=iF(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function iF(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function ea(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function m$(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let rF=(n,t)=>!1,g$=(n,t,e)=>[],_$=null;function sF(n){const t=n.parentNode||n.host;return t===_$?null:t}(eF()||typeof Element<"u")&&(mie()?(_$=(()=>document.documentElement)(),rF=(n,t)=>{for(;t;){if(t===n)return!0;t=sF(t)}return!1}):rF=(n,t)=>n.contains(t),g$=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Bm=null,v$=!1;const y$=rF,b$=g$;let w$=(()=>{class n{validateStyleProperty(e){return function _ie(n){Bm||(Bm=function vie(){return typeof document<"u"?document.body:null}()||{},v$=!!Bm.style&&"WebkitAppearance"in Bm.style);let t=!0;return Bm.style&&!function gie(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Bm.style,!t&&v$&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bm.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return y$(e,i)}getParentElement(e){return sF(e)}query(e,i,r){return b$(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],f){return new Np(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),oF=(()=>{class n{}return n.NOOP=new w$,n})();const aF="ng-enter",nI="ng-leave",iI="ng-trigger",rI=".ng-trigger",D$="ng-animating",lF=".ng-animating";function Uh(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:cF(parseFloat(t[1]),t[2])}function cF(n,t){return"s"===t?1e3*n:n}function sI(n,t,e){return n.hasOwnProperty("duration")?n:function wie(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(f$()),{duration:0,delay:0,easing:""};r=cF(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=cF(parseFloat(f),d[4]));const _=d[5];_&&(c=_)}else r=n;if(!e){let d=!1,f=t.length;r<0&&(t.push(function Nne(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function Fne(){return new l.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,f$())}return{duration:r,delay:s,easing:c}}(n,t,e)}function Pw(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function E$(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function jh(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function x$(n,t,e){return e?t+":"+e+";":""}function M$(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=x$(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=x$(0,Sie(e),n.style[e]));n.setAttribute("style",t)}function Nc(n,t,e){n.style&&(t.forEach((i,r)=>{const s=dF(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),eF()&&M$(n))}function Vm(n,t){n.style&&(t.forEach((e,i)=>{const r=dF(i);n.style[r]=""}),eF()&&M$(n))}function Nw(n){return Array.isArray(n)?1==n.length?n[0]:Bb(n):n}const uF=new RegExp("{{\\s*(.+?)\\s*}}","g");function I$(n){let t=[];if("string"==typeof n){let e;for(;e=uF.exec(n);)t.push(e[1]);uF.lastIndex=0}return t}function oI(n,t,e){const i=n.toString(),r=i.replace(uF,(s,c)=>{let d=t[c];return null==d&&(e.push(function Bne(n){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function aI(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Eie=/-+([a-z0-9])/g;function dF(n){return n.replace(Eie,(...t)=>t[1].toUpperCase())}function Sie(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ta(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Vne(n){return new l.vHH(3004,!1)}()}}function T$(n,t){return window.getComputedStyle(n)[t]}function kie(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Rie(n,t,e){if(":"==n[0]){const f=function Oie(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function Jne(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Xne(n){return new l.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(A$(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(A$(c,r))}(i,e,t)):e.push(n),e}const dI=new Set(["true","1"]),hI=new Set(["false","0"]);function A$(n,t){const e=dI.has(n)||hI.has(n),i=dI.has(t)||hI.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?dI.has(n):hI.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?dI.has(t):hI.has(t)),c&&d}}const Pie=new RegExp("s*:selfs*,?","g");function hF(n,t,e,i){return new Nie(n).build(t,e,i)}class Nie{constructor(t){this._driver=t}build(t,e,i){const r=new Bie(e);return this._resetContextStyleTimingState(r),ta(this,Nw(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function Une(){return new l.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,_=f.name;_.toString().split(/\s*,\s*/).forEach(b=>{f.name=b,s.push(this.visitState(f,e))}),f.name=_}else if(1==d.type){const f=this.visitTransition(d,e);i+=f.queryCount,r+=f.depCount,c.push(f)}else e.errors.push(function jne(){return new l.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{I$(f).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(aI(s.values()),e.errors.push(function Gne(n,t){return new l.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=ta(this,Nw(t.animation),e);return{type:1,matchers:kie(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Hm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>ta(this,i,e)),options:Hm(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=ta(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Hm(t.options)}}visitAnimate(t,e){const i=function Hie(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return fF(sI(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=fF(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=sI(e,t);return fF(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:ft({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const _={};i.easing&&(_.easing=i.easing),c=ft(_)}e.currentTime+=i.duration+i.delay;const f=this.visitStyle(c,e);f.isEmptyStep=d,r=f}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===Fl?i.push(d):e.errors.push(new l.vHH(3002,!1)):i.push(E$(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{const _=e.collectedStyles.get(e.currentQuerySelector),b=_.get(f);let E=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(e.errors.push(function $ne(n,t,e,i,r){return new l.vHH(3010,!1)}()),E=!1),s=b.startTime),E&&_.set(f,{startTime:s,endTime:r}),e.options&&function Die(n,t,e){const i=t.params||{},r=I$(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Lne(n){return new l.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function qne(){return new l.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,f=!1,_=0;const b=t.steps.map(Ve=>{const Ze=this._makeStyleAst(Ve,e);let it=null!=Ze.offset?Ze.offset:function Vie(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Ze.styles),Je=0;return null!=it&&(s++,Je=Ze.offset=it),f=f||Je<0||Je>1,d=d||Je<_,_=Je,c.push(Je),Ze});f&&e.errors.push(function Wne(){return new l.vHH(3012,!1)}()),d&&e.errors.push(function Yne(){return new l.vHH(3200,!1)}());const E=t.steps.length;let T=0;s>0&&s<E?e.errors.push(function Zne(){return new l.vHH(3202,!1)}()):0==s&&(T=1/(E-1));const P=E-1,F=e.currentTime,z=e.currentAnimateTimings,te=z.duration;return b.forEach((Ve,Ze)=>{const it=T>0?Ze==P?1:T*Ze:c[Ze],Je=it*te;e.currentTime=F+z.delay+Je,z.duration=Je,this._validateStyleAst(Ve,e),Ve.offset=it,i.styles.push(Ve)}),i}visitReference(t,e){return{type:8,animation:ta(this,Nw(t.animation),e),options:Hm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Hm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Hm(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function Fie(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Pie,"")),n=n.replace(/@\*/g,rI).replace(/@\w+/g,e=>rI+"-"+e.slice(1)).replace(/:animating/g,lF),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,ea(e.collectedStyles,e.currentQuerySelector,new Map);const d=ta(this,Nw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Hm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Kne(){return new l.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:sI(t.timings,e.errors,!0);return{type:12,animation:ta(this,Nw(t.animation),e),timings:i,options:null}}}class Bie{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Hm(n){return n?(n=Pw(n)).params&&(n.params=function Lie(n){return n?Pw(n):null}(n.params)):n={},n}function fF(n,t,e){return{duration:n,delay:t,easing:e}}function pF(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class fI{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Gie=new RegExp(":enter","g"),$ie=new RegExp(":leave","g");function mF(n,t,e,i,r,s=new Map,c=new Map,d,f,_=[]){return(new qie).buildKeyframes(n,t,e,i,r,s,c,d,f,_)}class qie{buildKeyframes(t,e,i,r,s,c,d,f,_,b=[]){_=_||new fI;const E=new gF(t,e,_,r,s,b,[]);E.options=f;const T=f.delay?Uh(f.delay):0;E.currentTimeline.delayNextStep(T),E.currentTimeline.setStyles([c],null,E.errors,f),ta(this,i,E);const P=E.timelines.filter(F=>F.containsAnimation());if(P.length&&d.size){let F;for(let z=P.length-1;z>=0;z--){const te=P[z];if(te.element===e){F=te;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,E.errors,f)}return P.length?P.map(F=>F.buildKeyframes()):[pF(e,[],[],[],0,T,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Uh(i.duration):null,d=null!=i.delay?Uh(i.delay):null;return 0!==c&&t.forEach(f=>{const _=e.appendInstructionToTimeline(f,c,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),ta(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=pI);const c=Uh(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>ta(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Uh(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),ta(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return sI(e.params?oI(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Uh(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=pI);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((_,b)=>{e.currentQueryIndex=b;const E=e.createSubContext(t.options,_);s&&E.delayNextStep(s),_===e.element&&(f=E.currentTimeline),ta(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let f=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const b=e.currentTimeline;f&&b.delayNextStep(f);const E=b.currentTime;ta(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-E+(r.startTime-i.currentTimeline.startTime)}}const pI={};class gF{constructor(t,e,i,r,s,c,d,f){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new mI(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Uh(i.duration)),null!=i.delay&&(r.delay=Uh(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=oI(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new gF(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=pI,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new Wie(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(Gie,"."+this._enterClassName)).replace($ie,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&c.push(function Qne(n){return new l.vHH(3014,!1)}()),d}}class mI{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new mI(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Fl),this._currentKeyframe.set(e,Fl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function Yie(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Fl)}else jh(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of c){const _=oI(f,s,i);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Fl),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const _=jh(d,new Map,this._backFill);_.forEach((b,E)=>{"!"===b?t.add(E):b===Fl&&e.add(E)}),i||_.set("offset",f/this.duration),r.push(_)});const s=t.size?aI(t.values()):[],c=e.size?aI(e.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return pF(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class Wie extends mI{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,f=jh(t[0]);f.set("offset",0),s.push(f);const _=jh(t[0]);_.set("offset",O$(d)),s.push(_);const b=t.length-1;for(let E=1;E<=b;E++){let T=jh(t[E]);const P=T.get("offset");T.set("offset",O$((e+P*i)/c)),s.push(T)}i=c,e=0,r="",t=s}return pF(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function O$(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class _F{}const Zie=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Kie extends _F{normalizePropertyName(t,e){return dF(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(Zie.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Hne(n,t){return new l.vHH(3005,!1)}())}return c+s}}function P$(n,t,e,i,r,s,c,d,f,_,b,E,T){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:f,preStyleProps:_,postStyleProps:b,totalTime:E,errors:T}}const vF={};class N${constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function Qie(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,f,_,b){const E=[],T=this.ast.options&&this.ast.options.params||vF,F=this.buildStyles(i,d&&d.params||vF,E),z=f&&f.params||vF,te=this.buildStyles(r,z,E),Ve=new Set,Ze=new Map,it=new Map,Je="void"===r,St={params:Xie(z,T),delay:this.ast.options?.delay},Tt=b?[]:mF(t,e,this.ast.animation,s,c,F,te,St,_,E);let fn=0;if(Tt.forEach(sa=>{fn=Math.max(sa.duration+sa.delay,fn)}),E.length)return P$(e,this._triggerName,i,r,Je,F,te,[],[],Ze,it,fn,E);Tt.forEach(sa=>{const id=sa.element,n5=ea(Ze,id,new Set);sa.preStyleProps.forEach(Jm=>n5.add(Jm));const gC=ea(it,id,new Set);sa.postStyleProps.forEach(Jm=>gC.add(Jm)),id!==e&&Ve.add(id)});const nr=aI(Ve.values());return P$(e,this._triggerName,i,r,Je,F,te,Tt,nr,Ze,it,fn)}}function Xie(n,t){const e=Pw(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class Jie{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=Pw(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=oI(c,r,e));const f=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,f,c,e),i.set(f,c)})}),i}}class tre{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new Jie(r.style,r.options&&r.options.params||{},i))}),F$(this.states,"true","1"),F$(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new N$(t,r,this.states))}),this.fallbackTransition=function nre(n,t,e){return new N$(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function F$(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const ire=new fI;class rre{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=hF(this._driver,e,i,[]);if(i.length)throw function rie(n){return new l.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=p$(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=mF(this._driver,e,s,aF,nI,new Map,new Map,i,ire,r),c.forEach(b=>{const E=ea(d,b.element,new Map);b.postStyleProps.forEach(T=>E.set(T,null))})):(r.push(function sie(){return new l.vHH(3300,!1)}()),c=[]),r.length)throw function oie(n){return new l.vHH(3504,!1)}();d.forEach((b,E)=>{b.forEach((T,P)=>{b.set(P,this._driver.computeStyle(E,P,Fl))})});const _=Hh(c.map(b=>{const E=d.get(b.element);return this._buildPlayer(b,new Map,E)}));return this._playersById.set(t,_),_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function aie(n){return new l.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=iF(e,"","","");return tF(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const L$="ng-animate-queued",yF="ng-animate-disabled",cre=[],B$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ure={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qa="__ng_removed";class bF{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function pre(n){return n??null}(i?t.value:t),i){const s=Pw(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Fw="void",wF=new bF(Fw);class dre{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Xa(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function lie(n,t){return new l.vHH(3302,!1)}();if(null==i||0==i.length)throw function cie(n){return new l.vHH(3303,!1)}();if(!function mre(n){return"start"==n||"done"==n}(i))throw function uie(n,t){return new l.vHH(3400,!1)}();const s=ea(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=ea(this._engine.statesByElement,t,new Map);return d.has(e)||(Xa(t,iI),Xa(t,iI+"-"+e),d.set(e,wF)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(c);f>=0&&s.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function die(n){return new l.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new CF(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(Xa(t,iI),Xa(t,iI+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const _=new bF(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&_.absorbOptions(f.options),d.set(e,_),f||(f=wF),_.value!==Fw&&f.value===_.value){if(!function vre(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(f.params,_.params)){const z=[],te=s.matchStyles(f.value,f.params,z),Ve=s.matchStyles(_.value,_.params,z);z.length?this._engine.reportError(z):this._engine.afterFlush(()=>{Vm(t,te),Nc(t,Ve)})}return}const T=ea(this._engine.playersByElement,t,[]);T.forEach(z=>{z.namespaceId==this.id&&z.triggerName==e&&z.queued&&z.destroy()});let P=s.matchTransition(f.value,_.value,t,_.params),F=!1;if(!P){if(!r)return;P=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:f,toState:_,player:c,isFallbackTransition:F}),F||(Xa(t,L$),c.onStart(()=>{mv(t,L$)})),c.onDone(()=>{let z=this.players.indexOf(c);z>=0&&this.players.splice(z,1);const te=this._engine.playersByElement.get(t);if(te){let Ve=te.indexOf(c);Ve>=0&&te.splice(Ve,1)}}),this.players.push(c),T.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,rI,!0);i.forEach(r=>{if(r[Qa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((f,_)=>{if(c.set(_,f.value),this._triggers.has(_)){const b=this.trigger(t,_,Fw,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Hh(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const f=this._triggers.get(c).fallbackTransition,_=i.get(c)||wF,b=new bF(Fw),E=new CF(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:f,fromState:_,toState:b,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Qa];(!s||s===B$)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Xa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const f=iF(s,i.triggerName,i.fromState.value,i.toState.value);f._data=t,tF(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class hre{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new dre(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const f=r.get(d);if(f){const _=i.indexOf(f);i.splice(_+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(gI(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!gI(e))return;const s=e[Qa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Xa(t,yF)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),mv(t,yF))}removeNode(t,e,i,r){if(gI(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Qa]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return gI(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,rI,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,lF,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Hh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Qa];if(e&&e.setForRemoval){if(t[Qa]=B$,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(yF)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Xa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Hh(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function hie(n){return new l.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new fI,r=[],s=new Map,c=[],d=new Map,f=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(wt=>{b.add(wt);const Rt=this.driver.query(wt,".ng-animate-queued",!0);for(let Vt=0;Vt<Rt.length;Vt++)b.add(Rt[Vt])});const E=this.bodyNode,T=Array.from(this.statesByElement.keys()),P=U$(T,this.collectedEnterElements),F=new Map;let z=0;P.forEach((wt,Rt)=>{const Vt=aF+z++;F.set(Rt,Vt),wt.forEach(On=>Xa(On,Vt))});const te=[],Ve=new Set,Ze=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Rt=this.collectedLeaveElements[wt],Vt=Rt[Qa];Vt&&Vt.setForRemoval&&(te.push(Rt),Ve.add(Rt),Vt.hasAnimation?this.driver.query(Rt,".ng-star-inserted",!0).forEach(On=>Ve.add(On)):Ze.add(Rt))}const it=new Map,Je=U$(T,Array.from(Ve));Je.forEach((wt,Rt)=>{const Vt=nI+z++;it.set(Rt,Vt),wt.forEach(On=>Xa(On,Vt))}),t.push(()=>{P.forEach((wt,Rt)=>{const Vt=F.get(Rt);wt.forEach(On=>mv(On,Vt))}),Je.forEach((wt,Rt)=>{const Vt=it.get(Rt);wt.forEach(On=>mv(On,Vt))}),te.forEach(wt=>{this.processLeaveNode(wt)})});const St=[],Tt=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(e).forEach(Vt=>{const On=Vt.player,Hr=Vt.element;if(St.push(On),this.collectedEnterElements.length){const Ts=Hr[Qa];if(Ts&&Ts.setForMove){if(Ts.previousTriggersValues&&Ts.previousTriggersValues.has(Vt.triggerName)){const eg=Ts.previousTriggersValues.get(Vt.triggerName),il=this.statesByElement.get(Vt.element);if(il&&il.has(Vt.triggerName)){const lT=il.get(Vt.triggerName);lT.value=eg,il.set(Vt.triggerName,lT)}}return void On.destroy()}}const Gc=!E||!this.driver.containsElement(E,Hr),oa=it.get(Hr),ef=F.get(Hr),Li=this._buildInstruction(Vt,i,ef,oa,Gc);if(Li.errors&&Li.errors.length)return void Tt.push(Li);if(Gc)return On.onStart(()=>Vm(Hr,Li.fromStyles)),On.onDestroy(()=>Nc(Hr,Li.toStyles)),void r.push(On);if(Vt.isFallbackTransition)return On.onStart(()=>Vm(Hr,Li.fromStyles)),On.onDestroy(()=>Nc(Hr,Li.toStyles)),void r.push(On);const o5=[];Li.timelines.forEach(Ts=>{Ts.stretchStartingKeyframe=!0,this.disabledNodes.has(Ts.element)||o5.push(Ts)}),Li.timelines=o5,i.append(Hr,Li.timelines),c.push({instruction:Li,player:On,element:Hr}),Li.queriedElements.forEach(Ts=>ea(d,Ts,[]).push(On)),Li.preStyleProps.forEach((Ts,eg)=>{if(Ts.size){let il=f.get(eg);il||f.set(eg,il=new Set),Ts.forEach((lT,WL)=>il.add(WL))}}),Li.postStyleProps.forEach((Ts,eg)=>{let il=_.get(eg);il||_.set(eg,il=new Set),Ts.forEach((lT,WL)=>il.add(WL))})});if(Tt.length){const wt=[];Tt.forEach(Rt=>{wt.push(function fie(n,t){return new l.vHH(3505,!1)}())}),St.forEach(Rt=>Rt.destroy()),this.reportError(wt)}const fn=new Map,nr=new Map;c.forEach(wt=>{const Rt=wt.element;i.has(Rt)&&(nr.set(Rt,Rt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,fn))}),r.forEach(wt=>{const Rt=wt.element;this._getPreviousPlayers(Rt,!1,wt.namespaceId,wt.triggerName,null).forEach(On=>{ea(fn,Rt,[]).push(On),On.destroy()})});const sa=te.filter(wt=>G$(wt,f,_)),id=new Map;H$(id,this.driver,Ze,_,Fl).forEach(wt=>{G$(wt,f,_)&&sa.push(wt)});const gC=new Map;P.forEach((wt,Rt)=>{H$(gC,this.driver,new Set(wt),f,"!")}),sa.forEach(wt=>{const Rt=id.get(wt),Vt=gC.get(wt);id.set(wt,new Map([...Array.from(Rt?.entries()??[]),...Array.from(Vt?.entries()??[])]))});const Jm=[],r5=[],s5={};c.forEach(wt=>{const{element:Rt,player:Vt,instruction:On}=wt;if(i.has(Rt)){if(b.has(Rt))return Vt.onDestroy(()=>Nc(Rt,On.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(On.totalTime),void r.push(Vt);let Hr=s5;if(nr.size>1){let oa=Rt;const ef=[];for(;oa=oa.parentNode;){const Li=nr.get(oa);if(Li){Hr=Li;break}ef.push(oa)}ef.forEach(Li=>nr.set(Li,Hr))}const Gc=this._buildAnimation(Vt.namespaceId,On,fn,s,gC,id);if(Vt.setRealPlayer(Gc),Hr===s5)Jm.push(Vt);else{const oa=this.playersByElement.get(Hr);oa&&oa.length&&(Vt.parentPlayer=Hh(oa)),r.push(Vt)}}else Vm(Rt,On.fromStyles),Vt.onDestroy(()=>Nc(Rt,On.toStyles)),r5.push(Vt),b.has(Rt)&&r.push(Vt)}),r5.forEach(wt=>{const Rt=s.get(wt.element);if(Rt&&Rt.length){const Vt=Hh(Rt);wt.setRealPlayer(Vt)}}),r.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<te.length;wt++){const Rt=te[wt],Vt=Rt[Qa];if(mv(Rt,nI),Vt&&Vt.hasAnimation)continue;let On=[];if(d.size){let Gc=d.get(Rt);Gc&&Gc.length&&On.push(...Gc);let oa=this.driver.query(Rt,lF,!0);for(let ef=0;ef<oa.length;ef++){let Li=d.get(oa[ef]);Li&&Li.length&&On.push(...Li)}}const Hr=On.filter(Gc=>!Gc.destroyed);Hr.length?gre(this,Rt,Hr):this.processLeaveNode(Rt)}return te.length=0,Jm.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Rt=this.players.indexOf(wt);this.players.splice(Rt,1)}),wt.play()}),Jm}elementContainsData(t,e){let i=!1;const r=e[Qa];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const f=!s||s==Fw;d.forEach(_=>{_.queued||!f&&_.triggerName!=r||c.push(_)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const _=f.element,b=_!==s,E=ea(i,_,[]);this._getPreviousPlayers(_,b,c,d,e.toState).forEach(P=>{const F=P.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),P.destroy(),E.push(P)})}Vm(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,f=e.element,_=[],b=new Set,E=new Set,T=e.timelines.map(F=>{const z=F.element;b.add(z);const te=z[Qa];if(te&&te.removedBeforeQueried)return new Np(F.duration,F.delay);const Ve=z!==f,Ze=function _re(n){const t=[];return j$(n,t),t}((i.get(z)||cre).map(fn=>fn.getRealPlayer())).filter(fn=>!!fn.element&&fn.element===z),it=s.get(z),Je=c.get(z),St=p$(0,this._normalizer,0,F.keyframes,it,Je),Tt=this._buildPlayer(F,St,Ze);if(F.subTimeline&&r&&E.add(z),Ve){const fn=new CF(t,d,z);fn.setRealPlayer(Tt),_.push(fn)}return Tt});_.forEach(F=>{ea(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function fre(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,F.element,F))}),b.forEach(F=>Xa(F,D$));const P=Hh(T);return P.onDestroy(()=>{b.forEach(F=>mv(F,D$)),Nc(f,e.toStyles)}),E.forEach(F=>{ea(r,F,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Np(t.duration,t.delay)}}class CF{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Np,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>tF(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ea(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function gI(n){return n&&1===n.nodeType}function V$(n,t){const e=n.style.display;return n.style.display=t??"none",e}function H$(n,t,e,i,r){const s=[];e.forEach(f=>s.push(V$(f)));const c=[];i.forEach((f,_)=>{const b=new Map;f.forEach(E=>{const T=t.computeStyle(_,E,r);b.set(E,T),(!T||0==T.length)&&(_[Qa]=ure,c.push(_))}),n.set(_,b)});let d=0;return e.forEach(f=>V$(f,s[d++])),c}function U$(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let f=s.get(d);if(f)return f;const _=d.parentNode;return f=e.has(_)?_:r.has(_)?1:c(_),s.set(d,f),f}return t.forEach(d=>{const f=c(d);1!==f&&e.get(f).push(d)}),e}function Xa(n,t){n.classList?.add(t)}function mv(n,t){n.classList?.remove(t)}function gre(n,t,e){Hh(e).onDone(()=>n.processLeaveNode(t))}function j$(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof OE?j$(i.players,t):t.push(i)}}function G$(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class _I{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new hre(t,e,i),this._timelineEngine=new rre(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const f=[],b=hF(this._driver,s,f,[]);if(f.length)throw function nie(n,t){return new l.vHH(3404,!1)}();d=function ere(n,t,e){return new tre(n,t,e)}(r,b,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=m$(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=m$(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let bre=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Nc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nc(this._element,this._initialStyles),this._endStyles&&(Nc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vm(this._element,this._endStyles),this._endStyles=null),Nc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function DF(n){let t=null;return n.forEach((e,i)=>{(function wre(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class z${constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:T$(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Cre{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return y$(t,e)}getParentElement(t){return sF(t)}query(t,e,i){return b$(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const _=new Map,b=c.filter(P=>P instanceof z$);(function xie(n,t){return 0===n||0===t})(i,r)&&b.forEach(P=>{P.currentSnapshot.forEach((F,z)=>_.set(z,F))});let E=function Cie(n){return n.length?n[0]instanceof Map?n:n.map(t=>E$(t)):[]}(e).map(P=>jh(P));E=function Mie(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,T$(n,d)))}}return t}(t,E,_);const T=function yre(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=DF(t[0]),t.length>1&&(i=DF(t[t.length-1]))):t instanceof Map&&(e=DF(t)),e||i?new bre(n,e,i):null}(t,E);return new z$(t,E,f,T)}}let Dre=(()=>{class n extends AE{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Bb(e):e;return $$(this._renderer,null,i,"register",[r]),new Ere(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(oe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ere extends class kE{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Sre(this._id,t,e||{},this._renderer)}}class Sre{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return $$(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function $$(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const q$="@.disabled";let xre=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new W$("",s,this.engine),this._rendererCache.set(s,b)),b}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=b=>{Array.isArray(b)?b.forEach(f):this.engine.registerTrigger(c,d,e,b.name,b)};return i.data.animation.forEach(f),new Mre(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(_I),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class W${constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==q$?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Mre extends W${constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==q$?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Ire(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Tre(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let Are=(()=>{class n extends _I{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oe),l.LFG(oF),l.LFG(_F),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Y$=[{provide:AE,useClass:Dre},{provide:_F,useFactory:function kre(){return new Kie}},{provide:_I,useClass:Are},{provide:l.FYo,useFactory:function Rre(n,t,e){return new xre(n,t,e)},deps:[zr,_I,l.R0b]}],EF=[{provide:oF,useFactory:()=>new Cre},{provide:l.QbO,useValue:"BrowserAnimations"},...Y$],Z$=[{provide:oF,useClass:w$},{provide:l.QbO,useValue:"NoopAnimations"},...Y$];let Ore=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Z$:EF}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:EF,imports:[xn]}),n})();const K$="firebasestorage.googleapis.com",Q$="storageBucket";class zi extends L.ZR{constructor(t,e){super(SF(t),`Firebase Storage: ${e} (${SF(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zi.prototype)}_codeEquals(t){return SF(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function SF(n){return"storage/"+n}function xF(){return new zi("unknown","An unknown error occurred, please check the error payload for server response.")}function X$(){return new zi("canceled","User canceled the upload/download.")}function J$(){return new zi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gv(n){return new zi("invalid-argument",n)}function e6(){return new zi("app-deleted","The Firebase app was deleted.")}function t6(n){return new zi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lw(n,t){return new zi("invalid-format","String does not match format '"+n+"': "+t)}function Bw(n){throw new zi("internal-error","Internal error: "+n)}class Ms{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ms.makeFromUrl(t,e)}catch{return new Ms(t,"")}if(""===i.path)return i;throw function Gre(n){return new zi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(Je){Je.path_=decodeURIComponent(Je.path)}const E=e.replace(/[.]/g,"\\."),it=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Je){"/"===Je.path.charAt(Je.path.length-1)&&(Je.path_=Je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===K$?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Je=0;Je<it.length;Je++){const St=it[Je],Tt=St.regex.exec(t);if(Tt){let nr=Tt[St.indices.path];nr||(nr=""),i=new Ms(Tt[St.indices.bucket],nr),St.postModify(i);break}}if(null==i)throw function jre(n){return new zi("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class Wre{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function yI(n){return"string"==typeof n||n instanceof String}function n6(n){return MF()&&n instanceof Blob}function MF(){return typeof Blob<"u"}function IF(n,t,e,i){if(i<t)throw gv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw gv(`Invalid value for '${n}'. Expected ${e} or less.`)}function Ju(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function r6(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Gh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Gh||(Gh={})),Gh))();class Jre{constructor(t,e,i,r,s,c,d,f,_,b,E){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,P)=>{this.resolve_=T,this.reject_=P,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function Kre(n){return void 0!==n}(f)?s():s(f)}catch(f){c(f)}else if(null!==d){const f=xF();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(r.canceled?this.appDelete_?e6():X$():function Ure(){return new zi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new bI(!1,null,!0)):this.backoffId_=function Yre(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function f(){return 2===d}let _=!1;function b(...te){_||(_=!0,t.apply(null,te))}function E(te){r=setTimeout(()=>{r=null,n(P,f())},te)}function T(){s&&clearTimeout(s)}function P(te,...Ve){if(_)return void T();if(te)return T(),void b.call(null,te,...Ve);if(f()||c)return T(),void b.call(null,te,...Ve);let it;i<64&&(i*=2),1===d?(d=2,it=0):it=1e3*(i+Math.random()),E(it)}let F=!1;function z(te){F||(F=!0,T(),!_&&(null!==r?(te||(d=2),clearTimeout(r),E(0)):te||(d=1)))}return E(0),s=setTimeout(()=>{c=!0,z(!0)},e),z}((i,r)=>{if(r)return void i(!1,new bI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Gh.NO_ERROR,f=s.getStatus();if(!d||this.isRetryStatusCode_(f)){const b=s.getErrorCode()===Gh.ABORT;return void i(!1,new bI(!1,null,b))}const _=-1!==this.successCodes_.indexOf(f);i(!0,new bI(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function Zre(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class bI{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function ose(...n){const t=function sse(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(MF())return new Blob(n);throw new zi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TF{constructor(t,e){this.data=t,this.contentType=e||null}}function AF(n,t){switch(n){case na.RAW:return new TF(s6(t));case na.BASE64:case na.BASE64URL:return new TF(o6(n,t));case na.DATA_URL:return new TF(function use(n){const t=new a6(n);return t.base64?o6(na.BASE64,t.rest):function cse(n){let t;try{t=decodeURIComponent(n)}catch{throw Lw(na.DATA_URL,"Malformed data URL.")}return s6(t)}(t.rest)}(t),function dse(n){return new a6(n).contentType}(t))}throw xF()}function s6(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function o6(n,t){switch(n){case na.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw Lw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case na.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw Lw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function lse(n){return atob(n)}(t)}catch{throw Lw(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class a6{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Lw(na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function hse(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Fc{constructor(t,e){let i=0,r="";n6(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(n6(this.data_)){const r=function ase(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Fc(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Fc(i,!0)}}static getBlob(...t){if(MF()){const e=t.map(i=>i instanceof Fc?i.data_:i);return new Fc(ose.apply(null,e))}{const e=t.map(c=>yI(c)?AF(na.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Fc(r,!0)}}uploadData(){return this.data_}}function kF(n){let t;try{t=JSON.parse(n)}catch{return null}return function Xre(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function l6(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function mse(n,t){return t}class Qs{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||mse}}let wI=null;function Vw(){if(wI)return wI;const n=[];n.push(new Qs("bucket")),n.push(new Qs("generation")),n.push(new Qs("metageneration")),n.push(new Qs("name","fullPath",!0));const e=new Qs("name");e.xform=function t(s,c){return function gse(n){return!yI(n)||n.length<2?n:l6(n)}(c)},n.push(e);const r=new Qs("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Qs("timeCreated")),n.push(new Qs("updated")),n.push(new Qs("md5Hash",null,!0)),n.push(new Qs("cacheControl",null,!0)),n.push(new Qs("contentDisposition",null,!0)),n.push(new Qs("contentEncoding",null,!0)),n.push(new Qs("contentLanguage",null,!0)),n.push(new Qs("contentType",null,!0)),n.push(new Qs("metadata","customMetadata",!0)),wI=n,wI}function c6(n,t,e){const i=kF(t);return null===i?null:function vse(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function _se(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Ms(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function RF(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const u6="prefixes";class Lc{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bc(n){if(!n)throw xF()}function CI(n,t){return function e(i,r){const s=c6(n,r,t);return Bc(null!==s),s}}function _v(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function Vre(){return new zi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Bre(){return new zi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function Lre(n){return new zi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Hre(n){return new zi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function Hw(n){const t=_v(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function Fre(n){return new zi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function h6(n,t,e){const r=Ju(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Lc(r,"GET",CI(n,e),c);return d.errorHandler=Hw(t),d}function Ese(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=Ju(t.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,b=new Lc(d,"GET",function Cse(n,t){return function e(i,r){const s=function wse(n,t,e){const i=kF(e);return null===i?null:function bse(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[u6])for(const r of e[u6]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Ms(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Ms(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Bc(null!==s),s}}(n,t.bucket),_);return b.urlParams=s,b.errorHandler=_v(t),b}function p6(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function Ise(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class DI{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function OF(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Bc(!1)}return Bc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const Rse={STATE_CHANGED:"state_changed"},Xs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function PF(n){switch(n){case"running":case"pausing":case"canceling":return Xs.RUNNING;case"paused":return Xs.PAUSED;case"success":return Xs.SUCCESS;case"canceled":return Xs.CANCELED;default:return Xs.ERROR}}class Ose{constructor(t,e,i){if(function Qre(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function vv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class Nse extends class Pse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gh.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gh.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gh.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw Bw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function Gl(){return new Nse}class v6{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=Vw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function Tse(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=p6(t,i,r),d={name:c.fullPath},f=Ju(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=RF(c,e),F=new Lc(f,"POST",function P(z){let te;OF(z);try{te=z.getResponseHeader("X-Goog-Upload-URL")}catch{Bc(!1)}return Bc(yI(te)),te},n.maxUploadRetryTime);return F.urlParams=d,F.headers=b,F.body=E,F.errorHandler=_v(t),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Gl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function Ase(n,t,e,i){const f=new Lc(e,"POST",function s(_){const b=OF(_,["active","final"]);let E=null;try{E=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Bc(!1)}E||Bc(!1);const T=Number(E);return Bc(!isNaN(T)),new DI(T,i.size(),"final"===b)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=_v(t),f}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,Gl,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new DI(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function kse(n,t,e,i,r,s,c,d){const f=new DI(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw function $re(){return new zi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=f.total-f.current;let b=_;r>0&&(b=Math.min(b,r));const E=f.current,F={"X-Goog-Upload-Command":b===_?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},z=i.slice(E,E+b);if(null===z)throw J$();const it=new Lc(e,"POST",function te(Je,St){const Tt=OF(Je,["active","final"]),fn=f.current+b,nr=i.size();let sa;return sa="final"===Tt?CI(t,s)(Je,St):null,new DI(fn,nr,"final"===Tt,sa)},t.maxUploadRetryTime);return it.headers=F,it.body=z.uploadData(),it.progressCallback=d||null,it.errorHandler=_v(n),it}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,Gl,r,s);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=h6(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Gl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function m6(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let it="";for(let Je=0;Je<2;Je++)it+=Math.random().toString().slice(2);return it}();c["Content-Type"]="multipart/related; boundary="+f;const _=p6(t,i,r),b=RF(_,e),P=Fc.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+f+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",i,"\r\n--"+f+"--");if(null===P)throw J$();const F={name:_.fullPath},z=Ju(s,n.host,n._protocol),Ve=n.maxUploadRetryTime,Ze=new Lc(z,"POST",CI(n,e),Ve);return Ze.urlParams=F,Ze.headers=c,Ze.body=P.uploadData(),Ze.errorHandler=_v(t),Ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Gl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=X$(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=PF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new Ose(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(PF(this._state)){case Xs.SUCCESS:vv(this._resolve.bind(null,this.snapshot))();break;case Xs.CANCELED:case Xs.ERROR:vv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(PF(this._state)){case Xs.RUNNING:case Xs.PAUSED:t.next&&vv(t.next.bind(t,this.snapshot))();break;case Xs.SUCCESS:t.complete&&vv(t.complete.bind(t))();break;default:t.error&&vv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Um{constructor(t,e){this._service=t,this._location=e instanceof Ms?e:Ms.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Um(t,e)}get root(){const t=new Ms(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return l6(this._location.path)}get storage(){return this._service}get parent(){const t=function fse(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ms(this._location.bucket,t);return new Um(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw t6(t)}}function b6(n,t,e){return NF.apply(this,arguments)}function NF(){return NF=(0,Se.Z)(function*(n,t,e){const r=yield w6(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield b6(n,t,r.nextPageToken))}),NF.apply(this,arguments)}function w6(n,t){null!=t&&"number"==typeof t.maxResults&&IF("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=Ese(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Gl)}function Wse(n){n._throwIfRoot("getDownloadURL");const t=function Sse(n,t,e){const r=Ju(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Lc(r,"GET",function Dse(n,t){return function e(i,r){const s=c6(n,r,t);return Bc(null!==s),function yse(n,t,e,i){const r=kF(t);if(null===r||!yI(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(_=>{const E=n.fullPath;return Ju("/b/"+c(n.bucket)+"/o/"+c(E),e,i)+r6({alt:"media",token:_})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=Hw(t),d}(n.storage,n._location,Vw());return n.storage.makeRequestWithTokens(t,Gl).then(e=>{if(null===e)throw function qre(){return new zi("no-download-url","The given file does not have any download URLs.")}();return e})}function C6(n,t){const e=function pse(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Ms(n._location.bucket,e);return new Um(n.storage,i)}function D6(n,t){if(n instanceof FF){const e=n;if(null==e._bucket)throw function zre(){return new zi("no-default-bucket","No default bucket found. Did you set the '"+Q$+"' property when initializing the app?")}();const i=new Um(e,e._bucket);return null!=t?D6(i,t):i}return void 0!==t?C6(n,t):n}function Qse(n,t){if(t&&function Zse(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof FF)return function Kse(n,t){return new Um(n,t)}(n,t);throw gv("To use ref(service, url), the first argument must be a Storage instance.")}return D6(n,t)}function E6(n,t){const e=t?.[Q$];return null==e?null:Ms.makeFromBucketSpec(e,n)}class FF{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=K$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ms.makeFromBucketSpec(r,this._host):E6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ms.makeFromBucketSpec(this._url,t):E6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){IF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){IF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Se.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Se.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Um(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new Wre(e6());{const s=function rse(n,t,e,i,r,s){const c=r6(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return function nse(n,t){t&&(n["X-Firebase-GMPID"]=t)}(f,t),function ese(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(f,e),function tse(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(f,s),function ise(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(f,i),new Jre(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,Se.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const S6="@firebase/storage";function I6(n,t){return Qse(n=(0,L.m9)(n),t)}function loe(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new FF(e,i,r,t,Gs.SDK_VERSION)}!function coe(){(0,Gs._registerComponent)(new Hl.wA("storage",loe,"PUBLIC").setMultipleInstances(!0)),(0,Gs.registerVersion)(S6,"0.9.9",""),(0,Gs.registerVersion)(S6,"0.9.9","esm2017")}();class EI{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class T6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new EI(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new EI(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new EI(c,this,this._ref)):{next:e.next?c=>e.next(new EI(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class A6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new ed(t,this._service))}get items(){return this._delegate.items.map(t=>new ed(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ed{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function ooe(n,t){return C6(n,t)}(this._delegate,t);return new ed(e,this.storage)}get root(){return new ed(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new ed(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new T6(function Jse(n,t,e){return function jse(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new v6(n,new Fc(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=na.RAW,i){this._throwIfRoot("putString");const r=AF(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new T6(new v6(this._delegate,new Fc(r.data,!0),s),this)}listAll(){return function ioe(n){return function zse(n){const t={prefixes:[],items:[]};return b6(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new A6(t,this.storage))}list(t){return function noe(n,t){return w6(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new A6(e,this.storage))}getMetadata(){return function eoe(n){return function $se(n){n._throwIfRoot("getMetadata");const t=h6(n.storage,n._location,Vw());return n.storage.makeRequestWithTokens(t,Gl)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function toe(n,t){return function qse(n,t){n._throwIfRoot("updateMetadata");const e=function xse(n,t,e,i){const s=Ju(t.fullServerUrl(),n.host,n._protocol),d=RF(e,i),_=n.maxOperationRetryTime,b=new Lc(s,"PATCH",CI(n,i),_);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=Hw(t),b}(n.storage,n._location,t,Vw());return n.storage.makeRequestWithTokens(e,Gl)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function roe(n){return Wse(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function soe(n){return function Yse(n){n._throwIfRoot("deleteObject");const t=function Mse(n,t){const i=Ju(t.fullServerUrl(),n.host,n._protocol),d=new Lc(i,"DELETE",function c(f,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Hw(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Gl)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw t6(t)}}class k6{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(R6(t))throw gv("ref() expected a child path but got a URL, use refFromURL instead.");return new ed(I6(this._delegate,t),this)}refFromURL(t){if(!R6(t))throw gv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ms.makeFromUrl(t,this._delegate.host)}catch{throw gv("refFromUrl() expected a valid full URL but got an invalid one.")}return new ed(I6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function aoe(n,t,e,i={}){!function Xse(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function R6(n){return/^[A-Za-z]+:\/\//.test(n)}function foe(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new k6(e,i)}function O6(n){const t=function moe(n){return new pi.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(Md(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,w.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function SI(n){return{getDownloadURL:()=>ct(void 0).pipe(Pn.fc,Yn(()=>n.getDownloadURL()),Pn.iC),getMetadata:()=>ct(void 0).pipe(Pn.fc,Yn(()=>n.getMetadata()),Pn.iC),delete:()=>(0,ln.D)(n.delete()),child:t=>SI(n.child(t)),updateMetadata:t=>(0,ln.D)(n.updateMetadata(t)),put:(t,e)=>O6(n.put(t,e)),putString:(t,e,i)=>O6(n.putString(t,e,i)),list:t=>(0,ln.D)(n.list(t)),listAll:()=>(0,ln.D)(n.listAll())}}!function poe(n){const t={TaskState:Xs,TaskEvent:Rse,StringFormat:na,Storage:k6,Reference:ed};n.INTERNAL.registerComponent(new Hl.wA("storage-compat",foe,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(rO.Z);const goe=new l.OlP("angularfire2.storageBucket"),_oe=new l.OlP("angularfire2.storage.maxUploadRetryTime"),voe=new l.OlP("angularfire2.storage.maxOperationRetryTime"),yoe=new l.OlP("angularfire2.storage.use-emulator");let boe=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,E){const T=(0,vr.on)(e,c,i);this.storage=(0,vr.cc)(`${T.name}.storage.${r}`,"AngularFireStorage",T.name,()=>{const P=c.runOutsideAngular(()=>T.storage(r||void 0)),F=b;return F&&P.useEmulator(...F),f&&P.setMaxUploadRetryTime(f),_&&P.setMaxOperationRetryTime(_),P},[f,_])}ref(e){return SI(this.storage.ref(e))}refFromURL(e){return SI(this.storage.refFromURL(e))}upload(e,i,r){return SI(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vr.Dh),l.LFG(vr.xv,8),l.LFG(goe,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Pn.HU),l.LFG(_oe,8),l.LFG(voe,8),l.LFG(yoe,8),l.LFG(ww,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),woe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Coe=(()=>{class n{constructor(){NM.Z.registerVersion("angularfire",Pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[boe],imports:[woe]}),n})();const P6="@firebase/database";let LF="";function F6(n){LF=n}class Soe{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class xoe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const L6=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Soe(t)}}catch{}return new xoe},jm=L6("localStorage"),BF=L6("sessionStorage"),yv=new Vl.Yd("@firebase/database"),B6=function(){let n=1;return function(){return n++}}(),V6=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},Uw=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Uw.apply(null,i):t+="object"==typeof i?(0,L.Pz)(i):i,t+=" "}return t};let Gm=null,H6=!0;const U6=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(yv.logLevel=Vl.in.VERBOSE,Gm=yv.log.bind(yv),t&&BF.set("logging_enabled",!0)):"function"==typeof n?Gm=n:(Gm=null,BF.remove("logging_enabled"))},Br=function(...n){if(!0===H6&&(H6=!1,null===Gm&&!0===BF.get("logging_enabled")&&U6(!0)),Gm){const t=Uw.apply(null,n);Gm(t)}},jw=function(n){return function(...t){Br(n,...t)}},VF=function(...n){const t="FIREBASE INTERNAL ERROR: "+Uw(...n);yv.error(t)},Vc=function(...n){const t=`FIREBASE FATAL ERROR: ${Uw(...n)}`;throw yv.error(t),new Error(t)},Is=function(...n){const t="FIREBASE WARNING: "+Uw(...n);yv.warn(t)},xI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},td="[MIN_NAME]",Hc="[MAX_NAME]",zm=function(n,t){if(n===t)return 0;if(n===td||t===Hc)return-1;if(t===td||n===Hc)return 1;{const e=MI(n),i=MI(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Toe=function(n,t){return n===t?0:n<t?-1:1},Gw=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(t))},HF=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Pz)(t[i]),e+=":",e+=HF(n[t[i]]);return e+="}",e},j6=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Vr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const G6=function(n){(0,L.hu)(!xI(n),"Invalid JSON number");const i=1023;let r,s,c,d,f;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(f=52;f;f-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const b=_.join("");let E="";for(f=0;f<64;f+=8){let T=parseInt(b.substr(f,8),2).toString(16);1===T.length&&(T="0"+T),E+=T}return E.toLowerCase()},Ooe=new RegExp("^-?(0*)\\d{1,10}$"),z6=-2147483648,UF=2147483647,MI=function(n){if(Ooe.test(n)){const t=Number(n);if(t>=z6&&t<=UF)return t}return null},bv=function(n){try{n()}catch(t){setTimeout(()=>{throw Is("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},zw=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class Noe{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Foe{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Br("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(t)}}let $w=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Z6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X6="websocket",J6="long_polling";class GF{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&jm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function eq(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===X6)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==J6)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Loe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Vr(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class Boe{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const zF={},$F={};function qF(n){const t=n.toString();return zF[t]||(zF[t]=new Boe),zF[t]}class Hoe{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&bv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class zh{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jw(t),this.stats_=qF(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),eq(e,J6,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Hoe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new WF((...s)=>{const[c,d,f,_,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Z6.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zh.forceAllow_=!0}static forceDisallow(){zh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!zh.forceAllow_&&(zh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=j6(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class WF{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=B6(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=WF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Br("frame writing exception"),d.stack&&Br(d.stack),Br(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Br("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Br("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let TI=null;typeof MozWebSocket<"u"?TI=MozWebSocket:typeof WebSocket<"u"&&(TI=WebSocket);let wv=(()=>{class n{constructor(e,i,r,s,c,d,f){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jw(this.connId),this.stats_=qF(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&Z6.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),eq(e,X6,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jm.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${LF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new TI(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==TI&&!n.forceDisallow_}static previouslyFailed(){return jm.isInMemoryStorage||!0===jm.get("previous_websocket_failure")}markConnectionHealthy(){jm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=j6(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),aq=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[zh,wv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=wv&&wv.isAvailable();let r=i&&!wv.previouslyFailed();if(e.webSocketOnly&&(i||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[wv];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class pq{constructor(t,e,i,r,s,c,d,f,_,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jw("c:"+this.id+":"),this.transportManager_=new aq(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=zw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Gw("t",t),i=Gw("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Gw("t",t),i=Gw("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Gw("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?VF("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VF("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),zw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mq{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class gq{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class AI extends gq{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AI}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Fn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Nn(){return new Fn("")}function dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $h(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Fn(n.pieces_,t)}function ZF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function qw(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function yq(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Fn(t,0)}function Ti(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Fn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Fn(e,0)}function hn(n){return n.pieceNum_>=n.pieces_.length}function Js(n,t){const e=dn(n),i=dn(t);if(null===e)return t;if(e===i)return Js(Zn(n),Zn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function lae(n,t){const e=qw(n,0),i=qw(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=zm(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function KF(n,t){if($h(n)!==$h(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ja(n,t){let e=n.pieceNum_,i=t.pieceNum_;if($h(n)>$h(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class cae{constructor(t,e){this.errorPrefix_=e,this.parts_=qw(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);bq(this)}}function bq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$m(n))}function $m(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class QF extends gq{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new QF}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Ww=1e3;let RI,qm=(()=>{class n extends mq{constructor(e,i,r,s,c,d,f,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=jw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ww,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");QF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&AI.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,L.Pz)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new L.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,f=>{const _=f.d,b=f.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",f),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):VF("Unrecognized action received from server: "+(0,L.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ww,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ww,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ww),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Se.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,_=null;const b=function(){_?_.close():(f=!0,s())};e.realtime_={close:b,sendRequest:function(P){(0,L.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(P)}};const T=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,F]=yield Promise.all([e.authTokenProvider_.getToken(T),e.appCheckTokenProvider_.getToken(T)]);f?Br("getToken() completed but was canceled"):(Br("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=F&&F.token,_=new pq(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,z=>{Is(z+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(P){e.log_("Failed to get token: "+P),f||(e.repoInfo_.nodeAdmin&&Is(P),b())}}})()}interrupt(e){Br("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Br("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ww,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>HF(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Fn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Br("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Br("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+LF.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=AI.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new yn(t,e)}}class kI{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new yn(td,t),r=new yn(td,e);return 0!==this.compare(i,r)}minPost(){return yn.MIN}}class Dq extends kI{static get __EMPTY_NODE(){return RI}static set __EMPTY_NODE(t){RI=t}compare(t,e){return zm(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return yn.MIN}maxPost(){return new yn(Hc,RI)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new yn(t,RI)}toString(){return".key"}}const Uc=new Dq;class OI{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let JF,zl=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??wo.EMPTY_NODE,this.right=c??wo.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return wo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class wo{constructor(t,e=wo.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new wo(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,zl.BLACK,null,null))}remove(t){return new wo(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new OI(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new OI(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new OI(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new OI(this.root_,null,this.comparator_,!0,t)}}function _ae(n,t){return zm(n.name,t.name)}function XF(n,t){return zm(n,t)}wo.EMPTY_NODE=new class gae{copy(t,e,i,r,s){return this}insert(t,e,i){return new zl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Eq=function(n){return"number"==typeof n?"number:"+G6(n):"string:"+n},Sq=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===JF||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===JF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xq,Mq,Iq,Cv=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Sq(this.priorityNode_)}static set __childrenNodeConstructor(e){xq=e}static get __childrenNodeConstructor(){return xq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return hn(e)?this:".priority"===dn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=dn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===$h(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Eq(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?G6(this.value_):this.value_,this.lazyHash_=V6(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const si=new class wae extends kI{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?zm(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(Hc,new Cv("[PRIORITY-POST]",Iq))}makePost(t,e){const i=Mq(t);return new yn(e,new Cv("[PRIORITY-POST]",i))}toString(){return".priority"}},Cae=Math.log(2);class Dae{constructor(t){this.count=parseInt(Math.log(t+1)/Cae,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const PI=function(n,t,e,i){n.sort(t);const r=function(f,_){const b=_-f;let E,T;if(0===b)return null;if(1===b)return E=n[f],T=e?e(E):E,new zl(T,E.node,zl.BLACK,null,null);{const P=parseInt(b/2,10)+f,F=r(f,P),z=r(P+1,_);return E=n[P],T=e?e(E):E,new zl(T,E.node,zl.BLACK,F,z)}},d=function(f){let _=null,b=null,E=n.length;const T=function(F,z){const te=E-F,Ve=E;E-=F;const Ze=r(te+1,Ve),it=n[te],Je=e?e(it):it;P(new zl(Je,it.node,z,null,Ze))},P=function(F){_?(_.left=F,_=F):(b=F,_=F)};for(let F=0;F<f.count;++F){const z=f.nextBitIsOne(),te=Math.pow(2,f.count-(F+1));z?T(te,zl.BLACK):(T(te,zl.BLACK),T(te,zl.RED))}return b}(new Dae(n.length));return new wo(i||t,d)};let eL;const Dv={};class nd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(Dv&&si,"ChildrenNode.ts has not been loaded"),eL=eL||new nd({".priority":Dv},{".priority":si}),eL}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof wo?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==Uc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(yn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?PI(i,t.getCompare()):Dv;const f=t.toString(),_=Object.assign({},this.indexSet_);_[f]=t;const b=Object.assign({},this.indexes_);return b[f]=d,new nd(b,_)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),r===Dv){if(c.isDefinedOn(t.node)){const d=[],f=e.getIterator(yn.Wrap);let _=f.getNext();for(;_;)_.name!==t.name&&d.push(_),_=f.getNext();return d.push(t),PI(d,c.getCompare())}return Dv}{const d=e.get(t.name);let f=r;return d&&(f=f.remove(new yn(t.name,d))),f.insert(t,t.node)}});return new nd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===Dv)return r;{const s=e.get(t.name);return s?r.remove(new yn(t.name,s)):r}});return new nd(i,this.indexSet_)}}let Yw,rn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Sq(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yw||(Yw=new n(new wo(XF),null,nd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yw}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Yw:i}}getChild(e){const i=dn(e);return null===i?this:this.getImmediateChild(i).getChild(Zn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new yn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Yw:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=dn(e);if(null===r)return i;{(0,L.hu)(".priority"!==dn(e)||1===$h(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Zn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(si,(d,f)=>{i[d]=f.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Eq(this.getPriority().val())+":"),this.forEachChild(si,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":V6(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new yn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new yn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new yn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,yn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Zw?-1:0}withIndex(e){if(e===Uc||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Uc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(si),s=i.getIterator(si);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Uc?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Zw=new class Eae extends rn{constructor(){super(new wo(XF),rn.EMPTY_NODE,nd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return rn.EMPTY_NODE}isEmpty(){return!1}};function Fi(n,t=null){if(null===n)return rn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cv(n,Fi(t));if(n instanceof Array){let e=rn.EMPTY_NODE;return Vr(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=Fi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Fi(t))}{const e=[];let i=!1;if(Vr(n,(c,d)=>{if("."!==c.substring(0,1)){const f=Fi(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),e.push(new yn(c,f)))}}),0===e.length)return rn.EMPTY_NODE;const s=PI(e,_ae,c=>c.name,XF);if(i){const c=PI(e,si.getCompare());return new rn(s,Fi(t),new nd({".priority":c},{".priority":si}))}return new rn(s,Fi(t),nd.Default)}}Object.defineProperties(yn,{MIN:{value:new yn(td,rn.EMPTY_NODE)},MAX:{value:new yn(Hc,Zw)}}),Dq.__EMPTY_NODE=rn.EMPTY_NODE,Cv.__childrenNodeConstructor=rn,function vae(n){JF=n}(Zw),function bae(n){Iq=n}(Zw),function yae(n){Mq=n}(Fi);class tL extends kI{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!hn(t)&&".priority"!==dn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?zm(t.name,e.name):s}makePost(t,e){const i=Fi(t),r=rn.EMPTY_NODE.updateChild(this.indexPath_,i);return new yn(e,r)}maxPost(){const t=rn.EMPTY_NODE.updateChild(this.indexPath_,Zw);return new yn(Hc,t)}toString(){return qw(this.indexPath_,0).join("/")}}const nL=new class xae extends kI{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?zm(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(t,e){const i=Fi(t);return new yn(e,i)}toString(){return".value"}},Ev="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Mae=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Ev.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=Ev.charAt(t[r]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),kq=function(n){if(n===""+UF)return"-";const t=MI(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Hc;const s=Ev.charAt(Ev.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},Rq=function(n){if(n===""+z6)return td;const t=MI(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+UF:(delete e[e.length-1],e.join("")):(e[e.length-1]=Ev.charAt(Ev.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function Oq(n){return{type:"value",snapshotNode:n}}function Sv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Kw(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Qw(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class rL{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(Kw(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Sv(e,i)):c.trackChildChange(Qw(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(si,(r,s)=>{e.hasChild(r)||i.trackChildChange(Kw(r,s))}),e.isLeafNode()||e.forEachChild(si,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(Qw(r,s,c))}else i.trackChildChange(Sv(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?rn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Xw{constructor(t){this.indexedFilter_=new rL(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Xw.getStartPost_(t),this.endPost_=Xw.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new yn(e,i))||(i=rn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=rn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(rn.EMPTY_NODE);const s=this;return e.forEachChild(si,(c,d)=>{s.matches(new yn(c,d))||(r=r.updateImmediateChild(c,rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Tae{constructor(t){this.rangedFilter_=new Xw(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new yn(e,i))||(i=rn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=rn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=rn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,f;if(r=e.withIndex(this.index_),r=r.updatePriority(rn.EMPTY_NODE),this.reverse_){f=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const E=this.index_.getCompare();d=(T,P)=>E(P,T)}else f=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let _=0,b=!1;for(;f.hasNext();){const E=f.getNext();!b&&d(s,E)<=0&&(b=!0),b&&_<this.limit_&&d(E,c)<=0?_++:r=r.updateImmediateChild(E.name,rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const E=this.index_.getCompare();c=(T,P)=>E(P,T)}else c=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const f=new yn(e,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(f);if(d.hasChild(e)){const E=d.getImmediateChild(e);let T=r.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=T&&(T.name===e||d.hasChild(T.name));)T=r.getChildAfterChild(this.index_,T,this.reverse_);const P=null==T?1:c(T,f);if(b&&!i.isEmpty()&&P>=0)return s?.trackChildChange(Qw(e,i,E)),d.updateImmediateChild(e,i);{s?.trackChildChange(Kw(e,E));const z=d.updateImmediateChild(e,rn.EMPTY_NODE);return null!=T&&this.rangedFilter_.matches(T)?(s?.trackChildChange(Sv(T.name,T.node)),z.updateImmediateChild(T.name,T.node)):z}}return i.isEmpty()?t:b&&c(_,f)>=0?(null!=s&&(s.trackChildChange(Kw(_.name,_.node)),s.trackChildChange(Sv(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(_.name,rn.EMPTY_NODE)):t}}class NI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=si}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:td}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===si}copy(){const t=new NI;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function sL(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function oL(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function FI(n,t){const e=n.copy();return e.index_=t,e}function Pq(n){const t={};if(n.isDefault())return t;let e;return n.index_===si?e="$priority":n.index_===nL?e="$value":n.index_===Uc?e="$key":((0,L.hu)(n.index_ instanceof tL,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Pz)(e),n.startSet_&&(t.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Nq(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==si&&(t.i=n.index_.toString()),t}class LI extends mq{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=jw("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=LI.getListenId_(t,i),d={};this.listens_[c]=d;const f=Pq(t._queryParams);this.restRequest_(s+".json",f,(_,b)=>{let E=b;if(404===_&&(E=null,_=null),null===_&&this.onDataUpdate_(s,E,!1,i),(0,L.DV)(this.listens_,c)===d){let T;T=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(T,null)}})}unlisten(t,e){const i=LI.getListenId_(t,e);delete this.listens_[i]}get(t){const e=Pq(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,L.cI)(d.responseText)}catch{Is("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Is("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class Nae{constructor(){this.rootNode_=rn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function BI(){return{value:null,children:new Map}}function xv(n,t,e){if(hn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=dn(t);n.children.has(i)||n.children.set(i,BI()),xv(n.children.get(i),t=Zn(t),e)}}function aL(n,t){if(hn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(si,(i,r)=>{xv(n,new Fn(i),r)}),aL(n,t)}}if(n.children.size>0){const e=dn(t);return t=Zn(t),n.children.has(e)&&aL(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function lL(n,t,e){null!==n.value?e(t,n.value):function Fae(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{lL(r,new Fn(t.toString()+"/"+i),e)})}class Lae{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Vr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class Hae{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Lae(t);const i=1e4+2e4*Math.random();zw(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Vr(t,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),zw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var el=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(el||(el={})),el))();function dL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class VI{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=el.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(hn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Fn(t));return new VI(Nn(),e,this.revert)}}return(0,L.hu)(dn(this.path)===t,"operationForChild called for unrelated child."),new VI(Zn(this.path),this.affectedTree,this.revert)}}class Jw{constructor(t,e){this.source=t,this.path=e,this.type=el.LISTEN_COMPLETE}operationForChild(t){return hn(this.path)?new Jw(this.source,Nn()):new Jw(this.source,Zn(this.path))}}class Wm{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=el.OVERWRITE}operationForChild(t){return hn(this.path)?new Wm(this.source,Nn(),this.snap.getImmediateChild(t)):new Wm(this.source,Zn(this.path),this.snap)}}class Mv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=el.MERGE}operationForChild(t){if(hn(this.path)){const e=this.children.subtree(new Fn(t));return e.isEmpty()?null:e.value?new Wm(this.source,Nn(),e.value):new Mv(this.source,Nn(),e)}return(0,L.hu)(dn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Mv(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qh{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(hn(t))return this.isFullyInitialized()&&!this.filtered_;const e=dn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Uae{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function eC(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,f)=>function zae(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new yn(t.childName,t.snapshotNode),r=new yn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),c.forEach(d=>{const f=function Gae(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(f,n.query_))})})}function HI(n,t){return{eventCache:n,serverCache:t}}function tC(n,t,e,i){return HI(new qh(t,e,i),n.serverCache)}function Lq(n,t,e,i){return HI(n.eventCache,new qh(t,e,i))}function UI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ym(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let hL;class oi{constructor(t,e=(()=>(hL||(hL=new wo(Toe)),hL))()){this.value=t,this.children=e}static fromObject(t){let e=new oi(null);return Vr(t,(i,r)=>{e=e.set(new Fn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Nn(),value:this.value};if(hn(t))return null;{const i=dn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Zn(t),e);return null!=s?{path:Ti(new Fn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(hn(t))return this;{const e=dn(t),i=this.children.get(e);return null!==i?i.subtree(Zn(t)):new oi(null)}}set(t,e){if(hn(t))return new oi(e,this.children);{const i=dn(t),s=(this.children.get(i)||new oi(null)).set(Zn(t),e),c=this.children.insert(i,s);return new oi(this.value,c)}}remove(t){if(hn(t))return this.children.isEmpty()?new oi(null):new oi(null,this.children);{const e=dn(t),i=this.children.get(e);if(i){const r=i.remove(Zn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new oi(null):new oi(this.value,s)}return this}}get(t){if(hn(t))return this.value;{const e=dn(t),i=this.children.get(e);return i?i.get(Zn(t)):null}}setTree(t,e){if(hn(t))return e;{const i=dn(t),s=(this.children.get(i)||new oi(null)).setTree(Zn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new oi(this.value,c)}}fold(t){return this.fold_(Nn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ti(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Nn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(hn(t))return null;{const s=dn(t),c=this.children.get(s);return c?c.findOnPath_(Zn(t),Ti(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Nn(),e)}foreachOnPath_(t,e,i){if(hn(t))return this;{this.value&&i(e,this.value);const r=dn(t),s=this.children.get(r);return s?s.foreachOnPath_(Zn(t),Ti(e,r),i):new oi(null)}}foreach(t){this.foreach_(Nn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Ti(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class $l{constructor(t){this.writeTree_=t}static empty(){return new $l(new oi(null))}}function nC(n,t,e){if(hn(t))return new $l(new oi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=Js(r,t);return s=s.updateChild(c,e),new $l(n.writeTree_.set(r,s))}{const r=new oi(e),s=n.writeTree_.setTree(t,r);return new $l(s)}}}function fL(n,t,e){let i=n;return Vr(e,(r,s)=>{i=nC(i,Ti(t,r),s)}),i}function Bq(n,t){if(hn(t))return $l.empty();{const e=n.writeTree_.setTree(t,new oi(null));return new $l(e)}}function pL(n,t){return null!=Zm(n,t)}function Zm(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Js(e.path,t)):null}function Vq(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(si,(i,r)=>{t.push(new yn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new yn(i,r.value))}),t}function Wh(n,t){if(hn(t))return n;{const e=Zm(n,t);return new $l(null!=e?new oi(e):n.writeTree_.subtree(t))}}function mL(n){return n.writeTree_.isEmpty()}function Iv(n,t){return Hq(Nn(),n.writeTree_,t)}function Hq(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=Hq(Ti(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Ti(n,".priority"),i)),e}}function jI(n,t){return $q(t,n)}function Kae(n,t){if(n.snap)return Ja(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ja(Ti(n.path,e),t))return!0;return!1}function Xae(n){return n.visible}function Uq(n,t,e){let i=$l.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)Ja(e,c)?(d=Js(e,c),i=nC(i,d,s.snap)):Ja(c,e)&&(d=Js(c,e),i=nC(i,Nn(),s.snap.getChild(d)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Ja(e,c))d=Js(e,c),i=fL(i,d,s.children);else if(Ja(c,e))if(d=Js(c,e),hn(d))i=fL(i,Nn(),s.children);else{const f=(0,L.DV)(s.children,dn(d));if(f){const _=f.getChild(Zn(d));i=nC(i,Nn(),_)}}}}}return i}function jq(n,t,e,i,r){if(i||r){const s=Wh(n.visibleWrites,t);return!r&&mL(s)?e:r||null!=e||pL(s,Nn())?Iv(Uq(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(Ja(_.path,t)||Ja(t,_.path))},t),e||rn.EMPTY_NODE):null}{const s=Zm(n.visibleWrites,t);if(null!=s)return s;{const c=Wh(n.visibleWrites,t);return mL(c)?e:null!=e||pL(c,Nn())?Iv(c,e||rn.EMPTY_NODE):null}}}function GI(n,t,e,i){return jq(n.writeTree,n.treePath,t,e,i)}function gL(n,t){return function Jae(n,t,e){let i=rn.EMPTY_NODE;const r=Zm(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(si,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Wh(n.visibleWrites,t);return e.forEachChild(si,(c,d)=>{const f=Iv(Wh(s,new Fn(c)),d);i=i.updateImmediateChild(c,f)}),Vq(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return Vq(Wh(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function Gq(n,t,e,i){return function ele(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ti(t,e);if(pL(n.visibleWrites,s))return null;{const c=Wh(n.visibleWrites,s);return mL(c)?r.getChild(e):Iv(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function zI(n,t){return function nle(n,t){return Zm(n.visibleWrites,t)}(n.writeTree,Ti(n.treePath,t))}function _L(n,t,e){return function tle(n,t,e,i){const r=Ti(t,e),s=Zm(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Iv(Wh(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function zq(n,t){return $q(Ti(n.treePath,t),n.writeTree)}function $q(n,t){return{treePath:n,writeTree:t}}class ole{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,Qw(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,Kw(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Sv(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,Qw(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const qq=new class ale{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class vL{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new qh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _L(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ym(this.viewCache_),s=function sle(n,t,e,i,r,s){return function ile(n,t,e,i,r,s,c){let d;const f=Wh(n.visibleWrites,t),_=Zm(f,Nn());if(null!=_)d=_;else{if(null==e)return[];d=Iv(f,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const b=[],E=c.getCompare(),T=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let P=T.getNext();for(;P&&b.length<r;)0!==E(P,i)&&b.push(P),P=T.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function Wq(n,t,e,i,r,s){const c=t.eventCache;if(null!=zI(i,e))return t;{let d,f;if(hn(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=Ym(t),E=gL(i,_ instanceof rn?_:rn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,s)}else{const _=GI(i,Ym(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=dn(e);if(".priority"===_){(0,L.hu)(1===$h(e),"Can't have a priority with additional path components");const b=c.getNode();f=t.serverCache.getNode();const E=Gq(i,e,b,f);d=null!=E?n.filter.updatePriority(b,E):c.getNode()}else{const b=Zn(e);let E;if(c.isCompleteForChild(_)){f=t.serverCache.getNode();const T=Gq(i,e,c.getNode(),f);E=null!=T?c.getNode().getImmediateChild(_).updateChild(b,T):c.getNode().getImmediateChild(_)}else E=_L(i,_,t.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),_,E,b,r,s):c.getNode()}}return tC(t,d,c.isFullyInitialized()||hn(e),n.filter.filtersNodes())}}function $I(n,t,e,i,r,s,c,d){const f=t.serverCache;let _;const b=c?n.filter:n.filter.getIndexedFilter();if(hn(e))_=b.updateFullNode(f.getNode(),i,null);else if(b.filtersNodes()&&!f.isFiltered()){const P=f.getNode().updateChild(e,i);_=b.updateFullNode(f.getNode(),P,null)}else{const P=dn(e);if(!f.isCompleteForPath(e)&&$h(e)>1)return t;const F=Zn(e),te=f.getNode().getImmediateChild(P).updateChild(F,i);_=".priority"===P?b.updatePriority(f.getNode(),te):b.updateChild(f.getNode(),P,te,F,qq,null)}const E=Lq(t,_,f.isFullyInitialized()||hn(e),b.filtersNodes());return Wq(n,E,e,r,new vL(r,E,s),d)}function yL(n,t,e,i,r,s,c){const d=t.eventCache;let f,_;const b=new vL(r,t,s);if(hn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,c),f=tC(t,_,!0,n.filter.filtersNodes());else{const E=dn(e);if(".priority"===E)_=n.filter.updatePriority(t.eventCache.getNode(),i),f=tC(t,_,d.isFullyInitialized(),d.isFiltered());else{const T=Zn(e),P=d.getNode().getImmediateChild(E);let F;if(hn(T))F=i;else{const z=b.getCompleteChild(E);F=null!=z?".priority"===ZF(T)&&z.getChild(yq(T)).isEmpty()?z:z.updateChild(T,i):rn.EMPTY_NODE}f=P.equals(F)?t:tC(t,n.filter.updateChild(d.getNode(),E,F,T,b,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function Yq(n,t){return n.eventCache.isCompleteForChild(t)}function Zq(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function bL(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,f=t;_=hn(e)?i:new oi(null).setTree(e,i);const b=t.serverCache.getNode();return _.children.inorderTraversal((E,T)=>{if(b.hasChild(E)){const F=Zq(0,t.serverCache.getNode().getImmediateChild(E),T);f=$I(n,f,new Fn(E),F,r,s,c,d)}}),_.children.inorderTraversal((E,T)=>{const P=!t.serverCache.isCompleteForChild(E)&&null===T.value;if(!b.hasChild(E)&&!P){const z=Zq(0,t.serverCache.getNode().getImmediateChild(E),T);f=$I(n,f,new Fn(E),z,r,s,c,d)}}),f}class gle{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new rL(i.getIndex()),s=function Aae(n){return n.loadsAllData()?new rL(n.getIndex()):n.hasLimit()?new Tae(n):new Xw(n)}(i);this.processor_=function lle(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,f=r.updateFullNode(rn.EMPTY_NODE,c.getNode(),null),_=s.updateFullNode(rn.EMPTY_NODE,d.getNode(),null),b=new qh(f,c.isFullyInitialized(),r.filtersNodes()),E=new qh(_,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=HI(E,b),this.eventGenerator_=new Uae(this.query_)}get query(){return this.query_}}function yle(n,t){const e=Ym(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!hn(t)&&!e.getImmediateChild(dn(t)).isEmpty())?e.getChild(t):null}function Kq(n){return 0===n.eventRegistrations_.length}function Qq(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function Xq(n,t,e,i){t.type===el.MERGE&&null!==t.source.queryId&&((0,L.hu)(Ym(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(UI(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function ule(n,t,e,i,r){const s=new ole;let c,d;if(e.type===el.OVERWRITE){const _=e;_.source.fromUser?c=yL(n,t,_.path,_.snap,i,r,s):((0,L.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!hn(_.path),c=$I(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===el.MERGE){const _=e;_.source.fromUser?c=function hle(n,t,e,i,r,s,c){let d=t;return i.foreach((f,_)=>{const b=Ti(e,f);Yq(t,dn(b))&&(d=yL(n,d,b,_,r,s,c))}),i.foreach((f,_)=>{const b=Ti(e,f);Yq(t,dn(b))||(d=yL(n,d,b,_,r,s,c))}),d}(n,t,_.path,_.children,i,r,s):((0,L.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),c=bL(n,t,_.path,_.children,i,r,d,s))}else if(e.type===el.ACK_USER_WRITE){const _=e;c=_.revert?function mle(n,t,e,i,r,s){let c;if(null!=zI(i,e))return t;{const d=new vL(i,t,r),f=t.eventCache.getNode();let _;if(hn(e)||".priority"===dn(e)){let b;if(t.serverCache.isFullyInitialized())b=GI(i,Ym(t));else{const E=t.serverCache.getNode();(0,L.hu)(E instanceof rn,"serverChildren would be complete if leaf node"),b=gL(i,E)}_=n.filter.updateFullNode(f,b,s)}else{const b=dn(e);let E=_L(i,b,t.serverCache);null==E&&t.serverCache.isCompleteForChild(b)&&(E=f.getImmediateChild(b)),_=null!=E?n.filter.updateChild(f,b,E,Zn(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(f,b,rn.EMPTY_NODE,Zn(e),d,s):f,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=GI(i,Ym(t)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=zI(i,Nn()),tC(t,_,c,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function fle(n,t,e,i,r,s,c){if(null!=zI(r,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=i.value){if(hn(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return $I(n,t,e,f.getNode().getChild(e),r,s,d,c);if(hn(e)){let _=new oi(null);return f.getNode().forEachChild(Uc,(b,E)=>{_=_.set(new Fn(b),E)}),bL(n,t,e,_,r,s,d,c)}return t}{let _=new oi(null);return i.foreach((b,E)=>{const T=Ti(e,b);f.isCompleteForPath(T)&&(_=_.set(b,f.getNode().getChild(T)))}),bL(n,t,e,_,r,s,d,c)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==el.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);c=function ple(n,t,e,i,r){const s=t.serverCache;return Wq(n,Lq(t,s.getNode(),s.isFullyInitialized()||hn(e),s.isFiltered()),e,i,qq,r)}(n,t,e.path,i,s)}const f=s.getChanges();return function dle(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=UI(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(Oq(UI(t)))}}(t,c,f),{viewCache:c,changes:f}}(n.processor_,r,t,e,i);return function cle(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Jq(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Jq(n,t,e,i){return function jae(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Iae(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),eC(n,r,"child_removed",t,i,e),eC(n,r,"child_added",t,i,e),eC(n,r,"child_moved",s,i,e),eC(n,r,"child_changed",t,i,e),eC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let qI,YI;class e4{constructor(){this.views=new Map}}function wL(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Xq(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(Xq(c,t,e,i));return s}}function t4(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=GI(e,r?i:null),f=!1;d?f=!0:i instanceof rn?(d=gL(e,i),f=!1):(d=rn.EMPTY_NODE,f=!1);const _=HI(new qh(d,f,!1),new qh(i,r,!1));return new gle(t,_)}return c}function n4(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Yh(n,t){let e=null;for(const i of n.views.values())e=e||yle(i,t);return e}function r4(n,t){return t._queryParams.loadsAllData()?WI(n):n.views.get(t._queryIdentifier)}function s4(n,t){return null!=r4(n,t)}function Zh(n){return null!=WI(n)}function WI(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Tle=1;class o4{constructor(t){this.listenProvider_=t,this.syncPointTree_=new oi(null),this.pendingWriteTree_=function rle(){return{visibleWrites:$l.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CL(n,t,e,i,r){return function qae(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=nC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Tv(n,new Wm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Kh(n,t,e=!1){const i=function Yae(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Zae(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&Kae(d,i.path)?r=!1:Ja(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function Qae(n){n.visibleWrites=Uq(n.allWrites,Xae,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Bq(n.visibleWrites,i.path):Vr(i.children,f=>{n.visibleWrites=Bq(n.visibleWrites,Ti(i.path,f))}),!0))}(n.pendingWriteTree_,t)){let s=new oi(null);return null!=i.snap?s=s.set(Nn(),!0):Vr(i.children,c=>{s=s.set(new Fn(c),!0)}),Tv(n,new VI(i.path,s,e))}return[]}function iC(n,t,e){return Tv(n,new Wm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function ZI(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||s4(c,t))){const f=function xle(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=Zh(n);if("default"===r)for(const[f,_]of n.views.entries())c=c.concat(Qq(_,e,i)),Kq(_)&&(n.views.delete(f),_.query._queryParams.loadsAllData()||s.push(_.query));else{const f=n.views.get(r);f&&(c=c.concat(Qq(f,e,i)),Kq(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!Zh(n)&&s.push(new(function Dle(){return(0,L.hu)(qI,"Reference.ts has not been loaded"),qI}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function Ele(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=f.removed;if(d=f.events,!r){const b=-1!==_.findIndex(T=>T._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(s,(T,P)=>Zh(P));if(b&&!E){const T=n.syncPointTree_.subtree(s);if(!T.isEmpty()){const P=function Fle(n){return n.fold((t,e,i)=>{if(e&&Zh(e))return[WI(e)];{let r=[];return e&&(r=n4(e)),Vr(i,(s,c)=>{r=r.concat(c)}),r}})}(T);for(let F=0;F<P.length;++F){const z=P[F],te=z.query,Ve=u4(n,z);n.listenProvider_.startListening(sC(te),rC(n,te),Ve.hashFn,Ve.onComplete)}}}!E&&_.length>0&&!i&&(b?n.listenProvider_.stopListening(sC(t),null):_.forEach(T=>{const P=n.queryToTagMap.get(QI(T));n.listenProvider_.stopListening(sC(T),P)}))}!function Lle(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=QI(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,_)}return d}function a4(n,t,e,i){const r=EL(n,i);if(null!=r){const s=SL(r),c=s.path,d=s.queryId,f=Js(c,t);return xL(n,c,new Wm(dL(d),f,e))}return[]}function DL(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(T,P)=>{const F=Js(T,r);s=s||Yh(P,F),c=c||Zh(P)});let f,d=n.syncPointTree_.get(r);d?(c=c||Zh(d),s=s||Yh(d,Nn())):(d=new e4,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=rn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,F)=>{const z=Yh(F,Nn());z&&(s=s.updateImmediateChild(P,z))}));const _=s4(d,t);if(!_&&!t._queryParams.loadsAllData()){const T=QI(t);(0,L.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const P=function Ble(){return Tle++}();n.queryToTagMap.set(T,P),n.tagToQueryMap.set(P,T)}let E=function Sle(n,t,e,i,r,s){const c=t4(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function ble(n,t){n.eventRegistrations_.push(t)}(c,e),function wle(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(si,(s,c)=>{i.push(Sv(s,c))}),e.isFullyInitialized()&&i.push(Oq(e.getNode())),Jq(n,i,e.getNode(),t)}(c,e)}(d,t,e,jI(n.pendingWriteTree_,r),s,f);if(!_&&!c&&!i){const T=r4(d,t);E=E.concat(function Vle(n,t,e){const i=t._path,r=rC(n,t),s=u4(n,e),c=n.listenProvider_.startListening(sC(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!Zh(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((_,b,E)=>{if(!hn(_)&&b&&Zh(b))return[WI(b).query];{let T=[];return b&&(T=T.concat(n4(b).map(P=>P.query))),Vr(E,(P,F)=>{T=T.concat(F)}),T}});for(let _=0;_<f.length;++_){const b=f[_];n.listenProvider_.stopListening(sC(b),rC(n,b))}}return c}(n,t,T))}return E}function KI(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const _=Yh(d,Js(c,t));if(_)return _});return jq(r,t,s,e,!0)}function Tv(n,t){return l4(t,n.syncPointTree_,null,jI(n.pendingWriteTree_,Nn()))}function l4(n,t,e,i){if(hn(n.path))return c4(n,t,e,i);{const r=t.get(Nn());null==e&&null!=r&&(e=Yh(r,Nn()));let s=[];const c=dn(n.path),d=n.operationForChild(c),f=t.children.get(c);if(f&&d){const _=e?e.getImmediateChild(c):null,b=zq(i,c);s=s.concat(l4(d,f,_,b))}return r&&(s=s.concat(wL(r,n,i,e))),s}}function c4(n,t,e,i){const r=t.get(Nn());null==e&&null!=r&&(e=Yh(r,Nn()));let s=[];return t.children.inorderTraversal((c,d)=>{const f=e?e.getImmediateChild(c):null,_=zq(i,c),b=n.operationForChild(c);b&&(s=s.concat(c4(b,d,f,_)))}),r&&(s=s.concat(wL(r,n,i,e))),s}function u4(n,t){const e=t.query,i=rC(n,e);return{hashFn:()=>(function _le(n){return n.viewCache_.serverCache.getNode()}(t)||rn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Ole(n,t,e){const i=EL(n,e);if(i){const r=SL(i),s=r.path,c=r.queryId,d=Js(s,t);return xL(n,s,new Jw(dL(c),d))}return[]}(n,e._path,i):function Rle(n,t){return Tv(n,new Jw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function Roe(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return ZI(n,e,null,s)}}}}function rC(n,t){const e=QI(t);return n.queryToTagMap.get(e)}function QI(n){return n._path.toString()+"$"+n._queryIdentifier}function EL(n,t){return n.tagToQueryMap.get(t)}function SL(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Fn(n.substr(0,t))}}function xL(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),wL(i,e,jI(n.pendingWriteTree_,t),null)}function sC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ile(){return(0,L.hu)(YI,"Reference.ts has not been loaded"),YI}())(n._repo,n._path):n}class ML{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new ML(e)}node(){return this.node_}}class IL{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Ti(this.path_,t);return new IL(this.syncTree_,e)}node(){return KI(this.syncTree_,this.path_)}}const d4=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ule(n[".sv"],t,e):"object"==typeof n[".sv"]?jle(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ule=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},jle=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},h4=function(n,t,e,i){return AL(t,new IL(e,n),i)},TL=function(n,t,e){return AL(n,new ML(t),e)};function AL(n,t,e){const i=n.getPriority().val(),r=d4(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=d4(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new Cv(d,Fi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new Cv(r))),c.forEachChild(si,(d,f)=>{const _=AL(f,t.getImmediateChild(d),e);_!==f&&(s=s.updateImmediateChild(d,_))}),s}}class kL{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function XI(n,t){let e=t instanceof Fn?t:new Fn(t),i=n,r=dn(e);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new kL(r,i,s),e=Zn(e),r=dn(e)}return i}function Km(n){return n.node.value}function RL(n,t){n.node.value=t,OL(n)}function f4(n){return n.node.childCount>0}function JI(n,t){Vr(n.node.children,(e,i)=>{t(new kL(e,n,i))})}function p4(n,t,e,i){e&&!i&&t(n),JI(n,r=>{p4(r,t,!0,i)}),e&&i&&t(n)}function oC(n){return new Fn(null===n.parent?n.name:oC(n.parent)+"/"+n.name)}function OL(n){null!==n.parent&&function $le(n,t,e){const i=function Gle(n){return void 0===Km(n)&&!f4(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,OL(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,OL(n))}(n.parent,n.name,n)}const qle=/[\[\].#$\/\u0000-\u001F\u007F]/,Wle=/[\[\].#$\u0000-\u001F\u007F]/,PL=10485760,eT=function(n){return"string"==typeof n&&0!==n.length&&!qle.test(n)},m4=function(n){return"string"==typeof n&&0!==n.length&&!Wle.test(n)},aC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!xI(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},jc=function(n,t,e,i){i&&void 0===t||lC((0,L.gK)(n,"value"),t,e)},lC=function(n,t,e){const i=e instanceof Fn?new cae(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+$m(i));if("function"==typeof t)throw new Error(n+"contains a function "+$m(i)+" with contents = "+t.toString());if(xI(t))throw new Error(n+"contains "+t.toString()+" "+$m(i));if("string"==typeof t&&t.length>PL/3&&(0,L.ug)(t)>PL)throw new Error(n+"contains a string greater than "+PL+" utf8 bytes "+$m(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Vr(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!eT(c)))throw new Error(n+" contains an invalid key ("+c+") "+$m(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function uae(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),bq(n)})(i,c),lC(n,d,i),function dae(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+$m(i)+" in addition to actual children.")}},g4=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Vr(t,(c,d)=>{const f=new Fn(c);if(lC(r,d,Ti(e,f)),".priority"===ZF(f)&&!aC(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=qw(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!eT(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(lae);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ja(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},NL=function(n,t,e){if(!e||void 0!==t){if(xI(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!aC(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cC=function(n,t,e,i){if(!(i&&void 0===e||eT(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},uC=function(n,t,e,i){if(!(i&&void 0===e||m4(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tl=function(n,t){if(".info"===dn(t))throw new Error(n+" failed = Can't modify data under /.info/")},_4=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!eT(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),m4(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Qle{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tT(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!KF(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function v4(n,t,e){tT(n,e),y4(n,i=>KF(i,t))}function ia(n,t,e){tT(n,e),y4(n,i=>Ja(i,t)||Ja(t,i))}function y4(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Xle(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Xle(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Gm&&Br("event: "+e.toString()),bv(i)}}}const b4="repo_interrupt";class ece{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qle,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=BI(),this.transactionQueueTree_=new kL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function w4(n){const e=n.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function dC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:w4(n)})}function C4(n,t,e,i,r){n.dataUpdateCount++;const s=new Fn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const f=(0,L.UI)(e,_=>Fi(_));c=function Ple(n,t,e,i){const r=EL(n,i);if(r){const s=SL(r),c=s.path,d=s.queryId,f=Js(c,t),_=oi.fromObject(e);return xL(n,c,new Mv(dL(d),f,_))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=Fi(e);c=a4(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,L.UI)(e,_=>Fi(_));c=function kle(n,t,e){const i=oi.fromObject(e);return Tv(n,new Mv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,f)}else{const f=Fi(e);c=iC(n.serverSyncTree_,s,f)}let d=s;c.length>0&&(d=kv(n,s)),ia(n.eventQueue_,d,c)}function D4(n,t){FL(n,"connected",t),!1===t&&function sce(n){Av(n,"onDisconnectEvents");const t=dC(n),e=BI();lL(n.onDisconnect_,Nn(),(r,s)=>{const c=h4(r,s,n.serverSyncTree_,t);xv(e,r,c)});let i=[];lL(e,Nn(),(r,s)=>{i=i.concat(iC(n.serverSyncTree_,r,s));const c=HL(n,r);kv(n,c)}),n.onDisconnect_=BI(),ia(n.eventQueue_,Nn(),i)}(n)}function FL(n,t,e){const i=new Fn("/.info/"+t),r=Fi(e);n.infoData_.updateSnapshot(i,r);const s=iC(n.infoSyncTree_,i,r);ia(n.eventQueue_,i,s)}function nT(n){return n.nextWriteId_++}function LL(n,t,e,i,r){Av(n,"set",{path:t.toString(),value:e,priority:i});const s=dC(n),c=Fi(e,i),d=KI(n.serverSyncTree_,t),f=TL(c,d,s),_=nT(n),b=CL(n.serverSyncTree_,t,f,_,!0);tT(n.eventQueue_,b),n.server_.put(t.toString(),c.val(!0),(T,P)=>{const F="ok"===T;F||Is("set at "+t+" failed: "+T);const z=Kh(n.serverSyncTree_,_,!F);ia(n.eventQueue_,t,z),Qh(0,r,T,P)});const E=HL(n,t);kv(n,E),ia(n.eventQueue_,E,[])}function oce(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&aL(n.onDisconnect_,t),Qh(0,e,i,r)})}function E4(n,t,e,i){const r=Fi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&xv(n.onDisconnect_,t,r),Qh(0,i,s,c)})}function BL(n,t,e){let i;i=".info"===dn(t._path)?ZI(n.infoSyncTree_,t,e):ZI(n.serverSyncTree_,t,e),v4(n.eventQueue_,t._path,i)}function S4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(b4)}function Av(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Br(e,...t)}function Qh(n,t,e,i){t&&bv(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function VL(n,t,e){return KI(n.serverSyncTree_,t,e)||rn.EMPTY_NODE}function iT(n,t=n.transactionQueueTree_){if(t||rT(n,t),Km(t)){const e=M4(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function hce(n,t,e){const i=e.map(_=>_.currentWriteId),r=VL(n,t,i);let s=r;const c=r.hash();for(let _=0;_<e.length;_++){const b=e[_];(0,L.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const E=Js(t,b.path);s=s.updateChild(E,b.currentOutputSnapshotRaw)}const d=s.val(!0),f=t;n.server_.put(f.toString(),d,_=>{Av(n,"transaction put response",{path:f.toString(),status:_});let b=[];if("ok"===_){const E=[];for(let T=0;T<e.length;T++)e[T].status=2,b=b.concat(Kh(n.serverSyncTree_,e[T].currentWriteId)),e[T].onComplete&&E.push(()=>e[T].onComplete(null,!0,e[T].currentOutputSnapshotResolved)),e[T].unwatcher();rT(n,XI(n.transactionQueueTree_,t)),iT(n,n.transactionQueueTree_),ia(n.eventQueue_,t,b);for(let T=0;T<E.length;T++)bv(E[T])}else{if("datastale"===_)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{Is("transaction at "+f.toString()+" failed: "+_);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=_}kv(n,t)}},c)}(n,oC(t),e)}else f4(t)&&JI(t,e=>{iT(n,e)})}function kv(n,t){const e=x4(n,t),i=oC(e);return function fce(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],_=Js(e,f.path);let E,b=!1;if((0,L.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)b=!0,E=f.abortReason,r=r.concat(Kh(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)b=!0,E="maxretry",r=r.concat(Kh(n.serverSyncTree_,f.currentWriteId,!0));else{const T=VL(n,f.path,c);f.currentInputSnapshot=T;const P=t[d].update(T.val());if(void 0!==P){lC("transaction failed: Data returned ",P,f.path);let F=Fi(P);"object"==typeof P&&null!=P&&(0,L.r3)(P,".priority")||(F=F.updatePriority(T.getPriority()));const te=f.currentWriteId,Ve=dC(n),Ze=TL(F,T,Ve);f.currentOutputSnapshotRaw=F,f.currentOutputSnapshotResolved=Ze,f.currentWriteId=nT(n),c.splice(c.indexOf(te),1),r=r.concat(CL(n.serverSyncTree_,f.path,Ze,f.currentWriteId,f.applyLocally)),r=r.concat(Kh(n.serverSyncTree_,te,!0))}else b=!0,E="nodata",r=r.concat(Kh(n.serverSyncTree_,f.currentWriteId,!0))}ia(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}rT(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)bv(i[d]);iT(n,n.transactionQueueTree_)}(n,M4(n,e),i),i}function x4(n,t){let e,i=n.transactionQueueTree_;for(e=dn(t);null!==e&&void 0===Km(i);)i=XI(i,e),e=dn(t=Zn(t));return i}function M4(n,t){const e=[];return I4(n,t,e),e.sort((i,r)=>i.order-r.order),e}function I4(n,t,e){const i=Km(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);JI(t,r=>{I4(n,r,e)})}function rT(n,t){const e=Km(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,RL(t,e.length>0?e:void 0)}JI(t,i=>{rT(n,i)})}function HL(n,t){const e=oC(x4(n,t)),i=XI(n.transactionQueueTree_,t);return function zle(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{UL(n,r)}),UL(n,i),p4(i,r=>{UL(n,r)}),e}function UL(n,t){const e=Km(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,L.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Kh(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?RL(t,void 0):e.length=s+1,ia(n.eventQueue_,oC(t),r);for(let c=0;c<i.length;c++)bv(i[c])}}const jL=function(n,t){const e=gce(n),i=e.namespace;return"firebase.com"===e.domain&&Vc(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Vc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new GF(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Fn(e.pathString)}},gce=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",f=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(b,E)),b<E&&(r=function pce(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(b,E)));const T=function mce(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Is(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));_=t.indexOf(":"),_>=0?(c="https"===d||"wss"===d,f=parseInt(t.substring(_+1),10)):_=t.length;const P=t.slice(0,_);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const F=t.indexOf(".");i=t.substring(0,F).toLowerCase(),e=t.substring(F+1),s=i}"ns"in T&&(s=T.ns)}return{host:t,port:f,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class T4{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class A4{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class GL{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class k4{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return oce(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){tl("OnDisconnect.remove",this._path);const t=new L.BH;return E4(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){tl("OnDisconnect.set",this._path),jc("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return E4(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){tl("OnDisconnect.setWithPriority",this._path),jc("OnDisconnect.setWithPriority",t,this._path,!1),NL("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function ace(n,t,e,i,r){const s=Fi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&xv(n.onDisconnect_,t,s),Qh(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){tl("OnDisconnect.update",this._path),g4("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function lce(n,t,e,i){if((0,L.xb)(e))return Br("onDisconnect().update() called with empty data.  Don't do anything."),void Qh(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Vr(e,(c,d)=>{const f=Fi(d);xv(n.onDisconnect_,Ti(t,c),f)}),Qh(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Co{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return hn(this._path)?null:ZF(this._path)}get ref(){return new nl(this._repo,this._path)}get _queryIdentifier(){const t=Nq(this._queryParams),e=HF(t);return"{}"===e?"default":e}get _queryObject(){return Nq(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Co))return!1;const e=this._repo===t._repo,i=KF(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function aae(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function sT(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Xh(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Uc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==td)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Hc)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===si){if(null!=t&&!aC(t)||null!=e&&!aC(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof tL||n.getIndex()===nL,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function oT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nl extends Co{constructor(t,e){super(t,e,new NI,!1)}get parent(){const t=yq(this._path);return null===t?null:new nl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Qm{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Fn(t),i=Xm(this.ref,t);return new Qm(this._node.getChild(e),i,si)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Qm(r,Xm(this.ref,i),si)))}hasChild(t){const e=new Fn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function R4(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?Xm(n._root,t):n._root}function O4(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=jL(t,n._repo.repoInfo_.nodeAdmin);_4("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Vc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),R4(n,e.path.toString())}function Xm(n,t){return null===dn((n=(0,L.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),uC("child","path",e,!1)):uC("child","path",t,!1),new nl(n._repo,Ti(n._path,t));var e}function zL(n,t){n=(0,L.m9)(n),tl("set",n._path),jc("set",t,n._path,!1);const e=new L.BH;return LL(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function wce(n,t){g4("update",t,n._path,!1);const e=new L.BH;return function rce(n,t,e,i){Av(n,"update",{path:t.toString(),value:e});let r=!0;const s=dC(n),c={};if(Vr(e,(d,f)=>{r=!1,c[d]=h4(Ti(t,d),Fi(f),n.serverSyncTree_,s)}),r)Br("update() called with empty data.  Don't do anything."),Qh(0,i,"ok",void 0);else{const d=nT(n),f=function Ale(n,t,e,i){!function Wae(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=fL(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=oi.fromObject(e);return Tv(n,new Mv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);tT(n.eventQueue_,f),n.server_.merge(t.toString(),e,(_,b)=>{const E="ok"===_;E||Is("update at "+t+" failed: "+_);const T=Kh(n.serverSyncTree_,d,!E),P=T.length>0?kv(n,t):t;ia(n.eventQueue_,P,T),Qh(0,i,_,b)}),Vr(e,_=>{const b=HL(n,Ti(t,_));kv(n,b)}),ia(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Cce(n){n=(0,L.m9)(n);const t=new GL(()=>{}),e=new hC(t);return function ice(n,t,e){const i=function Nle(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(_,b)=>{const E=Js(_,e);i=i||Yh(b,E)});let r=n.syncPointTree_.get(e);r?i=i||Yh(r,Nn()):(r=new e4,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new qh(i,!0,!1):null;return function vle(n){return UI(n.viewCache_)}(t4(r,t,jI(n.pendingWriteTree_,t._path),s?c.getNode():rn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=Fi(r).withIndex(t._queryParams.getIndex());let c;if(DL(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=iC(n.serverSyncTree_,t._path,s);else{const d=rC(n.serverSyncTree_,t);c=a4(n.serverSyncTree_,t._path,s,d)}return ia(n.eventQueue_,t._path,c),ZI(n.serverSyncTree_,t,e,null,!0),s},r=>(Av(n,"get for query "+(0,L.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Qm(i,new nl(n._repo,n._path),n._queryParams.getIndex()))}class hC{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new T4("value",this,new Qm(t.snapshotNode,new nl(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new A4(this,t,e):null}matches(t){return t instanceof hC&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class aT{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new A4(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=Xm(new nl(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new T4(t.type,this,new Qm(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof aT&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=e,_=(b,E)=>{BL(n._repo,n,d),f(b,E)};_.userCallback=e.userCallback,_.context=e.context,e=_}const c=new GL(e,s||void 0),d="value"===t?new hC(c):new aT(t,c);return function cce(n,t,e){let i;i=".info"===dn(t._path)?DL(n.infoSyncTree_,t,e):DL(n.serverSyncTree_,t,e),v4(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>BL(n._repo,n,d)}function $L(n,t,e,i){return fC(n,"value",t,e,i)}function P4(n,t,e,i){return fC(n,"child_added",t,e,i)}function N4(n,t,e,i){return fC(n,"child_changed",t,e,i)}function F4(n,t,e,i){return fC(n,"child_moved",t,e,i)}function L4(n,t,e,i){return fC(n,"child_removed",t,e,i)}function B4(n,t,e){let i=null;const r=e?new GL(e):null;"value"===t?i=new hC(r):t&&(i=new aT(t,r)),BL(n._repo,n,i)}class ql{}class V4 extends ql{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){jc("endAt",this._value,t._path,!0);const e=oL(t._queryParams,this._value,this._key);if(oT(e),Xh(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(t._repo,t._path,e,t._orderByCalled)}}class Ece extends ql{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){jc("endBefore",this._value,t._path,!1);const e=function Pae(n,t,e){let i,r;return n.index_===Uc?("string"==typeof t&&(t=Rq(t)),r=oL(n,t,e)):(i=null==e?td:Rq(e),r=oL(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(oT(e),Xh(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(t._repo,t._path,e,t._orderByCalled)}}class H4 extends ql{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){jc("startAt",this._value,t._path,!0);const e=sL(t._queryParams,this._value,this._key);if(oT(e),Xh(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(t._repo,t._path,e,t._orderByCalled)}}class Mce extends ql{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){jc("startAfter",this._value,t._path,!1);const e=function Oae(n,t,e){let i;if(n.index_===Uc)"string"==typeof t&&(t=kq(t)),i=sL(n,t,e);else{let r;r=null==e?Hc:kq(e),i=sL(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(oT(e),Xh(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(t._repo,t._path,e,t._orderByCalled)}}class Tce extends ql{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(t._repo,t._path,function kae(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class kce extends ql{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(t._repo,t._path,function Rae(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Oce extends ql{constructor(t){super(),this._path=t}_apply(t){sT(t,"orderByChild");const e=new Fn(this._path);if(hn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new tL(e),r=FI(t._queryParams,i);return Xh(r),new Co(t._repo,t._path,r,!0)}}class Nce extends ql{_apply(t){sT(t,"orderByKey");const e=FI(t._queryParams,Uc);return Xh(e),new Co(t._repo,t._path,e,!0)}}class Lce extends ql{_apply(t){sT(t,"orderByPriority");const e=FI(t._queryParams,si);return Xh(e),new Co(t._repo,t._path,e,!0)}}class Vce extends ql{_apply(t){sT(t,"orderByValue");const e=FI(t._queryParams,nL);return Xh(e),new Co(t._repo,t._path,e,!0)}}class Uce extends ql{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(jc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new V4(this._value,this._key)._apply(new H4(this._value,this._key)._apply(t))}}function Wl(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function Cle(n){(0,L.hu)(!qI,"__referenceConstructor has already been defined"),qI=n})(nl),function Mle(n){(0,L.hu)(!YI,"__referenceConstructor has already been defined"),YI=n}(nl);const qL={};function j4(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Vc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Br("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,_,c=jL(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(f=!0,s=`http://${_}?ns=${d.namespace}`,c=jL(s,r),d=c.repoInfo):f=!c.repoInfo.secure;const b=r&&f?new $w($w.OWNER):new Foe(n.name,n.options,t);_4("Invalid Firebase Database URL",c),hn(c.path)||Vc("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function qce(n,t,e,i){let r=qL[t.name];r||(r={},qL[t.name]=r);let s=r[n.toURLString()];return s&&Vc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new ece(n,false,e,i),r[n.toURLString()]=s,s}(d,n,b,new Noe(n.name,e));return new Yce(E,n)}class Yce{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function tce(n,t,e){if(n.stats_=qF(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new LI(n.repoInfo_,(i,r,s,c)=>{C4(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>D4(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new qm(n.repoInfo_,t,(i,r,s,c)=>{C4(n,i,r,s,c)},i=>{D4(n,i)},i=>{!function nce(n,t){Vr(t,(e,i)=>{FL(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Voe(n,t){const e=n.toString();return $F[e]||($F[e]=t()),$F[e]}(n.repoInfo_,()=>new Hae(n.stats_,n.server_)),n.infoData_=new Nae,n.infoSyncTree_=new o4({startListening:(i,r,s,c)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=iC(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),FL(n,"connected",!1),n.serverSyncTree_=new o4({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,f)=>{const _=c(d,f);ia(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nl(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $ce(n,t){const e=qL[t];(!e||e[n.key]!==n)&&Vc(`Database ${t}(${n.repoInfo_}) has already been deleted.`),S4(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Vc("Cannot call "+t+" on a deleted database.")}}function G4(){aq.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Zce(){G4(),zh.forceDisallow()}function Kce(){G4(),wv.forceDisallow(),zh.forceAllow()}function eue(n,t){U6(n,t)}const nue={".sv":"timestamp"};class sue{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qm.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},qm.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function tue(n){F6(Gs.SDK_VERSION),(0,Gs._registerComponent)(new Hl.wA("database",(t,{instanceIdentifier:e})=>j4(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Gs.registerVersion)(P6,"0.13.5",n),(0,Gs.registerVersion)(P6,"0.13.5","esm2017")}();const cue=new Vl.Yd("@firebase/database-compat"),z4=function(n){cue.warn("FIREBASE WARNING: "+n)};class hue{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,z4("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class fue{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Jh{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),uC("DataSnapshot.child","path",t,!1),new Jh(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),uC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Jh(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ra(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ss{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const c=ss.getCancelAndContextArgs_("Query.on",i,r),d=(_,b)=>{e.call(c.context,new Jh(this.database,_),b)};d.userCallback=e,d.context=c.context;const f=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return $L(this._delegate,d,f),e;case"child_added":return P4(this._delegate,d,f),e;case"child_removed":return L4(this._delegate,d,f),e;case"child_changed":return N4(this._delegate,d,f),e;case"child_moved":return F4(this._delegate,d,f),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,B4(this._delegate,t,r)}else B4(this._delegate,t)}get(){return Cce(this._delegate).then(t=>new Jh(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const s=ss.getCancelAndContextArgs_("Query.once",i,r),c=new L.BH,d=(_,b)=>{const E=new Jh(this.database,_);e&&e.call(s.context,E,b),c.resolve(E)};d.userCallback=e,d.context=s.context;const f=_=>{s.cancel&&s.cancel.call(s.context,_),c.reject(_)};switch(t){case"value":$L(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":P4(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":L4(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":N4(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":F4(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ss(this.database,Wl(this._delegate,function Ace(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Tce(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ss(this.database,Wl(this._delegate,function Rce(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kce(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ss(this.database,Wl(this._delegate,function Pce(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return uC("orderByChild","path",n,!1),new Oce(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ss(this.database,Wl(this._delegate,function Fce(){return new Nce}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ss(this.database,Wl(this._delegate,function Bce(){return new Lce}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ss(this.database,Wl(this._delegate,function Hce(){return new Vce}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ss(this.database,Wl(this._delegate,function xce(n=null,t){return cC("startAt","key",t,!0),new H4(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ss(this.database,Wl(this._delegate,function Ice(n,t){return cC("startAfter","key",t,!0),new Mce(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ss(this.database,Wl(this._delegate,function Dce(n,t){return cC("endAt","key",t,!0),new V4(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ss(this.database,Wl(this._delegate,function Sce(n,t){return cC("endBefore","key",t,!0),new Ece(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ss(this.database,Wl(this._delegate,function jce(n,t){return cC("equalTo","key",t,!0),new Uce(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof ss))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new ra(this.database,new nl(this._delegate._repo,this._delegate._path))}}class ra extends ss{constructor(t,e){super(t,new Co(e._repo,e._path,new NI,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new ra(this.database,Xm(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new ra(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ra(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=zL(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,z4("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tl("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=wce(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function bce(n,t,e){if(tl("setWithPriority",n._path),jc("setWithPriority",t,n._path,!1),NL("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return LL(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function vce(n){return tl("remove",n._path),zL(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function oue(n,t,e){var i;if(n=(0,L.m9)(n),tl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new L.BH,d=$L(n,()=>{});return function dce(n,t,e,i,r,s){Av(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:B6(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=VL(n,t,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{lC("transaction failed: Data returned ",f,c.path),c.status=0;const _=XI(n.transactionQueueTree_,t),b=Km(_)||[];let E;b.push(c),RL(_,b),"object"==typeof f&&null!==f&&(0,L.r3)(f,".priority")?(E=(0,L.DV)(f,".priority"),(0,L.hu)(aC(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(KI(n.serverSyncTree_,t)||rn.EMPTY_NODE).getPriority().val();const T=dC(n),P=Fi(f,E),F=TL(P,d,T);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=F,c.currentWriteId=nT(n);const z=CL(n.serverSyncTree_,t,F,c.currentWriteId,c.applyLocally);ia(n.eventQueue_,t,z),iT(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,_,b)=>{let E=null;f?s.reject(f):(E=new Qm(b,new nl(n._repo,n._path),si),s.resolve(new sue(_,E)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new fue(s.committed,new Jh(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function yce(n,t){n=(0,L.m9)(n),tl("setPriority",n._path),NL("setPriority",t,!1);const e=new L.BH;return LL(n._repo,Ti(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function _ce(n,t){n=(0,L.m9)(n),tl("push",n._path),jc("push",t,n._path,!0);const e=w4(n._repo),i=Mae(e),r=Xm(n,i),s=Xm(n,i);let c;return c=null!=t?zL(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new ra(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new ra(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return tl("Reference.onDisconnect",this._delegate._path),new hue(new k4(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class pC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Zce,forceLongPolling:Kce}}useEmulator(t,e,i={}){!function Qce(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Vc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Vc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new $w($w.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new $w(c)}!function zce(n,t,e,i){n.repoInfo_=new GF(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof ra){const e=O4(this._delegate,t.toString());return new ra(this,e)}{const e=R4(this._delegate,t);return new ra(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=O4(this._delegate,t);return new ra(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function Xce(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),S4(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function Jce(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function uce(n){n.persistentConnection_&&n.persistentConnection_.resume(b4)}(n._repo)}(this._delegate)}}pC.ServerValue={TIMESTAMP:function iue(){return nue}(),increment:n=>function rue(n){return{".sv":{increment:n}}}(n)};var mue=Object.freeze({__proto__:null,initStandalone:function pue({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){F6(e);const c=new Hl.zt("auth-internal",new Hl.H0("database-standalone"));return c.setComponent(new Hl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new pC(j4(n,c,void 0,t,s),n),namespace:r}}});const gue=pC.ServerValue;function $4(n){return null==n}function q4(n){return"function"==typeof n.set}function W4(n,t){return q4(t)?t:n.ref(t)}function Y4(n,t){if(function vue(n){return"string"==typeof n}(n))return t.stringCase();if(q4(n))return t.firebaseCase();if(function yue(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function mC(n,t,e="on",i=Pa.z){return new pi.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,w.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,xS.B)())}function Z4(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function Cue(n,t){const{payload:e,prevKey:i,key:r}=t,s=Z4(n,r),c=function wue(n,t){if($4(t))return 0;{const e=Z4(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const _={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function K4(n){return($4(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Q4(n,t,e){return function bue(n,t,e){return mC(n,"value","once",e).pipe(Yn(i=>{const r=[ct(i)];return t.forEach(s=>r.push(mC(n,s,"on",e))),(0,Zr.T)(...r).pipe(Jp(Cue,[]))}),B())}(n,t=K4(t),e)}function X4(n,t,e){const i=(t=K4(t)).map(r=>mC(n,r,"on",e));return(0,Zr.T)(...i)}function J4(n,t){return function(i,r){return Y4(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function xue(n){return function(e){return e?Y4(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function e5(n,t){return function(){return mC(n,"value","on",t)}}!function _ue(n){n.INTERNAL.registerComponent(new Hl.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new pC(r,i)},"PUBLIC").setServiceProps({Reference:ra,Query:ss,Database:pC,DataSnapshot:Jh,enableLogging:eue,INTERNAL:mue,ServerValue:gue}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(rO.Z);const Tue=new l.OlP("angularfire2.realtimeDatabaseURL"),Aue=new l.OlP("angularfire2.database.use-emulator");let kue=(()=>{class n{constructor(e,i,r,s,c,d,f,_,b,E,T,P,F,z,te){this.schedulers=d;const Ve=f,Ze=(0,vr.on)(e,c,i);_&&CN(Ze,c,b,T,P,F,E,z),this.database=(0,vr.cc)(`${Ze.name}.database.${r}`,"AngularFireDatabase",Ze.name,()=>{const it=c.runOutsideAngular(()=>Ze.database(r||void 0));return Ve&&it.useEmulator(...Ve),it},[Ve])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>W4(this.database,e));let s=r;return i&&(s=i(r)),function Mue(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:J4(i,"update"),set:J4(i,"set"),push:r=>i.push(r),remove:xue(i),snapshotChanges:r=>Q4(n,r,e).pipe(Pn.iC),stateChanges:r=>X4(n,r,e).pipe(Pn.iC),auditTrail:r=>function Due(n,t,e){return function Sue(n,t,e){return function Eue(n,t){return mC(n,"value","on",t).pipe((0,w.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function Doe(...n){const t=(0,Ns.jO)(n);return(0,hi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,Ie.Xf)(n[f]).subscribe((0,jn.x)(i,_=>{s[f]=_,!d&&!c[f]&&(c[f]=!0,(d=c.every(k.y))&&(c=null))},nt.Z));e.subscribe((0,jn.x)(i,f=>{if(d){const _=[f,...s];i.next(t?t(..._):_)}}))})}(t),(0,w.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function Eoe(n){return(0,hi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,jn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,w.U)(r=>r.actions))}(n,X4(n,t).pipe(Jp((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Pn.iC),valueChanges:(r,s)=>Q4(n,r,e).pipe((0,w.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),Pn.iC)}}(s,this)}object(e){return function Iue(n,t){return{query:n,snapshotChanges:()=>e5(n,t.schedulers.outsideAngular)().pipe(Pn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>e5(n,t.schedulers.outsideAngular)().pipe(Pn.iC,(0,w.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>W4(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vr.Dh),l.LFG(vr.xv,8),l.LFG(Tue,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Pn.HU),l.LFG(Aue,8),l.LFG(Cw,8),l.LFG(gN,8),l.LFG(_N,8),l.LFG(vN,8),l.LFG(yN,8),l.LFG(bN,8),l.LFG(wN,8),l.LFG(ww,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rue=(()=>{class n{constructor(){NM.Z.registerVersion("angularfire",Pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[kue]}),n})();const Oue=[vr.hO.initializeApp({apiKey:"AIzaSyAzlxDp3ucE_FKnYkeKkcocgH2dUibaq-Q",authDomain:"ng-firebase-auth-89ce3.firebaseapp.com",databaseURL:"https://ng-firebase-auth-89ce3.firebaseio.com",projectId:"ng-firebase-auth-89ce3",storageBucket:"ng-firebase-auth-89ce3.appspot.com",messagingSenderId:"145209534336",appId:"1:145209534336:web:e347cabaee4a4f824c8365",measurementId:"G-PC1JQLENEP"}),IJ,FJ,Coe,Rue];let Pue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[Pne]}),n.\u0275inj=l.cJS({providers:[Vh,ua],imports:[xn,One,Ore,Oue,tZ,IE,lh]}),n})();(0,l.G48)(),lf().bootstrapModule(Pue).catch(n=>console.error(n))},5867:(vt,Oe,V)=>{V.d(Oe,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=V(9681);(0,l.registerVersion)("firebase","9.9.3","app")},127:(vt,Oe,V)=>{V.d(Oe,{Z:()=>l.Z});var l=V(3942);l.Z.registerVersion("firebase","9.9.3","app-compat")},5881:(vt,Oe,V)=>{V.r(Oe);var l=V(5861),j=V(3942),N=V(6457),ue=V(2090),oe=(V(9681),V(1877),V(4859));function ge(){return window}function Y(){return(Y=(0,l.Z)(function*(J,Z,$){var Ee;const{BuildInfo:We}=ge();(0,N.aq)(Z.sessionId,"AuthEvent did not contain a session ID");const ke=yield ve(Z.sessionId),Qe={};return(0,N.ar)()?Qe.ibi=We.packageName:(0,N.as)()?Qe.apn=We.packageName:(0,N.at)(J,"operation-not-supported-in-this-environment"),We.displayName&&(Qe.appDisplayName=We.displayName),Qe.sessionId=ke,(0,N.au)(J,$,Z.type,void 0,null!==(Ee=Z.eventId)&&void 0!==Ee?Ee:void 0,Qe)})).apply(this,arguments)}function $e(){return($e=(0,l.Z)(function*(J){const{BuildInfo:Z}=ge(),$={};(0,N.ar)()?$.iosBundleId=Z.packageName:(0,N.as)()?$.androidPackageName=Z.packageName:(0,N.at)(J,"operation-not-supported-in-this-environment"),yield(0,N.av)(J,$)})).apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(J,Z,$){const{cordova:Ee}=ge();let We=()=>{};try{yield new Promise((ke,Qe)=>{let Dt=null;function qt(){var Ht;ke();const gn=null===(Ht=Ee.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof gn&&gn(),"function"==typeof $?.close&&$.close()}function li(){Dt||(Dt=window.setTimeout(()=>{Qe((0,N.aw)(J,"redirect-cancelled-by-user"))},2e3))}function Sn(){"visible"===document?.visibilityState&&li()}Z.addPassiveListener(qt),document.addEventListener("resume",li,!1),(0,N.as)()&&document.addEventListener("visibilitychange",Sn,!1),We=()=>{Z.removePassiveListener(qt),document.removeEventListener("resume",li,!1),document.removeEventListener("visibilitychange",Sn,!1),Dt&&window.clearTimeout(Dt)}})}finally{We()}})).apply(this,arguments)}function ve(J){return at.apply(this,arguments)}function at(){return(at=(0,l.Z)(function*(J){const Z=lt(J),$=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array($)).map(We=>We.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lt(J){if((0,N.aq)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(J);const Z=new ArrayBuffer(J.length),$=new Uint8Array(Z);for(let Ee=0;Ee<J.length;Ee++)$[Ee]=J.charCodeAt(Ee);return $}class Pe extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach($=>$(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,l.Z)(function*(){yield Z.initPromise})()}}function ce(J){return pe.apply(this,arguments)}function pe(){return(pe=(0,l.Z)(function*(J){const Z=yield se()._get(_e(J));return Z&&(yield se()._remove(_e(J))),Z})).apply(this,arguments)}function ne(){const J=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const Ee=Math.floor(Math.random()*Z.length);J.push(Z.charAt(Ee))}return J.join("")}function se(){return(0,N.ay)(N.b)}function _e(J){return(0,N.az)("authEvent",J.config.apiKey,J.name)}function je(J){if(!J?.includes("?"))return{};const[Z,...$]=J.split("?");return(0,ue.zd)($.join("?"))}function et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function en(){var J;return(null===(J=self?.location)||void 0===J?void 0:J.protocol)||null}function $i(J=(0,ue.z$)()){return!("file:"!==en()&&"ionic:"!==en()&&"capacitor:"!==en()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){try{const J=self.localStorage,Z=N.aI();if(J)return J.setItem(Z,"1"),J.removeItem(Z),!function os(J=(0,ue.z$)()){return function qi(){return(0,ue.w1)()&&11===document?.documentMode}()||function Ln(J=(0,ue.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,ue.hl)()}catch{return wr()&&(0,ue.hl)()}return!1}function wr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function Gt(){return"http:"===en()||"https:"===en()}()||(0,ue.ru)()||$i())&&!function eo(){return(0,ue.b$)()||(0,ue.UG)()}()&&br()&&!wr()}function as(){return $i()&&typeof document<"u"}function kn(){return(kn=(0,l.Z)(function*(){return!!as()&&new Promise(J=>{const Z=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),J(!0)})})})).apply(this,arguments)}const mn={LOCAL:"local",NONE:"none",SESSION:"session"},yi=N.ax,Yi="persistence";function En(J){return ir.apply(this,arguments)}function ir(){return(ir=(0,l.Z)(function*(J){yield J._initializationPromise;const Z=pt(),$=N.az(Yi,J.config.apiKey,J.name);Z&&Z.setItem($,J._getPersistence())})).apply(this,arguments)}function pt(){var J;try{return(null===(J=function Wi(){return typeof window<"u"?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch{return null}}const ut=N.ax;class Bn{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class an{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var $=this;return(0,l.Z)(function*(){const Ee=Z._key();let We=$.eventManagers.get(Ee);return We||(We=new Pe(Z),$.eventManagers.set(Ee,We),$.attachCallbackListeners(Z,We)),We})()}_openPopup(Z){(0,N.at)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,$,Ee,We){var ke=this;return(0,l.Z)(function*(){!function De(J){var Z,$,Ee,We,ke,Qe,Dt,qt,li,Sn;const Ht=ge();(0,N.ax)("function"==typeof(null===(Z=Ht?.universalLinks)||void 0===Z?void 0:Z.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===($=Ht?.BuildInfo)||void 0===$?void 0:$.packageName)<"u",J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(ke=null===(We=null===(Ee=Ht?.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===We?void 0:We.browsertab)||void 0===ke?void 0:ke.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(qt=null===(Dt=null===(Qe=Ht?.cordova)||void 0===Qe?void 0:Qe.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===qt?void 0:qt.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Sn=null===(li=Ht?.cordova)||void 0===li?void 0:li.InAppBrowser)||void 0===Sn?void 0:Sn.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const Qe=yield ke._initialize(Z);yield Qe.initialized(),Qe.resetRedirect(),(0,N.aD)(),yield ke._originValidation(Z);const Dt=function Me(J,Z,$=null){return{type:Z,eventId:$,urlResponse:null,sessionId:ne(),postBody:null,tenantId:J.tenantId,error:(0,N.aw)(J,"no-auth-event")}}(Z,Ee,We);yield function Ke(J,Z){return se()._set(_e(J),Z)}(Z,Dt);const qt=yield function W(J,Z,$){return Y.apply(this,arguments)}(Z,Dt,$),li=yield function Fe(J){const{cordova:Z}=ge();return new Promise($=>{Z.plugins.browsertab.isAvailable(Ee=>{let We=null;Ee?Z.plugins.browsertab.openUrl(J):We=Z.InAppBrowser.open(J,(0,N.ap)()?"_blank":"_system","location=yes"),$(We)})})}(qt);return function xe(J,Z,$){return ht.apply(this,arguments)}(Z,Qe,li)})()}_isIframeWebStorageSupported(Z,$){throw new Error("Method not implemented.")}_originValidation(Z){const $=Z._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function re(J){return $e.apply(this,arguments)}(Z)),this.originValidationPromises[$]}attachCallbackListeners(Z,$){const{universalLinks:Ee,handleOpenURL:We,BuildInfo:ke}=ge(),Qe=setTimeout((0,l.Z)(function*(){yield ce(Z),$.onEvent(et())}),500),Dt=function(){var Sn=(0,l.Z)(function*(Ht){clearTimeout(Qe);const gn=yield ce(Z);let Do=null;gn&&Ht?.url&&(Do=function we(J,Z){var $,Ee;const We=function Ue(J){const Z=je(J),$=Z.link?decodeURIComponent(Z.link):void 0,Ee=je($).link,We=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return je(We).link||We||Ee||$||J}(Z);if(We.includes("/__/auth/callback")){const ke=je(We),Qe=ke.firebaseError?function de(J){try{return JSON.parse(J)}catch{return null}}(decodeURIComponent(ke.firebaseError)):null,Dt=null===(Ee=null===($=Qe?.code)||void 0===$?void 0:$.split("auth/"))||void 0===Ee?void 0:Ee[1],qt=Dt?(0,N.aw)(Dt):null;return qt?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:qt,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:We,postBody:null}}return null}(gn,Ht.url)),$.onEvent(Do||et())});return function(gn){return Sn.apply(this,arguments)}}();typeof Ee<"u"&&"function"==typeof Ee.subscribe&&Ee.subscribe(null,Dt);const qt=We,li=`${ke.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var Sn=(0,l.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(li)&&Dt({url:Ht}),"function"==typeof qt)try{qt(Ht)}catch(gn){console.error(gn)}});return function(Ht){return Sn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Z){var $=this;return(0,l.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,$,Ee,We){var ke=this;return(0,l.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openPopup(Z,$,Ee,We)})()}_openRedirect(Z,$,Ee,We){var ke=this;return(0,l.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openRedirect(Z,$,Ee,We)})()}_isIframeWebStorageSupported(Z,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,$)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return as()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,l.Z)(function*(){if(Z.underlyingResolver)return;const $=yield function bt(){return kn.apply(this,arguments)}();Z.underlyingResolver=$?Z.cordovaResolver:Z.browserResolver})()}}function rr(J){return J.unwrap()}function zt(J){return sr(J)}function sr(J){const{_tokenResponse:Z}=J instanceof ue.ZR?J.customData:J;if(!Z)return null;if(!(J instanceof ue.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return N.P.credentialFromResult(J);const $=Z.providerId;if(!$||$===N.o.PASSWORD)return null;let Ee;switch($){case N.o.GOOGLE:Ee=N.Q;break;case N.o.FACEBOOK:Ee=N.N;break;case N.o.GITHUB:Ee=N.T;break;case N.o.TWITTER:Ee=N.W;break;default:const{oauthIdToken:We,oauthAccessToken:ke,oauthTokenSecret:Qe,pendingToken:Dt,nonce:qt}=Z;return ke||Qe||We||Dt?Dt?$.startsWith("saml.")?N.aL._create($,Dt):N.J._fromParams({providerId:$,signInMethod:$,pendingToken:Dt,idToken:We,accessToken:ke}):new N.U($).credential({idToken:We,accessToken:ke,rawNonce:qt}):null}return J instanceof ue.ZR?Ee.credentialFromError(J):Ee.credentialFromResult(J)}function Pt(J,Z){return Z.catch($=>{throw $ instanceof ue.ZR&&function Hn(J,Z){var $,Ee;const We=null===($=Z.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ee=Z)||void 0===Ee?void 0:Ee.code))Z.resolver=new ee(J,N.an(J,Z));else if(We){const ke=sr(Z),Qe=Z;ke&&(Qe.credential=ke,Qe.tenantId=We.tenantId||void 0,Qe.email=We.email||void 0,Qe.phoneNumber=We.phoneNumber||void 0)}}(J,$),$}).then($=>{const We=$.user;return{operationType:$.operationType,credential:zt($),additionalUserInfo:N.al($),user:q.getOrCreate(We)}})}function Cr(J,Z){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(J,Z){const $=yield Z;return{verificationId:$.verificationId,confirm:Ee=>Pt(J,$.confirm(Ee))}})).apply(this,arguments)}class ee{constructor(Z,$){this.resolver=$,this.auth=function Vn(J){return J.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return Pt(rr(this.auth),this.resolver.resolveSignIn(Z))}}class q{constructor(Z){this._delegate=Z,this.multiFactor=N.ao(Z)}static getOrCreate(Z){return q.USER_MAP.has(Z)||q.USER_MAP.set(Z,new q(Z)),q.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var $=this;return(0,l.Z)(function*(){return Pt($.auth,N.Z($._delegate,Z))})()}linkWithPhoneNumber(Z,$){var Ee=this;return(0,l.Z)(function*(){return Cr(Ee.auth,N.l(Ee._delegate,Z,$))})()}linkWithPopup(Z){var $=this;return(0,l.Z)(function*(){return Pt($.auth,N.d($._delegate,Z,Bn))})()}linkWithRedirect(Z){var $=this;return(0,l.Z)(function*(){return yield En(N.aE($.auth)),N.g($._delegate,Z,Bn)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var $=this;return(0,l.Z)(function*(){return Pt($.auth,N._($._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,$){return Cr(this.auth,N.r(this._delegate,Z,$))}reauthenticateWithPopup(Z){return Pt(this.auth,N.e(this._delegate,Z,Bn))}reauthenticateWithRedirect(Z){var $=this;return(0,l.Z)(function*(){return yield En(N.aE($.auth)),N.h($._delegate,Z,Bn)})()}sendEmailVerification(Z){return N.ab(this._delegate,Z)}unlink(Z){var $=this;return(0,l.Z)(function*(){return yield N.ak($._delegate,Z),$})()}updateEmail(Z){return N.ag(this._delegate,Z)}updatePassword(Z){return N.ah(this._delegate,Z)}updatePhoneNumber(Z){return N.u(this._delegate,Z)}updateProfile(Z){return N.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,$){return N.ac(this._delegate,Z,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}q.USER_MAP=new WeakMap;const G=N.ax;let K=(()=>{class J{constructor($,Ee){if(this.app=$,Ee.isInitialized())return this._delegate=Ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:We}=$.options;G(We,"invalid-api-key",{appName:$.name}),G(We,"invalid-api-key",{appName:$.name});const ke=typeof window<"u"?Bn:void 0;this._delegate=Ee.initialize({options:{persistence:Ae(We,$.name),popupRedirectResolver:ke}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?q.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,Ee){N.G(this._delegate,$,Ee)}applyActionCode($){return N.a2(this._delegate,$)}checkActionCode($){return N.a3(this._delegate,$)}confirmPasswordReset($,Ee){return N.a1(this._delegate,$,Ee)}createUserWithEmailAndPassword($,Ee){var We=this;return(0,l.Z)(function*(){return Pt(We._delegate,N.a5(We._delegate,$,Ee))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return N.aa(this._delegate,$)}isSignInWithEmailLink($){return N.a8(this._delegate,$)}getRedirectResult(){var $=this;return(0,l.Z)(function*(){G(Kn(),$._delegate,"operation-not-supported-in-this-environment");const Ee=yield N.j($._delegate,Bn);return Ee?Pt($._delegate,Promise.resolve(Ee)):{credential:null,user:null}})()}addFrameworkForLogging($){!function An(J,Z){(0,N.aE)(J)._logFramework(Z)}(this._delegate,$)}onAuthStateChanged($,Ee,We){const{next:ke,error:Qe,complete:Dt}=X($,Ee,We);return this._delegate.onAuthStateChanged(ke,Qe,Dt)}onIdTokenChanged($,Ee,We){const{next:ke,error:Qe,complete:Dt}=X($,Ee,We);return this._delegate.onIdTokenChanged(ke,Qe,Dt)}sendSignInLinkToEmail($,Ee){return N.a7(this._delegate,$,Ee)}sendPasswordResetEmail($,Ee){return N.a0(this._delegate,$,Ee||void 0)}setPersistence($){var Ee=this;return(0,l.Z)(function*(){let We;switch(function bi(J,Z){yi(Object.values(mn).includes(Z),J,"invalid-persistence-type"),(0,ue.b$)()?yi(Z!==mn.SESSION,J,"unsupported-persistence-type"):(0,ue.UG)()?yi(Z===mn.NONE,J,"unsupported-persistence-type"):wr()?yi(Z===mn.NONE||Z===mn.LOCAL&&(0,ue.hl)(),J,"unsupported-persistence-type"):yi(Z===mn.NONE||br(),J,"unsupported-persistence-type")}(Ee._delegate,$),$){case mn.SESSION:We=N.a;break;case mn.LOCAL:We=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case mn.NONE:We=N.L;break;default:return N.at("argument-error",{appName:Ee._delegate.name})}return Ee._delegate.setPersistence(We)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return Pt(this._delegate,N.X(this._delegate))}signInWithCredential($){return Pt(this._delegate,N.Y(this._delegate,$))}signInWithCustomToken($){return Pt(this._delegate,N.$(this._delegate,$))}signInWithEmailAndPassword($,Ee){return Pt(this._delegate,N.a6(this._delegate,$,Ee))}signInWithEmailLink($,Ee){return Pt(this._delegate,N.a9(this._delegate,$,Ee))}signInWithPhoneNumber($,Ee){return Cr(this._delegate,N.s(this._delegate,$,Ee))}signInWithPopup($){var Ee=this;return(0,l.Z)(function*(){return G(Kn(),Ee._delegate,"operation-not-supported-in-this-environment"),Pt(Ee._delegate,N.c(Ee._delegate,$,Bn))})()}signInWithRedirect($){var Ee=this;return(0,l.Z)(function*(){return G(Kn(),Ee._delegate,"operation-not-supported-in-this-environment"),yield En(Ee._delegate),N.f(Ee._delegate,$,Bn)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return N.a4(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=mn,J})();function X(J,Z,$){let Ee=J;"function"!=typeof J&&({next:Ee,error:Z,complete:$}=J);const We=Ee;return{next:Qe=>We(Qe&&q.getOrCreate(Qe)),error:Z,complete:$}}function Ae(J,Z){const $=function Rn(J,Z){const $=pt();if(!$)return[];const Ee=N.az(Yi,J,Z);switch($.getItem(Ee)){case mn.NONE:return[N.L];case mn.LOCAL:return[N.i,N.a];case mn.SESSION:return[N.a];default:return[]}}(J,Z);if(typeof self<"u"&&!$.includes(N.i)&&$.push(N.i),typeof window<"u")for(const Ee of[N.b,N.a])$.includes(Ee)||$.push(Ee);return $.includes(N.L)||$.push(N.L),$}class Ye{constructor(){this.providerId="phone",this._delegate=new N.P(rr(j.Z.auth()))}static credential(Z,$){return N.P.credential(Z,$)}verifyPhoneNumber(Z,$){return this._delegate.verifyPhoneNumber(Z,$)}unwrap(){return this._delegate}}Ye.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ye.PROVIDER_ID=N.P.PROVIDER_ID;const Mt=N.ax;class bn{constructor(Z,$,Ee=j.Z.app()){var We;Mt(null===(We=Ee.options)||void 0===We?void 0:We.apiKey,"invalid-api-key",{appName:Ee.name}),this._delegate=new N.R(Z,$,Ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ai(J){J.INTERNAL.registerComponent(new oe.wA("auth-compat",Z=>{const $=Z.getProvider("app-compat").getImmediate(),Ee=Z.getProvider("auth");return new K($,Ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:Ye,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:bn,TwitterAuthProvider:N.W,Auth:K,AuthCredential:N.H,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.18")}(j.Z)},9751:(vt,Oe,V)=>{V.d(Oe,{y:()=>ge});var l=V(930),j=V(727),N=V(8822),ue=V(9635),he=V(2416),ye=V(576),oe=V(2806);let ge=(()=>{class re{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const xe=new re;return xe.source=this,xe.operator=Fe,xe}subscribe(Fe,xe,ht){const De=function Y(re){return re&&re instanceof l.Lv||function W(re){return re&&(0,ye.m)(re.next)&&(0,ye.m)(re.error)&&(0,ye.m)(re.complete)}(re)&&(0,j.Nn)(re)}(Fe)?Fe:new l.Hp(Fe,xe,ht);return(0,oe.x)(()=>{const{operator:ve,source:at}=this;De.add(ve?ve.call(De,at):at?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(xe){Fe.error(xe)}}forEach(Fe,xe){return new(xe=Ce(xe))((ht,De)=>{const ve=new l.Hp({next:at=>{try{Fe(at)}catch(lt){De(lt),ve.unsubscribe()}},error:De,complete:ht});this.subscribe(ve)})}_subscribe(Fe){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Fe)}[N.L](){return this}pipe(...Fe){return(0,ue.U)(Fe)(this)}toPromise(Fe){return new(Fe=Ce(Fe))((xe,ht)=>{let De;this.subscribe(ve=>De=ve,ve=>ht(ve),()=>xe(De))})}}return re.create=$e=>new re($e),re})();function Ce(re){var $e;return null!==($e=re??he.v.Promise)&&void 0!==$e?$e:Promise}},7579:(vt,Oe,V)=>{V.d(Oe,{x:()=>oe});var l=V(9751),j=V(727);const ue=(0,V(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=V(8737),ye=V(2806);let oe=(()=>{class Ce extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const re=new ge(this,this);return re.operator=Y,re}_throwIfClosed(){if(this.closed)throw new ue}next(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(Y)}})}error(Y){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:re}=this;for(;re.length;)re.shift().error(Y)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:re,isStopped:$e,observers:Fe}=this;return re||$e?j.Lc:(this.currentObservers=null,Fe.push(Y),new j.w0(()=>{this.currentObservers=null,(0,he.P)(Fe,Y)}))}_checkFinalizedStatuses(Y){const{hasError:re,thrownError:$e,isStopped:Fe}=this;re?Y.error($e):Fe&&Y.complete()}asObservable(){const Y=new l.y;return Y.source=this,Y}}return Ce.create=(W,Y)=>new ge(W,Y),Ce})();class ge extends oe{constructor(W,Y){super(),this.destination=W,this.source=Y}next(W){var Y,re;null===(re=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===re||re.call(Y,W)}error(W){var Y,re;null===(re=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===re||re.call(Y,W)}complete(){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===Y||Y.call(W)}_subscribe(W){var Y,re;return null!==(re=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(W))&&void 0!==re?re:j.Lc}}},930:(vt,Oe,V)=>{V.d(Oe,{Hp:()=>ht,Lv:()=>re});var l=V(576),j=V(727),N=V(2416),ue=V(7849),he=V(5032);const ye=Ce("C",void 0,void 0);function Ce(Ne,Pe,Me){return{kind:Ne,value:Pe,error:Me}}var W=V(3410),Y=V(2806);class re extends j.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,j.Nn)(Pe)&&Pe.add(this)):this.destination=lt}static create(Pe,Me,Ke){return new ht(Pe,Me,Ke)}next(Pe){this.isStopped?at(function ge(Ne){return Ce("N",Ne,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?at(function oe(Ne){return Ce("E",void 0,Ne)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?at(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Fe(Ne,Pe){return $e.call(Ne,Pe)}class xe{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Pe)}catch(Ke){De(Ke)}}error(Pe){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Pe)}catch(Ke){De(Ke)}else De(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Me){De(Me)}}}class ht extends re{constructor(Pe,Me,Ke){let ce;if(super(),(0,l.m)(Pe)||!Pe)ce={next:Pe??void 0,error:Me??void 0,complete:Ke??void 0};else{let pe;this&&N.v.useDeprecatedNextContext?(pe=Object.create(Pe),pe.unsubscribe=()=>this.unsubscribe(),ce={next:Pe.next&&Fe(Pe.next,pe),error:Pe.error&&Fe(Pe.error,pe),complete:Pe.complete&&Fe(Pe.complete,pe)}):ce=Pe}this.destination=new xe(ce)}}function De(Ne){N.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Ne):(0,ue.h)(Ne)}function at(Ne,Pe){const{onStoppedNotification:Me}=N.v;Me&&W.z.setTimeout(()=>Me(Ne,Pe))}const lt={closed:!0,next:he.Z,error:function ve(Ne){throw Ne},complete:he.Z}},727:(vt,Oe,V)=>{V.d(Oe,{Lc:()=>ye,w0:()=>he,Nn:()=>oe});var l=V(576);const N=(0,V(3888).d)(Ce=>function(Y){Ce(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((re,$e)=>`${$e+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ue=V(8737);class he{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Fe of Y)Fe.remove(this);else Y.remove(this);const{initialTeardown:re}=this;if((0,l.m)(re))try{re()}catch(Fe){W=Fe instanceof N?Fe.errors:[Fe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Fe of $e)try{ge(Fe)}catch(xe){W=W??[],xe instanceof N?W=[...W,...xe.errors]:W.push(xe)}}if(W)throw new N(W)}}add(W){var Y;if(W&&W!==this)if(this.closed)ge(W);else{if(W instanceof he){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(W)}}_hasParent(W){const{_parentage:Y}=this;return Y===W||Array.isArray(Y)&&Y.includes(W)}_addParent(W){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(W),Y):Y?[Y,W]:W}_removeParent(W){const{_parentage:Y}=this;Y===W?this._parentage=null:Array.isArray(Y)&&(0,ue.P)(Y,W)}remove(W){const{_finalizers:Y}=this;Y&&(0,ue.P)(Y,W),W instanceof he&&W._removeParent(this)}}he.EMPTY=(()=>{const Ce=new he;return Ce.closed=!0,Ce})();const ye=he.EMPTY;function oe(Ce){return Ce instanceof he||Ce&&"closed"in Ce&&(0,l.m)(Ce.remove)&&(0,l.m)(Ce.add)&&(0,l.m)(Ce.unsubscribe)}function ge(Ce){(0,l.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(vt,Oe,V)=>{V.d(Oe,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(vt,Oe,V)=>{V.d(Oe,{E:()=>j});const j=new(V(9751).y)(he=>he.complete())},8996:(vt,Oe,V)=>{V.d(Oe,{D:()=>Pe});var l=V(8421),j=V(5363),N=V(9468),ye=V(9751),ge=V(2202),Ce=V(576),W=V(9672);function re(Me,Ke){if(!Me)throw new Error("Iterable cannot be null");return new ye.y(ce=>{(0,W.f)(ce,Ke,()=>{const pe=Me[Symbol.asyncIterator]();(0,W.f)(ce,Ke,()=>{pe.next().then(we=>{we.done?ce.complete():ce.next(we.value)})},0,!0)})})}var $e=V(3670),Fe=V(8239),xe=V(1144),ht=V(6495),De=V(2206),ve=V(4532),at=V(3260);function Pe(Me,Ke){return Ke?function Ne(Me,Ke){if(null!=Me){if((0,$e.c)(Me))return function ue(Me,Ke){return(0,l.Xf)(Me).pipe((0,N.R)(Ke),(0,j.Q)(Ke))}(Me,Ke);if((0,xe.z)(Me))return function oe(Me,Ke){return new ye.y(ce=>{let pe=0;return Ke.schedule(function(){pe===Me.length?ce.complete():(ce.next(Me[pe++]),ce.closed||this.schedule())})})}(Me,Ke);if((0,Fe.t)(Me))return function he(Me,Ke){return(0,l.Xf)(Me).pipe((0,N.R)(Ke),(0,j.Q)(Ke))}(Me,Ke);if((0,De.D)(Me))return re(Me,Ke);if((0,ht.T)(Me))return function Y(Me,Ke){return new ye.y(ce=>{let pe;return(0,W.f)(ce,Ke,()=>{pe=Me[ge.h](),(0,W.f)(ce,Ke,()=>{let we,ne;try{({value:we,done:ne}=pe.next())}catch(se){return void ce.error(se)}ne?ce.complete():ce.next(we)},0,!0)}),()=>(0,Ce.m)(pe?.return)&&pe.return()})}(Me,Ke);if((0,at.L)(Me))return function lt(Me,Ke){return re((0,at.Q)(Me),Ke)}(Me,Ke)}throw(0,ve.z)(Me)}(Me,Ke):(0,l.Xf)(Me)}},8421:(vt,Oe,V)=>{V.d(Oe,{Xf:()=>$e});var l=V(655),j=V(1144),N=V(8239),ue=V(9751),he=V(3670),ye=V(2206),oe=V(4532),ge=V(6495),Ce=V(3260),W=V(576),Y=V(7849),re=V(8822);function $e(Ne){if(Ne instanceof ue.y)return Ne;if(null!=Ne){if((0,he.c)(Ne))return function Fe(Ne){return new ue.y(Pe=>{const Me=Ne[re.L]();if((0,W.m)(Me.subscribe))return Me.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,j.z)(Ne))return function xe(Ne){return new ue.y(Pe=>{for(let Me=0;Me<Ne.length&&!Pe.closed;Me++)Pe.next(Ne[Me]);Pe.complete()})}(Ne);if((0,N.t)(Ne))return function ht(Ne){return new ue.y(Pe=>{Ne.then(Me=>{Pe.closed||(Pe.next(Me),Pe.complete())},Me=>Pe.error(Me)).then(null,Y.h)})}(Ne);if((0,ye.D)(Ne))return ve(Ne);if((0,ge.T)(Ne))return function De(Ne){return new ue.y(Pe=>{for(const Me of Ne)if(Pe.next(Me),Pe.closed)return;Pe.complete()})}(Ne);if((0,Ce.L)(Ne))return function at(Ne){return ve((0,Ce.Q)(Ne))}(Ne)}throw(0,oe.z)(Ne)}function ve(Ne){return new ue.y(Pe=>{(function lt(Ne,Pe){var Me,Ke,ce,pe;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Me=(0,l.KL)(Ne);!(Ke=yield Me.next()).done;)if(Pe.next(Ke.value),Pe.closed)return}catch(we){ce={error:we}}finally{try{Ke&&!Ke.done&&(pe=Me.return)&&(yield pe.call(Me))}finally{if(ce)throw ce.error}}Pe.complete()})})(Ne,Pe).catch(Me=>Pe.error(Me))})}},6451:(vt,Oe,V)=>{V.d(Oe,{T:()=>ye});var l=V(8189),j=V(8421),N=V(515),ue=V(3269),he=V(8996);function ye(...oe){const ge=(0,ue.yG)(oe),Ce=(0,ue._6)(oe,1/0),W=oe;return W.length?1===W.length?(0,j.Xf)(W[0]):(0,l.J)(Ce)((0,he.D)(W,ge)):N.E}},5403:(vt,Oe,V)=>{V.d(Oe,{x:()=>j});var l=V(930);function j(ue,he,ye,oe,ge){return new N(ue,he,ye,oe,ge)}class N extends l.Lv{constructor(he,ye,oe,ge,Ce,W){super(he),this.onFinalize=Ce,this.shouldUnsubscribe=W,this._next=ye?function(Y){try{ye(Y)}catch(re){he.error(re)}}:super._next,this._error=ge?function(Y){try{ge(Y)}catch(re){he.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(Y){he.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(vt,Oe,V)=>{V.d(Oe,{U:()=>N});var l=V(4482),j=V(5403);function N(ue,he){return(0,l.e)((ye,oe)=>{let ge=0;ye.subscribe((0,j.x)(oe,Ce=>{oe.next(ue.call(he,Ce,ge++))}))})}},8189:(vt,Oe,V)=>{V.d(Oe,{J:()=>N});var l=V(5577),j=V(4671);function N(ue=1/0){return(0,l.z)(j.y,ue)}},5577:(vt,Oe,V)=>{V.d(Oe,{z:()=>ge});var l=V(4004),j=V(8421),N=V(4482),ue=V(9672),he=V(5403),oe=V(576);function ge(Ce,W,Y=1/0){return(0,oe.m)(W)?ge((re,$e)=>(0,l.U)((Fe,xe)=>W(re,Fe,$e,xe))((0,j.Xf)(Ce(re,$e))),Y):("number"==typeof W&&(Y=W),(0,N.e)((re,$e)=>function ye(Ce,W,Y,re,$e,Fe,xe,ht){const De=[];let ve=0,at=0,lt=!1;const Ne=()=>{lt&&!De.length&&!ve&&W.complete()},Pe=Ke=>ve<re?Me(Ke):De.push(Ke),Me=Ke=>{Fe&&W.next(Ke),ve++;let ce=!1;(0,j.Xf)(Y(Ke,at++)).subscribe((0,he.x)(W,pe=>{$e?.(pe),Fe?Pe(pe):W.next(pe)},()=>{ce=!0},void 0,()=>{if(ce)try{for(ve--;De.length&&ve<re;){const pe=De.shift();xe?(0,ue.f)(W,xe,()=>Me(pe)):Me(pe)}Ne()}catch(pe){W.error(pe)}}))};return Ce.subscribe((0,he.x)(W,Pe,()=>{lt=!0,Ne()})),()=>{ht?.()}}(re,$e,Ce,Y)))}},5363:(vt,Oe,V)=>{V.d(Oe,{Q:()=>ue});var l=V(9672),j=V(4482),N=V(5403);function ue(he,ye=0){return(0,j.e)((oe,ge)=>{oe.subscribe((0,N.x)(ge,Ce=>(0,l.f)(ge,he,()=>ge.next(Ce),ye),()=>(0,l.f)(ge,he,()=>ge.complete(),ye),Ce=>(0,l.f)(ge,he,()=>ge.error(Ce),ye)))})}},3099:(vt,Oe,V)=>{V.d(Oe,{B:()=>he});var l=V(8421),j=V(7579),N=V(930),ue=V(4482);function he(oe={}){const{connector:ge=(()=>new j.x),resetOnError:Ce=!0,resetOnComplete:W=!0,resetOnRefCountZero:Y=!0}=oe;return re=>{let $e,Fe,xe,ht=0,De=!1,ve=!1;const at=()=>{Fe?.unsubscribe(),Fe=void 0},lt=()=>{at(),$e=xe=void 0,De=ve=!1},Ne=()=>{const Pe=$e;lt(),Pe?.unsubscribe()};return(0,ue.e)((Pe,Me)=>{ht++,!ve&&!De&&at();const Ke=xe=xe??ge();Me.add(()=>{ht--,0===ht&&!ve&&!De&&(Fe=ye(Ne,Y))}),Ke.subscribe(Me),!$e&&ht>0&&($e=new N.Hp({next:ce=>Ke.next(ce),error:ce=>{ve=!0,at(),Fe=ye(lt,Ce,ce),Ke.error(ce)},complete:()=>{De=!0,at(),Fe=ye(lt,W),Ke.complete()}}),(0,l.Xf)(Pe).subscribe($e))})(re)}}function ye(oe,ge,...Ce){if(!0===ge)return void oe();if(!1===ge)return;const W=new N.Hp({next:()=>{W.unsubscribe(),oe()}});return ge(...Ce).subscribe(W)}},9468:(vt,Oe,V)=>{V.d(Oe,{R:()=>j});var l=V(4482);function j(N,ue=0){return(0,l.e)((he,ye)=>{ye.add(N.schedule(()=>he.subscribe(ye),ue))})}},8505:(vt,Oe,V)=>{V.d(Oe,{b:()=>he});var l=V(576),j=V(4482),N=V(5403),ue=V(4671);function he(ye,oe,ge){const Ce=(0,l.m)(ye)||oe||ge?{next:ye,error:oe,complete:ge}:ye;return Ce?(0,j.e)((W,Y)=>{var re;null===(re=Ce.subscribe)||void 0===re||re.call(Ce);let $e=!0;W.subscribe((0,N.x)(Y,Fe=>{var xe;null===(xe=Ce.next)||void 0===xe||xe.call(Ce,Fe),Y.next(Fe)},()=>{var Fe;$e=!1,null===(Fe=Ce.complete)||void 0===Fe||Fe.call(Ce),Y.complete()},Fe=>{var xe;$e=!1,null===(xe=Ce.error)||void 0===xe||xe.call(Ce,Fe),Y.error(Fe)},()=>{var Fe,xe;$e&&(null===(Fe=Ce.unsubscribe)||void 0===Fe||Fe.call(Ce)),null===(xe=Ce.finalize)||void 0===xe||xe.call(Ce)}))}):ue.y}},4408:(vt,Oe,V)=>{V.d(Oe,{o:()=>he});var l=V(727);class j extends l.w0{constructor(oe,ge){super()}schedule(oe,ge=0){return this}}const N={setInterval(ye,oe,...ge){const{delegate:Ce}=N;return Ce?.setInterval?Ce.setInterval(ye,oe,...ge):setInterval(ye,oe,...ge)},clearInterval(ye){const{delegate:oe}=N;return(oe?.clearInterval||clearInterval)(ye)},delegate:void 0};var ue=V(8737);class he extends j{constructor(oe,ge){super(oe,ge),this.scheduler=oe,this.work=ge,this.pending=!1}schedule(oe,ge=0){if(this.closed)return this;this.state=oe;const Ce=this.id,W=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(W,Ce,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(W,this.id,ge),this}requestAsyncId(oe,ge,Ce=0){return N.setInterval(oe.flush.bind(oe,this),Ce)}recycleAsyncId(oe,ge,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return ge;N.clearInterval(ge)}execute(oe,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(oe,ge);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ge){let W,Ce=!1;try{this.work(oe)}catch(Y){Ce=!0,W=Y||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ge}=this,{actions:Ce}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(Ce,this),null!=oe&&(this.id=this.recycleAsyncId(ge,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(vt,Oe,V)=>{V.d(Oe,{v:()=>N});var l=V(6063);class j{constructor(he,ye=j.now){this.schedulerActionCtor=he,this.now=ye}schedule(he,ye=0,oe){return new this.schedulerActionCtor(this,he).schedule(oe,ye)}}j.now=l.l.now;class N extends j{constructor(he,ye=j.now){super(he,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:ye}=this;if(this._active)return void ye.push(he);let oe;this._active=!0;do{if(oe=he.execute(he.state,he.delay))break}while(he=ye.shift());if(this._active=!1,oe){for(;he=ye.shift();)he.unsubscribe();throw oe}}}},4986:(vt,Oe,V)=>{V.d(Oe,{P:()=>ue,z:()=>N});var l=V(4408);const N=new(V(7565).v)(l.o),ue=N},6063:(vt,Oe,V)=>{V.d(Oe,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(vt,Oe,V)=>{V.d(Oe,{z:()=>l});const l={setTimeout(j,N,...ue){const{delegate:he}=l;return he?.setTimeout?he.setTimeout(j,N,...ue):setTimeout(j,N,...ue)},clearTimeout(j){const{delegate:N}=l;return(N?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(vt,Oe,V)=>{V.d(Oe,{h:()=>j});const j=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(vt,Oe,V)=>{V.d(Oe,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(vt,Oe,V)=>{V.d(Oe,{_6:()=>ye,jO:()=>ue,yG:()=>he});var l=V(576),j=V(3532);function N(oe){return oe[oe.length-1]}function ue(oe){return(0,l.m)(N(oe))?oe.pop():void 0}function he(oe){return(0,j.K)(N(oe))?oe.pop():void 0}function ye(oe,ge){return"number"==typeof N(oe)?oe.pop():ge}},8737:(vt,Oe,V)=>{function l(j,N){if(j){const ue=j.indexOf(N);0<=ue&&j.splice(ue,1)}}V.d(Oe,{P:()=>l})},3888:(vt,Oe,V)=>{function l(j){const ue=j(he=>{Error.call(he),he.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Oe,{d:()=>l})},2806:(vt,Oe,V)=>{V.d(Oe,{O:()=>ue,x:()=>N});var l=V(2416);let j=null;function N(he){if(l.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),he(),ye){const{errorThrown:oe,error:ge}=j;if(j=null,oe)throw ge}}else he()}function ue(he){l.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=he)}},9672:(vt,Oe,V)=>{function l(j,N,ue,he=0,ye=!1){const oe=N.schedule(function(){ue(),ye?j.add(this.schedule(null,he)):this.unsubscribe()},he);if(j.add(oe),!ye)return oe}V.d(Oe,{f:()=>l})},4671:(vt,Oe,V)=>{function l(j){return j}V.d(Oe,{y:()=>l})},1144:(vt,Oe,V)=>{V.d(Oe,{z:()=>l});const l=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(vt,Oe,V)=>{V.d(Oe,{D:()=>j});var l=V(576);function j(N){return Symbol.asyncIterator&&(0,l.m)(N?.[Symbol.asyncIterator])}},576:(vt,Oe,V)=>{function l(j){return"function"==typeof j}V.d(Oe,{m:()=>l})},3670:(vt,Oe,V)=>{V.d(Oe,{c:()=>N});var l=V(8822),j=V(576);function N(ue){return(0,j.m)(ue[l.L])}},6495:(vt,Oe,V)=>{V.d(Oe,{T:()=>N});var l=V(2202),j=V(576);function N(ue){return(0,j.m)(ue?.[l.h])}},8239:(vt,Oe,V)=>{V.d(Oe,{t:()=>j});var l=V(576);function j(N){return(0,l.m)(N?.then)}},3260:(vt,Oe,V)=>{V.d(Oe,{L:()=>ue,Q:()=>N});var l=V(655),j=V(576);function N(he){return(0,l.FC)(this,arguments,function*(){const oe=he.getReader();try{for(;;){const{value:ge,done:Ce}=yield(0,l.qq)(oe.read());if(Ce)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ge)}}finally{oe.releaseLock()}})}function ue(he){return(0,j.m)(he?.getReader)}},3532:(vt,Oe,V)=>{V.d(Oe,{K:()=>j});var l=V(576);function j(N){return N&&(0,l.m)(N.schedule)}},4482:(vt,Oe,V)=>{V.d(Oe,{A:()=>j,e:()=>N});var l=V(576);function j(ue){return(0,l.m)(ue?.lift)}function N(ue){return he=>{if(j(he))return he.lift(function(ye){try{return ue(ye,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(vt,Oe,V)=>{function l(){}V.d(Oe,{Z:()=>l})},9635:(vt,Oe,V)=>{V.d(Oe,{U:()=>N,z:()=>j});var l=V(4671);function j(...ue){return N(ue)}function N(ue){return 0===ue.length?l.y:1===ue.length?ue[0]:function(ye){return ue.reduce((oe,ge)=>ge(oe),ye)}}},7849:(vt,Oe,V)=>{V.d(Oe,{h:()=>N});var l=V(2416),j=V(3410);function N(ue){j.z.setTimeout(()=>{const{onUnhandledError:he}=l.v;if(!he)throw ue;he(ue)})}},4532:(vt,Oe,V)=>{function l(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Oe,{z:()=>l})},655:(vt,Oe,V)=>{function ue(ne,se){var _e={};for(var de in ne)Object.prototype.hasOwnProperty.call(ne,de)&&se.indexOf(de)<0&&(_e[de]=ne[de]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(de=Object.getOwnPropertySymbols(ne);Ue<de.length;Ue++)se.indexOf(de[Ue])<0&&Object.prototype.propertyIsEnumerable.call(ne,de[Ue])&&(_e[de[Ue]]=ne[de[Ue]])}return _e}function he(ne,se,_e,de){var Ct,Ue=arguments.length,je=Ue<3?se:null===de?de=Object.getOwnPropertyDescriptor(se,_e):de;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)je=Reflect.decorate(ne,se,_e,de);else for(var an=ne.length-1;an>=0;an--)(Ct=ne[an])&&(je=(Ue<3?Ct(je):Ue>3?Ct(se,_e,je):Ct(se,_e))||je);return Ue>3&&je&&Object.defineProperty(se,_e,je),je}function ge(ne,se,_e,de){return new(_e||(_e=Promise))(function(je,Ct){function an(An){try{et(de.next(An))}catch(zn){Ct(zn)}}function Jt(An){try{et(de.throw(An))}catch(zn){Ct(zn)}}function et(An){An.done?je(An.value):function Ue(je){return je instanceof _e?je:new _e(function(Ct){Ct(je)})}(An.value).then(an,Jt)}et((de=de.apply(ne,se||[])).next())})}function De(ne){return this instanceof De?(this.v=ne,this):new De(ne)}function ve(ne,se,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,de=_e.apply(ne,se||[]),je=[];return Ue={},Ct("next"),Ct("throw"),Ct("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function Ct(pn){de[pn]&&(Ue[pn]=function(cn){return new Promise(function(en,Gt){je.push([pn,cn,en,Gt])>1||an(pn,cn)})})}function an(pn,cn){try{!function Jt(pn){pn.value instanceof De?Promise.resolve(pn.value.v).then(et,An):zn(je[0][2],pn)}(de[pn](cn))}catch(en){zn(je[0][3],en)}}function et(pn){an("next",pn)}function An(pn){an("throw",pn)}function zn(pn,cn){pn(cn),je.shift(),je.length&&an(je[0][0],je[0][1])}}function lt(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,se=ne[Symbol.asyncIterator];return se?se.call(ne):(ne=function re(ne){var se="function"==typeof Symbol&&Symbol.iterator,_e=se&&ne[se],de=0;if(_e)return _e.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&de>=ne.length&&(ne=void 0),{value:ne&&ne[de++],done:!ne}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),_e={},de("next"),de("throw"),de("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function de(je){_e[je]=ne[je]&&function(Ct){return new Promise(function(an,Jt){!function Ue(je,Ct,an,Jt){Promise.resolve(Jt).then(function(et){je({value:et,done:an})},Ct)}(an,Jt,(Ct=ne[je](Ct)).done,Ct.value)})}}}V.d(Oe,{FC:()=>ve,KL:()=>lt,_T:()=>ue,gn:()=>he,mG:()=>ge,qq:()=>De})},4650:(vt,Oe,V)=>{V.d(Oe,{$8M:()=>Dl,$Z:()=>DD,AFp:()=>qp,ALo:()=>KE,AaK:()=>ge,BQk:()=>Cp,CHM:()=>Po,CRH:()=>aS,CZH:()=>$p,CqO:()=>ob,D6c:()=>KR,EEQ:()=>Qi,EJc:()=>AS,EiD:()=>EC,EpF:()=>rb,F$t:()=>ub,F4k:()=>sb,FYo:()=>NC,FiY:()=>fe,G48:()=>BR,Gf:()=>sS,GfV:()=>ST,GkF:()=>Wg,Gpc:()=>Y,GuJ:()=>Pt,Hsn:()=>Kg,Ikx:()=>l_,JOm:()=>kl,JVY:()=>ei,KtG:()=>No,L6k:()=>Pa,LAX:()=>jn,LFG:()=>Wn,LSH:()=>Jv,Lbi:()=>TS,Lck:()=>Ok,MAs:()=>Sc,MMx:()=>Hb,NdJ:()=>Zg,O4$:()=>pd,OlP:()=>$t,Oqu:()=>sh,PXZ:()=>VS,Q6J:()=>nb,QGY:()=>Yg,QP$:()=>hh,QbO:()=>ER,Qsj:()=>FC,R0b:()=>go,RDi:()=>yC,Rgc:()=>__,SBq:()=>vu,Sil:()=>SR,Suo:()=>oS,TTD:()=>Sr,TgZ:()=>Si,Udp:()=>e_,VKq:()=>Hk,WFA:()=>eh,X6Q:()=>LR,XFs:()=>bt,Xpm:()=>G,Xts:()=>ty,Y36:()=>Vd,YKP:()=>UE,YNc:()=>zD,Yjl:()=>ai,Yz7:()=>cn,ZZ4:()=>XS,_Bn:()=>Rk,_UZ:()=>ib,_Vd:()=>wg,_c5:()=>u2,_uU:()=>Mp,aQg:()=>d0,c2e:()=>Wp,cJS:()=>Gt,cg1:()=>Ab,d8E:()=>Tu,dDg:()=>WV,dqk:()=>ut,eBb:()=>hi,eFA:()=>NR,ekj:()=>yb,eoX:()=>RR,f3M:()=>Ed,g9A:()=>IS,h0i:()=>Zo,hGG:()=>ZR,hij:()=>o_,iGM:()=>rS,ifc:()=>pt,ip1:()=>MS,kL8:()=>hE,kcU:()=>md,lG2:()=>wn,lqb:()=>Na,lri:()=>AR,mCW:()=>ae,n5z:()=>Ns,n_E:()=>Gp,oAB:()=>Ye,oxw:()=>WD,pB0:()=>Md,q3G:()=>Ei,q4F:()=>LC,qLn:()=>Uf,qOj:()=>Xy,qZA:()=>Wo,qzn:()=>Oa,rWj:()=>kR,s9C:()=>Qg,sBO:()=>XV,sIi:()=>Yd,s_b:()=>$b,soG:()=>E_,tb:()=>t0,tp0:()=>tt,uIk:()=>HD,vHH:()=>xe,vpe:()=>Ko,wAp:()=>kt,xi3:()=>g_,xp6:()=>tA,ynx:()=>wp,z2F:()=>x_,z3N:()=>Ra,zSh:()=>TC,zs3:()=>Ld});var l=V(7579),j=V(727),N=V(9751),ue=V(6451),he=V(3099);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function oe(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ge(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ge).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ce(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const W=ye({__forward_ref__:ye});function Y(o){return o.__forward_ref__=Y,o.toString=function(){return ge(this())},o}function re(o){return $e(o)?o():o}function $e(o){return"function"==typeof o&&o.hasOwnProperty(W)&&o.__forward_ref__===Y}class xe extends Error{constructor(a,u){super(function ht(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function De(o){return"string"==typeof o?o:null==o?"":String(o)}function Pe(o,a){throw new xe(-201,!1)}function Jt(o,a){null==o&&function et(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Gt(o){return{providers:o.providers||[],imports:o.imports||[]}}function $i(o){return eo(o,br)||eo(o,Kn)}function eo(o,a){return o.hasOwnProperty(a)?o[a]:null}function os(o){return o&&(o.hasOwnProperty(wr)||o.hasOwnProperty(as))?o[wr]:null}const br=ye({\u0275prov:ye}),wr=ye({\u0275inj:ye}),Kn=ye({ngInjectableDef:ye}),as=ye({ngInjectorDef:ye});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let kn;function mn(o){const a=kn;return kn=o,a}function yi(o,a,u){const h=$i(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&bt.Optional?null:void 0!==a?a:void Pe(ge(o))}function bi(o){return{toString:o}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),pt=(()=>{return(o=pt||(pt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",pt;var o})();const ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vn={},zt=[],Hn=ye({\u0275cmp:ye}),sr=ye({\u0275dir:ye}),Pt=ye({\u0275pipe:ye}),Cr=ye({\u0275mod:ye}),Nt=ye({\u0275fac:ye}),ee=ye({__NG_ELEMENT_ID__:ye});let q=0;function G(o){return bi(()=>{const u=!0===o.standalone,h={},p={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||zt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||pt.Emulated,id:"c"+q++,styles:o.styles||zt,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,y=o.features;return p.inputs=bn(o.inputs,h),p.outputs=bn(o.outputs),y&&y.forEach(C=>C(p)),p.directiveDefs=m?()=>("function"==typeof m?m():m).map(X).filter(Ae):null,p.pipeDefs=m?()=>("function"==typeof m?m():m).map($).filter(Ae):null,p})}function X(o){return J(o)||Z(o)}function Ae(o){return null!==o}function Ye(o){return bi(()=>({type:o.type,bootstrap:o.bootstrap||zt,declarations:o.declarations||zt,imports:o.imports||zt,exports:o.exports||zt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function bn(o,a){if(null==o)return Vn;const u={};for(const h in o)if(o.hasOwnProperty(h)){let p=o[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=h,a&&(a[p]=m)}return u}const wn=G;function ai(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function J(o){return o[Hn]||null}function Z(o){return o[sr]||null}function $(o){return o[Pt]||null}function Ee(o,a){const u=o[Cr]||null;if(!u&&!0===a)throw new Error(`Type ${ge(o)} does not have '\u0275mod' property.`);return u}function Un(o){return Array.isArray(o)&&"object"==typeof o[1]}function jr(o){return Array.isArray(o)&&!0===o[1]}function no(o){return 0!=(8&o.flags)}function sl(o){return 2==(2&o.flags)}function ks(o){return 1==(1&o.flags)}function Dr(o){return null!==o.template}function sd(o){return 0!=(256&o[2])}function ha(o,a){return o.hasOwnProperty(Nt)?o[Nt]:null}class al{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Sr(){return Io}function Io(o){return o.type.prototype.ngOnChanges&&(o.setInput=nf),fa}function fa(){const o=Kl(this),a=o?.current;if(a){const u=o.previous;if(u===Vn)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function nf(o,a,u,h){const p=Kl(o)||function rf(o,a){return o[ll]=a}(o,{previous:Vn,current:null}),m=p.current||(p.current={}),y=p.previous,C=this.declaredInputs[u],S=y[C];m[C]=new al(S&&S.currentValue,a,y===Vn),o[h]=a}Sr.ngInherit=!0;const ll="__ngSimpleChanges__";function Kl(o){return o[ll]||null}function ui(o){for(;Array.isArray(o);)o=o[0];return o}function cl(o,a){return ui(a[o])}function fr(o,a){return ui(a[o.index])}function ko(o,a){return o.data[a]}function Ps(o,a){return o[a]}function Bi(o,a){const u=a[o];return Un(u)?u:u[0]}function Ro(o){return 4==(4&o[2])}function cs(o){return 64==(64&o[2])}function us(o,a){return null==a?null:o[a]}function so(o){o[18]=0}function Oo(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const At={lFrame:ba(null),bindingsEnabled:!0};function pa(){return At.bindingsEnabled}function Re(){return At.lFrame.lView}function Yt(){return At.lFrame.tView}function Po(o){return At.lFrame.contextLView=o,o[8]}function No(o){return At.lFrame.contextLView=null,o}function Xn(){let o=Fo();for(;null!==o&&64===o.type;)o=o.parent;return o}function Fo(){return At.lFrame.currentTNode}function or(o,a){const u=At.lFrame;u.currentTNode=o,u.isParent=a}function Kc(){return At.lFrame.isParent}function Lo(){At.lFrame.isParent=!1}function ki(){const o=At.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Bo(){return At.lFrame.bindingIndex++}function Jl(o,a){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=o,hl(a)}function hl(o){At.lFrame.currentDirectiveIndex=o}function fl(o){const a=At.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function va(){return At.lFrame.currentQueryIndex}function eu(o){At.lFrame.currentQueryIndex=o}function pl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function ec(o,a,u){if(u&bt.SkipSelf){let p=a,m=o;for(;!(p=p.parent,null!==p||u&bt.Host||(p=pl(m),null===p||(m=m[15],10&p.type))););if(null===p)return!1;a=p,o=m}const h=At.lFrame=hd();return h.currentTNode=a,h.lView=o,!0}function ya(o){const a=hd(),u=o[1];At.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function hd(){const o=At.lFrame,a=null===o?null:o.child;return null===a?ba(o):a}function ba(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function fd(){const o=At.lFrame;return At.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const wa=fd;function tc(){const o=fd();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function di(){return At.lFrame.selectedIndex}function ds(o){At.lFrame.selectedIndex=o}function xn(){const o=At.lFrame;return ko(o.tView,o.selectedIndex)}function pd(){At.lFrame.currentNamespace="svg"}function md(){!function tu(){At.lFrame.currentNamespace=null}()}function iu(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:S,ngAfterViewChecked:I,ngOnDestroy:O}=m;y&&(o.contentHooks||(o.contentHooks=[])).push(-u,y),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),S&&(o.viewHooks||(o.viewHooks=[])).push(-u,S),I&&((o.viewHooks||(o.viewHooks=[])).push(u,I),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,I)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(u,O)}}function uf(o,a,u){Vo(o,a,3,u)}function df(o,a,u,h){(3&o[2])===u&&Vo(o,a,u,h)}function gl(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Vo(o,a,u,h){const m=h??-1,y=a.length-1;let C=0;for(let S=void 0!==h?65535&o[18]:0;S<y;S++)if("number"==typeof a[S+1]){if(C=a[S],null!=h&&C>=h)break}else a[S]<0&&(o[18]+=65536),(C<m||-1==m)&&(Pv(o,u,a,S),o[18]=(4294901760&o[18])+S+2),S++}function Pv(o,a,u,h){const p=u[h]<0,m=u[h+1],C=o[p?-u[h]:u[h]];if(p){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Ca{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function _l(o,a,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],y=u[h++],C=u[h++];o.setAttribute(a,y,C,m)}else{const m=p,y=u[++h];vl(m)?o.setProperty(a,m,y):o.setAttribute(a,m,y),h++}}return h}function su(o){return 3===o||4===o||6===o}function vl(o){return 64===o.charCodeAt(0)}function Sa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const p=a[h];"number"==typeof p?u=p:0===u||pf(o,u,p,null,-1===u||2===u?a[++h]:null)}}return o}function pf(o,a,u,h,p){let m=0,y=o.length;if(-1===a)y=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){y=-1;break}if(C>a){y=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(o[m+1]=p));if(h===o[m+1])return void(o[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==y&&(o.splice(y,0,a),m=y+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==p&&o.splice(m++,0,p)}function mf(o){return-1!==o}function yl(o){return 32767&o}function Ci(o,a){let u=function Fv(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let ic=!0;function xa(o){const a=ic;return ic=o,a}let Jn=0;const Cn={};function fs(o,a){const u=qr(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,bl(h.data,o),bl(a,null),bl(h.blueprint,null));const p=rc(o,a),m=o.injectorIndex;if(mf(p)){const y=yl(p),C=Ci(p,a),S=C[1].data;for(let I=0;I<8;I++)a[m+I]=C[y+I]|S[y+I]}return a[m+8]=p,m}function bl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function qr(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function rc(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,p=a;for(;null!==p;){if(h=oc(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function ar(o,a,u){!function Ma(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(ee)&&(h=u[ee]),null==h&&(h=u[ee]=Jn++);const p=255&h;a.data[o+(p>>5)]|=1<<p}(o,a,u)}function ps(o,a,u){if(u&bt.Optional)return o;Pe()}function Cl(o,a,u,h){if(u&bt.Optional&&void 0===h&&(h=null),0==(u&(bt.Self|bt.Host))){const p=o[9],m=mn(void 0);try{return p?p.get(a,h,u&bt.Optional):yi(a,h,u&bt.Optional)}finally{mn(m)}}return ps(h,0,u)}function sc(o,a,u,h=bt.Default,p){if(null!==o){if(1024&a[2]){const y=function ct(o,a,u,h,p){let m=o,y=a;for(;null!==m&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=lo(m,y,u,h|bt.Self,Cn);if(C!==Cn)return C;let S=m.parent;if(!S){const I=y[21];if(I){const O=I.get(u,Cn,h);if(O!==Cn)return O}S=oc(y),y=y[15]}m=S}return p}(o,a,u,h,Cn);if(y!==Cn)return y}const m=lo(o,a,u,h,Cn);if(m!==Cn)return m}return Cl(a,u,h,p)}function lo(o,a,u,h,p){const m=function pr(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ee)?o[ee]:void 0;return"number"==typeof a?a>=0?255&a:Oi:a}(u);if("function"==typeof m){if(!ec(a,o,h))return h&bt.Host?ps(p,0,h):Cl(a,u,h,p);try{const y=m(h);if(null!=y||h&bt.Optional)return y;Pe()}finally{wa()}}else if("number"==typeof m){let y=null,C=qr(o,a),S=-1,I=h&bt.Host?a[16][6]:null;for((-1===C||h&bt.SkipSelf)&&(S=-1===C?rc(o,a):a[C+8],-1!==S&&rt(h,!1)?(y=a[1],C=yl(S),a=Ci(S,a)):C=-1);-1!==C;){const O=a[1];if(co(m,C,O.data)){const H=Ia(C,a,u,y,h,I);if(H!==Cn)return H}S=a[C+8],-1!==S&&rt(h,a[1].data[C+8]===I)&&co(m,C,a)?(y=O,C=yl(S),a=Ci(S,a)):C=-1}}return p}function Ia(o,a,u,h,p,m){const y=a[1],C=y.data[o+8],O=Ho(C,y,u,null==h?sl(C)&&ic:h!=y&&0!=(3&C.type),p&bt.Host&&m===C);return null!==O?Wr(a,y,O,C):Cn}function Ho(o,a,u,h,p){const m=o.providerIndexes,y=a.data,C=1048575&m,S=o.directiveStart,O=m>>20,Q=p?C+O:o.directiveEnd;for(let le=h?C:C+O;le<Q;le++){const Te=y[le];if(le<S&&u===Te||le>=S&&Te.type===u)return le}if(p){const le=y[S];if(le&&Dr(le)&&le.type===u)return S}return null}function Wr(o,a,u,h){let p=o[u];const m=a.data;if(function nc(o){return o instanceof Ca}(p)){const y=p;y.resolving&&function at(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new xe(-200,`Circular dependency in DI detected for ${o}${u}`)}(function ve(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():De(o)}(m[u]));const C=xa(y.canSeeViewProviders);y.resolving=!0;const S=y.injectImpl?mn(y.injectImpl):null;ec(o,h,bt.Default);try{p=o[u]=y.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function nu(o,a,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=a.type.prototype;if(h){const y=Io(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,y)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,p),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==S&&mn(S),xa(C),y.resolving=!1,wa()}}return p}function co(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function rt(o,a){return!(o&bt.Self||o&bt.Host&&a)}class Mn{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return sc(this._tNode,this._lView,a,h,u)}}function Oi(){return new Mn(Xn(),Re())}function Ns(o){return bi(()=>{const a=o.prototype.constructor,u=a[Nt]||ln(a),h=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==h;){const m=p[Nt]||ln(p);if(m&&m!==u)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function ln(o){return $e(o)?()=>{const a=ln(re(o));return a&&a()}:ha(o)}function oc(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Dl(o){return function wl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const m=u[p];if(su(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(m===a)return u[p+1];p+=2}}}return null}(Xn(),o)}const El="__parameters__";function gs(o,a,u){return bi(()=>{const h=function Sl(o){return function(...u){if(o){const h=o(...u);for(const p in h)this[p]=h[p]}}}(a);function p(...m){if(this instanceof p)return h.apply(this,m),this;const y=new p(...m);return C.annotation=y,C;function C(S,I,O){const H=S.hasOwnProperty(El)?S[El]:Object.defineProperty(S,El,{value:[]})[El];for(;H.length<=O;)H.push(null);return(H[O]=H[O]||[]).push(y),S}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}class $t{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=cn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zi(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),Zi(h,a)):a!==o&&a.push(h)}return a}function Fs(o,a){o.forEach(u=>Array.isArray(u)?Fs(u,a):a(u))}function uu(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function du(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Ta(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function Ki(o,a,u){let h=xl(o,a);return h>=0?o[1|h]=u:(h=~h,function bf(o,a,u,h){let p=o.length;if(p==a)o.push(u,h);else if(1===p)o.push(h,o[0]),o[0]=u;else{for(p--,o.push(o[p-1],o[p]);p>a;)o[p]=o[p-2],p--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function uc(o,a){const u=xl(o,a);if(u>=0)return o[1|u]}function xl(o,a){return function Ml(o,a,u){let h=0,p=o.length>>u;for(;p!==h;){const m=h+(p-h>>1),y=o[m<<u];if(a===y)return m<<u;y>a?p=m:h=m+1}return~(p<<u)}(o,a,1)}const fc={},Yr="__NG_DI_FLAG__",pc="ngTempTokenPath",Dd=/\n/gm,fu="__source";let _s;function Aa(o){const a=_s;return _s=o,a}function hg(o,a=bt.Default){if(void 0===_s)throw new xe(-203,!1);return null===_s?yi(o,void 0,a):_s.get(o,a&bt.Optional?null:void 0,a)}function Wn(o,a=bt.Default){return(function Wi(){return kn}()||hg)(re(o),a)}function Ed(o,a=bt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Wn(o,a)}function mc(o){const a=[];for(let u=0;u<o.length;u++){const h=re(o[u]);if(Array.isArray(h)){if(0===h.length)throw new xe(900,!1);let p,m=bt.Default;for(let y=0;y<h.length;y++){const C=h[y],S=M(C);"number"==typeof S?-1===S?p=C.token:m|=S:p=C}a.push(Wn(p,m))}else a.push(Wn(h))}return a}function x(o,a){return o[Yr]=a,o.prototype[Yr]=a,o}function M(o){return o[Yr]}const fe=x(gs("Optional"),8),tt=x(gs("SkipSelf"),4);let fg,If;function yC(o){fg=o}function gu(o){return function xd(){if(void 0===If&&(If=null,ut.trustedTypes))try{If=ut.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return If}()?.createHTML(o)||o}class vc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pg extends vc{getTypeName(){return"HTML"}}class CC extends vc{getTypeName(){return"Style"}}class mg extends vc{getTypeName(){return"Script"}}class DC extends vc{getTypeName(){return"URL"}}class Yv extends vc{getTypeName(){return"ResourceURL"}}function Ra(o){return o instanceof vc?o.changingThisBreaksApplicationSecurity:o}function Oa(o,a){const u=function Bs(o){return o instanceof vc&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function ei(o){return new pg(o)}function Pa(o){return new CC(o)}function hi(o){return new mg(o)}function jn(o){return new DC(o)}function Md(o){return new Yv(o)}class w{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(gu(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class g{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=gu(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=gu(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let p=u.length-1;0<p;p--){const y=u.item(p).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&a.removeAttribute(y)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const D=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,B=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ae(o){return(o=String(o)).match(D)||o.match(B)?o:"unsafe:"+o}function nt(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Xe(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const qe=nt("area,br,col,hr,img,wbr"),tn=nt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vs=nt("rp,rt"),Id=Xe(qe,Xe(tn,nt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xe(Vs,nt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xe(Vs,tn)),pi=nt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_u=nt("srcset"),Tl=Xe(pi,_u,nt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Rf=nt("script,style,template");class _g{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Id.hasOwnProperty(u))return this.sanitizedSomething=!0,!Rf.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),y=m.name,C=y.toLowerCase();if(!Tl.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let S=m.value;pi[C]&&(S=ae(S)),_u[C]&&(o=S,S=(o=String(o)).split(",").map(a=>ae(a.trim())).join(", ")),this.buf.push(" ",y,'="',Pf(S),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Id.hasOwnProperty(u)&&!qe.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Pf(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Zv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Of=/([^\#-~ |!])/g;function Pf(o){return o.replace(/&/g,"&amp;").replace(Zv,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Of,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vg;function EC(o,a){let u=null;try{vg=vg||function ti(o){const a=new g(o);return function v(){try{return!!(new window.DOMParser).parseFromString(gu(""),"text/html")}catch{return!1}}()?new w(a):a}(o);let h=a?String(a):"";u=vg.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=u.innerHTML,u=vg.getInertBodyElement(h)}while(h!==m);return gu((new _g).sanitizeChildren(Kv(u)||u))}finally{if(u){const h=Kv(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Kv(o){return"content"in o&&function Qv(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Ei=(()=>((Ei=Ei||{})[Ei.NONE=0]="NONE",Ei[Ei.HTML=1]="HTML",Ei[Ei.STYLE=2]="STYLE",Ei[Ei.SCRIPT=3]="SCRIPT",Ei[Ei.URL=4]="URL",Ei[Ei.RESOURCE_URL=5]="RESOURCE_URL",Ei))();function Jv(o){const a=function Bf(){const o=Re();return o&&o[12]}();return a?a.sanitize(Ei.URL,o)||"":Oa(o,"URL")?Ra(o):ae(De(o))}const ty=new $t("ENVIRONMENT_INITIALIZER"),SC=new $t("INJECTOR",-1),xC=new $t("INJECTOR_DEF_TYPES");class ny{get(a,u=fc){if(u===fc){const h=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw h.name="NullInjectorError",h}return u}}function ZL(...o){return{\u0275providers:iy(0,o)}}function iy(o,...a){const u=[],h=new Set;let p;return Fs(a,m=>{const y=m;MC(y,u,[],h)&&(p||(p=[]),p.push(y))}),void 0!==p&&mT(p,u),u}function mT(o,a){for(let u=0;u<o.length;u++){const{providers:p}=o[u];Fs(p,m=>{a.push(m)})}}function MC(o,a,u,h){if(!(o=re(o)))return!1;let p=null,m=os(o);const y=!m&&J(o);if(m||y){if(y&&!y.standalone)return!1;p=o}else{const S=o.ngModule;if(m=os(S),!m)return!1;p=S}const C=h.has(p);if(y){if(C)return!1;if(h.add(p),y.dependencies){const S="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const I of S)MC(I,a,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let I;h.add(p);try{Fs(m.imports,O=>{MC(O,a,u,h)&&(I||(I=[]),I.push(O))})}finally{}void 0!==I&&mT(I,a)}if(!C){const I=ha(p)||(()=>new p);a.push({provide:p,useFactory:I,deps:zt},{provide:xC,useValue:p,multi:!0},{provide:ty,useValue:()=>Wn(p),multi:!0})}const S=m.providers;null==S||C||Fs(S,O=>{a.push(O)})}}return p!==o&&void 0!==o.providers}const KL=ye({provide:String,useValue:ye});function ry(o){return null!==o&&"object"==typeof o&&KL in o}function Td(o){return"function"==typeof o}const TC=new $t("Set Injector scope."),yg={},XL={};let bg;function sy(){return void 0===bg&&(bg=new ny),bg}class Na{}class AC extends Na{constructor(a,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ay(a,y=>this.processProvider(y)),this.records.set(SC,Ad(void 0,this)),p.has("environment")&&this.records.set(Na,Ad(void 0,this));const m=this.records.get(TC);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(xC.multi,zt,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Aa(this),h=mn(void 0);try{return a()}finally{Aa(u),mn(h)}}get(a,u=fc,h=bt.Default){this.assertNotDestroyed();const p=Aa(this),m=mn(void 0);try{if(!(h&bt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const S=function OC(o){return"function"==typeof o||"object"==typeof o&&o instanceof $t}(a)&&$i(a);C=S&&this.injectableDefInScope(S)?Ad(oy(a),yg):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&bt.Self?sy():this.parent).get(a,u=h&bt.Optional&&u===fc?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[pc]=y[pc]||[]).unshift(ge(a)),p)throw y;return function R(o,a,u,h){const p=o[pc];throw a[fu]&&p.unshift(a[fu]),o.message=function U(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let p=ge(a);if(Array.isArray(a))p=a.map(ge).join(" -> ");else if("object"==typeof a){let m=[];for(let y in a)if(a.hasOwnProperty(y)){let C=a[y];m.push(y+":"+("string"==typeof C?JSON.stringify(C):ge(C)))}p=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${o.replace(Dd,"\n  ")}`}("\n"+o.message,p,u,h),o.ngTokenPath=p,o[pc]=null,o}(y,a,"R3InjectorError",this.source)}throw y}finally{mn(m),Aa(p)}}resolveInjectorInitializers(){const a=Aa(this),u=mn(void 0);try{const h=this.get(ty.multi,zt,bt.Self);for(const p of h)p()}finally{Aa(a),mn(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(ge(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(a){let u=Td(a=re(a))?a:re(a&&a.provide);const h=function yT(o){return ry(o)?Ad(void 0,o.useValue):Ad(kC(o),yg)}(a);if(Td(a)||!0!==a.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Ad(void 0,yg,!0),p.factory=()=>mc(p.multi),this.records.set(u,p)),u=a,p.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===yg&&(u.value=XL,u.value=u.factory()),"object"==typeof u.value&&u.value&&function RC(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=re(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function oy(o){const a=$i(o),u=null!==a?a.factory:ha(o);if(null!==u)return u;if(o instanceof $t)throw new xe(204,!1);if(o instanceof Function)return function vT(o){const a=o.length;if(a>0)throw Ta(a,"?"),new xe(204,!1);const u=function qi(o){const a=o&&(o[br]||o[Kn]);if(a){const u=function Ln(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new xe(204,!1)}function kC(o,a,u){let h;if(Td(o)){const p=re(o);return ha(p)||oy(p)}if(ry(o))h=()=>re(o.useValue);else if(function IC(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...mc(o.deps||[]));else if(function _T(o){return!(!o||!o.useExisting)}(o))h=()=>Wn(re(o.useExisting));else{const p=re(o&&(o.useClass||o.provide));if(!function bT(o){return!!o.deps}(o))return ha(p)||oy(p);h=()=>new p(...mc(o.deps))}return h}function Ad(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function wT(o){return!!o.\u0275providers}function ay(o,a){for(const u of o)Array.isArray(u)?ay(u,a):wT(u)?ay(u.\u0275providers,a):a(u)}class PC{}class JL{resolveComponentFactory(a){throw function ly(o){const a=Error(`No component factory found for ${ge(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let wg=(()=>{class o{}return o.NULL=new JL,o})();function eB(){return Vf(Xn(),Re())}function Vf(o,a){return new vu(fr(o,a))}let vu=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=eB,o})();function cy(o){return o instanceof vu?o.nativeElement:o}class NC{}let FC=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function kd(){const o=Re(),u=Bi(Xn().index,o);return(Un(u)?u:o)[11]}(),o})(),ET=(()=>{class o{}return o.\u0275prov=cn({token:o,providedIn:"root",factory:()=>null}),o})();class ST{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const LC=new ST("14.1.3"),BC={};function fy(o){return o.ngOriginalError}class Uf{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&fy(a);for(;u&&fy(u);)u=fy(u);return u||null}}const py=new Map;let qC=0;function NT(o){return py.get(o)||null}class my{constructor(a,u,h){this.lViewId=a,this.nodeIndex=u,this.native=h}get lView(){return NT(this.lViewId)}}function Qi(o){let a=Gf(o);if(a){if(Un(a)){const u=a;let h,p,m;if(function LT(o){return o&&o.constructor&&o.constructor.\u0275cmp}(o)){if(h=function QC(o,a){const u=o[1].components;if(u)for(let h=0;h<u.length;h++){const p=u[h];if(Bi(p,o)[8]===a)return p}else if(Bi(22,o)[8]===a)return 22;return-1}(u,o),-1==h)throw new Error("The provided component was not found in the application");p=o}else if(function BT(o){return o&&o.constructor&&o.constructor.\u0275dir}(o)){if(h=function VT(o,a){let u=o[1].firstChild;for(;u;){const p=u.directiveEnd;for(let m=u.directiveStart;m<p;m++)if(o[m]===a)return u.index;u=sB(u)}return-1}(u,o),-1==h)throw new Error("The provided directive was not found in the application");m=function XC(o,a,u){const h=a[1].data[o];let p=h.directiveStart;return 0==p?zt:(!u&&2&h.flags&&p++,a.slice(p,h.directiveEnd))}(h,u,!1)}else if(h=KC(u,o),-1==h)return null;const y=ui(u[h]),C=Gf(y),S=C&&!Array.isArray(C)?C:Cg(u,h,y);if(p&&void 0===S.component&&(S.component=p,Ir(S.component,S)),m&&void 0===S.directives){S.directives=m;for(let I=0;I<m.length;I++)Ir(m[I],S)}Ir(S.native,S),a=S}}else{const u=o;let h=u;for(;h=h.parentNode;){const p=Gf(h);if(p){const m=Array.isArray(p)?p:p.lView;if(!m)return null;const y=KC(m,u);if(y>=0){const C=ui(m[y]),S=Cg(m,y,C);Ir(C,S),a=S;break}}}}return a||null}function Cg(o,a,u){return new my(o[20],a,u)}const ZC="__ngContext__";function Ir(o,a){Un(a)?(o[ZC]=a[20],function WC(o){py.set(o[20],o)}(a)):o[ZC]=a}function Gf(o){const a=o[ZC];return"number"==typeof a?NT(a):a||null}function Rd(o){const a=Gf(o);return a?Un(a)?a:a.lView:null}function KC(o,a){const u=o[1];for(let h=22;h<u.bindingStartIndex;h++)if(ui(o[h])===a)return h;return-1}function sB(o){if(o.child)return o.child;if(o.next)return o.next;for(;o.parent&&!o.parent.next;)o=o.parent;return o.parent&&o.parent.next}const HT=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(ut))();function bc(o){return o instanceof Function?o():o}var kl=(()=>((kl=kl||{})[kl.Important=1]="Important",kl[kl.DashCase=2]="DashCase",kl))();function yy(o,a){return undefined(o,a)}function Dg(o){const a=o[3];return jr(a)?a[3]:a}function eD(o){return qT(o[13])}function tD(o){return qT(o[4])}function qT(o){for(;null!==o&&!jr(o);)o=o[4];return o}function zf(o,a,u,h,p){if(null!=h){let m,y=!1;jr(h)?m=h:Un(h)&&(y=!0,h=h[0]);const C=ui(h);0===o&&null!==u?null==p?aD(a,u,C):wc(a,u,C,p||null,!0):1===o&&null!==u?wc(a,u,C,p||null,!0):2===o?function ZT(o,a,u){const h=yu(o,a);h&&function lD(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,C,y):3===o&&a.destroyNode(C),null!=m&&function KT(o,a,u,h,p){const m=u[7];m!==ui(u)&&zf(a,o,h,m,p);for(let C=10;C<u.length;C++){const S=u[C];Qf(S[1],S,o,a,h,m)}}(a,o,m,u,p)}}function by(o,a,u){return o.createElement(a,u)}function sD(o,a){const u=o[9],h=u.indexOf(a),p=a[3];512&a[2]&&(a[2]&=-513,Oo(p,-1)),u.splice(h,1)}function $f(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const p=h[17];null!==p&&p!==o&&sD(p,h),a>0&&(o[u-1][4]=h[4]);const m=du(o,10+a);!function Zr(o,a){Qf(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const y=m[19];null!==y&&y.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function xg(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&Qf(o,a,u,3,null,null),function iD(o){let a=o[13];if(!a)return qf(o[1],o);for(;a;){let u=null;if(Un(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Un(a)&&qf(a[1],a),a=a[3];null===a&&(a=o),Un(a)&&qf(a[1],a),u=a&&a[4]}a=u}}(a)}}function qf(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function oD(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const p=a[u[h]];if(!(p instanceof Ca)){const m=u[h+1];if(Array.isArray(m))for(let y=0;y<m.length;y+=2){const C=p[m[y]],S=m[y+1];try{S.call(C)}finally{}}else try{m.call(p)}finally{}}}}(o,a),function Wf(o,a){const u=o.cleanup,h=a[7];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const y=u[m+1],C="function"==typeof y?y(a):ui(a[y]),S=h[p=u[m+2]],I=u[m+3];"boolean"==typeof I?C.removeEventListener(u[m],S,I):I>=0?h[p=I]():h[p=-I].unsubscribe(),m+=2}else{const y=h[p=u[m+1]];u[m].call(y)}if(null!==h){for(let m=p+1;m<h.length;m++)(0,h[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&jr(a[3])){u!==a[3]&&sD(u,a);const h=a[19];null!==h&&h.detachView(o)}!function FT(o){py.delete(o[20])}(a)}}function Cy(o,a,u){return function Dy(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const p=o.data[h.directiveStart].encapsulation;if(p===pt.None||p===pt.Emulated)return null}return fr(h,u)}(o,a.parent,u)}function wc(o,a,u,h,p){o.insertBefore(a,u,h,p)}function aD(o,a,u){o.appendChild(a,u)}function Ey(o,a,u,h,p){null!==h?wc(o,a,u,h,p):aD(o,a,u)}function yu(o,a){return o.parentNode(a)}function Mg(o,a,u){return Yf(o,a,u)}let Yf=function cD(o,a,u){return 40&o.type?fr(o,u):null};function Zf(o,a,u,h){const p=Cy(o,h,a),m=a[11],C=Mg(h.parent||a[6],h,a);if(null!=p)if(Array.isArray(u))for(let S=0;S<u.length;S++)Ey(m,p,u[S],C,!1);else Ey(m,p,u,C,!1)}function Kf(o,a){if(null!==a){const u=a.type;if(3&u)return fr(a,o);if(4&u)return dD(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return Kf(o,h);{const p=o[a.index];return jr(p)?dD(-1,p):ui(p)}}if(32&u)return yy(a,o)()||ui(o[a.index]);{const h=uD(o,a);return null!==h?Array.isArray(h)?h[0]:Kf(Dg(o[16]),h):Kf(o,a.next)}}return null}function uD(o,a){return null!==a?o[16][6].projection[a.projection]:null}function dD(o,a){const u=10+o+1;if(u<a.length){const h=a[u],p=h[1].firstChild;if(null!==p)return Kf(h,p)}return a[7]}function bu(o,a,u,h,p,m,y){for(;null!=u;){const C=h[u.index],S=u.type;if(y&&0===a&&(C&&Ir(ui(C),h),u.flags|=4),64!=(64&u.flags))if(8&S)bu(o,a,u.child,h,p,m,!1),zf(a,o,p,C,m);else if(32&S){const I=yy(u,h);let O;for(;O=I();)zf(a,o,p,O,m);zf(a,o,p,C,m)}else 16&S?Sy(o,a,h,u,p,m):zf(a,o,p,C,m);u=y?u.projectionNext:u.next}}function Qf(o,a,u,h,p,m){bu(u,h,o.firstChild,a,p,m,!1)}function Sy(o,a,u,h,p,m){const y=u[16],S=y[6].projection[h.projection];if(Array.isArray(S))for(let I=0;I<S.length;I++)zf(a,o,p,S[I],m);else bu(o,a,S,y[3],p,m,!0)}function xy(o,a,u){o.setAttribute(a,"style",u)}function My(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function Xf(o,a,u){let h=o.length;for(;;){const p=o.indexOf(a,u);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const m=a.length;if(p+m===h||o.charCodeAt(p+m)<=32)return p}u=p+1}}const pD="ng-template";function QT(o,a,u){let h=0;for(;h<o.length;){let p=o[h++];if(u&&"class"===p){if(p=o[h],-1!==Xf(p.toLowerCase(),a,0))return!0}else if(1===p){for(;h<o.length&&"string"==typeof(p=o[h++]);)if(p.toLowerCase()===a)return!0;return!1}}return!1}function XT(o){return 4===o.type&&o.value!==pD}function uB(o,a,u){return a===(4!==o.type||u?o.value:pD)}function dB(o,a,u){let h=4;const p=o.attrs||[],m=function pB(o){for(let a=0;a<o.length;a++)if(su(o[a]))return a;return o.length}(p);let y=!1;for(let C=0;C<a.length;C++){const S=a[C];if("number"!=typeof S){if(!y)if(4&h){if(h=2|1&h,""!==S&&!uB(o,S,u)||""===S&&1===a.length){if(Fa(h))return!1;y=!0}}else{const I=8&h?S:a[++C];if(8&h&&null!==o.attrs){if(!QT(o.attrs,I,u)){if(Fa(h))return!1;y=!0}continue}const H=hB(8&h?"class":S,p,XT(o),u);if(-1===H){if(Fa(h))return!1;y=!0;continue}if(""!==I){let Q;Q=H>m?"":p[H+1].toLowerCase();const le=8&h?Q:null;if(le&&-1!==Xf(le,I,0)||2&h&&I!==Q){if(Fa(h))return!1;y=!0}}}}else{if(!y&&!Fa(h)&&!Fa(S))return!1;if(y&&Fa(S))continue;y=!1,h=S|1&h}}return Fa(h)||y}function Fa(o){return 0==(1&o)}function hB(o,a,u,h){if(null===a)return-1;let p=0;if(h||!u){let m=!1;for(;p<a.length;){const y=a[p];if(y===o)return p;if(3===y||6===y)m=!0;else{if(1===y||2===y){let C=a[++p];for(;"string"==typeof C;)C=a[++p];continue}if(4===y)break;if(0===y){p+=4;continue}}p+=m?1:2}return-1}return function mB(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function JT(o,a,u=!1){for(let h=0;h<a.length;h++)if(dB(o,a[h],u))return!0;return!1}function gB(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let p=0;p<o.length;p++)if(o[p]!==h[p])continue e;return!0}}return!1}function eA(o,a){return o?":not("+a.trim()+")":a}function _B(o){let a=o[0],u=1,h=2,p="",m=!1;for(;u<o.length;){let y=o[u];if("string"==typeof y)if(2&h){const C=o[++u];p+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+y:4&h&&(p+=" "+y);else""!==p&&!Fa(y)&&(a+=eA(m,p),p=""),h=y,m=m||!Fa(h);u++}return""!==p&&(a+=eA(m,p)),a}const Kt={};function tA(o){mD(Yt(),Re(),di()+o,!1)}function mD(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&uf(a,m,u)}else{const m=o.preOrderHooks;null!==m&&df(a,m,0,u)}ds(u)}function _D(o,a=null,u=null,h){const p=Tg(o,a,u,h);return p.resolveInjectorInitializers(),p}function Tg(o,a=null,u=null,h,p=new Set){const m=[u||zt,ZL(o)];return h=h||("object"==typeof o?void 0:ge(o)),new AC(m,a||sy(),h||null,p)}let Ld=(()=>{class o{static create(u,h){if(Array.isArray(u))return _D({name:""},h,u,"");{const p=u.name??"";return _D({name:p},u.parent,u.providers,p)}}}return o.THROW_IF_NOT_FOUND=fc,o.NULL=new ny,o.\u0275prov=cn({token:o,providedIn:"any",factory:()=>Wn(SC)}),o.__NG_ELEMENT_ID__=-1,o})();function Vd(o,a=bt.Default){const u=Re();return null===u?Wn(o,a):sc(Xn(),u,re(o),a)}function DD(){throw new Error("invalid")}function Ag(o,a){return o<<17|a<<2}function Hs(o){return o>>17&32767}function Cc(o){return 2|o}function ws(o){return(131068&o)>>2}function Hd(o,a){return-131069&o|a<<2}function Py(o){return 1|o}function Vy(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],m=u[h+1];if(-1!==m){const y=o.data[m];eu(p),y.contentQueries(2,a[m],m)}}}function Hy(o,a,u,h,p,m,y,C,S,I,O){const H=a.blueprint.slice();return H[0]=p,H[2]=76|h,(null!==O||o&&1024&o[2])&&(H[2]|=1024),so(H),H[3]=H[15]=o,H[8]=u,H[10]=y||o&&o[10],H[11]=C||o&&o[11],H[12]=S||o&&o[12]||null,H[9]=I||o&&o[9]||null,H[6]=m,H[20]=function PT(){return qC++}(),H[21]=O,H[16]=2==a.type?o[16]:H,H}function Rl(o,a,u,h,p){let m=o.data[a];if(null===m)m=function Eu(o,a,u,h,p){const m=Fo(),y=Kc(),S=o.data[a]=function jy(o,a,u,h,p,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?m:m&&m.parent,u,a,h,p);return null===o.firstChild&&(o.firstChild=S),null!==m&&(y?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}(o,a,u,h,p),function af(){return At.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=p;const y=function ga(){const o=At.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===y?-1:y.injectorIndex}return or(m,!0),m}function zd(o,a,u,h){if(0===u)return-1;const p=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return p}function Su(o,a,u){ya(a);try{const h=o.viewQuery;null!==h&&Yy(1,h,u);const p=o.template;null!==p&&pA(o,a,p,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Vy(o,a),o.staticViewQueries&&Yy(2,o.viewQuery,u);const m=o.components;null!==m&&function BB(o,a){for(let u=0;u<a.length;u++)MA(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,tc()}}function Lg(o,a,u,h){const p=a[2];if(128!=(128&p)){ya(a);try{so(a),function Qc(o){return At.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&pA(o,a,u,2,h);const y=3==(3&p);if(y){const I=o.preOrderCheckHooks;null!==I&&uf(a,I,null)}else{const I=o.preOrderHooks;null!==I&&df(a,I,0,null),gl(a,0)}if(function $y(o){for(let a=eD(o);null!==a;a=tD(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const p=u[h],m=p[3];0==(512&p[2])&&Oo(m,1),p[2]|=512}}}(a),function SA(o){for(let a=eD(o);null!==a;a=tD(a))for(let u=10;u<a.length;u++){const h=a[u],p=h[1];cs(h)&&Lg(p,h,p.template,h[8])}}(a),null!==o.contentQueries&&Vy(o,a),y){const I=o.contentCheckHooks;null!==I&&uf(a,I)}else{const I=o.contentHooks;null!==I&&df(a,I,1),gl(a,1)}!function FB(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)ds(~p);else{const m=p,y=u[++h],C=u[++h];Jl(y,m),C(2,a[m])}}}finally{ds(-1)}}(o,a);const C=o.components;null!==C&&function LB(o,a){for(let u=0;u<a.length;u++)xA(o,a[u])}(a,C);const S=o.viewQuery;if(null!==S&&Yy(2,S,h),y){const I=o.viewCheckHooks;null!==I&&uf(a,I)}else{const I=o.viewHooks;null!==I&&df(a,I,2),gl(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Oo(a[3],-1))}finally{tc()}}}function VB(o,a,u,h){const p=a[10],y=Ro(a);try{!y&&p.begin&&p.begin(),y&&Su(o,a,h),Lg(o,a,u,h)}finally{!y&&p.end&&p.end()}}function pA(o,a,u,h,p){const m=di(),y=2&h;try{ds(-1),y&&a.length>22&&mD(o,a,22,!1),u(h,p)}finally{ds(m)}}function mA(o,a,u){if(no(a)){const p=a.directiveEnd;for(let m=a.directiveStart;m<p;m++){const y=o.data[m];y.contentQueries&&y.contentQueries(1,u[m],m)}}}function ID(o,a,u){!pa()||(function bA(o,a,u,h){const p=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||fs(u,a),Ir(h,a);const y=u.initialInputs;for(let C=p;C<m;C++){const S=o.data[C],I=Dr(S);I&&$d(a,u,S);const O=Wr(a,o,C,u);Ir(O,a),null!==y&&DA(0,C-p,O,S,0,y),I&&(Bi(u.index,a)[8]=O)}}(o,a,u,fr(u,a)),128==(128&u.flags)&&function wA(o,a,u){const h=u.directiveStart,p=u.directiveEnd,m=u.index,y=function Jc(){return At.lFrame.currentDirectiveIndex}();try{ds(m);for(let C=h;C<p;C++){const S=o.data[C],I=a[C];hl(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&mt(S,I)}}finally{ds(-1),hl(y)}}(o,a,u))}function Go(o,a,u=fr){const h=a.localNames;if(null!==h){let p=a.index+1;for(let m=0;m<h.length;m+=2){const y=h[m+1],C=-1===y?u(a,o):o[y];o[p++]=C}}}function zo(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Uy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Uy(o,a,u,h,p,m,y,C,S,I){const O=22+h,H=O+p,Q=function gA(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Kt);return u}(O,H),le="function"==typeof I?I():I;return Q[1]={type:o,blueprint:Q,template:u,queries:null,viewQuery:C,declTNode:a,data:Q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:S,consts:le,incompleteFirstPass:!1}}function Bg(o,a,u,h){const p=Zy(a);null===u?p.push(h):(p.push(u),o.firstCreatePass&&Ky(o).push(h,p.length-1))}function vA(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const p=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,p):u[h]=[a,p]}return u}function Gy(o,a){const h=a.directiveEnd,p=o.data,m=a.attrs,y=[];let C=null,S=null;for(let I=a.directiveStart;I<h;I++){const O=p[I],H=O.inputs,Q=null===m||XT(a)?null:EA(H,m);y.push(Q),C=vA(H,I,C),S=vA(O.outputs,I,S)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=C,a.outputs=S}function mo(o,a,u,h,p,m,y,C){const S=fr(a,u);let O,I=a.inputs;!C&&null!=I&&(O=I[h])?(Ha(o,u,O,h,p),sl(a)&&yA(u,a.index)):3&a.type&&(h=function AD(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),p=null!=y?y(p,a.value||"",h):p,m.setProperty(S,h,p))}function yA(o,a){const u=Bi(a,o);16&u[2]||(u[2]|=32)}function Vg(o,a,u,h){let p=!1;if(pa()){const m=function jB(o,a,u){const h=o.directiveRegistry;let p=null;if(h)for(let m=0;m<h.length;m++){const y=h[m];JT(u,y.selectors,!1)&&(p||(p=[]),ar(fs(u,a),o,y.type),Dr(y)?(CA(o,u),p.unshift(y)):p.push(y))}return p}(o,a,u),y=null===h?null:{"":-1};if(null!==m){p=!0,Va(u,o.data.length,m.length);for(let O=0;O<m.length;O++){const H=m[O];H.providersResolver&&H.providersResolver(H)}let C=!1,S=!1,I=zd(o,a,m.length,null);for(let O=0;O<m.length;O++){const H=m[O];u.mergedAttrs=Sa(u.mergedAttrs,H.hostAttrs),Ol(o,u,a,I,H),dp(I,H,y),null!==H.contentQueries&&(u.flags|=8),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(u.flags|=128);const Q=H.type.prototype;!C&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!S&&(Q.ngOnChanges||Q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),S=!0),I++}Gy(o,u)}y&&function GB(o,a,u){if(a){const h=o.localNames=[];for(let p=0;p<a.length;p+=2){const m=u[a[p+1]];if(null==m)throw new xe(-301,!1);h.push(a[p],m)}}}(u,h,y)}return u.mergedAttrs=Sa(u.mergedAttrs,u.attrs),p}function Hg(o,a,u,h,p,m){const y=m.hostBindings;if(y){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const S=~a.index;(function zy(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=S&&C.push(S),C.push(h,p,y)}}function mt(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function CA(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function dp(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;Dr(a)&&(u[""]=o)}}function Va(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function Ol(o,a,u,h,p){o.data[h]=p;const m=p.factory||(p.factory=ha(p.type)),y=new Ca(m,Dr(p),Vd);o.blueprint[h]=y,u[h]=y,Hg(o,a,0,h,zd(o,u,p.hostVars,Kt),p)}function $d(o,a,u){const h=fr(a,o),p=zo(u),m=o[10],y=Wy(o,Hy(o,p,null,u.onPush?32:16,h,a,m,m.createRenderer(h,u),null,null,null));o[a.index]=y}function $o(o,a,u,h,p,m){const y=fr(o,a);!function kD(o,a,u,h,p,m,y){if(null==m)o.removeAttribute(a,p,u);else{const C=null==y?De(m):y(m,h||"",p);o.setAttribute(a,p,C,u)}}(a[11],y,m,o.value,u,h,p)}function DA(o,a,u,h,p,m){const y=m[a];if(null!==y){const C=h.setInput;for(let S=0;S<y.length;){const I=y[S++],O=y[S++],H=y[S++];null!==C?h.setInput(u,H,I,O):u[O]=H}}}function EA(o,a){let u=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;o.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,o[p],a[h+1])),h+=2}else h+=2;else h+=4}return u}function Ug(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function xA(o,a){const u=Bi(a,o);if(cs(u)){const h=u[1];48&u[2]?Lg(h,u,h.template,u[8]):u[5]>0&&qy(u)}}function qy(o){for(let h=eD(o);null!==h;h=tD(h))for(let p=10;p<h.length;p++){const m=h[p];if(cs(m))if(512&m[2]){const y=m[1];Lg(y,m,y.template,m[8])}else m[5]>0&&qy(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=Bi(u[h],o);cs(p)&&p[5]>0&&qy(p)}}function MA(o,a){const u=Bi(a,o),h=u[1];(function IA(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Su(h,u,u[8])}function Wy(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function xu(o){for(;o;){o[2]|=32;const a=Dg(o);if(sd(o)&&!a)return o;o=a}return null}function hp(o){!function RD(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=Rd(u);if(null!==h){const p=h[1];VB(p,h,p.template,u)}}}(o[8])}function Yy(o,a,u){eu(0),a(o,u)}const PD=(()=>Promise.resolve(null))();function Zy(o){return o[7]||(o[7]=[])}function Ky(o){return o.cleanup||(o.cleanup=[])}function ND(o,a,u){return(null===o||Dr(o))&&(u=function Ql(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function Qy(o,a){const u=o[9],h=u?u.get(Uf,null):null;h&&h.handleError(a)}function Ha(o,a,u,h,p){for(let m=0;m<u.length;){const y=u[m++],C=u[m++],S=a[y],I=o.data[y];null!==I.setInput?I.setInput(S,p,h,C):S[C]=p}}function jg(o,a,u){let h=u?o.styles:null,p=u?o.classes:null,m=0;if(null!==a)for(let y=0;y<a.length;y++){const C=a[y];"number"==typeof C?m=C:1==m?p=Ce(p,C):2==m&&(h=Ce(h,C+": "+a[++y]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=p:o.classesWithoutHost=p}function qd(o,a,u,h,p=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(ui(m)),jr(m))for(let C=10;C<m.length;C++){const S=m[C],I=S[1].firstChild;null!==I&&qd(S[1],S,I,h)}const y=u.type;if(8&y)qd(o,a,u.child,h);else if(32&y){const C=yy(u,a);let S;for(;S=C();)h.push(S)}else if(16&y){const C=uD(a,u);if(Array.isArray(C))h.push(...C);else{const S=Dg(a[16]);qd(S[1],S,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class Gg{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return qd(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(jr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&($f(a,h),du(u,h))}this._attachedToViewContainer=!1}xg(this._lView[1],this._lView)}onDestroy(a){Bg(this._lView[1],this._lView,null,a)}markForCheck(){xu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Mu(o,a,u){const h=a[10];h.begin&&h.begin();try{Lg(o,a,o.template,u)}catch(p){throw Qy(a,p),p}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nd(o,a){Qf(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=a}}class $B extends Gg{constructor(a){super(a),this._view=a}detectChanges(){hp(this._view)}checkNoChanges(){}get context(){return null}}class FD extends wg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=J(a);return new zg(u,this.ngModule)}}function kA(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class WB{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const p=this.injector.get(a,BC,h);return p!==BC||u===BC?p:this.parentInjector.get(a,u,h)}}class zg extends PC{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function vB(o){return o.map(_B).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return kA(this.componentDef.inputs)}get outputs(){return kA(this.componentDef.outputs)}create(a,u,h,p){let m=(p=p||this.ngModule)instanceof Na?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const y=m?new WB(a,m):a,C=y.get(NC,null);if(null===C)throw new xe(407,!1);const S=y.get(ET,null),I=C.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",H=h?function _A(o,a,u){return o.selectRootElement(a,u===pt.ShadowDom)}(I,h,this.componentDef.encapsulation):by(C.createRenderer(null,this.componentDef),O,function qB(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),Q=this.componentDef.onPush?288:272,le=function fp(o,a){return{components:[],scheduler:o||HT,clean:PD,playerHandler:a||null,flags:0}}(),Te=Uy(0,null,null,1,0,null,null,null,null,null),Ge=Hy(null,Te,le,Q,null,null,C,I,S,y,null);let st,gt;ya(Ge);try{const Ot=function OA(o,a,u,h,p,m){const y=u[1];u[22]=o;const S=Rl(y,22,2,"#host",null),I=S.mergedAttrs=a.hostAttrs;null!==I&&(jg(S,I,!0),null!==o&&(_l(p,o,I),null!==S.classes&&My(p,o,S.classes),null!==S.styles&&xy(p,o,S.styles)));const O=h.createRenderer(o,a),H=Hy(u,zo(a),null,a.onPush?32:16,u[22],S,h,O,m||null,null,null);return y.firstCreatePass&&(ar(fs(S,u),y,a.type),CA(y,S),Va(S,u.length,1)),Wy(u,H),u[22]=H}(H,this.componentDef,Ge,C,I);if(H)if(h)_l(I,H,["ng-version",LC.full]);else{const{attrs:Be,classes:It}=function yB(o){const a=[],u=[];let h=1,p=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===p?""!==m&&a.push(m,o[++h]):8===p&&u.push(m);else{if(!Fa(p))break;p=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Be&&_l(I,H,Be),It&&It.length>0&&My(I,H,It.join(" "))}if(gt=ko(Te,22),void 0!==u){const Be=gt.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const _n=u[It];Be.push(null!=_n?Array.from(_n):null)}}st=function $g(o,a,u,h,p){const m=u[1],y=function UB(o,a,u){const h=Xn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Ol(o,h,a,zd(o,a,1,null),u),Gy(o,h));const p=Wr(a,o,h.directiveStart,h);Ir(p,a);const m=fr(h,a);return m&&Ir(m,a),p}(m,u,a);if(h.components.push(y),o[8]=y,null!==p)for(const S of p)S(y,a);if(a.contentQueries){const S=Xn();a.contentQueries(1,y,S.directiveStart)}const C=Xn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ds(C.index),Hg(u[1],C,0,C.directiveStart,C.directiveEnd,a),mt(a,y)),y}(Ot,this.componentDef,Ge,le,[LD]),Su(Te,Ge,null)}finally{tc()}return new YB(this.componentType,st,Vf(gt,Ge),Ge,gt)}}class YB extends class CT{}{constructor(a,u,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new $B(p),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[a])){const m=this._rootLView;Ha(m[1],m,p,a,u),yA(m,this._tNode.index)}}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function LD(){const o=Xn();iu(Re()[1],o)}function Xy(o){let a=function PA(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let p;if(Dr(o))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new xe(903,!1);p=a.\u0275dir}if(p){if(u){h.push(p);const y=o;y.inputs=pp(o.inputs),y.declaredInputs=pp(o.declaredInputs),y.outputs=pp(o.outputs);const C=p.hostBindings;C&&FA(o,C);const S=p.viewQuery,I=p.contentQueries;if(S&&VD(o,S),I&&NA(o,I),oe(o.inputs,p.inputs),oe(o.declaredInputs,p.declaredInputs),oe(o.outputs,p.outputs),Dr(p)&&p.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let y=0;y<m.length;y++){const C=m[y];C&&C.ngInherit&&C(o),C===Xy&&(u=!1)}}a=Object.getPrototypeOf(a)}!function BD(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const p=o[h];p.hostVars=a+=p.hostVars,p.hostAttrs=Sa(p.hostAttrs,u=Sa(u,p.hostAttrs))}}(h)}function pp(o){return o===Vn?{}:o===zt?[]:o}function VD(o,a){const u=o.viewQuery;o.viewQuery=u?(h,p)=>{a(h,p),u(h,p)}:a}function NA(o,a){const u=o.contentQueries;o.contentQueries=u?(h,p,m)=>{a(h,p,m),u(h,p,m)}:a}function FA(o,a){const u=o.hostBindings;o.hostBindings=u?(h,p)=>{a(h,p),u(h,p)}:a}let qg=null;function Wd(){if(!qg){const o=ut.Symbol;if(o&&o.iterator)qg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(qg=h)}}}return qg}function Yd(o){return!!Zd(o)&&(Array.isArray(o)||!(o instanceof Map)&&Wd()in o)}function Zd(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function qo(o,a,u){return o[a]=u}function Tr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function HD(o,a,u,h){const p=Re();return Tr(p,Bo(),a)&&(Yt(),$o(xn(),p,o,a,u,h)),HD}function Iu(o,a,u,h){return Tr(o,Bo(),u)?a+De(u)+h:Kt}function zD(o,a,u,h,p,m,y,C){const S=Re(),I=Yt(),O=o+22,H=I.firstCreatePass?function jA(o,a,u,h,p,m,y,C,S){const I=a.consts,O=Rl(a,o,4,y||null,us(I,C));Vg(a,u,O,us(I,S)),iu(a,O);const H=O.tViews=Uy(2,O,h,p,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,I);return null!==a.queries&&(a.queries.template(a,O),H.queries=a.queries.embeddedTView(O)),O}(O,I,S,a,u,h,p,m,y):I.data[O];or(H,!1);const Q=S[11].createComment("");Zf(I,S,Q,H),Ir(Q,S),Wy(S,S[O]=Ug(Q,S,Q,H)),ks(H)&&ID(I,S,H),null!=y&&Go(S,H,C)}function Sc(o){return Ps(function _a(){return At.lFrame.contextLView}(),22+o)}function nb(o,a,u){const h=Re();return Tr(h,Bo(),a)&&mo(Yt(),xn(),h,o,a,h[11],u,!1),nb}function ja(o,a,u,h,p){const y=p?"class":"style";Ha(o,u,a.inputs[y],y,h)}function Si(o,a,u,h){const p=Re(),m=Yt(),y=22+o,C=p[11],S=p[y]=by(C,a,function gd(){return At.lFrame.currentNamespace}()),I=m.firstCreatePass?function $D(o,a,u,h,p,m,y){const C=a.consts,I=Rl(a,o,2,p,us(C,m));return Vg(a,u,I,us(C,y)),null!==I.attrs&&jg(I,I.attrs,!1),null!==I.mergedAttrs&&jg(I,I.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,I),I}(y,m,p,0,a,u,h):m.data[y];or(I,!0);const O=I.mergedAttrs;null!==O&&_l(C,S,O);const H=I.classes;null!==H&&My(C,S,H);const Q=I.styles;return null!==Q&&xy(C,S,Q),64!=(64&I.flags)&&Zf(m,p,S,I),0===function ul(){return At.lFrame.elementDepthCount}()&&Ir(S,p),function dd(){At.lFrame.elementDepthCount++}(),ks(I)&&(ID(m,p,I),mA(m,I,p)),null!==h&&Go(p,I),Si}function Wo(){let o=Xn();Kc()?Lo():(o=o.parent,or(o,!1));const a=o;!function oo(){At.lFrame.elementDepthCount--}();const u=Yt();return u.firstCreatePass&&(iu(u,o),no(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Ri(o){return 0!=(16&o.flags)}(a)&&ja(u,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function hf(o){return 0!=(32&o.flags)}(a)&&ja(u,a,Re(),a.stylesWithoutHost,!1),Wo}function ib(o,a,u,h){return Si(o,a,u,h),Wo(),ib}function wp(o,a,u){const h=Re(),p=Yt(),m=o+22,y=p.firstCreatePass?function Yo(o,a,u,h,p){const m=a.consts,y=us(m,h),C=Rl(a,o,8,"ng-container",y);return null!==y&&jg(C,y,!0),Vg(a,u,C,us(m,p)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,p,h,a,u):p.data[m];or(y,!0);const C=h[m]=h[11].createComment("");return Zf(p,h,C,y),Ir(C,h),ks(y)&&(ID(p,h,y),mA(p,y,h)),null!=u&&Go(h,y),wp}function Cp(){let o=Xn();const a=Yt();return Kc()?Lo():(o=o.parent,or(o,!1)),a.firstCreatePass&&(iu(a,o),no(o)&&a.queries.elementEnd(o)),Cp}function Wg(o,a,u){return wp(o,a,u),Cp(),Wg}function rb(){return Re()}function Yg(o){return!!o&&"function"==typeof o.then}function sb(o){return!!o&&"function"==typeof o.subscribe}const ob=sb;function Zg(o,a,u,h){const p=Re(),m=Yt(),y=Xn();return ab(m,p,p[11],y,o,a,0,h),Zg}function eh(o,a){const u=Xn(),h=Re(),p=Yt();return ab(p,h,ND(fl(p.data),u,h),u,o,a),eh}function ab(o,a,u,h,p,m,y,C){const S=ks(h),O=o.firstCreatePass&&Ky(o),H=a[8],Q=Zy(a);let le=!0;if(3&h.type||C){const st=fr(h,a),gt=C?C(st):st,Ot=Q.length,Be=C?_n=>C(ui(_n[h.index])):h.index;let It=null;if(!C&&S&&(It=function qD(o,a,u,h){const p=o.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const y=p[m];if(y===u&&p[m+1]===h){const C=a[7],S=p[m+2];return C.length>S?C[S]:null}"string"==typeof y&&(m+=2)}return null}(o,a,p,h.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=m,It.__ngLastListenerFn__=m,le=!1;else{m=cb(h,a,H,m,!1);const _n=u.listen(gt,p,m);Q.push(m,_n),O&&O.push(p,Be,Ot,Ot+1)}}else m=cb(h,a,H,m,!1);const Te=h.outputs;let Ge;if(le&&null!==Te&&(Ge=Te[p])){const st=Ge.length;if(st)for(let gt=0;gt<st;gt+=2){const ii=a[Ge[gt]][Ge[gt+1]].subscribe(m),gh=Q.length;Q.push(m,ii),O&&O.push(p,h.index,gh,-(gh+1))}}}function lb(o,a,u,h){try{return!1!==u(h)}catch(p){return Qy(o,p),!1}}function cb(o,a,u,h,p){return function m(y){if(y===Function)return h;xu(2&o.flags?Bi(o.index,a):a);let S=lb(a,0,h,y),I=m.__ngNextListenerFn__;for(;I;)S=lb(a,0,I,y)&&S,I=I.__ngNextListenerFn__;return p&&!1===S&&(y.preventDefault(),y.returnValue=!1),S}}function WD(o=1){return function lf(o){return(At.lFrame.contextLView=function ml(o,a){for(;o>0;)a=a[15],o--;return a}(o,At.lFrame.contextLView))[8]}(o)}function YD(o,a){let u=null;const h=function fB(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let p=0;p<a.length;p++){const m=a[p];if("*"!==m){if(null===h?JT(o,m,!0):gB(h,m))return p}else u=p}return u}function ub(o){const a=Re()[16][6];if(!a.projection){const h=a.projection=Ta(o?o.length:1,null),p=h.slice();let m=a.child;for(;null!==m;){const y=o?YD(m,o):0;null!==y&&(p[y]?p[y].projectionNext=m:h[y]=m,p[y]=m),m=m.next}}}function Kg(o,a=0,u){const h=Re(),p=Yt(),m=Rl(p,22+o,16,null,u||null);null===m.projection&&(m.projection=a),Lo(),64!=(64&m.flags)&&function hD(o,a,u){Sy(a[11],0,a,u,Cy(o,u,a),Mg(u.parent||a[6],u,a))}(p,h,m)}function Qg(o,a,u){return Dp(o,"",a,"",u),Qg}function Dp(o,a,u,h,p){const m=Re(),y=Iu(m,a,u,h);return y!==Kt&&mo(Yt(),xn(),m,o,y,m[11],p,!1),Dp}function zA(o,a,u,h,p){const m=o[u+1],y=null===a;let C=h?Hs(m):ws(m),S=!1;for(;0!==C&&(!1===S||y);){const O=o[C+1];JB(o[C],a)&&(S=!0,o[C+1]=h?Py(O):Cc(O)),C=h?Hs(O):ws(O)}S&&(o[u+1]=h?Cc(m):Py(m))}function JB(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&xl(o,a)>=0}function e_(o,a,u){return Es(o,a,u,!1),e_}function yb(o,a){return Es(o,a,null,!0),yb}function Es(o,a,u,h){const p=Re(),m=Yt(),y=function $r(o){const a=At.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}(2);m.firstUpdatePass&&function t_(o,a,u,h){const p=o.data;if(null===p[u+1]){const m=p[di()],y=function nh(o,a){return a>=o.expandoStartIndex}(o,u);(function rh(o,a){return 0!=(o.flags&(a?16:32))})(m,h)&&null===a&&!y&&(a=!1),a=function XD(o,a,u,h){const p=fl(o);let m=h?a.residualClasses:a.residualStyles;if(null===p)0===(h?a.classBindings:a.styleBindings)&&(u=ih(u=i_(null,o,a,u,h),a.attrs,h),m=null);else{const y=a.directiveStylingLast;if(-1===y||o[y]!==p)if(u=i_(p,o,a,u,h),null===m){let S=function wb(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==ws(h))return o[Hs(h)]}(o,a,h);void 0!==S&&Array.isArray(S)&&(S=i_(null,o,a,S[1],h),S=ih(S,a.attrs,h),function JD(o,a,u,h){o[Hs(u?a.classBindings:a.styleBindings)]=h}(o,a,h,S))}else m=function n_(o,a,u){let h;const p=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<p;m++)h=ih(h,o[m].hostAttrs,u);return ih(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(p,m,a,h),function Ga(o,a,u,h,p,m){let y=m?a.classBindings:a.styleBindings,C=Hs(y),S=ws(y);o[h]=u;let O,I=!1;if(Array.isArray(u)){const H=u;O=H[1],(null===O||xl(H,O)>0)&&(I=!0)}else O=u;if(p)if(0!==S){const Q=Hs(o[C+1]);o[h+1]=Ag(Q,C),0!==Q&&(o[Q+1]=Hd(o[Q+1],h)),o[C+1]=function cA(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Ag(C,0),0!==C&&(o[C+1]=Hd(o[C+1],h)),C=h;else o[h+1]=Ag(S,0),0===C?C=h:o[S+1]=Hd(o[S+1],h),S=h;I&&(o[h+1]=Cc(o[h+1])),zA(o,O,h,!0),zA(o,O,h,!1),function ZD(o,a,u,h,p){const m=p?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&xl(m,a)>=0&&(u[h+1]=Py(u[h+1]))}(a,O,o,h,m),y=Ag(C,S),m?a.classBindings=y:a.styleBindings=y}(p,m,a,u,y,h)}}(m,o,y,h),a!==Kt&&Tr(p,y,a)&&function ZA(o,a,u,h,p,m,y,C){if(!(3&a.type))return;const S=o.data,I=S[C+1];Cb(function SD(o){return 1==(1&o)}(I)?eE(S,a,u,p,ws(I),y):void 0)||(Cb(m)||function wu(o){return 2==(2&o)}(I)&&(m=eE(S,null,u,p,C,y)),function fD(o,a,u,h,p){if(a)p?o.addClass(u,h):o.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:kl.DashCase;null==p?o.removeStyle(u,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=kl.Important),o.setStyle(u,h,p,m))}}(h,y,cl(di(),u),p,m))}(m,m.data[di()],p,p[11],o,p[y+1]=function s_(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ge(Ra(o)))),o}(a,u),h,y)}function i_(o,a,u,h,p){let m=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(m=a[C],h=ih(h,m.hostAttrs,p),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function ih(o,a,u){const h=u?1:2;let p=-1;if(null!==a)for(let m=0;m<a.length;m++){const y=a[m];"number"==typeof y?p=y:p===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ki(o,y,!!u||a[++m]))}return void 0===o?null:o}function eE(o,a,u,h,p,m){const y=null===a;let C;for(;p>0;){const S=o[p],I=Array.isArray(S),O=I?S[1]:S,H=null===O;let Q=u[p+1];Q===Kt&&(Q=H?zt:void 0);let le=H?uc(Q,h):O===h?Q:void 0;if(I&&!Cb(le)&&(le=uc(S,h)),Cb(le)&&(C=le,y))return C;const Te=o[p+1];p=y?Hs(Te):ws(Te)}if(null!==a){let S=m?a.residualClasses:a.residualStyles;null!=S&&(C=uc(S,h))}return C}function Cb(o){return void 0!==o}function Mp(o,a=""){const u=Re(),h=Yt(),p=o+22,m=h.firstCreatePass?Rl(h,p,1,a,null):h.data[p],y=u[p]=function nD(o,a){return o.createText(a)}(u[11],a);Zf(h,u,y,m),or(m,!1)}function sh(o){return o_("",o,""),sh}function o_(o,a,u){const h=Re(),p=Iu(h,o,a,u);return p!==Kt&&function Xi(o,a,u){const h=cl(a,o);!function jo(o,a,u){o.setValue(a,u)}(o[11],h,u)}(h,di(),p),o_}function l_(o,a,u){const h=Re();return Tr(h,Bo(),a)&&mo(Yt(),xn(),h,o,a,h[11],u,!0),l_}function Tu(o,a,u){const h=Re();if(Tr(h,Bo(),a)){const m=Yt(),y=xn();mo(m,y,h,o,a,ND(fl(m.data),y,h),u,!0)}return Tu}const Au=void 0;var sk=["en",[["a","p"],["AM","PM"],Au],[["AM","PM"],Au,Au],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Au,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Au,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Au,"{1} 'at' {0}",Au],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dE(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Rp={};function Ab(o){const a=function pE(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=kb(a);if(u)return u;const h=a.split("-")[0];if(u=kb(h),u)return u;if("en"===h)return sk;throw new xe(701,!1)}function hE(o){return Ab(o)[kt.PluralCase]}function kb(o){return o in Rp||(Rp[o]=ut.ng&&ut.ng.common&&ut.ng.common.locales&&ut.ng.common.locales[o]),Rp[o]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const oh="en-US";let ku=oh;function Lp(o,a,u,h,p){if(o=re(o),Array.isArray(o))for(let m=0;m<o.length;m++)Lp(o[m],a,u,h,p);else{const m=Yt(),y=Re();let C=Td(o)?o:re(o.provide),S=kC(o);const I=Xn(),O=1048575&I.providerIndexes,H=I.directiveStart,Q=I.providerIndexes>>20;if(Td(o)||!o.multi){const le=new Ca(S,p,Vd),Te=VE(C,a,p?O:O+Q,H);-1===Te?(ar(fs(I,y),m,C),Vb(m,o,a.length),a.push(C),I.directiveStart++,I.directiveEnd++,p&&(I.providerIndexes+=1048576),u.push(le),y.push(le)):(u[Te]=le,y[Te]=le)}else{const le=VE(C,a,O+Q,H),Te=VE(C,a,O,O+Q),Ge=le>=0&&u[le],st=Te>=0&&u[Te];if(p&&!st||!p&&!Ge){ar(fs(I,y),m,C);const gt=function kk(o,a,u,h,p){const m=new Ca(o,u,Vd);return m.multi=[],m.index=a,m.componentProviders=0,Bp(m,p,h&&!u),m}(p?_V:gV,u.length,p,h,S);!p&&st&&(u[Te].providerFactory=gt),Vb(m,o,a.length,0),a.push(C),I.directiveStart++,I.directiveEnd++,p&&(I.providerIndexes+=1048576),u.push(gt),y.push(gt)}else Vb(m,o,le>-1?le:Te,Bp(u[p?Te:le],S,!p&&h));!p&&h&&st&&u[Te].componentProviders++}}}function Vb(o,a,u,h){const p=Td(a),m=function QL(o){return!!o.useClass}(a);if(p||m){const S=(m?re(a.useClass):a).prototype.ngOnDestroy;if(S){const I=o.destroyHooks||(o.destroyHooks=[]);if(!p&&a.multi){const O=I.indexOf(u);-1===O?I.push(u,[h,S]):I[O+1].push(h,S)}else I.push(u,S)}}}function Bp(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function VE(o,a,u,h){for(let p=u;p<h;p++)if(a[p]===o)return p;return-1}function gV(o,a,u,h){return HE(this.multi,[])}function _V(o,a,u,h){const p=this.multi;let m;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Wr(u,u[1],this.providerFactory.index,h);m=C.slice(0,y),HE(p,m);for(let S=y;S<C.length;S++)m.push(C[S])}else m=[],HE(p,m);return m}function HE(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Rk(o,a=[]){return u=>{u.providersResolver=(h,p)=>function BE(o,a,u){const h=Yt();if(h.firstCreatePass){const p=Dr(o);Lp(u,h.data,h.blueprint,p,!0),Lp(a,h.data,h.blueprint,p,!1)}}(h,p?p(o):o,a)}}class Zo{}class UE{}function Ok(o,a){return new jE(o,a??null)}class jE extends Zo{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new FD(this);const h=Ee(a);this._bootstrapComponents=bc(h.bootstrap),this._r3Injector=Tg(a,u,[{provide:Zo,useValue:this},{provide:wg,useValue:this.componentFactoryResolver}],ge(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class GE extends UE{constructor(a){super(),this.moduleType=a}create(a){return new jE(this.moduleType,a)}}class zE extends Zo{constructor(a,u,h){super(),this.componentFactoryResolver=new FD(this),this.instance=null;const p=new AC([...a,{provide:Zo,useValue:this},{provide:wg,useValue:this.componentFactoryResolver}],u||sy(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Hb(o,a,u=null){return new zE(o,a,u).injector}function Hk(o,a,u,h){return function qk(o,a,u,h,p,m){const y=a+u;return Tr(o,y,p)?qo(o,y+1,m?h.call(m,p):h(p)):Up(o,y+1)}(Re(),ki(),o,a,u,h)}function Up(o,a){const u=o[a];return u===Kt?void 0:u}function Wk(o,a,u,h,p,m,y){const C=a+u;return function Us(o,a,u,h){const p=Tr(o,a,u);return Tr(o,a+1,h)||p}(o,C,p,m)?qo(o,C+2,y?h.call(y,p,m):h(p,m)):Up(o,C+2)}function KE(o,a){const u=Yt();let h;const p=o+22;u.firstCreatePass?(h=function m_(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const m=h.factory||(h.factory=ha(h.type)),y=mn(Vd);try{const C=xa(!1),S=m();return xa(C),function GA(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Re(),p,S),S}finally{mn(y)}}function g_(o,a,u,h){const p=o+22,m=Re(),y=Ps(m,p);return function jp(o,a){return o[1].data[a].pure}(m,p)?Wk(m,ki(),a,y.transform,u,h,y):y.transform(u,h)}function jb(o){return a=>{setTimeout(o,void 0,a)}}const Ko=class Xk extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let p=a,m=u||(()=>null),y=h;if(a&&"object"==typeof a){const S=a;p=S.next?.bind(S),m=S.error?.bind(S),y=S.complete?.bind(S)}this.__isAsync&&(m=jb(m),p&&(p=jb(p)),y&&(y=jb(y)));const C=super.subscribe({next:p,error:m,complete:y});return a instanceof j.w0&&a.add(C),C}};function Gb(){return this._results[Wd()]()}class Gp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Wd(),h=Gp.prototype;h[u]||(h[u]=Gb)}get changes(){return this._changes||(this._changes=new Ko)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const p=Zi(a);(this._changesDetected=!function Vv(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let p=o[h],m=a[h];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let __=(()=>{class o{}return o.__NG_ELEMENT_ID__=Jk,o})();const SV=__,xV=class extends SV{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,p=Hy(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(p[19]=y.createEmbeddedView(h)),Su(h,p,a),new Gg(p)}};function Jk(){return zb(Xn(),Re())}function zb(o,a){return 4&o.type?new xV(a,o,Vf(o,a)):null}let $b=(()=>{class o{}return o.__NG_ELEMENT_ID__=MV,o})();function MV(){return tR(Xn(),Re())}const IV=$b,eR=class extends IV{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Vf(this._hostTNode,this._hostLView)}get injector(){return new Mn(this._hostTNode,this._hostLView)}get parentInjector(){const a=rc(this._hostTNode,this._hostLView);if(mf(a)){const u=Ci(a,this._hostLView),h=yl(a);return new Mn(u[1].data[h+8],u)}return new Mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=JE(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const y=a.createEmbeddedView(u||{},m);return this.insert(y,p),y}createComponent(a,u,h,p,m){const y=a&&!function lc(o){return"function"==typeof o}(a);let C;if(y)C=u;else{const H=u||{};C=H.index,h=H.injector,p=H.projectableNodes,m=H.environmentInjector||H.ngModuleRef}const S=y?a:new zg(J(a)),I=h||this.parentInjector;if(!m&&null==S.ngModule){const Q=(y?I:this.parentInjector).get(Na,null);Q&&(m=Q)}const O=S.create(I,p,void 0,m);return this.insert(O.hostView,C),O}insert(a,u){const h=a._lView,p=h[1];if(function ro(o){return jr(o[3])}(h)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const H=h[3],Q=new eR(H,H[6],H[3]);Q.detach(Q.indexOf(a))}}const m=this._adjustIndex(u),y=this._lContainer;!function Sg(o,a,u,h){const p=10+h,m=u.length;h>0&&(u[p-1][4]=a),h<m-10?(a[4]=u[p],uu(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const y=a[17];null!==y&&u!==y&&function rD(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(y,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(p,h,y,m);const C=dD(m,y),S=h[11],I=yu(S,y[7]);return null!==I&&function wy(o,a,u,h,p,m){h[0]=p,h[6]=a,Qf(o,h,u,1,p,m)}(p,y[6],S,h,I,C),a.attachToViewContainerRef(),uu(qb(y),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=JE(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=$f(this._lContainer,u);h&&(du(qb(this._lContainer),u),xg(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=$f(this._lContainer,u);return h&&null!=du(qb(this._lContainer),u)?new Gg(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function JE(o){return o[8]}function qb(o){return o[8]||(o[8]=[])}function tR(o,a){let u;const h=a[o.index];if(jr(h))u=h;else{let p;if(8&o.type)p=ui(h);else{const m=a[11];p=m.createComment("");const y=fr(o,a);wc(m,yu(m,y),p,function YT(o,a){return o.nextSibling(a)}(m,y),!1)}a[o.index]=u=Ug(h,a,p,o),Wy(a,u)}return new eR(u,o,a)}class Nu{constructor(a){this.queryList=a,this.matches=null}clone(){return new Nu(this.queryList)}setDirty(){this.queryList.setDirty()}}class eS{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,p=[];for(let m=0;m<h;m++){const y=u.getByIndex(m);p.push(this.queries[y.indexInDeclarationView].clone())}return new eS(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==oR(a,u).matches&&this.queries[u].setDirty()}}class uh{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Wb{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,p);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Wb(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Yb{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Yb(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(a,u,tS(u,m)),this.matchTNodeWithReadOption(a,u,Ho(u,a,m,!1,!1))}else h===__?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Ho(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===vu||p===$b||p===__&&4&u.type)this.addMatch(u.index,-2);else{const m=Ho(u,a,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function tS(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function rR(o,a,u,h){return-1===u?function nS(o,a){return 11&o.type?Vf(o,a):4&o.type?zb(o,a):null}(a,o):-2===u?function iS(o,a,u){return u===vu?Vf(a,o):u===__?zb(a,o):u===$b?tR(a,o):void 0}(o,a,h):Wr(o,o[1],u,a)}function Zb(o,a,u,h){const p=a[19].queries[h];if(null===p.matches){const m=o.data,y=u.matches,C=[];for(let S=0;S<y.length;S+=2){const I=y[S];C.push(I<0?null:rR(a,m[I],y[S+1],u.metadata.read))}p.matches=C}return p.matches}function Kb(o,a,u,h){const p=o.queries.getByIndex(u),m=p.matches;if(null!==m){const y=Zb(o,a,p,u);for(let C=0;C<m.length;C+=2){const S=m[C];if(S>0)h.push(y[C/2]);else{const I=m[C+1],O=a[-S];for(let H=10;H<O.length;H++){const Q=O[H];Q[17]===Q[3]&&Kb(Q[1],Q,I,h)}if(null!==O[9]){const H=O[9];for(let Q=0;Q<H.length;Q++){const le=H[Q];Kb(le[1],le,I,h)}}}}}return h}function rS(o){const a=Re(),u=Yt(),h=va();eu(h+1);const p=oR(u,h);if(o.dirty&&Ro(a)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const m=p.crossesNgTemplate?Kb(u,a,h,[]):Zb(u,a,p,h);o.reset(m,cy),o.notifyOnChanges()}return!0}return!1}function sS(o,a,u){const h=Yt();h.firstCreatePass&&(cS(h,new uh(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),lS(h,Re(),a)}function oS(o,a,u,h){const p=Yt();if(p.firstCreatePass){const m=Xn();cS(p,new uh(a,u,h),m.index),function AV(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(p,o),2==(2&u)&&(p.staticContentQueries=!0)}lS(p,Re(),u)}function aS(){return function sR(o,a){return o[19].queries[a].queryList}(Re(),va())}function lS(o,a,u){const h=new Gp(4==(4&u));Bg(o,a,h,h.destroy),null===a[19]&&(a[19]=new eS),a[19].queries.push(new Nu(h))}function cS(o,a,u){null===o.queries&&(o.queries=new Wb),o.queries.track(new Yb(a,u))}function oR(o,a){return o.queries.getByIndex(a)}function hh(o){const a=J(o)||Z(o)||$(o);return null!==a&&a.standalone}function D_(...o){}const MS=new $t("Application Initializer");let $p=(()=>{class o{constructor(u){this.appInits=u,this.resolve=D_,this.reject=D_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(Yg(m))u.push(m);else if(ob(m)){const y=new Promise((C,S)=>{m.subscribe({complete:C,error:S})});u.push(y)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Wn(MS,8))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const qp=new $t("AppId",{providedIn:"root",factory:function Ll(){return`${e0()}${e0()}${e0()}`}});function e0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const IS=new $t("Platform Initializer"),TS=new $t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),t0=new $t("appBootstrapListener"),ER=new $t("AnimationModuleType");let Wp=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const E_=new $t("LocaleId",{providedIn:"root",factory:()=>Ed(E_,bt.Optional|bt.SkipSelf)||function _r(){return typeof $localize<"u"&&$localize.locale||oh}()}),AS=new $t("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OS{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let SR=(()=>{class o{compileModuleSync(u){return new GE(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=bc(Ee(u).declarations).reduce((y,C)=>{const S=J(C);return S&&y.push(new zg(S)),y},[]);return new OS(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const UV=(()=>Promise.resolve(0))();function PS(o){typeof Zone>"u"?UV.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class go{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ko(!1),this.onMicrotaskEmpty=new Ko(!1),this.onStable=new Ko(!1),this.onError=new Ko(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function jV(){let o=ut.requestAnimationFrame,a=ut.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function $V(o){const a=()=>{!function zV(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(ut,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,FS(o),o.isCheckStableRunning=!0,NS(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),FS(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,m,y,C)=>{try{return IR(o),u.invokeTask(p,m,y,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),TR(o)}},onInvoke:(u,h,p,m,y,C,S)=>{try{return IR(o),u.invoke(p,m,y,C,S)}finally{o.shouldCoalesceRunChangeDetection&&a(),TR(o)}},onHasTask:(u,h,p,m)=>{u.hasTask(p,m),h===p&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,FS(o),NS(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,p,m)=>(u.handleError(p,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!go.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(go.isInAngularZone())throw new xe(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,p){const m=this._inner,y=m.scheduleEventTask("NgZoneEvent: "+p,a,GV,D_,D_);try{return m.runTask(y,u,h)}finally{m.cancelTask(y)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const GV={};function NS(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function FS(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function IR(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function TR(o){o._nesting--,NS(o)}class qV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ko,this.onMicrotaskEmpty=new Ko,this.onStable=new Ko,this.onError=new Ko}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,p){return a.apply(u,h)}}const AR=new $t(""),kR=new $t("");let LS,WV=(()=>{class o{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,LS||(function YV(o){LS=o}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{go.assertNotInAngularZone(),PS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())PS(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return o.\u0275fac=function(u){return new(u||o)(Wn(go),Wn(RR),Wn(kR))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})(),RR=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return LS?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Bu=null;const BS=new $t("AllowMultipleToken"),ph=new $t("PlatformDestroyListeners");class VS{constructor(a,u){this.name=a,this.token=u}}function NR(o,a,u=[]){const h=`Platform: ${a}`,p=new $t(h);return(m=[])=>{let y=r0();if(!y||y.injector.get(BS,!1)){const C=[...u,...m,{provide:p,useValue:!0}];o?o(C):function HS(o){if(Bu&&!Bu.get(BS,!1))throw new xe(400,!1);Bu=o;const a=o.get(US);(function Zp(o){const a=o.get(IS,null);a&&a.forEach(u=>u())})(o)}(function n0(o=[],a){return Ld.create({name:a,providers:[{provide:TC,useValue:"platform"},{provide:ph,useValue:new Set([()=>Bu=null])},...o]})}(C,h))}return function S_(o){const a=r0();if(!a)throw new xe(401,!1);return a}()}}function r0(){return Bu?.get(US)??null}let US=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function FR(o,a){let u;return u="noop"===o?new qV:("zone.js"===o?void 0:o)||new go(a),u}(h?.ngZone,function jS(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:go,useValue:p}];return p.run(()=>{const y=Ld.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(y),S=C.injector.get(Uf,null);if(!S)throw new xe(402,!1);return p.runOutsideAngular(()=>{const I=p.onError.subscribe({next:O=>{S.handleError(O)}});C.onDestroy(()=>{M_(this._modules,C),I.unsubscribe()})}),function s0(o,a,u){try{const h=u();return Yg(h)?h.catch(p=>{throw a.runOutsideAngular(()=>o.handleError(p)),p}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(S,p,()=>{const I=C.injector.get($p);return I.runInitializers(),I.donePromise.then(()=>(function mE(o){Jt(o,"Expected localeId to be defined"),"string"==typeof o&&(ku=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(E_,oh)||oh),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const p=GS({},h);return function Yp(o,a,u){const h=new GE(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const h=u.injector.get(x_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new xe(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(ph,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Wn(Ld))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function GS(o,a){return Array.isArray(a)?a.reduce(GS,o):{...o,...a}}let x_=(()=>{class o{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new N.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new N.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{go.assertNotInAngularZone(),PS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{go.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),I.unsubscribe()}});this.isStable=(0,ue.T)(m,y.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof PC;if(!this._injector.get($p).done)throw!p&&hh(u),new xe(405,false);let y;y=p?u:this._injector.get(wg).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const C=function PR(o){return o.isBoundToModule}(y)?void 0:this._injector.get(Zo),I=y.create(Ld.NULL,[],h||y.selector,C),O=I.location.nativeElement,H=I.injector.get(AR,null);return H?.registerApplication(O),I.onDestroy(()=>{this.detachView(I.hostView),M_(this.components,I),H?.unregisterApplication(O)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;M_(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(t0,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>M_(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new xe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(Wn(go),Wn(Na),Wn(Uf))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function M_(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let zS=!0,$S=!1;function LR(){return $S=!0,zS}function BR(){if($S)throw new Error("Cannot enable prod mode after platform setup.");zS=!1}let XV=(()=>{class o{}return o.__NG_ELEMENT_ID__=JV,o})();function JV(o){return function HR(o,a,u){if(sl(o)&&!u){const h=Bi(o.index,a);return new Gg(h,h)}return 47&o.type?new Gg(a[16],a):null}(Xn(),Re(),16==(16&o))}class $R{constructor(){}supports(a){return Yd(a)}create(a){return new s2(a)}}const r2=(o,a)=>a;class s2{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||r2}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,p=0,m=null;for(;u||h;){const y=!h||u&&u.currentIndex<c0(h,p,m)?u:h,C=c0(y,p,m),S=y.currentIndex;if(y===h)p--,h=h._nextRemoved;else if(u=u._next,null==y.previousIndex)p++;else{m||(m=[]);const I=C-p,O=S-p;if(I!=O){for(let Q=0;Q<I;Q++){const le=Q<m.length?m[Q]:m[Q]=0,Te=le+Q;O<=Te&&Te<I&&(m[Q]=le+1)}m[y.previousIndex]=O-I}}C!==S&&a(y,C,S)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Yd(a))throw new xe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,m,y,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],y=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,m,y,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,y,C),h=!0),u=u._next}else p=0,function BA(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Wd()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{y=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,C,y,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,p){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,p)):a=this._addAfter(new o2(u,h),m,p),a}_verifyReinsertion(a,u,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,m=a._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const p=null===u?this._itHead:u._next;return a._next=p,a._prev=u,null===p?this._itTail=a:p._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new KS),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KS),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class o2{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class a2{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class KS{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new a2,this.map.set(u,h)),h.add(a)}get(a,u){const p=this.map.get(a);return p?p.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function c0(o,a,u){const h=o.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+a+p}class QS{constructor(){}supports(a){return a instanceof Map||Zd(a)}create(){return new l2}}class l2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Zd(a)))throw new xe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,u);const m=p._prev,y=p._next;return m&&(m._next=y),y&&(y._prev=m),p._next=null,p._prev=null,p}const h=new qR(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class qR{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function u0(){return new XS([new $R])}let XS=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||u0()),deps:[[o,new tt,new fe]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new xe(901,!1)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:u0}),o})();function JS(){return new d0([new QS])}let d0=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||JS()),deps:[[o,new tt,new fe]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new xe(901,!1)}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:JS}),o})();const u2=NR(null,"core",[]);let ZR=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Wn(x_))},o.\u0275mod=Ye({type:o}),o.\u0275inj=Gt({}),o})();function KR(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(vt,Oe,V)=>{V.d(Oe,{Z:()=>xe});var l=V(2090),j=V(4859),N=V(9681),ue=V(1877);class he{constructor(De,ve){this._delegate=De,this.firebase=ve,(0,N._addComponent)(De,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(De,ve=N._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(De);return!lt.isInitialized()&&"EXPLICIT"===(null===(at=lt.getComponent())||void 0===at?void 0:at.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:ve})}_removeServiceInstance(De,ve=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(ve)}_addComponent(De){(0,N._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,N._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Ce(){const ht=function ge(ht){const De={},ve={__esModule:!0,initializeApp:function Ne(ce,pe={}){const we=N.initializeApp(ce,pe);if((0,l.r3)(De,we.name))return De[we.name];const ne=new ht(we,ve);return De[we.name]=ne,ne},app:lt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Me(ce){const pe=ce.name,we=pe.replace("-compat","");if(N._registerComponent(ce)&&"PUBLIC"===ce.type){const ne=(se=lt())=>{if("function"!=typeof se[we])throw oe.create("invalid-app-argument",{appName:pe});return se[we]()};void 0!==ce.serviceProps&&(0,l.ZB)(ne,ce.serviceProps),ve[we]=ne,ht.prototype[we]=function(...se){return this._getService.bind(this,pe).apply(this,ce.multipleInstances?se:[])}}return"PUBLIC"===ce.type?ve[we]:null},removeApp:function at(ce){delete De[ce]},useAsService:function Ke(ce,pe){return"serverAuth"===pe?null:pe},modularAPIs:N}};function lt(ce){if(!(0,l.r3)(De,ce=ce||N._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:ce});return De[ce]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function Pe(){return Object.keys(De).map(ce=>De[ce])}}),lt.App=ht,ve}(he);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function De(ve){(0,l.ZB)(ht,ve)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),ht}(),Y=new ue.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ht=self.firebase.SDK_VERSION;ht&&ht.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=W;!function Fe(ht){(0,N.registerVersion)("@firebase/app-compat","0.1.32",ht)}()},9681:(vt,Oe,V)=>{V.r(Oe),V.d(Oe,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>Jt,_addComponent:()=>pn,_addOrOverwriteComponent:()=>cn,_apps:()=>An,_clearComponents:()=>eo,_components:()=>zn,_getProvider:()=>Gt,_registerComponent:()=>en,_removeServiceInstance:()=>$i,deleteApp:()=>bt,getApp:()=>Kn,getApps:()=>as,initializeApp:()=>wr,onLog:()=>mn,registerVersion:()=>Wi,setLogLevel:()=>yi});var l=V(5861),j=V(4859),N=V(1877),ue=V(2090),he=V(8766);class ye{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(X=>{if(function oe(G){return"VERSION"===G.getComponent()?.type}(X)){const Ae=X.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(X=>X).join(" ")}}const ge="@firebase/app",W=new N.Yd("@firebase/app"),Jt="[DEFAULT]",et={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,zn=new Map;function pn(G,K){try{G.container.addComponent(K)}catch(X){W.debug(`Component ${K.name} failed to register with FirebaseApp ${G.name}`,X)}}function cn(G,K){G.container.addOrOverwriteComponent(K)}function en(G){const K=G.name;if(zn.has(K))return W.debug(`There were multiple attempts to register component ${K}.`),!1;zn.set(K,G);for(const X of An.values())pn(X,G);return!0}function Gt(G,K){const X=G.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),G.container.getProvider(K)}function $i(G,K,X=Jt){Gt(G,K).clearInstance(X)}function eo(){zn.clear()}const Ln=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class os{constructor(K,X,Ae){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},X),this._name=X.name,this._automaticDataCollectionEnabled=X.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const br="9.9.3";function wr(G,K={}){"object"!=typeof K&&(K={name:K});const X=Object.assign({name:Jt,automaticDataCollectionEnabled:!1},K),Ae=X.name;if("string"!=typeof Ae||!Ae)throw Ln.create("bad-app-name",{appName:String(Ae)});const Ye=An.get(Ae);if(Ye){if((0,ue.vZ)(G,Ye.options)&&(0,ue.vZ)(X,Ye.config))return Ye;throw Ln.create("duplicate-app",{appName:Ae})}const Mt=new j.H0(Ae);for(const wn of zn.values())Mt.addComponent(wn);const bn=new os(G,X,Mt);return An.set(Ae,bn),bn}function Kn(G=Jt){const K=An.get(G);if(!K)throw Ln.create("no-app",{appName:G});return K}function as(){return Array.from(An.values())}function bt(G){return kn.apply(this,arguments)}function kn(){return(kn=(0,l.Z)(function*(G){const K=G.name;An.has(K)&&(An.delete(K),yield Promise.all(G.container.getProviders().map(X=>X.delete())),G.isDeleted=!0)})).apply(this,arguments)}function Wi(G,K,X){var Ae;let Ye=null!==(Ae=et[G])&&void 0!==Ae?Ae:G;X&&(Ye+=`-${X}`);const Mt=Ye.match(/\s|\//),bn=K.match(/\s|\//);if(Mt||bn){const wn=[`Unable to register library "${Ye}" with version "${K}":`];return Mt&&wn.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),Mt&&bn&&wn.push("and"),bn&&wn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void W.warn(wn.join(" "))}en(new j.wA(`${Ye}-version`,()=>({library:Ye,version:K}),"VERSION"))}function mn(G,K){if(null!==G&&"function"!=typeof G)throw Ln.create("invalid-log-argument");(0,N.Am)(G,K)}function yi(G){(0,N.Ub)(G)}const En="firebase-heartbeat-store";let ir=null;function Rn(){return ir||(ir=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(G,K)=>{0===K&&G.createObjectStore(En)}}).catch(G=>{throw Ln.create("idb-open",{originalErrorMessage:G.message})})),ir}function ut(){return(ut=(0,l.Z)(function*(G){var K;try{return(yield Rn()).transaction(En).objectStore(En).get(Vn(G))}catch(X){if(X instanceof ue.ZR)W.warn(X.message);else{const Ae=Ln.create("idb-get",{originalErrorMessage:null===(K=X)||void 0===K?void 0:K.message});W.warn(Ae.message)}}})).apply(this,arguments)}function Bn(G,K){return rr.apply(this,arguments)}function rr(){return(rr=(0,l.Z)(function*(G,K){var X;try{const Ye=(yield Rn()).transaction(En,"readwrite");return yield Ye.objectStore(En).put(K,Vn(G)),Ye.done}catch(Ae){if(Ae instanceof ue.ZR)W.warn(Ae.message);else{const Ye=Ln.create("idb-set",{originalErrorMessage:null===(X=Ae)||void 0===X?void 0:X.message});W.warn(Ye.message)}}})).apply(this,arguments)}function Vn(G){return`${G.name}!${G.options.appId}`}class sr{constructor(K){this.container=K,this._heartbeatsCache=null;const X=this.container.getProvider("app").getImmediate();this._storage=new Nt(X),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var K=this;return(0,l.Z)(function*(){const Ae=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=Pt();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!K._heartbeatsCache.heartbeats.some(Mt=>Mt.date===Ye))return K._heartbeatsCache.heartbeats.push({date:Ye,agent:Ae}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(Mt=>{const bn=new Date(Mt.date).valueOf();return Date.now()-bn<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,l.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const X=Pt(),{heartbeatsToSend:Ae,unsentEntries:Ye}=function Cr(G,K=1024){const X=[];let Ae=G.slice();for(const Ye of G){const Mt=X.find(bn=>bn.agent===Ye.agent);if(Mt){if(Mt.dates.push(Ye.date),ee(X)>K){Mt.dates.pop();break}}else if(X.push({agent:Ye.agent,dates:[Ye.date]}),ee(X)>K){X.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:X,unsentEntries:Ae}}(K._heartbeatsCache.heartbeats),Mt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Ae}));return K._heartbeatsCache.lastSentHeartbeatDate=X,Ye.length>0?(K._heartbeatsCache.heartbeats=Ye,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),Mt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Nt{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,l.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function pt(G){return ut.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var X=this;return(0,l.Z)(function*(){var Ae;if(yield X._canUseIndexedDBPromise){const Mt=yield X.read();return Bn(X.app,{lastSentHeartbeatDate:null!==(Ae=K.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Mt.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var X=this;return(0,l.Z)(function*(){var Ae;if(yield X._canUseIndexedDBPromise){const Mt=yield X.read();return Bn(X.app,{lastSentHeartbeatDate:null!==(Ae=K.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...K.heartbeats]})}})()}}function ee(G){return(0,ue.L)(JSON.stringify({version:2,heartbeats:G})).length}!function q(G){en(new j.wA("platform-logger",K=>new ye(K),"PRIVATE")),en(new j.wA("heartbeat",K=>new sr(K),"PRIVATE")),Wi(ge,"0.7.31",G),Wi(ge,"0.7.31","esm2017"),Wi("fire-js","")}("")},4859:(vt,Oe,V)=>{V.d(Oe,{H0:()=>ge,wA:()=>N,zt:()=>he});var l=V(5861),j=V(2090);class N{constructor(W,Y,re){this.name=W,this.instanceFactory=Y,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ue="[DEFAULT]";class he{constructor(W,Y){this.name=W,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const Y=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(Y)){const re=new j.BH;if(this.instancesDeferred.set(Y,re),this.isInitialized(Y)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:Y});$e&&re.resolve($e)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(W){var Y;const re=this.normalizeInstanceIdentifier(W?.identifier),$e=null!==(Y=W?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Fe){if($e)return null;throw Fe}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function oe(Ce){return"EAGER"===Ce.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[Y,re]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(Y);try{const Fe=this.getOrInitializeService({instanceIdentifier:$e});re.resolve(Fe)}catch{}}}}clearInstance(W=ue){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,l.Z)(function*(){const Y=Array.from(W.instances.values());yield Promise.all([...Y.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...Y.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ue){return this.instances.has(W)}getOptions(W=ue){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:Y={}}=W,re=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:re,options:Y});for(const[Fe,xe]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Fe)&&xe.resolve($e);return $e}onInit(W,Y){var re;const $e=this.normalizeInstanceIdentifier(Y),Fe=null!==(re=this.onInitCallbacks.get($e))&&void 0!==re?re:new Set;Fe.add(W),this.onInitCallbacks.set($e,Fe);const xe=this.instances.get($e);return xe&&W(xe,$e),()=>{Fe.delete(W)}}invokeOnInitCallbacks(W,Y){const re=this.onInitCallbacks.get(Y);if(re)for(const $e of re)try{$e(W,Y)}catch{}}getOrInitializeService({instanceIdentifier:W,options:Y={}}){let re=this.instances.get(W);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=W,Ce===ue?void 0:Ce),options:Y}),this.instances.set(W,re),this.instancesOptions.set(W,Y),this.invokeOnInitCallbacks(re,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,re)}catch{}var Ce;return re||null}normalizeInstanceIdentifier(W=ue){return this.component?this.component.multipleInstances?W:ue:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const Y=this.getProvider(W.name);if(Y.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);Y.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const Y=new he(W,this);return this.providers.set(W,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(vt,Oe,V)=>{V.d(Oe,{Am:()=>Ce,Ub:()=>ge,Yd:()=>oe,in:()=>j});const l=[];var j=(()=>{return(W=j||(j={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",j;var W})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ue=j.INFO,he={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(W,Y,...re)=>{if(Y<W.logLevel)return;const $e=(new Date).toISOString(),Fe=he[Y];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Fe](`[${$e}]  ${W.name}:`,...re)};class oe{constructor(Y){this.name=Y,this._logLevel=ue,this._logHandler=ye,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in j))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?N[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...Y),this._logHandler(this,j.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...Y),this._logHandler(this,j.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,j.INFO,...Y),this._logHandler(this,j.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,j.WARN,...Y),this._logHandler(this,j.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...Y),this._logHandler(this,j.ERROR,...Y)}}function ge(W){l.forEach(Y=>{Y.setLogLevel(W)})}function Ce(W,Y){for(const re of l){let $e=null;Y&&Y.level&&($e=N[Y.level]),re.userLogHandler=null===W?null:(Fe,xe,...ht)=>{const De=ht.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");xe>=($e??Fe.logLevel)&&W({level:j[xe].toLowerCase(),message:De,args:ht,type:Fe.name})}}}},8766:(vt,Oe,V)=>{V.d(Oe,{Lj:()=>Ne,X3:()=>lt});var l=V(5861);let N,ue;const oe=new WeakMap,ge=new WeakMap,Ce=new WeakMap,W=new WeakMap,Y=new WeakMap;let Fe={get(pe,we,ne){if(pe instanceof IDBTransaction){if("done"===we)return ge.get(pe);if("objectStoreNames"===we)return pe.objectStoreNames||Ce.get(pe);if("store"===we)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return ve(pe[we])},set:(pe,we,ne)=>(pe[we]=ne,!0),has:(pe,we)=>pe instanceof IDBTransaction&&("done"===we||"store"===we)||we in pe};function De(pe){return"function"==typeof pe?function ht(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...we){return pe.apply(at(this),we),ve(oe.get(this))}:function(...we){return ve(pe.apply(at(this),we))}:function(we,...ne){const se=pe.call(at(this),we,...ne);return Ce.set(se,we.sort?we.sort():[we]),ve(se)}}(pe):(pe instanceof IDBTransaction&&function $e(pe){if(ge.has(pe))return;const we=new Promise((ne,se)=>{const _e=()=>{pe.removeEventListener("complete",de),pe.removeEventListener("error",Ue),pe.removeEventListener("abort",Ue)},de=()=>{ne(),_e()},Ue=()=>{se(pe.error||new DOMException("AbortError","AbortError")),_e()};pe.addEventListener("complete",de),pe.addEventListener("error",Ue),pe.addEventListener("abort",Ue)});ge.set(pe,we)}(pe),((pe,we)=>we.some(ne=>pe instanceof ne))(pe,function he(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,Fe):pe)}function ve(pe){if(pe instanceof IDBRequest)return function re(pe){const we=new Promise((ne,se)=>{const _e=()=>{pe.removeEventListener("success",de),pe.removeEventListener("error",Ue)},de=()=>{ne(ve(pe.result)),_e()},Ue=()=>{se(pe.error),_e()};pe.addEventListener("success",de),pe.addEventListener("error",Ue)});return we.then(ne=>{ne instanceof IDBCursor&&oe.set(ne,pe)}).catch(()=>{}),Y.set(we,pe),we}(pe);if(W.has(pe))return W.get(pe);const we=De(pe);return we!==pe&&(W.set(pe,we),Y.set(we,pe)),we}const at=pe=>Y.get(pe);function lt(pe,we,{blocked:ne,upgrade:se,blocking:_e,terminated:de}={}){const Ue=indexedDB.open(pe,we),je=ve(Ue);return se&&Ue.addEventListener("upgradeneeded",Ct=>{se(ve(Ue.result),Ct.oldVersion,Ct.newVersion,ve(Ue.transaction))}),ne&&Ue.addEventListener("blocked",()=>ne()),je.then(Ct=>{de&&Ct.addEventListener("close",()=>de()),_e&&Ct.addEventListener("versionchange",()=>_e())}).catch(()=>{}),je}function Ne(pe,{blocked:we}={}){const ne=indexedDB.deleteDatabase(pe);return we&&ne.addEventListener("blocked",()=>we()),ve(ne).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Ke=new Map;function ce(pe,we){if(!(pe instanceof IDBDatabase)||we in pe||"string"!=typeof we)return;if(Ke.get(we))return Ke.get(we);const ne=we.replace(/FromIndex$/,""),se=we!==ne,_e=Me.includes(ne);if(!(ne in(se?IDBIndex:IDBObjectStore).prototype)||!_e&&!Pe.includes(ne))return;const de=function(){var Ue=(0,l.Z)(function*(je,...Ct){const an=this.transaction(je,_e?"readwrite":"readonly");let Jt=an.store;return se&&(Jt=Jt.index(Ct.shift())),(yield Promise.all([Jt[ne](...Ct),_e&&an.done]))[0]});return function(Ct){return Ue.apply(this,arguments)}}();return Ke.set(we,de),de}!function xe(pe){Fe=pe(Fe)}(pe=>({...pe,get:(we,ne,se)=>ce(we,ne)||pe.get(we,ne,se),has:(we,ne)=>!!ce(we,ne)||pe.has(we,ne)}))},5861:(vt,Oe,V)=>{function l(N,ue,he,ye,oe,ge,Ce){try{var W=N[ge](Ce),Y=W.value}catch(re){return void he(re)}W.done?ue(Y):Promise.resolve(Y).then(ye,oe)}function j(N){return function(){var ue=this,he=arguments;return new Promise(function(ye,oe){var ge=N.apply(ue,he);function Ce(Y){l(ge,ye,oe,Ce,W,"next",Y)}function W(Y){l(ge,ye,oe,Ce,W,"throw",Y)}Ce(void 0)})}}V.d(Oe,{Z:()=>j})}},vt=>{vt(vt.s=4245)}]);